[
   {
      "body" : "As it happens, I have a branch that allows nodes to be whitelisted through an RPC: https://github.com/jnewbery/bitcoin/tree/updatenode .\r\n\r\nContext: the RPC is called updatenode so that it can be extended in future, eg to update the banscore for a node, or disconnect a node based on node id (at the moment, nodes can only be disconnected based on ip address).\r\n\r\nI haven't written any testcases for this yet, but feel free to take it if it's helpful for your testing.",
      "created_at" : "2017-03-06T20:55:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/9923#issuecomment-284529321",
      "id" : 284529321,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9923",
      "updated_at" : "2017-03-06T20:55:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/284529321",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "body" : "That seems useful in general.\r\n\r\nI'm a little afraid that won't work for my use-case because of the race between toggling 'whitelist' to 1 and making the connection. The other side will immediately send a `getheaders`, which could get ignored if it's not in time (and IIRC it won't send any, ever again, after that).",
      "created_at" : "2017-03-07T07:12:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/9923#issuecomment-284640865",
      "id" : 284640865,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9923",
      "updated_at" : "2017-03-07T07:12:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/284640865",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Another option here would be to make the `-whitelist` netmask apply to outgoing connections as well. It seems straightforward but that may be an unexpected change of behavior.",
      "created_at" : "2017-03-07T08:13:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/9923#issuecomment-284651740",
      "id" : 284651740,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9923",
      "updated_at" : "2017-03-07T08:13:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/284651740",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   }
]
