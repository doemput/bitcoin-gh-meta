[
   {
      "body" : "The REST api allows you to fetch raw blocks in binary by hash, i think.\n",
      "created_at" : "2016-08-27T19:07:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/8614#issuecomment-242935029",
      "id" : 242935029,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8614",
      "updated_at" : "2016-08-27T19:07:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/242935029",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Correct - REST API already provides this.  Enable with ```-rest```",
      "created_at" : "2016-08-27T20:14:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/8614#issuecomment-242938381",
      "id" : 242938381,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8614",
      "updated_at" : "2016-08-27T20:14:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/242938381",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/494411?v=3",
         "events_url" : "https://api.github.com/users/jgarzik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jgarzik/followers",
         "following_url" : "https://api.github.com/users/jgarzik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jgarzik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jgarzik",
         "id" : 494411,
         "login" : "jgarzik",
         "organizations_url" : "https://api.github.com/users/jgarzik/orgs",
         "received_events_url" : "https://api.github.com/users/jgarzik/received_events",
         "repos_url" : "https://api.github.com/users/jgarzik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jgarzik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jgarzik"
      }
   },
   {
      "body" : "I will check this out and report back.",
      "created_at" : "2016-08-27T20:39:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/8614#issuecomment-242939545",
      "id" : 242939545,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8614",
      "updated_at" : "2016-08-27T20:39:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/242939545",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/12032350?v=3",
         "events_url" : "https://api.github.com/users/GSPP/events{/privacy}",
         "followers_url" : "https://api.github.com/users/GSPP/followers",
         "following_url" : "https://api.github.com/users/GSPP/following{/other_user}",
         "gists_url" : "https://api.github.com/users/GSPP/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/GSPP",
         "id" : 12032350,
         "login" : "GSPP",
         "organizations_url" : "https://api.github.com/users/GSPP/orgs",
         "received_events_url" : "https://api.github.com/users/GSPP/received_events",
         "repos_url" : "https://api.github.com/users/GSPP/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/GSPP/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/GSPP/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/GSPP"
      }
   },
   {
      "body" : "I tested the block API. For testing purposes I compared the two:\r\n\r\n1. Block API: A full scan takes roughly 2 hours including deserialization in the client.\r\n2. blk* files: A full scan takes 45 minutes including deserialization in the client.\r\n\r\nI called the block API on 8 concurrent threads. The blocks were sitting on an SSD. Bitcoin Core ran inside of a VM.\r\n\r\nThe REST API is helpful and might be enough for some but if you really want high speed access there's no substitute for the blk* files right now.\r\n\r\nWhat do you think about my API proposal of exposing the block positions through the JSON API?",
      "created_at" : "2016-08-28T19:04:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/8614#issuecomment-242992778",
      "id" : 242992778,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8614",
      "updated_at" : "2016-08-28T19:04:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/242992778",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/12032350?v=3",
         "events_url" : "https://api.github.com/users/GSPP/events{/privacy}",
         "followers_url" : "https://api.github.com/users/GSPP/followers",
         "following_url" : "https://api.github.com/users/GSPP/following{/other_user}",
         "gists_url" : "https://api.github.com/users/GSPP/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/GSPP",
         "id" : 12032350,
         "login" : "GSPP",
         "organizations_url" : "https://api.github.com/users/GSPP/orgs",
         "received_events_url" : "https://api.github.com/users/GSPP/received_events",
         "repos_url" : "https://api.github.com/users/GSPP/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/GSPP/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/GSPP/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/GSPP"
      }
   },
   {
      "body" : "I don't like committing to having a stable on-disk format. Future versions\nmay use a different serialization, or include indexes/pointers interleaved\nwith data.\n",
      "created_at" : "2016-08-28T19:09:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/8614#issuecomment-242993064",
      "id" : 242993064,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8614",
      "updated_at" : "2016-08-28T19:09:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/242993064",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "That would even be OK as long as there are subranges in the file storing whole blocks. I understand the concern, though.",
      "created_at" : "2016-08-28T19:13:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/8614#issuecomment-242993312",
      "id" : 242993312,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8614",
      "updated_at" : "2016-08-28T19:13:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/242993312",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/12032350?v=3",
         "events_url" : "https://api.github.com/users/GSPP/events{/privacy}",
         "followers_url" : "https://api.github.com/users/GSPP/followers",
         "following_url" : "https://api.github.com/users/GSPP/following{/other_user}",
         "gists_url" : "https://api.github.com/users/GSPP/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/GSPP",
         "id" : 12032350,
         "login" : "GSPP",
         "organizations_url" : "https://api.github.com/users/GSPP/orgs",
         "received_events_url" : "https://api.github.com/users/GSPP/received_events",
         "repos_url" : "https://api.github.com/users/GSPP/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/GSPP/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/GSPP/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/GSPP"
      }
   },
   {
      "body" : "@GSPP: you could time profile the REST API and try to optimize it? I think factor ~2 in performance seems reasonable for a higher level, file format independent, access to block data.",
      "created_at" : "2016-08-29T06:43:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/8614#issuecomment-243044196",
      "id" : 243044196,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8614",
      "updated_at" : "2016-08-29T06:43:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/243044196",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "That's not a bad way to proceed I think. I'm working on benchmarking obtaining the block hashes. For some reason I sometimes see perf problems and sometimes not. Need to investigate more.",
      "created_at" : "2016-08-29T07:12:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/8614#issuecomment-243048777",
      "id" : 243048777,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8614",
      "updated_at" : "2016-08-29T07:12:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/243048777",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/12032350?v=3",
         "events_url" : "https://api.github.com/users/GSPP/events{/privacy}",
         "followers_url" : "https://api.github.com/users/GSPP/followers",
         "following_url" : "https://api.github.com/users/GSPP/following{/other_user}",
         "gists_url" : "https://api.github.com/users/GSPP/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/GSPP",
         "id" : 12032350,
         "login" : "GSPP",
         "organizations_url" : "https://api.github.com/users/GSPP/orgs",
         "received_events_url" : "https://api.github.com/users/GSPP/received_events",
         "repos_url" : "https://api.github.com/users/GSPP/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/GSPP/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/GSPP/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/GSPP"
      }
   },
   {
      "body" : "The on-disk format is not an interface \\*, so this is not going to be part of mainline bitcoind. The REST interface with binary format will have to do - feel free to optimize that if it's still a bottleneck (for example: we may be doing an extraneous deserialize/serialize step).\r\n\r\n\\* If you really want to cheat this, an option is to use `contrib/linearize.py`'s strategy: this tool gets the hashes from bitcoind in a JSONRPC batch operation, then parses the block files itself, hashing the block headers to find out what blocks are where. As fast block access is mostly important when you want to process all (or a large subset of) blocks anyway, this seems a feasible way to do it.  **Must say it again though: this is not supported, and this may break at any time in future updates.** (it has already broken once when switching to out-of-order block download).\r\n",
      "created_at" : "2017-02-07T12:41:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/8614#issuecomment-277987531",
      "id" : 277987531,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8614",
      "updated_at" : "2017-02-07T12:59:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/277987531",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   }
]
