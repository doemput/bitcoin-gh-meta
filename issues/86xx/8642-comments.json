[
   {
      "body" : "This does not reduce reliance on the nVersion protocol, because recent additions are always negotiated separately (see the `sendheaders` and `sendcmpct` messages).\n\nAll this patch does is gratuitously break support with some old versions that may still be out there.",
      "created_at" : "2016-09-01T08:32:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8642#issuecomment-244012215",
      "id" : 244012215,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8642",
      "updated_at" : "2016-09-01T08:32:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/244012215",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "@sipa those recent additions you're mentioning are examples of where nVersion is being relied upon.\r\n\r\nWhich versions does it break support for? And ARE those versions still out there? And are we talking about more nodes, for example, than the nodes I am talking about (which break from the nVersion norms being discussed here)? E.g. There are at least 18 Unlimited nodes running on the network. I suspect nodes with version below 60000 are far fewer (if any!). We've already stopped support for Windows XP.. when are we planning to stop support for protocol < 60000 ?",
      "created_at" : "2016-09-01T08:33:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8642#issuecomment-244012565",
      "id" : 244012565,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8642",
      "updated_at" : "2016-09-01T08:38:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/244012565",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1530283?v=3",
         "events_url" : "https://api.github.com/users/rebroad/events{/privacy}",
         "followers_url" : "https://api.github.com/users/rebroad/followers",
         "following_url" : "https://api.github.com/users/rebroad/following{/other_user}",
         "gists_url" : "https://api.github.com/users/rebroad/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/rebroad",
         "id" : 1530283,
         "login" : "rebroad",
         "organizations_url" : "https://api.github.com/users/rebroad/orgs",
         "received_events_url" : "https://api.github.com/users/rebroad/received_events",
         "repos_url" : "https://api.github.com/users/rebroad/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/rebroad/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/rebroad/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/rebroad"
      }
   },
   {
      "body" : "You can still run a 0.2.10 client and synchronize with the network.",
      "created_at" : "2016-09-01T08:39:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8642#issuecomment-244013805",
      "id" : 244013805,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8642",
      "updated_at" : "2016-09-01T08:39:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/244013805",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "@sipa Yes, and I for one am in favour of that. Although I am not sure why you are mentioning that as this pull request wouldn't change that.",
      "created_at" : "2016-09-01T08:40:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8642#issuecomment-244014130",
      "id" : 244014130,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8642",
      "updated_at" : "2016-09-01T08:40:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/244014130",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1530283?v=3",
         "events_url" : "https://api.github.com/users/rebroad/events{/privacy}",
         "followers_url" : "https://api.github.com/users/rebroad/followers",
         "following_url" : "https://api.github.com/users/rebroad/following{/other_user}",
         "gists_url" : "https://api.github.com/users/rebroad/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/rebroad",
         "id" : 1530283,
         "login" : "rebroad",
         "organizations_url" : "https://api.github.com/users/rebroad/orgs",
         "received_events_url" : "https://api.github.com/users/rebroad/received_events",
         "repos_url" : "https://api.github.com/users/rebroad/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/rebroad/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/rebroad/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/rebroad"
      }
   },
   {
      "body" : "Sendheaders and compact blocks are negotiated separately. They don't rely on a particular version number; we simply avoid starting the negotiation if we know they don't support it anyway.\n\nFurther however you are assuming that all peers support pong (bip 31, first supported in Bitcoin 0.7). Why?",
      "created_at" : "2016-09-01T08:41:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8642#issuecomment-244014450",
      "id" : 244014450,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8642",
      "updated_at" : "2016-09-01T08:41:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/244014450",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "@sipa I am not assuming all peers support BIP31 - the check for that is still in there - just moved so that it takes up 1 line instead of 8\r\n\r\nBut speaking of Bitcoin 0.7, I have never seen anything lower than Bitcoin 0.8.6 on the network this year. Have you?",
      "created_at" : "2016-09-01T08:42:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8642#issuecomment-244014697",
      "id" : 244014697,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8642",
      "updated_at" : "2016-09-01T08:44:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/244014697",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1530283?v=3",
         "events_url" : "https://api.github.com/users/rebroad/events{/privacy}",
         "followers_url" : "https://api.github.com/users/rebroad/followers",
         "following_url" : "https://api.github.com/users/rebroad/following{/other_user}",
         "gists_url" : "https://api.github.com/users/rebroad/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/rebroad",
         "id" : 1530283,
         "login" : "rebroad",
         "organizations_url" : "https://api.github.com/users/rebroad/orgs",
         "received_events_url" : "https://api.github.com/users/rebroad/received_events",
         "repos_url" : "https://api.github.com/users/rebroad/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/rebroad/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/rebroad/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/rebroad"
      }
   },
   {
      "body" : "Pre-BIP31 nodes don't send a nonce inside the PING command. Your code will cause a failure to deserialize for such nodes, and subsequently disconnect them as a result.\n\nPlease stop.",
      "created_at" : "2016-09-01T08:45:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8642#issuecomment-244015249",
      "id" : 244015249,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8642",
      "updated_at" : "2016-09-01T08:45:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/244015249",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "@sipa I very much doubt this. For example, the version message in later versions now send more fields than older nodes would have anticipated. The additional fields are simply not used. Why would it be any different with the ping message?\r\n\r\nI'll double check the code to see what you mean though.",
      "created_at" : "2016-09-01T08:46:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8642#issuecomment-244015618",
      "id" : 244015618,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8642",
      "updated_at" : "2016-09-01T08:48:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/244015618",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1530283?v=3",
         "events_url" : "https://api.github.com/users/rebroad/events{/privacy}",
         "followers_url" : "https://api.github.com/users/rebroad/followers",
         "following_url" : "https://api.github.com/users/rebroad/following{/other_user}",
         "gists_url" : "https://api.github.com/users/rebroad/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/rebroad",
         "id" : 1530283,
         "login" : "rebroad",
         "organizations_url" : "https://api.github.com/users/rebroad/orgs",
         "received_events_url" : "https://api.github.com/users/rebroad/received_events",
         "repos_url" : "https://api.github.com/users/rebroad/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/rebroad/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/rebroad/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/rebroad"
      }
   },
   {
      "body" : "Sending more fields that the receiver can decode is not a problem. Decoding more fields than the sender sends is problematic, and that is what you are doing here.",
      "created_at" : "2016-09-01T08:51:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8642#issuecomment-244016925",
      "id" : 244016925,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8642",
      "updated_at" : "2016-09-01T08:51:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/244016925",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "@sipa ah.. darn it. you're right. sorry, I have reinstated the other BIP31 check to fix that now.\r\n\r\n..although, I still would expect there are more nodes that deviate from the current protocol numbers (e.g. >18 unlimited nodes) than there are nodes that don't support BIP31. I don't have the figures to hand though but would you agree that if this is the case that we should be supporting the nodes that are greater in numbers?",
      "created_at" : "2016-09-01T08:53:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8642#issuecomment-244017392",
      "id" : 244017392,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8642",
      "updated_at" : "2016-09-01T08:59:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/244017392",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1530283?v=3",
         "events_url" : "https://api.github.com/users/rebroad/events{/privacy}",
         "followers_url" : "https://api.github.com/users/rebroad/followers",
         "following_url" : "https://api.github.com/users/rebroad/following{/other_user}",
         "gists_url" : "https://api.github.com/users/rebroad/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/rebroad",
         "id" : 1530283,
         "login" : "rebroad",
         "organizations_url" : "https://api.github.com/users/rebroad/orgs",
         "received_events_url" : "https://api.github.com/users/rebroad/received_events",
         "repos_url" : "https://api.github.com/users/rebroad/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/rebroad/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/rebroad/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/rebroad"
      }
   },
   {
      "body" : "This change cannot be made retro-actively. For new protocol features it makes sense to not rely on the protocol version, and that is indeed what has been happening. Either separate advertisement mechanisms have been used or service flags. I still agree that forcing a linear progression of unrelated features is a mistake: we corrected this for NODE_BLOOM.\r\n\r\nFor the things that already rely on nVersion, that's too bad, we have to keep them to keep compatibility with older clients. NACK on this change (there may be valid reasons to break compatibility with ancient versions, but this isn't one).",
      "created_at" : "2016-09-01T14:14:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8642#issuecomment-244091945",
      "id" : 244091945,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8642",
      "updated_at" : "2016-09-01T15:56:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/244091945",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "After further testing, it does appear that certain nodes (not Satoshi ones) disconnect upon receiving either the getheaders or the sendcmpct commands - not behaviour I would expect but perhaps reason enough to continue taking notice of nVersion, at least for now :-s",
      "created_at" : "2016-09-04T15:46:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8642#issuecomment-244610688",
      "id" : 244610688,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8642",
      "updated_at" : "2016-09-04T15:46:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/244610688",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1530283?v=3",
         "events_url" : "https://api.github.com/users/rebroad/events{/privacy}",
         "followers_url" : "https://api.github.com/users/rebroad/followers",
         "following_url" : "https://api.github.com/users/rebroad/following{/other_user}",
         "gists_url" : "https://api.github.com/users/rebroad/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/rebroad",
         "id" : 1530283,
         "login" : "rebroad",
         "organizations_url" : "https://api.github.com/users/rebroad/orgs",
         "received_events_url" : "https://api.github.com/users/rebroad/received_events",
         "repos_url" : "https://api.github.com/users/rebroad/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/rebroad/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/rebroad/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/rebroad"
      }
   }
]
