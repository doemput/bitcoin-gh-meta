{
   "assignee" : null,
   "assignees" : [],
   "body" : "At last IRC meeting we've discussed trying to speed up the unit tests, as they've become much too slow.\r\nFor this purpose I've run `test_bitcoin --log_level=test_suite` and picked out the slowest from the list.\r\n\r\nThe top 20 is:\r\n\r\n| Test | Time (ÃÂ¼s) |\r\n| ------------- | --------------:|\r\n| `test_CheckQueue_Correct_Random` | 36506890 |\r\n| `test_big_witness_transaction` | 27114581 |\r\n| `cuckoocache_generations` | 9462901 |\r\n| `cuckoocache_hit_rate_ok` | 5423029 |\r\n| `CreateNewBlock_validity` | 4142419 |\r\n| `coin_selection_tests` | 4055338 |\r\n| `test_CheckQueue_Memory` | 2430562 |\r\n| `test_CheckQueue_Catches_Failure` | 1977780 |\r\n| `passphrase` | 1850636 |\r\n| `cuckoocache_erase_ok` | 1702832 |\r\n| `cuckoocache_erase_parallel_ok` | 1623395 |\r\n| `updatecoins_simulation_test` | 1440919 |\r\n| `versionbits_test` | 1283498 |\r\n| `merkle_test` | 1162284 |\r\n| `sighash_test` | 710811 |\r\n| `skiplist_test` | 469216 |\r\n| `addrman_getaddr` | 462232 |\r\n| `ComputeTimeSmart` | 387710 |\r\n| `test_CheckQueue_Correct_Max` | 360530 |\r\n| `sha256_testvectors` | 350275 |\r\n\r\nI think (open for discussion, of course) it is unreasonable for a unit test case to take more than ~1s (mind you, we have 242 of them, so each test is supposed to be quick) so we should take a look at each of these up to `merkle_test`.\r\n\r\nIt could be as simple in some cases as getting rid of (reasonably heavy) `BOOST_*` tests in inner loops, moving the checks up to a higher level.\r\n\r\nEdit: I added the script to create this table to maintainer-tools: https://github.com/bitcoin-core/bitcoin-maintainer-tools/blob/master/unittest-statistics.py",
   "closed_at" : null,
   "closed_by" : null,
   "comments" : 2,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10026/comments",
   "created_at" : "2017-03-18T08:34:02Z",
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10026/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/issues/10026",
   "id" : 215175786,
   "labels" : [
      {
         "color" : "d4c5f9",
         "default" : false,
         "id" : 62963516,
         "name" : "Tests",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/Tests"
      }
   ],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10026/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "number" : 10026,
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "open",
   "title" : "Overview of slow unit tests",
   "updated_at" : "2017-03-18T09:24:57Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10026",
   "user" : {
      "avatar_url" : "https://avatars3.githubusercontent.com/u/126646?v=3",
      "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
      "followers_url" : "https://api.github.com/users/laanwj/followers",
      "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/laanwj",
      "id" : 126646,
      "login" : "laanwj",
      "organizations_url" : "https://api.github.com/users/laanwj/orgs",
      "received_events_url" : "https://api.github.com/users/laanwj/received_events",
      "repos_url" : "https://api.github.com/users/laanwj/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/laanwj"
   }
}
