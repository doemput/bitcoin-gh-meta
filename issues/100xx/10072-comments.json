[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10072#discussion_r108487850"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10072"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108487850"
         }
      },
      "body" : "Do we want the same behavior on L44?",
      "commit_id" : "a4fd89fddba49c56e77f131fe95feffa8d7cf6ed",
      "created_at" : "2017-03-28T17:43:08Z",
      "diff_hunk" : "@@ -200,16 +200,14 @@ def test_BIP(self, bipName, activated_version, invalidate, invalidatePostSignatu\n         yield TestInstance([[block, False]])\n \n         # Restart all\n-        self.test.block_store.close()\n+        self.test.clear_all_connections()\n         stop_nodes(self.nodes)\n-        shutil.rmtree(self.options.tmpdir)\n+        shutil.rmtree(self.options.tmpdir + \"/node0\")\n         self.setup_chain()\n         self.setup_network()\n-        self.test.block_store = BlockStore(self.options.tmpdir)\n-        self.test.clear_all_connections()\n         self.test.add_all_connections(self.nodes)\n-        NetworkThread().start() # Start up network handling in another thread\n-\n+        NetworkThread().start()\n+        self.test.test_nodes[0].wait_for_verack()",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10072#discussion_r108487850",
      "id" : 108487850,
      "original_commit_id" : "baeecbbb087842b18fb085b0d8c7b736c367cfe0",
      "original_position" : 17,
      "path" : "test/functional/bip9-softforks.py",
      "position" : 17,
      "pull_request_review_id" : 29522081,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10072",
      "updated_at" : "2017-03-28T20:22:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108487850",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/886523?v=3",
         "events_url" : "https://api.github.com/users/JeremyRubin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JeremyRubin/followers",
         "following_url" : "https://api.github.com/users/JeremyRubin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JeremyRubin",
         "id" : 886523,
         "login" : "JeremyRubin",
         "organizations_url" : "https://api.github.com/users/JeremyRubin/orgs",
         "received_events_url" : "https://api.github.com/users/JeremyRubin/received_events",
         "repos_url" : "https://api.github.com/users/JeremyRubin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JeremyRubin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JeremyRubin"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10072#discussion_r108488077"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10072"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108488077"
         }
      },
      "body" : "Is there any work we can do in-between this and the wait for verack?\r\n\r\nMaybe have a comment here about having to wait for verack rather than just deleting the comment.",
      "commit_id" : "a4fd89fddba49c56e77f131fe95feffa8d7cf6ed",
      "created_at" : "2017-03-28T17:44:08Z",
      "diff_hunk" : "@@ -200,16 +200,14 @@ def test_BIP(self, bipName, activated_version, invalidate, invalidatePostSignatu\n         yield TestInstance([[block, False]])\n \n         # Restart all\n-        self.test.block_store.close()\n+        self.test.clear_all_connections()\n         stop_nodes(self.nodes)\n-        shutil.rmtree(self.options.tmpdir)\n+        shutil.rmtree(self.options.tmpdir + \"/node0\")\n         self.setup_chain()\n         self.setup_network()\n-        self.test.block_store = BlockStore(self.options.tmpdir)\n-        self.test.clear_all_connections()\n         self.test.add_all_connections(self.nodes)\n-        NetworkThread().start() # Start up network handling in another thread\n-\n+        NetworkThread().start()",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10072#discussion_r108488077",
      "id" : 108488077,
      "original_commit_id" : "baeecbbb087842b18fb085b0d8c7b736c367cfe0",
      "original_position" : 16,
      "path" : "test/functional/bip9-softforks.py",
      "position" : 16,
      "pull_request_review_id" : 29522081,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10072",
      "updated_at" : "2017-03-28T20:22:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108488077",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/886523?v=3",
         "events_url" : "https://api.github.com/users/JeremyRubin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JeremyRubin/followers",
         "following_url" : "https://api.github.com/users/JeremyRubin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JeremyRubin",
         "id" : 886523,
         "login" : "JeremyRubin",
         "organizations_url" : "https://api.github.com/users/JeremyRubin/orgs",
         "received_events_url" : "https://api.github.com/users/JeremyRubin/received_events",
         "repos_url" : "https://api.github.com/users/JeremyRubin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JeremyRubin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JeremyRubin"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10072#discussion_r108488136"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10072"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108488136"
         }
      },
      "body" : "Is there a more idiomatic way to get the dirname?",
      "commit_id" : "a4fd89fddba49c56e77f131fe95feffa8d7cf6ed",
      "created_at" : "2017-03-28T17:44:22Z",
      "diff_hunk" : "@@ -200,16 +200,14 @@ def test_BIP(self, bipName, activated_version, invalidate, invalidatePostSignatu\n         yield TestInstance([[block, False]])\n \n         # Restart all\n-        self.test.block_store.close()\n+        self.test.clear_all_connections()\n         stop_nodes(self.nodes)\n-        shutil.rmtree(self.options.tmpdir)\n+        shutil.rmtree(self.options.tmpdir + \"/node0\")",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10072#discussion_r108488136",
      "id" : 108488136,
      "original_commit_id" : "baeecbbb087842b18fb085b0d8c7b736c367cfe0",
      "original_position" : 8,
      "path" : "test/functional/bip9-softforks.py",
      "position" : 8,
      "pull_request_review_id" : 29522081,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10072",
      "updated_at" : "2017-03-28T20:22:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108488136",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/886523?v=3",
         "events_url" : "https://api.github.com/users/JeremyRubin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JeremyRubin/followers",
         "following_url" : "https://api.github.com/users/JeremyRubin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JeremyRubin",
         "id" : 886523,
         "login" : "JeremyRubin",
         "organizations_url" : "https://api.github.com/users/JeremyRubin/orgs",
         "received_events_url" : "https://api.github.com/users/JeremyRubin/received_events",
         "repos_url" : "https://api.github.com/users/JeremyRubin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JeremyRubin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JeremyRubin"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10072#discussion_r108488637"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10072"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108488637"
         }
      },
      "body" : "Maybe raise the error yourself rather than `assert`, unless you only want it in debug mode?",
      "commit_id" : "a4fd89fddba49c56e77f131fe95feffa8d7cf6ed",
      "created_at" : "2017-03-28T17:46:18Z",
      "diff_hunk" : "@@ -41,11 +42,17 @@ def run_test(self):\n         self.nodes[1].generate(1)\n         self.sync_all()\n \n-        with open(self.alert_filename, 'r', encoding='utf8') as f:\n-            alert_text = f.read()\n+        # Give bitcoind 10 seconds to write the alert notification\n+        timeout = 10\n+        while True:\n+            with open(self.alert_filename, 'r', encoding='utf8') as f:\n+                alert_text = f.read()\n+            if len(alert_text) > 0:\n+                break\n \n-        if len(alert_text) == 0:\n-            raise AssertionError(\"-alertnotify did not warn of up-version blocks\")\n+            assert timeout > 0, \"-alertnotify did not warn of up-version blocks\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10072#discussion_r108488637",
      "id" : 108488637,
      "original_commit_id" : "baeecbbb087842b18fb085b0d8c7b736c367cfe0",
      "original_position" : 24,
      "path" : "test/functional/forknotify.py",
      "position" : null,
      "pull_request_review_id" : 29522081,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10072",
      "updated_at" : "2017-03-28T20:22:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108488637",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/886523?v=3",
         "events_url" : "https://api.github.com/users/JeremyRubin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JeremyRubin/followers",
         "following_url" : "https://api.github.com/users/JeremyRubin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JeremyRubin",
         "id" : 886523,
         "login" : "JeremyRubin",
         "organizations_url" : "https://api.github.com/users/JeremyRubin/orgs",
         "received_events_url" : "https://api.github.com/users/JeremyRubin/received_events",
         "repos_url" : "https://api.github.com/users/JeremyRubin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JeremyRubin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JeremyRubin"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10072#discussion_r108493763"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10072"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108493763"
         }
      },
      "body" : "Maybe a bit cleaner to do something like (a couple of changes, feel free to pick and choose -- I was torn on the os.path.exists+getsize v.s. continual reading with open).\r\n\r\n```python\r\n        for t in xrange(100):\r\n            if os.path.exists(self.alert_filename) and os.path.getsize(self.alert_filename):\r\n                break\r\n            if t != 99: time.sleep(0.1) \r\n        else:\r\n            raise AssertionError(\"-alertnotify did not warn of up-version blocks\")\r\n        with open(self.alert_filename, 'r', encoding='utf8') as f:\r\n            alert_text = f.read()\r\n```",
      "commit_id" : "a4fd89fddba49c56e77f131fe95feffa8d7cf6ed",
      "created_at" : "2017-03-28T18:04:49Z",
      "diff_hunk" : "@@ -41,11 +42,17 @@ def run_test(self):\n         self.nodes[1].generate(1)\n         self.sync_all()\n \n-        with open(self.alert_filename, 'r', encoding='utf8') as f:\n-            alert_text = f.read()\n+        # Give bitcoind 10 seconds to write the alert notification\n+        timeout = 10\n+        while True:",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10072#discussion_r108493763",
      "id" : 108493763,
      "original_commit_id" : "baeecbbb087842b18fb085b0d8c7b736c367cfe0",
      "original_position" : 16,
      "path" : "test/functional/forknotify.py",
      "position" : null,
      "pull_request_review_id" : 29522081,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10072",
      "updated_at" : "2017-03-28T20:22:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108493763",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/886523?v=3",
         "events_url" : "https://api.github.com/users/JeremyRubin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JeremyRubin/followers",
         "following_url" : "https://api.github.com/users/JeremyRubin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JeremyRubin",
         "id" : 886523,
         "login" : "JeremyRubin",
         "organizations_url" : "https://api.github.com/users/JeremyRubin/orgs",
         "received_events_url" : "https://api.github.com/users/JeremyRubin/received_events",
         "repos_url" : "https://api.github.com/users/JeremyRubin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JeremyRubin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JeremyRubin"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10072#discussion_r108494509"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10072"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108494509"
         }
      },
      "body" : "This should rarely actually take 10 seconds, if the code is correct, right? Maybe 1 second will be a bit better in the case where it is actually broken & you're trying to fix it.",
      "commit_id" : "a4fd89fddba49c56e77f131fe95feffa8d7cf6ed",
      "created_at" : "2017-03-28T18:07:35Z",
      "diff_hunk" : "@@ -41,11 +42,17 @@ def run_test(self):\n         self.nodes[1].generate(1)\n         self.sync_all()\n \n-        with open(self.alert_filename, 'r', encoding='utf8') as f:\n-            alert_text = f.read()\n+        # Give bitcoind 10 seconds to write the alert notification\n+        timeout = 10",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10072#discussion_r108494509",
      "id" : 108494509,
      "original_commit_id" : "baeecbbb087842b18fb085b0d8c7b736c367cfe0",
      "original_position" : 15,
      "path" : "test/functional/forknotify.py",
      "position" : null,
      "pull_request_review_id" : 29522081,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10072",
      "updated_at" : "2017-03-28T20:22:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108494509",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/886523?v=3",
         "events_url" : "https://api.github.com/users/JeremyRubin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JeremyRubin/followers",
         "following_url" : "https://api.github.com/users/JeremyRubin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JeremyRubin",
         "id" : 886523,
         "login" : "JeremyRubin",
         "organizations_url" : "https://api.github.com/users/JeremyRubin/orgs",
         "received_events_url" : "https://api.github.com/users/JeremyRubin/received_events",
         "repos_url" : "https://api.github.com/users/JeremyRubin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JeremyRubin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JeremyRubin"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10072#discussion_r108505201"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10072"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108505201"
         }
      },
      "body" : "Not that I know of.\r\n\r\nI don't like the fact that this test is using shutil and removing files itself. This change just makes it slightly less damaging (ie it's only removing the datadir rather than the entire tmpdir)",
      "commit_id" : "a4fd89fddba49c56e77f131fe95feffa8d7cf6ed",
      "created_at" : "2017-03-28T18:45:52Z",
      "diff_hunk" : "@@ -200,16 +200,14 @@ def test_BIP(self, bipName, activated_version, invalidate, invalidatePostSignatu\n         yield TestInstance([[block, False]])\n \n         # Restart all\n-        self.test.block_store.close()\n+        self.test.clear_all_connections()\n         stop_nodes(self.nodes)\n-        shutil.rmtree(self.options.tmpdir)\n+        shutil.rmtree(self.options.tmpdir + \"/node0\")",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10072#discussion_r108505201",
      "id" : 108505201,
      "original_commit_id" : "baeecbbb087842b18fb085b0d8c7b736c367cfe0",
      "original_position" : 8,
      "path" : "test/functional/bip9-softforks.py",
      "position" : 8,
      "pull_request_review_id" : 29540462,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10072",
      "updated_at" : "2017-03-28T20:22:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108505201",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10072#discussion_r108505549"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10072"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108505549"
         }
      },
      "body" : "No, we need to wait for the network thread to start before receiving the verack (the network thread is what catches the verack and calls the callback).",
      "commit_id" : "a4fd89fddba49c56e77f131fe95feffa8d7cf6ed",
      "created_at" : "2017-03-28T18:46:51Z",
      "diff_hunk" : "@@ -200,16 +200,14 @@ def test_BIP(self, bipName, activated_version, invalidate, invalidatePostSignatu\n         yield TestInstance([[block, False]])\n \n         # Restart all\n-        self.test.block_store.close()\n+        self.test.clear_all_connections()\n         stop_nodes(self.nodes)\n-        shutil.rmtree(self.options.tmpdir)\n+        shutil.rmtree(self.options.tmpdir + \"/node0\")\n         self.setup_chain()\n         self.setup_network()\n-        self.test.block_store = BlockStore(self.options.tmpdir)\n-        self.test.clear_all_connections()\n         self.test.add_all_connections(self.nodes)\n-        NetworkThread().start() # Start up network handling in another thread\n-\n+        NetworkThread().start()",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10072#discussion_r108505549",
      "id" : 108505549,
      "original_commit_id" : "baeecbbb087842b18fb085b0d8c7b736c367cfe0",
      "original_position" : 16,
      "path" : "test/functional/bip9-softforks.py",
      "position" : 16,
      "pull_request_review_id" : 29540462,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10072",
      "updated_at" : "2017-03-28T20:22:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108505549",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10072#discussion_r108506068"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10072"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108506068"
         }
      },
      "body" : "wait_for_verack() is called by the comparison test framework at the start of the test run (comptest.py line 300).",
      "commit_id" : "a4fd89fddba49c56e77f131fe95feffa8d7cf6ed",
      "created_at" : "2017-03-28T18:48:39Z",
      "diff_hunk" : "@@ -200,16 +200,14 @@ def test_BIP(self, bipName, activated_version, invalidate, invalidatePostSignatu\n         yield TestInstance([[block, False]])\n \n         # Restart all\n-        self.test.block_store.close()\n+        self.test.clear_all_connections()\n         stop_nodes(self.nodes)\n-        shutil.rmtree(self.options.tmpdir)\n+        shutil.rmtree(self.options.tmpdir + \"/node0\")\n         self.setup_chain()\n         self.setup_network()\n-        self.test.block_store = BlockStore(self.options.tmpdir)\n-        self.test.clear_all_connections()\n         self.test.add_all_connections(self.nodes)\n-        NetworkThread().start() # Start up network handling in another thread\n-\n+        NetworkThread().start()\n+        self.test.test_nodes[0].wait_for_verack()",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10072#discussion_r108506068",
      "id" : 108506068,
      "original_commit_id" : "baeecbbb087842b18fb085b0d8c7b736c367cfe0",
      "original_position" : 17,
      "path" : "test/functional/bip9-softforks.py",
      "position" : 17,
      "pull_request_review_id" : 29540462,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10072",
      "updated_at" : "2017-03-28T20:22:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108506068",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10072#discussion_r108506362"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10072"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108506362"
         }
      },
      "body" : "Depends. Travis catches a lot of timing edge cases. I don't think there's any problem making the timeout something high like 10 seconds since the while loop will break as soon as the file is written.",
      "commit_id" : "a4fd89fddba49c56e77f131fe95feffa8d7cf6ed",
      "created_at" : "2017-03-28T18:49:48Z",
      "diff_hunk" : "@@ -41,11 +42,17 @@ def run_test(self):\n         self.nodes[1].generate(1)\n         self.sync_all()\n \n-        with open(self.alert_filename, 'r', encoding='utf8') as f:\n-            alert_text = f.read()\n+        # Give bitcoind 10 seconds to write the alert notification\n+        timeout = 10",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10072#discussion_r108506362",
      "id" : 108506362,
      "original_commit_id" : "baeecbbb087842b18fb085b0d8c7b736c367cfe0",
      "original_position" : 15,
      "path" : "test/functional/forknotify.py",
      "position" : null,
      "pull_request_review_id" : 29540462,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10072",
      "updated_at" : "2017-03-28T20:22:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108506362",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10072#discussion_r108506887"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10072"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108506887"
         }
      },
      "body" : "I think this is equivalent.",
      "commit_id" : "a4fd89fddba49c56e77f131fe95feffa8d7cf6ed",
      "created_at" : "2017-03-28T18:51:40Z",
      "diff_hunk" : "@@ -41,11 +42,17 @@ def run_test(self):\n         self.nodes[1].generate(1)\n         self.sync_all()\n \n-        with open(self.alert_filename, 'r', encoding='utf8') as f:\n-            alert_text = f.read()\n+        # Give bitcoind 10 seconds to write the alert notification\n+        timeout = 10\n+        while True:",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10072#discussion_r108506887",
      "id" : 108506887,
      "original_commit_id" : "baeecbbb087842b18fb085b0d8c7b736c367cfe0",
      "original_position" : 16,
      "path" : "test/functional/forknotify.py",
      "position" : null,
      "pull_request_review_id" : 29540462,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10072",
      "updated_at" : "2017-03-28T20:22:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108506887",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10072#discussion_r108507304"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10072"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108507304"
         }
      },
      "body" : "I don't think there's any difference. No-one runs the test cases with `-O`",
      "commit_id" : "a4fd89fddba49c56e77f131fe95feffa8d7cf6ed",
      "created_at" : "2017-03-28T18:53:14Z",
      "diff_hunk" : "@@ -41,11 +42,17 @@ def run_test(self):\n         self.nodes[1].generate(1)\n         self.sync_all()\n \n-        with open(self.alert_filename, 'r', encoding='utf8') as f:\n-            alert_text = f.read()\n+        # Give bitcoind 10 seconds to write the alert notification\n+        timeout = 10\n+        while True:\n+            with open(self.alert_filename, 'r', encoding='utf8') as f:\n+                alert_text = f.read()\n+            if len(alert_text) > 0:\n+                break\n \n-        if len(alert_text) == 0:\n-            raise AssertionError(\"-alertnotify did not warn of up-version blocks\")\n+            assert timeout > 0, \"-alertnotify did not warn of up-version blocks\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10072#discussion_r108507304",
      "id" : 108507304,
      "original_commit_id" : "baeecbbb087842b18fb085b0d8c7b736c367cfe0",
      "original_position" : 24,
      "path" : "test/functional/forknotify.py",
      "position" : null,
      "pull_request_review_id" : 29540462,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10072",
      "updated_at" : "2017-03-28T20:22:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108507304",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10072#discussion_r108521935"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10072"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108521935"
         }
      },
      "body" : "yeah; mostly this was motivated by being able to get rid of the stateful `timeout = 10; assert timeout > 0; timeout -= 0.1` combo.\r\nThis is also fine.\r\n```python\r\n        for t in xrange(100):\r\n            with open(self.alert_filename, 'r', encoding='utf8') as f:\r\n                alert_text = f.read()\r\n            if alert_text:\r\n                break\r\n            time.sleep(0.1) \r\n        else:\r\n            raise AssertionError(\"-alertnotify did not warn of up-version blocks\")\r\n```\r\n",
      "commit_id" : "a4fd89fddba49c56e77f131fe95feffa8d7cf6ed",
      "created_at" : "2017-03-28T19:57:46Z",
      "diff_hunk" : "@@ -41,11 +42,17 @@ def run_test(self):\n         self.nodes[1].generate(1)\n         self.sync_all()\n \n-        with open(self.alert_filename, 'r', encoding='utf8') as f:\n-            alert_text = f.read()\n+        # Give bitcoind 10 seconds to write the alert notification\n+        timeout = 10\n+        while True:",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10072#discussion_r108521935",
      "id" : 108521935,
      "original_commit_id" : "baeecbbb087842b18fb085b0d8c7b736c367cfe0",
      "original_position" : 16,
      "path" : "test/functional/forknotify.py",
      "position" : null,
      "pull_request_review_id" : 29558315,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10072",
      "updated_at" : "2017-03-28T20:22:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108521935",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/886523?v=3",
         "events_url" : "https://api.github.com/users/JeremyRubin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JeremyRubin/followers",
         "following_url" : "https://api.github.com/users/JeremyRubin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JeremyRubin",
         "id" : 886523,
         "login" : "JeremyRubin",
         "organizations_url" : "https://api.github.com/users/JeremyRubin/orgs",
         "received_events_url" : "https://api.github.com/users/JeremyRubin/received_events",
         "repos_url" : "https://api.github.com/users/JeremyRubin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JeremyRubin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JeremyRubin"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10072#discussion_r108522911"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10072"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108522911"
         }
      },
      "body" : "using asserts as control flow is generally an antipattern (I think that the for/else loop is a bit clearer in any case).",
      "commit_id" : "a4fd89fddba49c56e77f131fe95feffa8d7cf6ed",
      "created_at" : "2017-03-28T20:02:40Z",
      "diff_hunk" : "@@ -41,11 +42,17 @@ def run_test(self):\n         self.nodes[1].generate(1)\n         self.sync_all()\n \n-        with open(self.alert_filename, 'r', encoding='utf8') as f:\n-            alert_text = f.read()\n+        # Give bitcoind 10 seconds to write the alert notification\n+        timeout = 10\n+        while True:\n+            with open(self.alert_filename, 'r', encoding='utf8') as f:\n+                alert_text = f.read()\n+            if len(alert_text) > 0:\n+                break\n \n-        if len(alert_text) == 0:\n-            raise AssertionError(\"-alertnotify did not warn of up-version blocks\")\n+            assert timeout > 0, \"-alertnotify did not warn of up-version blocks\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10072#discussion_r108522911",
      "id" : 108522911,
      "original_commit_id" : "baeecbbb087842b18fb085b0d8c7b736c367cfe0",
      "original_position" : 24,
      "path" : "test/functional/forknotify.py",
      "position" : null,
      "pull_request_review_id" : 29559437,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10072",
      "updated_at" : "2017-03-28T20:22:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108522911",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/886523?v=3",
         "events_url" : "https://api.github.com/users/JeremyRubin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JeremyRubin/followers",
         "following_url" : "https://api.github.com/users/JeremyRubin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JeremyRubin",
         "id" : 886523,
         "login" : "JeremyRubin",
         "organizations_url" : "https://api.github.com/users/JeremyRubin/orgs",
         "received_events_url" : "https://api.github.com/users/JeremyRubin/received_events",
         "repos_url" : "https://api.github.com/users/JeremyRubin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JeremyRubin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JeremyRubin"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10072#discussion_r108524745"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10072"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108524745"
         }
      },
      "body" : "ah. I see what you're saying now. Yes, I'll remove the assert from the control flow.",
      "commit_id" : "a4fd89fddba49c56e77f131fe95feffa8d7cf6ed",
      "created_at" : "2017-03-28T20:11:10Z",
      "diff_hunk" : "@@ -41,11 +42,17 @@ def run_test(self):\n         self.nodes[1].generate(1)\n         self.sync_all()\n \n-        with open(self.alert_filename, 'r', encoding='utf8') as f:\n-            alert_text = f.read()\n+        # Give bitcoind 10 seconds to write the alert notification\n+        timeout = 10\n+        while True:\n+            with open(self.alert_filename, 'r', encoding='utf8') as f:\n+                alert_text = f.read()\n+            if len(alert_text) > 0:\n+                break\n \n-        if len(alert_text) == 0:\n-            raise AssertionError(\"-alertnotify did not warn of up-version blocks\")\n+            assert timeout > 0, \"-alertnotify did not warn of up-version blocks\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10072#discussion_r108524745",
      "id" : 108524745,
      "original_commit_id" : "baeecbbb087842b18fb085b0d8c7b736c367cfe0",
      "original_position" : 24,
      "path" : "test/functional/forknotify.py",
      "position" : null,
      "pull_request_review_id" : 29561418,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10072",
      "updated_at" : "2017-03-28T20:22:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108524745",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "body" : "Pushed a new version using while/else and not using assert for control flow.",
      "created_at" : "2017-03-28T20:23:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10072#issuecomment-289892911",
      "id" : 289892911,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10072",
      "updated_at" : "2017-03-28T20:23:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/289892911",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "body" : "utACK a4fd89f. Going to merge this, so that the failures are a thing of the past.",
      "created_at" : "2017-04-02T10:51:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10072#issuecomment-290978641",
      "id" : 290978641,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10072",
      "updated_at" : "2017-04-02T10:51:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/290978641",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/6399679?v=3",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10072#discussion_r109305808"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10072"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/109305808"
         }
      },
      "body" : "@jnewbery nit: Any reason you changed the raise AssertionError to assert False?",
      "commit_id" : "a4fd89fddba49c56e77f131fe95feffa8d7cf6ed",
      "created_at" : "2017-04-02T10:53:21Z",
      "diff_hunk" : "@@ -41,12 +43,19 @@ def run_test(self):\n         self.nodes[1].generate(1)\n         self.sync_all()\n \n+        # Give bitcoind 10 seconds to write the alert notification\n+        timeout = 10.0\n+        while timeout > 0:\n+            if os.path.exists(self.alert_filename) and os.path.getsize(self.alert_filename):\n+                break\n+            time.sleep(0.1)\n+            timeout -= 0.1\n+        else:\n+            assert False, \"-alertnotify did not warn of up-version blocks\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10072#discussion_r109305808",
      "id" : 109305808,
      "original_commit_id" : "a4fd89fddba49c56e77f131fe95feffa8d7cf6ed",
      "original_position" : 21,
      "path" : "test/functional/forknotify.py",
      "position" : 21,
      "pull_request_review_id" : 30401370,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10072",
      "updated_at" : "2017-04-02T10:53:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/109305808",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/6399679?v=3",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10072#discussion_r109308519"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10072"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/109308519"
         }
      },
      "body" : "No good reason. Equivalent behaviour but you're probably right that `raise AssertionError` is better style here.",
      "commit_id" : "a4fd89fddba49c56e77f131fe95feffa8d7cf6ed",
      "created_at" : "2017-04-02T13:12:40Z",
      "diff_hunk" : "@@ -41,12 +43,19 @@ def run_test(self):\n         self.nodes[1].generate(1)\n         self.sync_all()\n \n+        # Give bitcoind 10 seconds to write the alert notification\n+        timeout = 10.0\n+        while timeout > 0:\n+            if os.path.exists(self.alert_filename) and os.path.getsize(self.alert_filename):\n+                break\n+            time.sleep(0.1)\n+            timeout -= 0.1\n+        else:\n+            assert False, \"-alertnotify did not warn of up-version blocks\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10072#discussion_r109308519",
      "id" : 109308519,
      "original_commit_id" : "a4fd89fddba49c56e77f131fe95feffa8d7cf6ed",
      "original_position" : 21,
      "path" : "test/functional/forknotify.py",
      "position" : 21,
      "pull_request_review_id" : 30403752,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10072",
      "updated_at" : "2017-04-02T13:12:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/109308519",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "body" : "Ã°ÂÂÂ first successful daily run of extended tests on Travis: https://travis-ci.org/bitcoin/bitcoin/builds/217786785\r\n\r\nThanks for merging @MarcoFalke ",
      "created_at" : "2017-04-02T19:53:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10072#issuecomment-291010398",
      "id" : 291010398,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10072",
      "updated_at" : "2017-04-02T19:53:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/291010398",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   }
]
