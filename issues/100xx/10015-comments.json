[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10015#discussion_r106509226"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10015"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/106509226"
         }
      },
      "body" : "The new error message is a bit confussing to me because it doesn't provides a reason or error code. IMO if something can fail for two different reasons, it should let the caller know the reason in order to let him take the appropiate actions, show the best error message, etc.",
      "commit_id" : "2d825c8582a5b6e9a78e48776b5ec3240141b050",
      "created_at" : "2017-03-16T19:22:32Z",
      "diff_hunk" : "@@ -316,7 +316,7 @@ def run_test(self):\n         rawtx   = self.nodes[2].createrawtransaction(inputs, outputs)\n         dec_tx  = self.nodes[2].decoderawtransaction(rawtx)\n \n-        assert_raises_jsonrpc(-4, \"Insufficient funds\", self.nodes[2].fundrawtransaction, rawtx)\n+        assert_raises_jsonrpc(-4, \"Coin Selection Failed\", self.nodes[2].fundrawtransaction, rawtx)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10015#discussion_r106509226",
      "id" : 106509226,
      "original_commit_id" : "97cb164f54f48f9c91293d08f6afc7d5628dc789",
      "original_position" : 5,
      "path" : "qa/rpc-tests/fundrawtransaction.py",
      "position" : 5,
      "pull_request_review_id" : 27435440,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10015",
      "updated_at" : "2017-03-16T19:22:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/106509226",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/127973?v=3",
         "events_url" : "https://api.github.com/users/lontivero/events{/privacy}",
         "followers_url" : "https://api.github.com/users/lontivero/followers",
         "following_url" : "https://api.github.com/users/lontivero/following{/other_user}",
         "gists_url" : "https://api.github.com/users/lontivero/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/lontivero",
         "id" : 127973,
         "login" : "lontivero",
         "organizations_url" : "https://api.github.com/users/lontivero/orgs",
         "received_events_url" : "https://api.github.com/users/lontivero/received_events",
         "repos_url" : "https://api.github.com/users/lontivero/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/lontivero/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/lontivero/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/lontivero"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10015#discussion_r106511904"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10015"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/106511904"
         }
      },
      "body" : "I agree it'd be better to have more precise error codes/messages returned. However, I think this is an improvement since we're returning \"Insufficient funds\" when the problem may be something different.",
      "commit_id" : "2d825c8582a5b6e9a78e48776b5ec3240141b050",
      "created_at" : "2017-03-16T19:35:19Z",
      "diff_hunk" : "@@ -316,7 +316,7 @@ def run_test(self):\n         rawtx   = self.nodes[2].createrawtransaction(inputs, outputs)\n         dec_tx  = self.nodes[2].decoderawtransaction(rawtx)\n \n-        assert_raises_jsonrpc(-4, \"Insufficient funds\", self.nodes[2].fundrawtransaction, rawtx)\n+        assert_raises_jsonrpc(-4, \"Coin Selection Failed\", self.nodes[2].fundrawtransaction, rawtx)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10015#discussion_r106511904",
      "id" : 106511904,
      "original_commit_id" : "97cb164f54f48f9c91293d08f6afc7d5628dc789",
      "original_position" : 5,
      "path" : "qa/rpc-tests/fundrawtransaction.py",
      "position" : 5,
      "pull_request_review_id" : 27438409,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10015",
      "updated_at" : "2017-03-16T19:35:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/106511904",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10015#discussion_r106623497"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10015"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/106623497"
         }
      },
      "body" : "Agree that if there are really insufficient funds it'd be good to reply that. A specific error is better than a non-specific one *if the message is correct*. Better an aspecific error than an incorrect one though. An incorrect \"insufficient funds\" error could set the caller on a wild goose chase or get them to panic. In that case it's better to return something general which prompts the caller to do their own research.\r\n\r\n\r\n",
      "commit_id" : "2d825c8582a5b6e9a78e48776b5ec3240141b050",
      "created_at" : "2017-03-17T10:38:18Z",
      "diff_hunk" : "@@ -316,7 +316,7 @@ def run_test(self):\n         rawtx   = self.nodes[2].createrawtransaction(inputs, outputs)\n         dec_tx  = self.nodes[2].decoderawtransaction(rawtx)\n \n-        assert_raises_jsonrpc(-4, \"Insufficient funds\", self.nodes[2].fundrawtransaction, rawtx)\n+        assert_raises_jsonrpc(-4, \"Coin Selection Failed\", self.nodes[2].fundrawtransaction, rawtx)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10015#discussion_r106623497",
      "id" : 106623497,
      "original_commit_id" : "97cb164f54f48f9c91293d08f6afc7d5628dc789",
      "original_position" : 5,
      "path" : "qa/rpc-tests/fundrawtransaction.py",
      "position" : 5,
      "pull_request_review_id" : 27554868,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10015",
      "updated_at" : "2017-03-17T10:38:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/106623497",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "NACK on \"Coin Selection Failed\". It would break existing code (I rely in some project on the Insufficient Funds message), and I think \"Insufficient funds\" is correct. If you can't create a transaction because the chain is too long, then you really do not have enough liquidity.\r\n",
      "created_at" : "2017-03-22T05:37:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10015#issuecomment-288303520",
      "id" : 288303520,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10015",
      "updated_at" : "2017-03-22T05:37:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/288303520",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3020646?v=3",
         "events_url" : "https://api.github.com/users/NicolasDorier/events{/privacy}",
         "followers_url" : "https://api.github.com/users/NicolasDorier/followers",
         "following_url" : "https://api.github.com/users/NicolasDorier/following{/other_user}",
         "gists_url" : "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/NicolasDorier",
         "id" : 3020646,
         "login" : "NicolasDorier",
         "organizations_url" : "https://api.github.com/users/NicolasDorier/orgs",
         "received_events_url" : "https://api.github.com/users/NicolasDorier/received_events",
         "repos_url" : "https://api.github.com/users/NicolasDorier/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/NicolasDorier/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/NicolasDorier"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10015#discussion_r107335949"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10015"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/107335949"
         }
      },
      "body" : "I think \"Insufficient funds\" is correct. If the user does not have enough liquidity to not do a long chain, then he does not have enough funds.",
      "commit_id" : "2d825c8582a5b6e9a78e48776b5ec3240141b050",
      "created_at" : "2017-03-22T05:38:35Z",
      "diff_hunk" : "@@ -316,7 +316,7 @@ def run_test(self):\n         rawtx   = self.nodes[2].createrawtransaction(inputs, outputs)\n         dec_tx  = self.nodes[2].decoderawtransaction(rawtx)\n \n-        assert_raises_jsonrpc(-4, \"Insufficient funds\", self.nodes[2].fundrawtransaction, rawtx)\n+        assert_raises_jsonrpc(-4, \"Coin Selection Failed\", self.nodes[2].fundrawtransaction, rawtx)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10015#discussion_r107335949",
      "id" : 107335949,
      "original_commit_id" : "97cb164f54f48f9c91293d08f6afc7d5628dc789",
      "original_position" : 5,
      "path" : "qa/rpc-tests/fundrawtransaction.py",
      "position" : 5,
      "pull_request_review_id" : 28299869,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10015",
      "updated_at" : "2017-03-22T05:38:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/107335949",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3020646?v=3",
         "events_url" : "https://api.github.com/users/NicolasDorier/events{/privacy}",
         "followers_url" : "https://api.github.com/users/NicolasDorier/followers",
         "following_url" : "https://api.github.com/users/NicolasDorier/following{/other_user}",
         "gists_url" : "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/NicolasDorier",
         "id" : 3020646,
         "login" : "NicolasDorier",
         "organizations_url" : "https://api.github.com/users/NicolasDorier/orgs",
         "received_events_url" : "https://api.github.com/users/NicolasDorier/received_events",
         "repos_url" : "https://api.github.com/users/NicolasDorier/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/NicolasDorier/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/NicolasDorier"
      }
   },
   {
      "body" : "@NicolasDorier I strongly disagree with your definition of 'liquidity' here. In the too-long-chains case, the coin selection is being rejected by *local* policy. If the user was able to get the transaction to a miner who was prepared to mine a long chain, then it would be a perfectly valid transaction. I also think the most obvious reading of \"insufficient funds\" is that there are not enough funds in the wallet, not that the funds are temporarily unusable for technical reasons.\r\n\r\nThat said, I do have sympathy for client applications which expect the interface to bitcoind to remain stable. It's just that in this case the interface is wrong and should be corrected. If your client application is propagating the error message to the end user that there are insufficient funds, then it's likely to cause alarm and anxiety for users who may think that their funds have been lost.\r\n\r\nIdeally, we'd have error messages that were specific and correct, and that's where we should aim to get to. The choice here is between log messages that are (specific and potentially incorrect) and log messages that are (general and correct). Log messages that are general and correct are preferable.",
      "created_at" : "2017-03-22T12:47:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10015#issuecomment-288387822",
      "id" : 288387822,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10015",
      "updated_at" : "2017-03-22T12:47:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/288387822",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "body" : "@jnewbery well in my case, the Insufficient Fee is interpreted into a proper Enum value in my client code.\r\nMaking this change mean that my code will throw a UnknownException, interpreted like a bug, instead of a Insufficient Fee, which delay the same action for later. (and if long chains, this is how it should be handled as well)\r\n\r\nThat said this PR should solve my issue https://github.com/bitcoin/bitcoin/issues/9874 .\r\nAt least \"Insufficient Fee\" so you do not break older code, and maybe add \"Too long chain\" as a new error message in the case that this PR attempt to fix.\r\n\r\n",
      "created_at" : "2017-03-23T02:13:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10015#issuecomment-288596931",
      "id" : 288596931,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10015",
      "updated_at" : "2017-03-23T02:13:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/288596931",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3020646?v=3",
         "events_url" : "https://api.github.com/users/NicolasDorier/events{/privacy}",
         "followers_url" : "https://api.github.com/users/NicolasDorier/followers",
         "following_url" : "https://api.github.com/users/NicolasDorier/following{/other_user}",
         "gists_url" : "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/NicolasDorier",
         "id" : 3020646,
         "login" : "NicolasDorier",
         "organizations_url" : "https://api.github.com/users/NicolasDorier/orgs",
         "received_events_url" : "https://api.github.com/users/NicolasDorier/received_events",
         "repos_url" : "https://api.github.com/users/NicolasDorier/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/NicolasDorier/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/NicolasDorier"
      }
   },
   {
      "body" : "I advice \"too-long-mempool-chain\" as it is the same error message sent by `sendrawtransaction`, if this transaction was constructed.",
      "created_at" : "2017-03-23T02:14:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10015#issuecomment-288597075",
      "id" : 288597075,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10015",
      "updated_at" : "2017-03-23T02:15:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/288597075",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3020646?v=3",
         "events_url" : "https://api.github.com/users/NicolasDorier/events{/privacy}",
         "followers_url" : "https://api.github.com/users/NicolasDorier/followers",
         "following_url" : "https://api.github.com/users/NicolasDorier/following{/other_user}",
         "gists_url" : "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/NicolasDorier",
         "id" : 3020646,
         "login" : "NicolasDorier",
         "organizations_url" : "https://api.github.com/users/NicolasDorier/orgs",
         "received_events_url" : "https://api.github.com/users/NicolasDorier/received_events",
         "repos_url" : "https://api.github.com/users/NicolasDorier/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/NicolasDorier/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/NicolasDorier"
      }
   },
   {
      "body" : "Doesn't seem to be much appetite for this. There was a bit of disagreement on IRC here: https://botbot.me/freenode/bitcoin-core-dev/2017-03-16/?msg=82546050&page=3\r\n\r\nClosing for now.",
      "created_at" : "2017-06-30T18:24:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10015#issuecomment-312340016",
      "id" : 312340016,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10015",
      "updated_at" : "2017-06-30T18:24:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/312340016",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   }
]
