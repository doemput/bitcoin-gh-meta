[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10038#discussion_r106868414"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10038"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/106868414"
         }
      },
      "body" : "Don't we need to escape this in some ways? Or is that handled by UniValue?",
      "commit_id" : "e141aa4ba604ff22c68454112501c166d3e892c9",
      "created_at" : "2017-03-20T10:28:45Z",
      "diff_hunk" : "@@ -505,13 +531,27 @@ UniValue getmemoryinfo(const JSONRPCRequest& request)\n             \"    \\\"chunks_free\\\": xxxxx,   (numeric) Number unused chunks\\n\"\n             \"  }\\n\"\n             \"}\\n\"\n+            \"\\nResult (mode \\\"mallocinfo\\\"):\\n\"\n+            \"\\\"<malloc version=\\\"1\\\">...\\\"\\n\"\n             \"\\nExamples:\\n\"\n             + HelpExampleCli(\"getmemoryinfo\", \"\")\n             + HelpExampleRpc(\"getmemoryinfo\", \"\")\n         );\n-    UniValue obj(UniValue::VOBJ);\n-    obj.push_back(Pair(\"locked\", RPCLockedMemoryInfo()));\n-    return obj;\n+\n+    std::string mode = (request.params.size() < 1 || request.params[0].isNull()) ? \"stats\" : request.params[0].get_str();\n+    if (mode == \"stats\") {\n+        UniValue obj(UniValue::VOBJ);\n+        obj.push_back(Pair(\"locked\", RPCLockedMemoryInfo()));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10038#discussion_r106868414",
      "id" : 106868414,
      "original_commit_id" : "e141aa4ba604ff22c68454112501c166d3e892c9",
      "original_position" : 70,
      "path" : "src/rpc/misc.cpp",
      "position" : 70,
      "pull_request_review_id" : 27809489,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10038",
      "updated_at" : "2017-03-20T10:28:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/106868414",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10038#discussion_r106868558"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10038"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/106868558"
         }
      },
      "body" : "That's handled by UniValue. The whole object is returned as a JSON string.\r\n(UniValue has an implicit constructor from string).",
      "commit_id" : "e141aa4ba604ff22c68454112501c166d3e892c9",
      "created_at" : "2017-03-20T10:29:32Z",
      "diff_hunk" : "@@ -505,13 +531,27 @@ UniValue getmemoryinfo(const JSONRPCRequest& request)\n             \"    \\\"chunks_free\\\": xxxxx,   (numeric) Number unused chunks\\n\"\n             \"  }\\n\"\n             \"}\\n\"\n+            \"\\nResult (mode \\\"mallocinfo\\\"):\\n\"\n+            \"\\\"<malloc version=\\\"1\\\">...\\\"\\n\"\n             \"\\nExamples:\\n\"\n             + HelpExampleCli(\"getmemoryinfo\", \"\")\n             + HelpExampleRpc(\"getmemoryinfo\", \"\")\n         );\n-    UniValue obj(UniValue::VOBJ);\n-    obj.push_back(Pair(\"locked\", RPCLockedMemoryInfo()));\n-    return obj;\n+\n+    std::string mode = (request.params.size() < 1 || request.params[0].isNull()) ? \"stats\" : request.params[0].get_str();\n+    if (mode == \"stats\") {\n+        UniValue obj(UniValue::VOBJ);\n+        obj.push_back(Pair(\"locked\", RPCLockedMemoryInfo()));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10038#discussion_r106868558",
      "id" : 106868558,
      "original_commit_id" : "e141aa4ba604ff22c68454112501c166d3e892c9",
      "original_position" : 70,
      "path" : "src/rpc/misc.cpp",
      "position" : 70,
      "pull_request_review_id" : 27809644,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10038",
      "updated_at" : "2017-03-20T10:35:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/106868558",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "As for the GLIBC 2.10 symbol requirement, the minimum version of glibc in our symbol checker is 2.11, so this is acceptable for binary releases: https://github.com/bitcoin/bitcoin/blob/master/contrib/devtools/symbol-check.py#L43",
      "created_at" : "2017-03-20T10:37:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10038#issuecomment-287724140",
      "id" : 287724140,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10038",
      "updated_at" : "2017-03-20T10:37:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/287724140",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Nice. To bad there is no clang equivalent of `malloc_info()`. This will be linux only.\r\nTested ACK e141aa4ba604ff22c68454112501c166d3e892c9\r\nhttps://bitcoin.jonasschnelli.ch/build/PR/10038\r\n\r\n\r\n<img width=\"730\" alt=\"bildschirmfoto 2017-03-20 um 12 12 06\" src=\"https://cloud.githubusercontent.com/assets/178464/24097654/206cdb76-0d67-11e7-9668-d06fe13e5f27.png\">\r\n\r\n<img width=\"909\" alt=\"bildschirmfoto 2017-03-20 um 12 16 54\" src=\"https://cloud.githubusercontent.com/assets/178464/24097653/20440b92-0d67-11e7-911d-34cab74d6c70.png\">",
      "created_at" : "2017-03-20T11:17:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10038#issuecomment-287732185",
      "id" : 287732185,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10038",
      "updated_at" : "2017-03-20T11:17:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/287732185",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "> Nice. To bad there is no clang equivalent of malloc_info(). This will be linux only.\r\n\r\nClang on Linux simply uses glibc. But yeah, other libc's will either have equivalent calls or maybe not, it's specific to the malloc implementation.\r\n\r\n",
      "created_at" : "2017-03-20T11:32:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10038#issuecomment-287735026",
      "id" : 287735026,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10038",
      "updated_at" : "2017-03-20T11:32:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/287735026",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Tested on OSX ACK e141aa4\r\n![screen shot](https://cloud.githubusercontent.com/assets/863730/24098083/bce03638-0da3-11e7-9d83-9b9a69d70a13.png)",
      "created_at" : "2017-03-20T11:33:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10038#issuecomment-287735104",
      "id" : 287735104,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10038",
      "updated_at" : "2017-03-20T11:33:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/287735104",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/863730?v=3",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "body" : "postmerge ACK (was merged in the middle of my testing)",
      "created_at" : "2017-03-20T14:15:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10038#issuecomment-287771509",
      "id" : 287771509,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10038",
      "updated_at" : "2017-03-20T14:15:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/287771509",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/6848764?v=3",
         "events_url" : "https://api.github.com/users/paveljanik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/paveljanik/followers",
         "following_url" : "https://api.github.com/users/paveljanik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/paveljanik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/paveljanik",
         "id" : 6848764,
         "login" : "paveljanik",
         "organizations_url" : "https://api.github.com/users/paveljanik/orgs",
         "received_events_url" : "https://api.github.com/users/paveljanik/received_events",
         "repos_url" : "https://api.github.com/users/paveljanik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/paveljanik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/paveljanik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/paveljanik"
      }
   },
   {
      "body" : "> postmerge ACK (was merged in the middle of my testing)\r\n\r\nYeah sorry for that, getting this in soon is kind of important due to all the reported OOM issues with 0.14.",
      "created_at" : "2017-03-20T14:42:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10038#issuecomment-287779966",
      "id" : 287779966,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10038",
      "updated_at" : "2017-03-20T14:42:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/287779966",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "postumous utACK e141aa4ba604ff22c68454112501c166d3e892c9",
      "created_at" : "2017-03-20T18:57:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10038#issuecomment-287862714",
      "id" : 287862714,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10038",
      "updated_at" : "2017-03-20T18:57:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/287862714",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "Is there a reason not to just add it as an additional key in the result?",
      "created_at" : "2017-04-08T13:35:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10038#issuecomment-292718479",
      "id" : 292718479,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10038",
      "updated_at" : "2017-04-08T13:35:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/292718479",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "> Is there a reason not to just add it as an additional key in the result?\r\n\r\nI did that first, but having a huge encoded XML string field in the default JSON object output was ugly. Also this information is potentially slow to compile, so it's better to have it on an separate entry point.",
      "created_at" : "2017-04-10T13:34:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10038#issuecomment-292950639",
      "id" : 292950639,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10038",
      "updated_at" : "2017-04-10T13:34:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/292950639",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   }
]
