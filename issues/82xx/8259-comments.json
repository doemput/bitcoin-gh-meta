[
   {
      "body" : "This one is hopefully merged for versions with segwit defined on mainnet",
      "created_at" : "2016-06-25T20:01:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8259#issuecomment-228567883",
      "id" : 228567883,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8259",
      "updated_at" : "2016-06-25T20:01:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/228567883",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8403418?v=3",
         "events_url" : "https://api.github.com/users/jl2012/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jl2012/followers",
         "following_url" : "https://api.github.com/users/jl2012/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jl2012/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jl2012",
         "id" : 8403418,
         "login" : "jl2012",
         "organizations_url" : "https://api.github.com/users/jl2012/orgs",
         "received_events_url" : "https://api.github.com/users/jl2012/received_events",
         "repos_url" : "https://api.github.com/users/jl2012/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jl2012/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jl2012/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jl2012"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/8259#discussion_r68519098"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/8259"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/68519098"
         }
      },
      "body" : "You could avoid two look ups (IIRC) by comparing the size of the container before and after instead.\r\n\r\nAka:\r\n``` cpp\r\nauto sizeBefore = map.size();\r\nmap.insert(txId, hashes);\r\nreturn map.size() != sizeBefore;\r\n```",
      "commit_id" : "dc188d82da8925c6b6f08a12a3ff2c1fc4d6f983",
      "created_at" : "2016-06-27T03:33:09Z",
      "diff_hunk" : "@@ -16,13 +17,40 @@ static const unsigned int DEFAULT_MAX_SIG_CACHE_SIZE = 40;\n \n class CPubKey;\n \n+/**\n+ * A thread safe map which caches mid state witness signature hash calculation by transaction id\n+ */\n+class CachedHashesMap\n+{\n+private:\n+    std::map<uint256, CachedHashes> map;\n+    CCriticalSection cs;\n+public:\n+    bool TryGet(uint256 txId, CachedHashes* hashes)\n+    {\n+        LOCK(cs);\n+        if(!map.count(txId))\n+            return false;\n+        *hashes = map[txId];\n+        return true;\n+    }\n+    bool TrySet(uint256 txId, const CachedHashes& hashes)\n+    {\n+        LOCK(cs);\n+        if(map.count(txId))",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8259#discussion_r68519098",
      "id" : 68519098,
      "original_commit_id" : "c2ea4ddafcf40ed894974e2e5f22bd5625f5c1cc",
      "original_position" : 32,
      "path" : "src/script/sigcache.h",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/8259",
      "updated_at" : "2016-06-28T09:23:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/68519098",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/413395?v=3",
         "events_url" : "https://api.github.com/users/dcousens/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dcousens/followers",
         "following_url" : "https://api.github.com/users/dcousens/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dcousens/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dcousens",
         "id" : 413395,
         "login" : "dcousens",
         "organizations_url" : "https://api.github.com/users/dcousens/orgs",
         "received_events_url" : "https://api.github.com/users/dcousens/received_events",
         "repos_url" : "https://api.github.com/users/dcousens/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dcousens/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dcousens/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dcousens"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/8259#discussion_r68519121"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/8259"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/68519121"
         }
      },
      "body" : "Why not:\r\n\r\n``` cpp\r\nauto iter = map.find(txId);\r\nif (iter == map.end()) return false;\r\n*hashes = iter->second;\r\nreturn true;\r\n```\r\n\r\n**edit**: fixed early-exit",
      "commit_id" : "dc188d82da8925c6b6f08a12a3ff2c1fc4d6f983",
      "created_at" : "2016-06-27T03:33:54Z",
      "diff_hunk" : "@@ -16,13 +17,40 @@ static const unsigned int DEFAULT_MAX_SIG_CACHE_SIZE = 40;\n \n class CPubKey;\n \n+/**\n+ * A thread safe map which caches mid state witness signature hash calculation by transaction id\n+ */\n+class CachedHashesMap\n+{\n+private:\n+    std::map<uint256, CachedHashes> map;\n+    CCriticalSection cs;\n+public:\n+    bool TryGet(uint256 txId, CachedHashes* hashes)\n+    {\n+        LOCK(cs);\n+        if(!map.count(txId))\n+            return false;\n+        *hashes = map[txId];\n+        return true;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8259#discussion_r68519121",
      "id" : 68519121,
      "original_commit_id" : "c2ea4ddafcf40ed894974e2e5f22bd5625f5c1cc",
      "original_position" : 27,
      "path" : "src/script/sigcache.h",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/8259",
      "updated_at" : "2016-06-28T09:23:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/68519121",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/413395?v=3",
         "events_url" : "https://api.github.com/users/dcousens/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dcousens/followers",
         "following_url" : "https://api.github.com/users/dcousens/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dcousens/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dcousens",
         "id" : 413395,
         "login" : "dcousens",
         "organizations_url" : "https://api.github.com/users/dcousens/orgs",
         "received_events_url" : "https://api.github.com/users/dcousens/received_events",
         "repos_url" : "https://api.github.com/users/dcousens/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dcousens/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dcousens/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dcousens"
      }
   },
   {
      "body" : "> hashcashes\r\n\r\nhash **caches**?,  had me confused for a second haha\r\n\r\nutACK c2ea4dd",
      "created_at" : "2016-06-27T03:35:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8259#issuecomment-228647612",
      "id" : 228647612,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8259",
      "updated_at" : "2016-06-27T03:36:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/228647612",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/413395?v=3",
         "events_url" : "https://api.github.com/users/dcousens/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dcousens/followers",
         "following_url" : "https://api.github.com/users/dcousens/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dcousens/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dcousens",
         "id" : 413395,
         "login" : "dcousens",
         "organizations_url" : "https://api.github.com/users/dcousens/orgs",
         "received_events_url" : "https://api.github.com/users/dcousens/received_events",
         "repos_url" : "https://api.github.com/users/dcousens/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dcousens/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dcousens/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dcousens"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/8259#discussion_r68519324"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/8259"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/68519324"
         }
      },
      "body" : "trivial: maybe spacing between names?",
      "commit_id" : "dc188d82da8925c6b6f08a12a3ff2c1fc4d6f983",
      "created_at" : "2016-06-27T03:37:23Z",
      "diff_hunk" : "@@ -98,13 +98,30 @@ enum\n \n bool CheckSignatureEncoding(const std::vector<unsigned char> &vchSig, unsigned int flags, ScriptError* serror);\n \n+class CachedHashes\n+{\n+public:\n+    uint256 hashPrevouts,hashSequence,hashOutputs;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8259#discussion_r68519324",
      "id" : 68519324,
      "original_commit_id" : "c2ea4ddafcf40ed894974e2e5f22bd5625f5c1cc",
      "original_position" : 7,
      "path" : "src/script/interpreter.h",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/8259",
      "updated_at" : "2016-06-28T09:23:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/68519324",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/413395?v=3",
         "events_url" : "https://api.github.com/users/dcousens/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dcousens/followers",
         "following_url" : "https://api.github.com/users/dcousens/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dcousens/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dcousens",
         "id" : 413395,
         "login" : "dcousens",
         "organizations_url" : "https://api.github.com/users/dcousens/orgs",
         "received_events_url" : "https://api.github.com/users/dcousens/received_events",
         "repos_url" : "https://api.github.com/users/dcousens/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dcousens/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dcousens/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dcousens"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/8259#discussion_r68519384"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/8259"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/68519384"
         }
      },
      "body" : "Would this need to enforce the lock on `check`?",
      "commit_id" : "dc188d82da8925c6b6f08a12a3ff2c1fc4d6f983",
      "created_at" : "2016-06-27T03:38:46Z",
      "diff_hunk" : "@@ -426,6 +429,7 @@ class CScriptCheck\n         std::swap(nFlags, check.nFlags);\n         std::swap(cacheStore, check.cacheStore);\n         std::swap(error, check.error);\n+        std::swap(cachedHashesMap, check.cachedHashesMap);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8259#discussion_r68519384",
      "id" : 68519384,
      "original_commit_id" : "c2ea4ddafcf40ed894974e2e5f22bd5625f5c1cc",
      "original_position" : 38,
      "path" : "src/main.h",
      "position" : 38,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/8259",
      "updated_at" : "2016-06-28T09:23:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/68519384",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/413395?v=3",
         "events_url" : "https://api.github.com/users/dcousens/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dcousens/followers",
         "following_url" : "https://api.github.com/users/dcousens/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dcousens/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dcousens",
         "id" : 413395,
         "login" : "dcousens",
         "organizations_url" : "https://api.github.com/users/dcousens/orgs",
         "received_events_url" : "https://api.github.com/users/dcousens/received_events",
         "repos_url" : "https://api.github.com/users/dcousens/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dcousens/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dcousens/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dcousens"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/8259#discussion_r68554463"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/8259"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/68554463"
         }
      },
      "body" : "Actually, I don't think I _really_ need TrySet to return a bool.",
      "commit_id" : "dc188d82da8925c6b6f08a12a3ff2c1fc4d6f983",
      "created_at" : "2016-06-27T10:31:13Z",
      "diff_hunk" : "@@ -16,13 +17,40 @@ static const unsigned int DEFAULT_MAX_SIG_CACHE_SIZE = 40;\n \n class CPubKey;\n \n+/**\n+ * A thread safe map which caches mid state witness signature hash calculation by transaction id\n+ */\n+class CachedHashesMap\n+{\n+private:\n+    std::map<uint256, CachedHashes> map;\n+    CCriticalSection cs;\n+public:\n+    bool TryGet(uint256 txId, CachedHashes* hashes)\n+    {\n+        LOCK(cs);\n+        if(!map.count(txId))\n+            return false;\n+        *hashes = map[txId];\n+        return true;\n+    }\n+    bool TrySet(uint256 txId, const CachedHashes& hashes)\n+    {\n+        LOCK(cs);\n+        if(map.count(txId))",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8259#discussion_r68554463",
      "id" : 68554463,
      "original_commit_id" : "c2ea4ddafcf40ed894974e2e5f22bd5625f5c1cc",
      "original_position" : 32,
      "path" : "src/script/sigcache.h",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/8259",
      "updated_at" : "2016-06-28T09:23:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/68554463",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3020646?v=3",
         "events_url" : "https://api.github.com/users/NicolasDorier/events{/privacy}",
         "followers_url" : "https://api.github.com/users/NicolasDorier/followers",
         "following_url" : "https://api.github.com/users/NicolasDorier/following{/other_user}",
         "gists_url" : "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/NicolasDorier",
         "id" : 3020646,
         "login" : "NicolasDorier",
         "organizations_url" : "https://api.github.com/users/NicolasDorier/orgs",
         "received_events_url" : "https://api.github.com/users/NicolasDorier/received_events",
         "repos_url" : "https://api.github.com/users/NicolasDorier/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/NicolasDorier/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/NicolasDorier"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/8259#discussion_r68554603"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/8259"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/68554603"
         }
      },
      "body" : "What do you mean by \"fixed early-exit\" ?\r\nYes, I think your proposition is better as it makes only one lookup.",
      "commit_id" : "dc188d82da8925c6b6f08a12a3ff2c1fc4d6f983",
      "created_at" : "2016-06-27T10:32:23Z",
      "diff_hunk" : "@@ -16,13 +17,40 @@ static const unsigned int DEFAULT_MAX_SIG_CACHE_SIZE = 40;\n \n class CPubKey;\n \n+/**\n+ * A thread safe map which caches mid state witness signature hash calculation by transaction id\n+ */\n+class CachedHashesMap\n+{\n+private:\n+    std::map<uint256, CachedHashes> map;\n+    CCriticalSection cs;\n+public:\n+    bool TryGet(uint256 txId, CachedHashes* hashes)\n+    {\n+        LOCK(cs);\n+        if(!map.count(txId))\n+            return false;\n+        *hashes = map[txId];\n+        return true;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8259#discussion_r68554603",
      "id" : 68554603,
      "original_commit_id" : "c2ea4ddafcf40ed894974e2e5f22bd5625f5c1cc",
      "original_position" : 27,
      "path" : "src/script/sigcache.h",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/8259",
      "updated_at" : "2016-06-28T09:23:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/68554603",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3020646?v=3",
         "events_url" : "https://api.github.com/users/NicolasDorier/events{/privacy}",
         "followers_url" : "https://api.github.com/users/NicolasDorier/followers",
         "following_url" : "https://api.github.com/users/NicolasDorier/following{/other_user}",
         "gists_url" : "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/NicolasDorier",
         "id" : 3020646,
         "login" : "NicolasDorier",
         "organizations_url" : "https://api.github.com/users/NicolasDorier/orgs",
         "received_events_url" : "https://api.github.com/users/NicolasDorier/received_events",
         "repos_url" : "https://api.github.com/users/NicolasDorier/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/NicolasDorier/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/NicolasDorier"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/8259#discussion_r68583689"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/8259"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/68583689"
         }
      },
      "body" : "I don't understand, you mean the internal lock of cachedHashesMap ? no, the lock is only meant to protect the internal map, which is not accessed during the swap.",
      "commit_id" : "dc188d82da8925c6b6f08a12a3ff2c1fc4d6f983",
      "created_at" : "2016-06-27T14:17:17Z",
      "diff_hunk" : "@@ -426,6 +429,7 @@ class CScriptCheck\n         std::swap(nFlags, check.nFlags);\n         std::swap(cacheStore, check.cacheStore);\n         std::swap(error, check.error);\n+        std::swap(cachedHashesMap, check.cachedHashesMap);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8259#discussion_r68583689",
      "id" : 68583689,
      "original_commit_id" : "c2ea4ddafcf40ed894974e2e5f22bd5625f5c1cc",
      "original_position" : 38,
      "path" : "src/main.h",
      "position" : 38,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/8259",
      "updated_at" : "2016-06-28T09:23:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/68583689",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3020646?v=3",
         "events_url" : "https://api.github.com/users/NicolasDorier/events{/privacy}",
         "followers_url" : "https://api.github.com/users/NicolasDorier/followers",
         "following_url" : "https://api.github.com/users/NicolasDorier/following{/other_user}",
         "gists_url" : "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/NicolasDorier",
         "id" : 3020646,
         "login" : "NicolasDorier",
         "organizations_url" : "https://api.github.com/users/NicolasDorier/orgs",
         "received_events_url" : "https://api.github.com/users/NicolasDorier/received_events",
         "repos_url" : "https://api.github.com/users/NicolasDorier/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/NicolasDorier/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/NicolasDorier"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/8259#discussion_r68696925"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/8259"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/68696925"
         }
      },
      "body" : "> What do you mean by \"fixed early-exit\" ?\r\n\r\nI accidentally inverted the early exit logic,  I've since fixed it,  but left the edit in case you read it in an email and followed up.",
      "commit_id" : "dc188d82da8925c6b6f08a12a3ff2c1fc4d6f983",
      "created_at" : "2016-06-28T04:44:59Z",
      "diff_hunk" : "@@ -16,13 +17,40 @@ static const unsigned int DEFAULT_MAX_SIG_CACHE_SIZE = 40;\n \n class CPubKey;\n \n+/**\n+ * A thread safe map which caches mid state witness signature hash calculation by transaction id\n+ */\n+class CachedHashesMap\n+{\n+private:\n+    std::map<uint256, CachedHashes> map;\n+    CCriticalSection cs;\n+public:\n+    bool TryGet(uint256 txId, CachedHashes* hashes)\n+    {\n+        LOCK(cs);\n+        if(!map.count(txId))\n+            return false;\n+        *hashes = map[txId];\n+        return true;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8259#discussion_r68696925",
      "id" : 68696925,
      "original_commit_id" : "c2ea4ddafcf40ed894974e2e5f22bd5625f5c1cc",
      "original_position" : 27,
      "path" : "src/script/sigcache.h",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/8259",
      "updated_at" : "2016-06-28T09:23:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/68696925",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/413395?v=3",
         "events_url" : "https://api.github.com/users/dcousens/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dcousens/followers",
         "following_url" : "https://api.github.com/users/dcousens/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dcousens/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dcousens",
         "id" : 413395,
         "login" : "dcousens",
         "organizations_url" : "https://api.github.com/users/dcousens/orgs",
         "received_events_url" : "https://api.github.com/users/dcousens/received_events",
         "repos_url" : "https://api.github.com/users/dcousens/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dcousens/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dcousens/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dcousens"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/8259#discussion_r68697180"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/8259"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/68697180"
         }
      },
      "body" : "My logic was based on the presence of the lock implies multi-threaded access,  and this function implies the entire memory is being swapped when `swap()` is called. \r\nTo me,  that would imply that it should be `LOCK`'d to avoid another thread reading it during this swap.\r\n\r\nPerhaps it isn't needed for this case,  but I just figured I'd ask.",
      "commit_id" : "dc188d82da8925c6b6f08a12a3ff2c1fc4d6f983",
      "created_at" : "2016-06-28T04:49:14Z",
      "diff_hunk" : "@@ -426,6 +429,7 @@ class CScriptCheck\n         std::swap(nFlags, check.nFlags);\n         std::swap(cacheStore, check.cacheStore);\n         std::swap(error, check.error);\n+        std::swap(cachedHashesMap, check.cachedHashesMap);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8259#discussion_r68697180",
      "id" : 68697180,
      "original_commit_id" : "c2ea4ddafcf40ed894974e2e5f22bd5625f5c1cc",
      "original_position" : 38,
      "path" : "src/main.h",
      "position" : 38,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/8259",
      "updated_at" : "2016-06-28T09:23:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/68697180",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/413395?v=3",
         "events_url" : "https://api.github.com/users/dcousens/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dcousens/followers",
         "following_url" : "https://api.github.com/users/dcousens/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dcousens/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dcousens",
         "id" : 413395,
         "login" : "dcousens",
         "organizations_url" : "https://api.github.com/users/dcousens/orgs",
         "received_events_url" : "https://api.github.com/users/dcousens/received_events",
         "repos_url" : "https://api.github.com/users/dcousens/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dcousens/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dcousens/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dcousens"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/8259#discussion_r68716077"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/8259"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/68716077"
         }
      },
      "body" : "Ah I see. Well, I don't think we need it. The swap is always called before the closure is executed (which is only when we start having concurrent access)",
      "commit_id" : "dc188d82da8925c6b6f08a12a3ff2c1fc4d6f983",
      "created_at" : "2016-06-28T08:23:23Z",
      "diff_hunk" : "@@ -426,6 +429,7 @@ class CScriptCheck\n         std::swap(nFlags, check.nFlags);\n         std::swap(cacheStore, check.cacheStore);\n         std::swap(error, check.error);\n+        std::swap(cachedHashesMap, check.cachedHashesMap);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8259#discussion_r68716077",
      "id" : 68716077,
      "original_commit_id" : "c2ea4ddafcf40ed894974e2e5f22bd5625f5c1cc",
      "original_position" : 38,
      "path" : "src/main.h",
      "position" : 38,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/8259",
      "updated_at" : "2016-06-28T09:23:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/68716077",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3020646?v=3",
         "events_url" : "https://api.github.com/users/NicolasDorier/events{/privacy}",
         "followers_url" : "https://api.github.com/users/NicolasDorier/followers",
         "following_url" : "https://api.github.com/users/NicolasDorier/following{/other_user}",
         "gists_url" : "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/NicolasDorier",
         "id" : 3020646,
         "login" : "NicolasDorier",
         "organizations_url" : "https://api.github.com/users/NicolasDorier/orgs",
         "received_events_url" : "https://api.github.com/users/NicolasDorier/received_events",
         "repos_url" : "https://api.github.com/users/NicolasDorier/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/NicolasDorier/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/NicolasDorier"
      }
   },
   {
      "body" : "@dcousens addressed your nits in dc188d8.",
      "created_at" : "2016-06-28T09:25:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8259#issuecomment-228997940",
      "id" : 228997940,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8259",
      "updated_at" : "2016-06-28T09:25:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/228997940",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3020646?v=3",
         "events_url" : "https://api.github.com/users/NicolasDorier/events{/privacy}",
         "followers_url" : "https://api.github.com/users/NicolasDorier/followers",
         "following_url" : "https://api.github.com/users/NicolasDorier/following{/other_user}",
         "gists_url" : "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/NicolasDorier",
         "id" : 3020646,
         "login" : "NicolasDorier",
         "organizations_url" : "https://api.github.com/users/NicolasDorier/orgs",
         "received_events_url" : "https://api.github.com/users/NicolasDorier/received_events",
         "repos_url" : "https://api.github.com/users/NicolasDorier/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/NicolasDorier/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/NicolasDorier"
      }
   },
   {
      "body" : "utACK dc188d8",
      "created_at" : "2016-06-29T02:18:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8259#issuecomment-229238640",
      "id" : 229238640,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8259",
      "updated_at" : "2016-06-29T02:18:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/229238640",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/413395?v=3",
         "events_url" : "https://api.github.com/users/dcousens/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dcousens/followers",
         "following_url" : "https://api.github.com/users/dcousens/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dcousens/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dcousens",
         "id" : 413395,
         "login" : "dcousens",
         "organizations_url" : "https://api.github.com/users/dcousens/orgs",
         "received_events_url" : "https://api.github.com/users/dcousens/received_events",
         "repos_url" : "https://api.github.com/users/dcousens/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dcousens/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dcousens/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dcousens"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/8259#discussion_r72696773"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/8259"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/72696773"
         }
      },
      "body" : "Perhaps here we can do the same trick we did with the script/sigcache to keep script/interpreter simpler and more reusable.\r\nping @sipa  ",
      "commit_id" : "dc188d82da8925c6b6f08a12a3ff2c1fc4d6f983",
      "created_at" : "2016-07-28T20:31:47Z",
      "diff_hunk" : "@@ -1110,35 +1110,46 @@ class CTransactionSignatureSerializer {\n \n } // anon namespace\n \n-uint256 SignatureHash(const CScript& scriptCode, const CTransaction& txTo, unsigned int nIn, int nHashType, const CAmount& amount, SigVersion sigversion)\n+uint256 SignatureHash(const CScript& scriptCode, const CTransaction& txTo, unsigned int nIn, int nHashType, const CAmount& amount, SigVersion sigversion, CachedHashes* cache)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8259#discussion_r72696773",
      "id" : 72696773,
      "original_commit_id" : "dc188d82da8925c6b6f08a12a3ff2c1fc4d6f983",
      "original_position" : 5,
      "path" : "src/script/interpreter.cpp",
      "position" : 5,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/8259",
      "updated_at" : "2016-07-28T20:31:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/72696773",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/8259#discussion_r72697198"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/8259"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/72697198"
         }
      },
      "body" : "Or maybe move SignatureHash to BaseSignatureChecker. Just brainstorming.",
      "commit_id" : "dc188d82da8925c6b6f08a12a3ff2c1fc4d6f983",
      "created_at" : "2016-07-28T20:34:32Z",
      "diff_hunk" : "@@ -1110,35 +1110,46 @@ class CTransactionSignatureSerializer {\n \n } // anon namespace\n \n-uint256 SignatureHash(const CScript& scriptCode, const CTransaction& txTo, unsigned int nIn, int nHashType, const CAmount& amount, SigVersion sigversion)\n+uint256 SignatureHash(const CScript& scriptCode, const CTransaction& txTo, unsigned int nIn, int nHashType, const CAmount& amount, SigVersion sigversion, CachedHashes* cache)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8259#discussion_r72697198",
      "id" : 72697198,
      "original_commit_id" : "dc188d82da8925c6b6f08a12a3ff2c1fc4d6f983",
      "original_position" : 5,
      "path" : "src/script/interpreter.cpp",
      "position" : 5,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/8259",
      "updated_at" : "2016-07-28T20:34:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/72697198",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "body" : "Assume a transaction has many signatures. One is SIGHASH_SINGLE, all the others are SIGHASH_ALL | SIGHASH_ANYONECANPAY.\r\n\r\nThe first computes and stores hashPrevouts. All the others will compute hashOutputs. However, after the first call, all TrySets will not do anything, as there is already a result in the cache, so it gets computed over and over again.\r\n\r\nI think CachedHashes needs a Merge method like this:\r\n```\r\nvoid Merge(const CachedHashes& hashes) {\r\n    if (hashPrevouts.IsNull()) hashPrevouts = hashes.hashPrevout;\r\n    if (hashSequence.IsNull()) hashSequence = hashes.hashSequence;\r\n    if (hashOutputs.IsNull()) hashOutputs = hashes.hashOutputs;\r\n}\r\n```\r\nwhich can then be called from TrySet (instead of insert, use `map[txid].Merge(hashes)`).",
      "created_at" : "2016-07-28T22:41:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8259#issuecomment-236046843",
      "id" : 236046843,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8259",
      "updated_at" : "2016-07-28T22:43:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/236046843",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : ">so it gets computed over and over again\r\n\r\nThat's not true, I would be calculating the three hashes at the same time during the SIGHASH_SINGLE.\r\nTake a look at the SignatureHash method, I changed it to calculate the three hashes aggressively.\r\n\r\nI prefer not doing a merge. Without a merge my lock only have to protect the internal map as CachedHashes instances are read only. If we calculate the mid states lazily, I also need to be careful about locking at the CachedHashes instance level.",
      "created_at" : "2016-07-28T23:08:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8259#issuecomment-236051694",
      "id" : 236051694,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8259",
      "updated_at" : "2016-07-28T23:08:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/236051694",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3020646?v=3",
         "events_url" : "https://api.github.com/users/NicolasDorier/events{/privacy}",
         "followers_url" : "https://api.github.com/users/NicolasDorier/followers",
         "following_url" : "https://api.github.com/users/NicolasDorier/following{/other_user}",
         "gists_url" : "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/NicolasDorier",
         "id" : 3020646,
         "login" : "NicolasDorier",
         "organizations_url" : "https://api.github.com/users/NicolasDorier/orgs",
         "received_events_url" : "https://api.github.com/users/NicolasDorier/received_events",
         "repos_url" : "https://api.github.com/users/NicolasDorier/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/NicolasDorier/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/NicolasDorier"
      }
   },
   {
      "body" : "@NicolasDorier Oh, I see. I agree that the current code is fine in that case.\r\n\r\nI don't understand the argument about the lock. The Merge function would also grab the lock, and be the only code that touches the map.",
      "created_at" : "2016-07-28T23:11:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8259#issuecomment-236052125",
      "id" : 236052125,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8259",
      "updated_at" : "2016-07-28T23:11:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/236052125",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "@sipa The Merge function as you did here can't grab the lock, because the lock is at the cache map level, not at the CachedHashes instance level.\r\n\r\nBut basically, if doing that way, I would need to grab the lock of the map around the Merge, as well as around any hash read of the HashedCaches instance. (so one can't read and call merge on the HashedCaches at the same time)\r\nThis would make lots of contention on a single lock. An alternative is to have one lock per HashedCaches... not sure if it is worth the complexity though, knowing that the only type of transaction which does not need the 3 midstate hashes are transaction which have no SIGHASH_ALL... this is very marginal case.\r\n",
      "created_at" : "2016-07-28T23:18:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8259#issuecomment-236053263",
      "id" : 236053263,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8259",
      "updated_at" : "2016-07-28T23:19:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/236053263",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3020646?v=3",
         "events_url" : "https://api.github.com/users/NicolasDorier/events{/privacy}",
         "followers_url" : "https://api.github.com/users/NicolasDorier/followers",
         "following_url" : "https://api.github.com/users/NicolasDorier/following{/other_user}",
         "gists_url" : "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/NicolasDorier",
         "id" : 3020646,
         "login" : "NicolasDorier",
         "organizations_url" : "https://api.github.com/users/NicolasDorier/orgs",
         "received_events_url" : "https://api.github.com/users/NicolasDorier/received_events",
         "repos_url" : "https://api.github.com/users/NicolasDorier/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/NicolasDorier/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/NicolasDorier"
      }
   },
   {
      "body" : "Closing this one in favor of #8422 which calculate hashes lazily.",
      "created_at" : "2016-07-29T01:58:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8259#issuecomment-236075552",
      "id" : 236075552,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8259",
      "updated_at" : "2016-07-29T01:58:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/236075552",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3020646?v=3",
         "events_url" : "https://api.github.com/users/NicolasDorier/events{/privacy}",
         "followers_url" : "https://api.github.com/users/NicolasDorier/followers",
         "following_url" : "https://api.github.com/users/NicolasDorier/following{/other_user}",
         "gists_url" : "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/NicolasDorier",
         "id" : 3020646,
         "login" : "NicolasDorier",
         "organizations_url" : "https://api.github.com/users/NicolasDorier/orgs",
         "received_events_url" : "https://api.github.com/users/NicolasDorier/received_events",
         "repos_url" : "https://api.github.com/users/NicolasDorier/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/NicolasDorier/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/NicolasDorier"
      }
   }
]
