{
   "assignee" : null,
   "body" : "It's not safe to prune during a reindex, as there may be blocks in earlier files that have not yet been processed if they were out of order.  Those files could be accidentally deleted.  \r\nSince undo files are regenerated during reindex, this allocation of disk space could cause pruning to be triggered.\r\n\r\n@laanwj I thought I was just adding a belt and suspenders check here, but turns out it can and will happen.  This should be backported to 0.11.\r\n\r\nAlso, clarify startup message that an initial pruning of the block store doesn't happen if reindexing.",
   "closed_at" : "2015-10-23T12:41:43Z",
   "closed_by" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
      "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
      "followers_url" : "https://api.github.com/users/laanwj/followers",
      "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/laanwj",
      "id" : 126646,
      "login" : "laanwj",
      "organizations_url" : "https://api.github.com/users/laanwj/orgs",
      "received_events_url" : "https://api.github.com/users/laanwj/received_events",
      "repos_url" : "https://api.github.com/users/laanwj/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/laanwj"
   },
   "comments" : 8,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6856/comments",
   "created_at" : "2015-10-19T19:38:25Z",
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6856/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/pull/6856",
   "id" : 112216722,
   "labels" : [
      {
         "color" : "000000",
         "name" : "Block storage",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/Block%20storage"
      }
   ],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6856/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "number" : 6856,
   "pull_request" : {
      "diff_url" : "https://github.com/bitcoin/bitcoin/pull/6856.diff",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6856",
      "patch_url" : "https://github.com/bitcoin/bitcoin/pull/6856.patch",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6856"
   },
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "closed",
   "title" : "Do not allow block file pruning during reindex.",
   "updated_at" : "2015-10-23T12:42:39Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6856",
   "user" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/4360349?v=3",
      "events_url" : "https://api.github.com/users/morcos/events{/privacy}",
      "followers_url" : "https://api.github.com/users/morcos/followers",
      "following_url" : "https://api.github.com/users/morcos/following{/other_user}",
      "gists_url" : "https://api.github.com/users/morcos/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/morcos",
      "id" : 4360349,
      "login" : "morcos",
      "organizations_url" : "https://api.github.com/users/morcos/orgs",
      "received_events_url" : "https://api.github.com/users/morcos/received_events",
      "repos_url" : "https://api.github.com/users/morcos/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/morcos/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/morcos/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/morcos"
   }
}
