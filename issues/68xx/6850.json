{
   "assignee" : null,
   "body" : "Large performance improvement when adding transactions if the client is not currently at the tip of the blockchain. This particularly improves wallet rescan times, including following from a zapwallettxes.\r\n\r\nIn AddToWallet, two large indices are created over the wallet in order to make an estimate of the time a wallet transaction was created. This is slow anyway (possibly subject to a further fix) but also unnecessary if we are not at the tip because we just default to the block time. This patch skips the rescan code if we were going to fall back to the block time anyway, so shouldn't change the logic.\r\n\r\nOn a wallet with around 180,000 keys (500 MB, so pretty large) this sped up the resync time 20x from about 10 hours to 30 minutes.",
   "closed_at" : "2016-03-17T07:55:29Z",
   "closed_by" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
      "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
      "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/jonasschnelli",
      "id" : 178464,
      "login" : "jonasschnelli",
      "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
      "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
      "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/jonasschnelli"
   },
   "comments" : 20,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6850/comments",
   "created_at" : "2015-10-18T19:32:14Z",
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6850/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/pull/6850",
   "id" : 112036587,
   "labels" : [
      {
         "color" : "02d7e1",
         "name" : "Wallet",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/Wallet"
      }
   ],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6850/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "number" : 6850,
   "pull_request" : {
      "diff_url" : "https://github.com/bitcoin/bitcoin/pull/6850.diff",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6850",
      "patch_url" : "https://github.com/bitcoin/bitcoin/pull/6850.patch",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6850"
   },
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "closed",
   "title" : "Improve AddToWallet performance when rescanning",
   "updated_at" : "2016-03-17T07:55:29Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6850",
   "user" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/15180124?v=3",
      "events_url" : "https://api.github.com/users/bittylicious/events{/privacy}",
      "followers_url" : "https://api.github.com/users/bittylicious/followers",
      "following_url" : "https://api.github.com/users/bittylicious/following{/other_user}",
      "gists_url" : "https://api.github.com/users/bittylicious/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/bittylicious",
      "id" : 15180124,
      "login" : "bittylicious",
      "organizations_url" : "https://api.github.com/users/bittylicious/orgs",
      "received_events_url" : "https://api.github.com/users/bittylicious/received_events",
      "repos_url" : "https://api.github.com/users/bittylicious/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/bittylicious/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/bittylicious/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/bittylicious"
   }
}
