[
   {
      "body" : "The default zap keeps metadata, right? \r\n\r\nThe throw-away-everything variant could probably be changed to a salvagewallet mode, or even better moved to an external tool e.g. #8745).",
      "created_at" : "2016-12-05T11:50:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/9275#issuecomment-264835330",
      "id" : 264835330,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9275",
      "updated_at" : "2016-12-05T11:53:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/264835330",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "I agree it should backup the wallet.\r\n\r\n`-zapwallettxes(=1)` does keep the metadata. Though, the transactions(-metadata) are hold in memory during the time of the wallet-recreation, if something goes wrong there, all tx-metadata is lost.\r\n\r\n`-zapwallettxes(=2)` does always erase metadata thus backup in a such case would be desirable.",
      "created_at" : "2016-12-05T12:46:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/9275#issuecomment-264845538",
      "id" : 264845538,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9275",
      "updated_at" : "2016-12-05T12:46:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/264845538",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "Even keeping the metadata is still a destructive operation-- for all the unconfirmed transactions which don't show back up.\r\n\r\nI encountered someone who was making payments end ended up with dozens of unconfirmed ones at one point before running into the unconfirmed chain limit. When his transactions stopped relaying he responded by running zapwallettxes based on a forum post.\r\n\r\nThis made his wallet forget all the unconfirmed payments. He then continued using the wallet, making more payments, -- some of which doublespent the prior ones.  Resulting in a state where he had no idea what was paid, potentially paid, double paid, or not paid at all.-- or what double-spent with what (since he didn't even know what he'd signed before).\r\n\r\nFortunately in his case he has backed up the wallet first, so the information was all recoverable. But I was horrified enough to open this issue. :)\r\n\r\n",
      "created_at" : "2016-12-09T02:06:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/9275#issuecomment-265913586",
      "id" : 265913586,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9275",
      "updated_at" : "2016-12-09T02:06:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/265913586",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   }
]
