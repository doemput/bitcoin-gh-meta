[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/9243#discussion_r90162901"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9243"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/90162901"
         }
      },
      "body" : "I believe this instantiates a `mapMultiArgs` variable into every .cpp file (all initialized as the same reference).\r\n\r\nThis will work, I think:\r\n```diff\r\nutil.cpp:\r\n map<string, vector<string> > _mapMultiArgs;\r\n+static std::map<std::string, std::vector<std::string> > mapMultiArgs_;\r\n+const std::map<std::string, std::vector<std::string> >& mapMultiArgs = mapMultiArgs;\r\n bool fDebug = false;\r\n\r\nutil.h:\r\n-extern std::map<std::string, std::vector<std::string> > _mapMultiArgs;\r\n-static const std::map<std::string, std::vector<std::string> >& mapMultiArgs = _mapMultiArgs;\r\n+extern const std::map<std::string, std::vector<std::string> >& mapMultiArgs;\r\n extern bool fDebug;\r\n",
      "commit_id" : "c2f61bebb190258753714b29ab2041e80651cec9",
      "created_at" : "2016-11-30T03:24:56Z",
      "diff_hunk" : "@@ -41,8 +41,8 @@ class CTranslationInterface\n     boost::signals2::signal<std::string (const char* psz)> Translate;\n };\n \n-extern std::map<std::string, std::string> mapArgs;\n-extern std::map<std::string, std::vector<std::string> > mapMultiArgs;\n+extern std::map<std::string, std::vector<std::string> > _mapMultiArgs;\n+static const std::map<std::string, std::vector<std::string> >& mapMultiArgs = _mapMultiArgs;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9243#discussion_r90162901",
      "id" : 90162901,
      "original_commit_id" : "98468faedf6a37bccd88ff276235b810b0491d59",
      "original_position" : 7,
      "path" : "src/util.h",
      "position" : null,
      "pull_request_review_id" : 10685773,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9243",
      "updated_at" : "2016-12-27T12:52:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/90162901",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Concept ACK.",
      "created_at" : "2016-11-30T06:11:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9243#issuecomment-263792045",
      "id" : 263792045,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9243",
      "updated_at" : "2016-11-30T06:11:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/263792045",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "Nice.\r\nConcept ACK",
      "created_at" : "2016-11-30T07:41:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9243#issuecomment-263804737",
      "id" : 263804737,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9243",
      "updated_at" : "2016-11-30T07:41:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/263804737",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "utACK 69337dcab02e2e972711781ae1fba7f541d67b17, but needs rebase.\r\n\r\nAlso, maybe the \"Fix calculation of number of bound sockets to use\" commit should be moved to a separate PR; maybe we want to backport it?",
      "created_at" : "2016-12-01T00:32:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9243#issuecomment-264042320",
      "id" : 264042320,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9243",
      "updated_at" : "2016-12-01T00:32:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/264042320",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Rebased and opened #9253, which this is now dependant on (the socket count fix).",
      "created_at" : "2016-12-01T02:57:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9243#issuecomment-264065407",
      "id" : 264065407,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9243",
      "updated_at" : "2016-12-01T02:57:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/264065407",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "utACK https://github.com/bitcoin/bitcoin/pull/9243/commits/14e3df21e067f41b6f624ea7ee25601f87267faa",
      "created_at" : "2016-12-01T16:57:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9243#issuecomment-264228796",
      "id" : 264228796,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9243",
      "updated_at" : "2016-12-01T16:57:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/264228796",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=3",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "body" : "This seems incompatible with #8994 , if there's any suggestions there, specifically regarding 5cc59df0dce56c9393b2bd1af773d708bb76a3cb (aka \"Globals: Allow to parse arguments without implicitly using the argMap globa\"l), that would be welcomed.",
      "created_at" : "2016-12-02T09:27:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9243#issuecomment-264410565",
      "id" : 264410565,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9243",
      "updated_at" : "2016-12-02T09:33:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/264410565",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/9243#discussion_r90673400"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9243"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/90673400"
         }
      },
      "body" : "github-web-view-Nit: Needs this patch removed after c1a52276848d8caa9a9789dff176408c1aa6b1ed\r\n\r\n(I think you can push an empty commit and then remove it by force push, to get this removed from the web view)\r\n",
      "commit_id" : "c2f61bebb190258753714b29ab2041e80651cec9",
      "created_at" : "2016-12-02T16:27:41Z",
      "diff_hunk" : "@@ -859,7 +859,9 @@ bool AppInitParameterInteraction()\n     }\n \n     // Make sure enough file descriptors are available\n-    int nBind = std::max((int)mapArgs.count(\"-bind\") + (int)mapArgs.count(\"-whitebind\"), 1);\n+    int nBind = std::max(\n+                (mapMultiArgs.count(\"-bind\") ? mapMultiArgs.at(\"-bind\").size() : 0) +\n+                (mapMultiArgs.count(\"-whitebind\") ? mapMultiArgs.at(\"-whitebind\").size() : 0), size_t(1));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9243#discussion_r90673400",
      "id" : 90673400,
      "original_commit_id" : "14e3df21e067f41b6f624ea7ee25601f87267faa",
      "original_position" : 45,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_review_id" : 11192918,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9243",
      "updated_at" : "2016-12-27T12:52:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/90673400",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=3",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "body" : "utACK 14e3df21e067f41b6f624ea7ee25601f87267faa",
      "created_at" : "2016-12-02T17:01:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9243#issuecomment-264505002",
      "id" : 264505002,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9243",
      "updated_at" : "2016-12-02T17:01:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/264505002",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=3",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "body" : "@jtimon I think for things which are their own classes, they should either have the arguments they care about passed into the constructor, or passed in when they need them (eg the way mempool limiting is done now). The concept of a map from arguments to values is inherintly Bitcoin Core-specific, so inherintly global.",
      "created_at" : "2016-12-02T18:17:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9243#issuecomment-264523375",
      "id" : 264523375,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9243",
      "updated_at" : "2016-12-02T18:17:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/264523375",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : ">  I think for things which are their own classes, they should either have the arguments they care about passed into the constructor, or passed in when they need them (eg the way mempool limiting is done now)\r\n\r\nI think it is better to discuss the different options for Chainparams in #8994 (I've been trying to do something similar for the never created policy class for very long too), I will answer to this there.\r\n\r\n> The concept of a map from arguments to values is inherently Bitcoin Core-specific, so inherently global.\r\n\r\nHuh? Anything that is specific to Bitcoin Core is \"inherently global\"?\r\nGlobals are widely recognized in software engineering as a bad practice, and are never strictly necessary.\r\nThey may be the cleanest or more convenient solution to a specific problem in a given code base, so it may make sense to argue in favor of them in terms of convenience or, in this case maybe, also in terms of encapsulation. But saying any variable in any system is \"inherently global\" makes no sense to me at all.\r\n",
      "created_at" : "2016-12-02T22:05:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9243#issuecomment-264575174",
      "id" : 264575174,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9243",
      "updated_at" : "2016-12-02T22:05:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/264575174",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "body" : "By \"inherently global\", I mean that eg mapArgs probably should not exist in anything like libbitcoinconsensus, and, generally, can just be a global that is queries when things are initialized and then the parameters fed into the object which cares about them.",
      "created_at" : "2016-12-02T22:19:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9243#issuecomment-264577910",
      "id" : 264577910,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9243",
      "updated_at" : "2016-12-02T22:19:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/264577910",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "Right, I agree it should not exist in  libbitcoinconsensus.\r\nAnd agree mapArgs and mapMultiArgs should be initialized once while initializing and then never edit them again.\r\nI don't see the problem with passing mapArgs and/or mapMultiArgs as const to a class constructor for future extensibility, but if you think that passing the only arguments they care about is cleaner, that's not what you are doing in https://github.com/bitcoin/bitcoin/pull/9243/commits/e87822043d4118d1b02d066ee213d341af3ff4e9 you're making the zmq code rely more on globals for no good reason that I can see.\r\n\r\nIf mapArgs and mapMultiArgs are initialized once and afterwards only accessed as const (perhaps similarly to what chainparams.o is doing with InitParams and const CChainParams& Params() or what is being done in https://github.com/bitcoin/bitcoin/pull/9243/commits/31f576bd8ac35a912ef5f5315d39c0faeadb1f4b ), I don't see how could there be any concurrency issues or why a new lock would be needed.\r\n\r\nI also don't understand why this PR isn't consistent in its treatment of mapArgs and mapMultiArgs (one is hidden, the other can be accessed as const).\r\n\r\nAlthough I like many of the changes in this PR, until I understand some of the decisions, concept NACK.\r\n\r\n\r\n",
      "created_at" : "2016-12-02T22:39:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9243#issuecomment-264581781",
      "id" : 264581781,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9243",
      "updated_at" : "2016-12-02T22:41:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/264581781",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "body" : "The contents of e87822043d4118d1b02d066ee213d341af3ff4e9 are less about passing around a map (which is, itself, kinda insane) and more about cleaning up the insane argument-parsing monstrosity in the zmq stuff.\r\n\r\nAs for generally, I dont get your crusade against globals. Some things, like arguments, simply /are/ globals. In places where we want isolated chunks for testing, those isolated chunks shouldn't be given a list of all arguments passed to the program, they should be given the arguments that they care about.\r\n\r\nNote that mapArgs stuff isnt exclusively accessed in a clean order...theres a bunch of Qt initialization that I dont know when its called (and I believe there is some incorrect behavior in init as well), nor do I care - adding a lock has almost 0 overhead (we're already inexing into a map anyway) when there is no contention and its much more obviously correct and harder to fuck up in the future.\r\n\r\nAs for mapArgs/mapMultiArgs - I could add accessors to mapMultiArgs, but it has to return the vector of arguments anyway, so I see little point. Feel free to clean it up in a separate PR.",
      "created_at" : "2016-12-02T22:49:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9243#issuecomment-264583672",
      "id" : 264583672,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9243",
      "updated_at" : "2016-12-02T22:49:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/264583672",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "> The contents of e878220 are less about passing around a map (which is, itself, kinda insane) and more about cleaning up the insane argument-parsing monstrosity in the zmq stuff.\r\n\r\nI don't see how using something implicitly is any more sane than passing it explicitly.\r\n\r\n> As for generally, I dont get your crusade against globals. Some things, like arguments, simply /are/ globals.\r\n\r\nNo, global variables are never strictly necessary, they are always a design choice (which doesn't mean is always a bad choice, but it usually is in my experience).\r\n\r\n> In places where we want isolated chunks for testing, those isolated chunks shouldn't be given a list of all arguments passed to the program, they should be given the arguments that they care about.\r\n\r\nIf you want to test the old CZMQNotificationInterface::Create(&args) you can create your own map and only setting the values that it cares about. If you want to impede it from using other args that it should not care about, you are not achieving that with the hidden global accessible from everywhere.\r\n\r\n > Note that mapArgs stuff isn't exclusively accessed in a clean order [...]\r\n\r\nOk, that's a good reason to use the lock, at least as a short term clean solution. I was forgetting qt setting args after initialization, thanks. Concept ACK.\r\n",
      "created_at" : "2016-12-02T23:35:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9243#issuecomment-264591521",
      "id" : 264591521,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9243",
      "updated_at" : "2016-12-02T23:36:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/264591521",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "body" : "The problem with the ZMQ stuff is less that its being passed the list of all arguments in the world, and more that it bends over backwards to use map operations to look up 4 elements...\r\n\r\nNote that this PR isnt about creating an \"ideal design\" it is about fixing actual race conditions (ok, admittedly that arent a big deal) in mapArgs accessing as used in the codebase today. Eventually mapArgs will only exist in init.cpp and the relevant args passed around to different submodules as neccessary, but for now, this makes it obviously safe.",
      "created_at" : "2016-12-02T23:45:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9243#issuecomment-264592972",
      "id" : 264592972,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9243",
      "updated_at" : "2016-12-02T23:45:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/264592972",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "re zmq: I understand you considered two different \"problems\":\r\n1) Not considering the code for retrieving the values elegant. I guess of the ugly use of const_iterator just as the simplest way to comply with the parameter map being const instead of using the global (not the implementor, see below). Or maybe the \"hackish\" way in which the keys for the args are constructed using string manipulation, but you're maintaining that in https://github.com/bitcoin/bitcoin/pull/9243/commits/e87822043d4118d1b02d066ee213d341af3ff4e9#diff-ae0c52c7aa40615ed94ef5603b768010R45 \r\n\r\n2) You also consider that passing all the args to the constructor was a bad idea in the first place. In defense of the implementor, IIRC it was me who asked for this. Because I think it's the way forwards for zmq, chainparams, \"policy\" and wallet not to depend on util globals (which is not a priority since none of these parts should be used in the consensus module anyway). In this reward I've been looking for feedback for very long and very much welcome it in any of these PRs: #8994 #7820 https://github.com/bitcoin/bitcoin/pull/7557#issuecomment-189479930 #6068  #5595\r\nBut if I understood your ideal design described here, functions should get all parameters they care about explicitly. Without necessarily disagreeing (I think it depends on the case), in the case of  CZMQNotificationInterface::Create that would imply to take 4 values for \"std::string address\" in the loop explicitly, which is something you're not doing in this PR (not asking you to do so, just pointing it out).\r\nWhat I would be very thankful of if you could change in that commit is replacing \"garbage\" for something more specific about what you don't like about it, if not for the shake of clarity, just out of respect for other contributors. Don't want to sound patronizing, I believe I make this same mistake very often when finding things I don't like and I don't know the history about.\r\n\r\n> Note that this PR isnt about creating an \"ideal design\" it is about fixing actual race conditions in mapArgs accessing as used in the codebase today. \r\n\r\nI'm very sorry for overreacting by misinterpreting this as an \"ideal design\" without joining what I understand as an ongoing discussion. For example, @MarcoFalke seems to be ok with passing the argsMap explicitly where we can, as long as the 2 maps were hidden behind a class first, which I wasn't very fond of at first, but I think makes sense. Also, somewhere in #5595 had an idea for making a dynamic qt form for configuring policy from an argMap and something like my std::vector<std::pair<std::string, std::string> > CDefaultPolicy::GetOptionsHelp() (something like in https://github.com/bitcoin/bitcoin/pull/7820/files#diff-d22bc3e058f8982972e2eb381a1df668R261 but with a single thing looks ridiculous). I loved that idea, and thought it was extensible for other things (and I'm all fine with these new options requiring restart). Anyway, as said, I'm happy to keep discussing this but this is not the place and I already disrupted the thread of this PR enough.\r\n\r\n>  (ok, admittedly that arent a big deal) \r\n\r\nJust as globals, \"known\" race conditions make reasoning about how the system works harder.\r\nI agree that removing those, no matter how \"big deal\" they are, should take preference over reducing the use of globals. I just wasn't convinced we couldn't do it without the new lock with a few more lines, but now I'm convinced adding the lock is the most straightforward way to solve the issue.\r\n\r\n> Eventually mapArgs will only exist in init.cpp and the relevant args passed around to different submodules as neccessary, but for now, this makes it obviously safe.\r\n\r\nI agree that in many cases this is what makes the most sense, but we shouldn't disregard \"shortcuts\" like Consensus::Params, chainparams, policy...(again, probably not to discuss in this PR, I'm making too much noise in this PR already).\r\n\r\n ",
      "created_at" : "2016-12-03T05:10:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9243#issuecomment-264617380",
      "id" : 264617380,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9243",
      "updated_at" : "2016-12-03T05:10:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/264617380",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "body" : "Needs rebase.",
      "created_at" : "2016-12-03T09:16:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9243#issuecomment-264627750",
      "id" : 264627750,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9243",
      "updated_at" : "2016-12-03T09:16:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/264627750",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "Rebased. @jtimon I suppose we dont really strongly disagree on the goal, though maybe disagree on how to get there. Can we leave that for another PR and take this as-is to fix the issues that we have now?",
      "created_at" : "2016-12-03T22:06:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9243#issuecomment-264668755",
      "id" : 264668755,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9243",
      "updated_at" : "2016-12-03T22:06:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/264668755",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "ACK.",
      "created_at" : "2016-12-05T07:19:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9243#issuecomment-264783685",
      "id" : 264783685,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9243",
      "updated_at" : "2016-12-05T07:19:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/264783685",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "ACK on wrapping the accesses.\r\n\r\nI'm surprised that a lock is needed here, I assumed the arguments were read-only after initialization.\r\n\r\nAnyhow there shouldn't be any argument accesses in an inner loop where overhead matters so adding the lock just in case makes sense, I guess.\r\n\r\n> The problem with the ZMQ stuff is less that its being passed the list of all arguments in the world, and more that it bends over backwards to use map operations to look up 4 elements...\r\n\r\nYes the ZMQ argument parsing loop is silly. I fixed that once, as part of the mempool notifications, but it never got merged.\r\n",
      "created_at" : "2016-12-05T07:33:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9243#issuecomment-264785516",
      "id" : 264785516,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9243",
      "updated_at" : "2016-12-05T07:34:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/264785516",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "reACK 62b8ba5f0a3d22e0dfcef9a3e1e7fa5c3f48b5ce",
      "created_at" : "2016-12-06T21:33:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9243#issuecomment-265279364",
      "id" : 265279364,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9243",
      "updated_at" : "2016-12-06T21:33:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/265279364",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=3",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "body" : "Needs a rebase in DoS_tests.",
      "created_at" : "2016-12-08T12:41:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9243#issuecomment-265731199",
      "id" : 265731199,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9243",
      "updated_at" : "2016-12-08T12:41:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/265731199",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Rebased.",
      "created_at" : "2016-12-24T02:36:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9243#issuecomment-269065124",
      "id" : 269065124,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9243",
      "updated_at" : "2016-12-24T02:36:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/269065124",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/9243#discussion_r93814857"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9243"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/93814857"
         }
      },
      "body" : "If we're going to still have it in the tests, why not keep having it declared in one place (util.h) instead of at least 4 places?",
      "commit_id" : "c2f61bebb190258753714b29ab2041e80651cec9",
      "created_at" : "2016-12-24T09:02:13Z",
      "diff_hunk" : "@@ -19,6 +19,8 @@\n \n using namespace std;\n \n+extern map<string, string> mapArgs;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9243#discussion_r93814857",
      "id" : 93814857,
      "original_commit_id" : "c69c9a7f33cd3ccfef4a5659a42d46104d16a905",
      "original_position" : 4,
      "path" : "src/test/util_tests.cpp",
      "position" : 4,
      "pull_request_review_id" : 14351440,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9243",
      "updated_at" : "2016-12-27T12:52:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/93814857",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "body" : "> Yes the ZMQ argument parsing loop is silly\r\n\r\nNote that silly loop hasn't been removed here.\r\nI still don't see what \"garbage\" is being cleaned up in https://github.com/bitcoin/bitcoin/pull/9243/commits/61444322f36fdbf9ff5ba1a3d8382f9c892da8d8 \r\n\r\nutACK 87a6f1d (although as previously said I still don't like some commit messages and I left another comment).\r\n",
      "created_at" : "2016-12-24T09:03:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9243#issuecomment-269076101",
      "id" : 269076101,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9243",
      "updated_at" : "2016-12-24T09:03:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/269076101",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/9243#discussion_r93818683"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9243"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/93818683"
         }
      },
      "body" : "Removed it from three of the four by adding a ForceSetArg method for testing.",
      "commit_id" : "c2f61bebb190258753714b29ab2041e80651cec9",
      "created_at" : "2016-12-24T16:11:31Z",
      "diff_hunk" : "@@ -19,6 +19,8 @@\n \n using namespace std;\n \n+extern map<string, string> mapArgs;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9243#discussion_r93818683",
      "id" : 93818683,
      "original_commit_id" : "c69c9a7f33cd3ccfef4a5659a42d46104d16a905",
      "original_position" : 4,
      "path" : "src/test/util_tests.cpp",
      "position" : 4,
      "pull_request_review_id" : 14354989,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9243",
      "updated_at" : "2016-12-27T12:52:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/93818683",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "OK, retitled that commit to make you happy, but at some point someone needs to go back and clean up that stuff.",
      "created_at" : "2016-12-24T16:12:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9243#issuecomment-269090302",
      "id" : 269090302,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9243",
      "updated_at" : "2016-12-24T16:12:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/269090302",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "I would have been happy with just renaming the commit message, or explaining further what garbage were you cleaning, but thanks. No opposition on removing getArg from the loop, but you maintained the loop and everything which was supposedly wrong with it (except from passing mapArgs as arguments, which is the art you wanted to remove I think).",
      "created_at" : "2016-12-24T20:14:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9243#issuecomment-269098660",
      "id" : 269098660,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9243",
      "updated_at" : "2016-12-24T20:14:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/269098660",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "body" : "Fixed @dcousens' comments from https://github.com/bitcoin/bitcoin/pull/9419#discussion_r93908981",
      "created_at" : "2016-12-27T12:53:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9243#issuecomment-269322221",
      "id" : 269322221,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9243",
      "updated_at" : "2016-12-27T12:53:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/269322221",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "utACK c2f61be,  and thanks for linking me @TheBlueMatt",
      "created_at" : "2016-12-27T13:15:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9243#issuecomment-269324445",
      "id" : 269324445,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9243",
      "updated_at" : "2016-12-27T13:15:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/269324445",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/413395?v=3",
         "events_url" : "https://api.github.com/users/dcousens/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dcousens/followers",
         "following_url" : "https://api.github.com/users/dcousens/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dcousens/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dcousens",
         "id" : 413395,
         "login" : "dcousens",
         "organizations_url" : "https://api.github.com/users/dcousens/orgs",
         "received_events_url" : "https://api.github.com/users/dcousens/received_events",
         "repos_url" : "https://api.github.com/users/dcousens/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dcousens/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dcousens/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dcousens"
      }
   },
   {
      "body" : "utACK c2f61bebb190258753714b29ab2041e80651cec9",
      "created_at" : "2016-12-27T18:07:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9243#issuecomment-269361149",
      "id" : 269361149,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9243",
      "updated_at" : "2016-12-27T18:07:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/269361149",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Thank you, this will hirt less the faster it is imo.\n\nOn 27 Dec 2016 19:17, \"Pieter Wuille\" <notifications@github.com> wrote:\n\n> Merged #9243 <https://github.com/bitcoin/bitcoin/pull/9243>.\n>\n> Ã¢ÂÂ\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/bitcoin/bitcoin/pull/9243#event-905908891>, or mute\n> the thread\n> <https://github.com/notifications/unsubscribe-auth/AA9jSu-ji0J3ZdPwz4-8SGdcbYpBK71Lks5rMVZVgaJpZM4K_wjb>\n> .\n>\n",
      "created_at" : "2016-12-27T23:21:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9243#issuecomment-269396943",
      "id" : 269396943,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9243",
      "updated_at" : "2016-12-27T23:21:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/269396943",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   }
]
