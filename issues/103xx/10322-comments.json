[
   {
      "body" : "utACK. Consider adding a unit test that calls it twice, with a sleep and makes sure the value changes?",
      "created_at" : "2017-05-03T01:25:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10322#issuecomment-298804130",
      "id" : 298804130,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10322",
      "updated_at" : "2017-05-03T01:25:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/298804130",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10322#discussion_r114461456"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10322"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114461456"
         }
      },
      "body" : "Maybe link to https://en.wikipedia.org/wiki/Time_Stamp_Counter for readers that don't know what this could be?\r\n\r\nAlso,  I couldn't find a description on the constraints `a` or `d`,  I assume they are just writing to the inline variables `r1` and `r2`,  but I found documentation on this to be difficult to find.\r\n\r\nAlso,  is `volatile` necessary?  It doesn't hurt I suppose?",
      "commit_id" : "2c0a6f157da3c6bb3b0a1e77f003caf0d9cb9d6c",
      "created_at" : "2017-05-03T01:43:34Z",
      "diff_hunk" : "@@ -43,15 +43,21 @@ static void RandFailure()\n \n static inline int64_t GetPerformanceCounter()\n {\n-    int64_t nCounter = 0;\n-#ifdef WIN32\n-    QueryPerformanceCounter((LARGE_INTEGER*)&nCounter);\n+#if defined(_MSC_VER)\n+    return __rdtsc();\n+#elif defined(__i386__)\n+    uint64_t r;\n+    __asm__ volatile (\"rdtsc\" : \"=A\"(r));\n+    return r;\n+#elif defined(__x86_64__) || defined(__amd64__)\n+    uint64_t r1, r2;\n+    __asm__ volatile (\"rdtsc\" : \"=a\"(r1), \"=d\"(r2));\n+    return (r2 << 32) | r1;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10322#discussion_r114461456",
      "id" : 114461456,
      "original_commit_id" : "69e03dd7cad0bfc863633103e2f536977fb80ae5",
      "original_position" : 16,
      "path" : "src/random.cpp",
      "position" : null,
      "pull_request_review_id" : 35928791,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10322",
      "updated_at" : "2017-05-05T18:56:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114461456",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/413395?v=3",
         "events_url" : "https://api.github.com/users/dcousens/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dcousens/followers",
         "following_url" : "https://api.github.com/users/dcousens/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dcousens/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dcousens",
         "id" : 413395,
         "login" : "dcousens",
         "organizations_url" : "https://api.github.com/users/dcousens/orgs",
         "received_events_url" : "https://api.github.com/users/dcousens/received_events",
         "repos_url" : "https://api.github.com/users/dcousens/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dcousens/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dcousens/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dcousens"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10322#discussion_r114461743"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10322"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114461743"
         }
      },
      "body" : "If resuming from hibernation,  might this counter be,  or close to, zero?",
      "commit_id" : "2c0a6f157da3c6bb3b0a1e77f003caf0d9cb9d6c",
      "created_at" : "2017-05-03T01:47:18Z",
      "diff_hunk" : "@@ -43,15 +43,21 @@ static void RandFailure()\n \n static inline int64_t GetPerformanceCounter()\n {\n-    int64_t nCounter = 0;\n-#ifdef WIN32\n-    QueryPerformanceCounter((LARGE_INTEGER*)&nCounter);\n+#if defined(_MSC_VER)\n+    return __rdtsc();\n+#elif defined(__i386__)\n+    uint64_t r;\n+    __asm__ volatile (\"rdtsc\" : \"=A\"(r));\n+    return r;\n+#elif defined(__x86_64__) || defined(__amd64__)\n+    uint64_t r1, r2;\n+    __asm__ volatile (\"rdtsc\" : \"=a\"(r1), \"=d\"(r2));\n+    return (r2 << 32) | r1;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10322#discussion_r114461743",
      "id" : 114461743,
      "original_commit_id" : "69e03dd7cad0bfc863633103e2f536977fb80ae5",
      "original_position" : 16,
      "path" : "src/random.cpp",
      "position" : null,
      "pull_request_review_id" : 35929075,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10322",
      "updated_at" : "2017-05-05T18:56:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114461743",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/413395?v=3",
         "events_url" : "https://api.github.com/users/dcousens/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dcousens/followers",
         "following_url" : "https://api.github.com/users/dcousens/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dcousens/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dcousens",
         "id" : 413395,
         "login" : "dcousens",
         "organizations_url" : "https://api.github.com/users/dcousens/orgs",
         "received_events_url" : "https://api.github.com/users/dcousens/received_events",
         "repos_url" : "https://api.github.com/users/dcousens/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dcousens/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dcousens/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dcousens"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10322#discussion_r114462518"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10322"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114462518"
         }
      },
      "body" : "I added some comments, but I don't think this warrants a full explanation of extended asm syntax in comments.\r\n\r\n> Also, I couldn't find a description on the constraints a or d, I assume they are just writing to the inline variables r1 and r2, but I found documentation on this to be difficult to find.\r\n\r\nSee https://gcc.gnu.org/onlinedocs/gcc-4.9.0/gcc/Machine-Constraints.html#Machine-Constraints\r\n\r\n\"A\" is the ax:dx register pair, so on x86 we constrain the `r` variable to be 64 bits consisting of 32 bits in ax and 32 bits in dx. Since rdtsc always stores its result in ax/dx, we get the correct result in the C++ variable r. \"a\" and \"d\" just constrain to the (r)ax and (r)dx registers, which is where the individual parts of the rdtsc result are stored on x86_64.\r\n\r\n> Also, is volatile necessary? It doesn't hurt I suppose?\r\n\r\nIt's there to limit the optimizations the compiler can apply to the assembly block. See https://gcc.gnu.org/onlinedocs/gcc/Extended-Asm.html#Volatile\r\n",
      "commit_id" : "2c0a6f157da3c6bb3b0a1e77f003caf0d9cb9d6c",
      "created_at" : "2017-05-03T01:59:24Z",
      "diff_hunk" : "@@ -43,15 +43,21 @@ static void RandFailure()\n \n static inline int64_t GetPerformanceCounter()\n {\n-    int64_t nCounter = 0;\n-#ifdef WIN32\n-    QueryPerformanceCounter((LARGE_INTEGER*)&nCounter);\n+#if defined(_MSC_VER)\n+    return __rdtsc();\n+#elif defined(__i386__)\n+    uint64_t r;\n+    __asm__ volatile (\"rdtsc\" : \"=A\"(r));\n+    return r;\n+#elif defined(__x86_64__) || defined(__amd64__)\n+    uint64_t r1, r2;\n+    __asm__ volatile (\"rdtsc\" : \"=a\"(r1), \"=d\"(r2));\n+    return (r2 << 32) | r1;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10322#discussion_r114462518",
      "id" : 114462518,
      "original_commit_id" : "69e03dd7cad0bfc863633103e2f536977fb80ae5",
      "original_position" : 16,
      "path" : "src/random.cpp",
      "position" : null,
      "pull_request_review_id" : 35929894,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10322",
      "updated_at" : "2017-05-05T18:56:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114462518",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10322#discussion_r114462723"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10322"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114462723"
         }
      },
      "body" : "> If resuming from hibernation, might this counter be, or close to, zero?\r\n\r\nI don't think that's a concern. It's still a fine entropy source. This thing counts in clock cycles (~nanoseconds and less, usually). If an attacker knows how many nanoseconds ago your last wakeup from hibernation was, you probably have bigger problems.",
      "commit_id" : "2c0a6f157da3c6bb3b0a1e77f003caf0d9cb9d6c",
      "created_at" : "2017-05-03T02:01:28Z",
      "diff_hunk" : "@@ -43,15 +43,21 @@ static void RandFailure()\n \n static inline int64_t GetPerformanceCounter()\n {\n-    int64_t nCounter = 0;\n-#ifdef WIN32\n-    QueryPerformanceCounter((LARGE_INTEGER*)&nCounter);\n+#if defined(_MSC_VER)\n+    return __rdtsc();\n+#elif defined(__i386__)\n+    uint64_t r;\n+    __asm__ volatile (\"rdtsc\" : \"=A\"(r));\n+    return r;\n+#elif defined(__x86_64__) || defined(__amd64__)\n+    uint64_t r1, r2;\n+    __asm__ volatile (\"rdtsc\" : \"=a\"(r1), \"=d\"(r2));\n+    return (r2 << 32) | r1;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10322#discussion_r114462723",
      "id" : 114462723,
      "original_commit_id" : "69e03dd7cad0bfc863633103e2f536977fb80ae5",
      "original_position" : 16,
      "path" : "src/random.cpp",
      "position" : null,
      "pull_request_review_id" : 35930095,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10322",
      "updated_at" : "2017-05-05T18:56:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114462723",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10322#discussion_r114464323"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10322"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114464323"
         }
      },
      "body" : "Thanks for the explanations and links @sipa,  I had been searching for that list but couldn't find it.",
      "commit_id" : "2c0a6f157da3c6bb3b0a1e77f003caf0d9cb9d6c",
      "created_at" : "2017-05-03T02:28:36Z",
      "diff_hunk" : "@@ -43,15 +43,21 @@ static void RandFailure()\n \n static inline int64_t GetPerformanceCounter()\n {\n-    int64_t nCounter = 0;\n-#ifdef WIN32\n-    QueryPerformanceCounter((LARGE_INTEGER*)&nCounter);\n+#if defined(_MSC_VER)\n+    return __rdtsc();\n+#elif defined(__i386__)\n+    uint64_t r;\n+    __asm__ volatile (\"rdtsc\" : \"=A\"(r));\n+    return r;\n+#elif defined(__x86_64__) || defined(__amd64__)\n+    uint64_t r1, r2;\n+    __asm__ volatile (\"rdtsc\" : \"=a\"(r1), \"=d\"(r2));\n+    return (r2 << 32) | r1;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10322#discussion_r114464323",
      "id" : 114464323,
      "original_commit_id" : "69e03dd7cad0bfc863633103e2f536977fb80ae5",
      "original_position" : 16,
      "path" : "src/random.cpp",
      "position" : null,
      "pull_request_review_id" : 35931657,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10322",
      "updated_at" : "2017-05-05T18:56:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114464323",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/413395?v=3",
         "events_url" : "https://api.github.com/users/dcousens/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dcousens/followers",
         "following_url" : "https://api.github.com/users/dcousens/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dcousens/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dcousens",
         "id" : 413395,
         "login" : "dcousens",
         "organizations_url" : "https://api.github.com/users/dcousens/orgs",
         "received_events_url" : "https://api.github.com/users/dcousens/received_events",
         "repos_url" : "https://api.github.com/users/dcousens/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dcousens/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dcousens/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dcousens"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10322#discussion_r114677468"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10322"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114677468"
         }
      },
      "body" : "Does MSVC support ARM now?",
      "commit_id" : "2c0a6f157da3c6bb3b0a1e77f003caf0d9cb9d6c",
      "created_at" : "2017-05-03T23:37:52Z",
      "diff_hunk" : "@@ -43,15 +43,24 @@ static void RandFailure()\n \n static inline int64_t GetPerformanceCounter()\n {\n-    int64_t nCounter = 0;\n-#ifdef WIN32\n-    QueryPerformanceCounter((LARGE_INTEGER*)&nCounter);\n+    // Read the hardware time stamp counter when available.\n+    // See https://en.wikipedia.org/wiki/Time_Stamp_Counter for more information.\n+#if defined(_MSC_VER)\n+    return __rdtsc();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10322#discussion_r114677468",
      "id" : 114677468,
      "original_commit_id" : "88f73de0637c41d7b41426ad5e71701c02b6634b",
      "original_position" : 10,
      "path" : "src/random.cpp",
      "position" : null,
      "pull_request_review_id" : 36164337,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10322",
      "updated_at" : "2017-05-05T18:56:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114677468",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10322#discussion_r114680293"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10322"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114680293"
         }
      },
      "body" : "No idea. But their documentation doesn't specify any restrictions on when __rdtsc is available.",
      "commit_id" : "2c0a6f157da3c6bb3b0a1e77f003caf0d9cb9d6c",
      "created_at" : "2017-05-04T00:03:24Z",
      "diff_hunk" : "@@ -43,15 +43,24 @@ static void RandFailure()\n \n static inline int64_t GetPerformanceCounter()\n {\n-    int64_t nCounter = 0;\n-#ifdef WIN32\n-    QueryPerformanceCounter((LARGE_INTEGER*)&nCounter);\n+    // Read the hardware time stamp counter when available.\n+    // See https://en.wikipedia.org/wiki/Time_Stamp_Counter for more information.\n+#if defined(_MSC_VER)\n+    return __rdtsc();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10322#discussion_r114680293",
      "id" : 114680293,
      "original_commit_id" : "88f73de0637c41d7b41426ad5e71701c02b6634b",
      "original_position" : 10,
      "path" : "src/random.cpp",
      "position" : null,
      "pull_request_review_id" : 36167427,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10322",
      "updated_at" : "2017-05-05T18:56:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114680293",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10322#discussion_r114691798"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10322"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114691798"
         }
      },
      "body" : "Looks like it may not be https://docs.microsoft.com/en-us/cpp/intrinsics/rdtsc Maybe move this inside the x86 ifdef checks as well?",
      "commit_id" : "2c0a6f157da3c6bb3b0a1e77f003caf0d9cb9d6c",
      "created_at" : "2017-05-04T02:37:01Z",
      "diff_hunk" : "@@ -43,15 +43,24 @@ static void RandFailure()\n \n static inline int64_t GetPerformanceCounter()\n {\n-    int64_t nCounter = 0;\n-#ifdef WIN32\n-    QueryPerformanceCounter((LARGE_INTEGER*)&nCounter);\n+    // Read the hardware time stamp counter when available.\n+    // See https://en.wikipedia.org/wiki/Time_Stamp_Counter for more information.\n+#if defined(_MSC_VER)\n+    return __rdtsc();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10322#discussion_r114691798",
      "id" : 114691798,
      "original_commit_id" : "88f73de0637c41d7b41426ad5e71701c02b6634b",
      "original_position" : 10,
      "path" : "src/random.cpp",
      "position" : null,
      "pull_request_review_id" : 36179434,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10322",
      "updated_at" : "2017-05-05T18:56:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114691798",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10322#discussion_r114691811"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10322"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114691811"
         }
      },
      "body" : "(Compare to https://msdn.microsoft.com/en-us/library/wfd9z0bb.aspx",
      "commit_id" : "2c0a6f157da3c6bb3b0a1e77f003caf0d9cb9d6c",
      "created_at" : "2017-05-04T02:37:13Z",
      "diff_hunk" : "@@ -43,15 +43,24 @@ static void RandFailure()\n \n static inline int64_t GetPerformanceCounter()\n {\n-    int64_t nCounter = 0;\n-#ifdef WIN32\n-    QueryPerformanceCounter((LARGE_INTEGER*)&nCounter);\n+    // Read the hardware time stamp counter when available.\n+    // See https://en.wikipedia.org/wiki/Time_Stamp_Counter for more information.\n+#if defined(_MSC_VER)\n+    return __rdtsc();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10322#discussion_r114691811",
      "id" : 114691811,
      "original_commit_id" : "88f73de0637c41d7b41426ad5e71701c02b6634b",
      "original_position" : 10,
      "path" : "src/random.cpp",
      "position" : null,
      "pull_request_review_id" : 36179446,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10322",
      "updated_at" : "2017-05-05T18:56:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114691811",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10322#discussion_r114717339"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10322"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114717339"
         }
      },
      "body" : "MSVC has different macros. I've solved it in a way that seems right, but I can't test on MSVC.",
      "commit_id" : "2c0a6f157da3c6bb3b0a1e77f003caf0d9cb9d6c",
      "created_at" : "2017-05-04T08:02:33Z",
      "diff_hunk" : "@@ -43,15 +43,24 @@ static void RandFailure()\n \n static inline int64_t GetPerformanceCounter()\n {\n-    int64_t nCounter = 0;\n-#ifdef WIN32\n-    QueryPerformanceCounter((LARGE_INTEGER*)&nCounter);\n+    // Read the hardware time stamp counter when available.\n+    // See https://en.wikipedia.org/wiki/Time_Stamp_Counter for more information.\n+#if defined(_MSC_VER)\n+    return __rdtsc();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10322#discussion_r114717339",
      "id" : 114717339,
      "original_commit_id" : "88f73de0637c41d7b41426ad5e71701c02b6634b",
      "original_position" : 10,
      "path" : "src/random.cpp",
      "position" : null,
      "pull_request_review_id" : 36205454,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10322",
      "updated_at" : "2017-05-05T18:56:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114717339",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Switched to using C++11 `std::high_precision_clock` instead of `gettimeofday` (which on Linux and OSX seems to use a nanosecond precision timer, and microsecond precision in MinGW).",
      "created_at" : "2017-05-04T08:03:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10322#issuecomment-299120678",
      "id" : 299120678,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10322",
      "updated_at" : "2017-05-04T16:59:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/299120678",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "utACK de485d50f9fc647407acd848856bacf108b87172",
      "created_at" : "2017-05-04T14:54:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10322#issuecomment-299209728",
      "id" : 299209728,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10322",
      "updated_at" : "2017-05-04T14:54:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/299209728",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "> Consider adding a unit test that calls it twice, with a sleep and makes sure the value changes?\r\n\r\nBetter yet, make this a runtime sanity check?",
      "created_at" : "2017-05-04T18:50:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10322#issuecomment-299275843",
      "id" : 299275843,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10322",
      "updated_at" : "2017-05-04T18:50:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/299275843",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/417043?v=3",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "body" : "> Better yet, make this a runtime sanity check?\n\nThat's both more powerful and easy. However, how long do we sleep? Is a 10ms slowdown at startup acceptable?",
      "created_at" : "2017-05-04T18:52:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10322#issuecomment-299276344",
      "id" : 299276344,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10322",
      "updated_at" : "2017-05-04T18:52:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/299276344",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10322#discussion_r114860036"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10322"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114860036"
         }
      },
      "body" : "Mind initializing these? IIRC valgrind isn't always able to follow inline asm and reports uninitialized values.",
      "commit_id" : "2c0a6f157da3c6bb3b0a1e77f003caf0d9cb9d6c",
      "created_at" : "2017-05-04T18:53:23Z",
      "diff_hunk" : "@@ -43,15 +44,22 @@ static void RandFailure()\n \n static inline int64_t GetPerformanceCounter()\n {\n-    int64_t nCounter = 0;\n-#ifdef WIN32\n-    QueryPerformanceCounter((LARGE_INTEGER*)&nCounter);\n+    // Read the hardware time stamp counter when available.\n+    // See https://en.wikipedia.org/wiki/Time_Stamp_Counter for more information.\n+#if defined(_MSC_VER) && (defined(_M_IX86) || defined(_M_X64))\n+    return __rdtsc();\n+#elif !defined(_MSC_VER) && defined(__i386__)\n+    uint64_t r;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10322#discussion_r114860036",
      "id" : 114860036,
      "original_commit_id" : "de485d50f9fc647407acd848856bacf108b87172",
      "original_position" : 20,
      "path" : "src/random.cpp",
      "position" : null,
      "pull_request_review_id" : 36356353,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10322",
      "updated_at" : "2017-05-05T18:56:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114860036",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/417043?v=3",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "body" : "How about comparing values taken from beginning/end of the sanity checks?",
      "created_at" : "2017-05-04T18:58:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10322#issuecomment-299277917",
      "id" : 299277917,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10322",
      "updated_at" : "2017-05-04T18:58:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/299277917",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/417043?v=3",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "body" : "> Is a 10ms slowdown at startup acceptable?\r\n\r\nIf it was,  you could run this in an alternate thread?",
      "created_at" : "2017-05-05T00:13:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10322#issuecomment-299343046",
      "id" : 299343046,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10322",
      "updated_at" : "2017-05-05T00:13:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/299343046",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/413395?v=3",
         "events_url" : "https://api.github.com/users/dcousens/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dcousens/followers",
         "following_url" : "https://api.github.com/users/dcousens/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dcousens/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dcousens",
         "id" : 413395,
         "login" : "dcousens",
         "organizations_url" : "https://api.github.com/users/dcousens/orgs",
         "received_events_url" : "https://api.github.com/users/dcousens/received_events",
         "repos_url" : "https://api.github.com/users/dcousens/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dcousens/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dcousens/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dcousens"
      }
   },
   {
      "body" : "Just sleep 1ms, if it doesnt advance (because you only have a millisecond clock on your hardware) you're probably not on a machine that will ever finish chainsync anyway.",
      "created_at" : "2017-05-05T18:07:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10322#issuecomment-299535540",
      "id" : 299535540,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10322",
      "updated_at" : "2017-05-05T18:07:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/299535540",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "> How about comparing values taken from beginning/end of the sanity checks?\r\n\r\n> Just sleep 1ms, if it doesnt advance (because you only have a millisecond clock on your hardware) you're probably not on a machine that will ever finish chainsync anyway.\r\n\r\nDone a combination of both.",
      "created_at" : "2017-05-05T18:32:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10322#issuecomment-299541958",
      "id" : 299541958,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10322",
      "updated_at" : "2017-05-05T18:32:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/299541958",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10322#discussion_r115066042"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10322"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/115066042"
         }
      },
      "body" : "Done.",
      "commit_id" : "2c0a6f157da3c6bb3b0a1e77f003caf0d9cb9d6c",
      "created_at" : "2017-05-05T18:56:38Z",
      "diff_hunk" : "@@ -43,15 +44,22 @@ static void RandFailure()\n \n static inline int64_t GetPerformanceCounter()\n {\n-    int64_t nCounter = 0;\n-#ifdef WIN32\n-    QueryPerformanceCounter((LARGE_INTEGER*)&nCounter);\n+    // Read the hardware time stamp counter when available.\n+    // See https://en.wikipedia.org/wiki/Time_Stamp_Counter for more information.\n+#if defined(_MSC_VER) && (defined(_M_IX86) || defined(_M_X64))\n+    return __rdtsc();\n+#elif !defined(_MSC_VER) && defined(__i386__)\n+    uint64_t r;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10322#discussion_r115066042",
      "id" : 115066042,
      "original_commit_id" : "de485d50f9fc647407acd848856bacf108b87172",
      "original_position" : 20,
      "path" : "src/random.cpp",
      "position" : null,
      "pull_request_review_id" : 36584581,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10322",
      "updated_at" : "2017-05-05T18:56:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/115066042",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "utACK 2c0a6f157da3c6bb3b0a1e77f003caf0d9cb9d6c",
      "created_at" : "2017-05-05T19:34:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10322#issuecomment-299556238",
      "id" : 299556238,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10322",
      "updated_at" : "2017-05-05T19:34:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/299556238",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "Thanks. utACK 2c0a6f157da3c6bb3b0a1e77f003caf0d9cb9d6c",
      "created_at" : "2017-05-08T19:43:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10322#issuecomment-299970169",
      "id" : 299970169,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10322",
      "updated_at" : "2017-05-08T19:43:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/299970169",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/417043?v=3",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "body" : "utACK 2c0a6f157da3c6bb3b0a1e77f003caf0d9cb9d6c",
      "created_at" : "2017-05-09T06:35:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10322#issuecomment-300074310",
      "id" : 300074310,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10322",
      "updated_at" : "2017-05-09T06:35:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/300074310",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   }
]
