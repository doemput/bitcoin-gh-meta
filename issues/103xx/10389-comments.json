[
   {
      "body" : "You can divide `ancestorfees` divided by `ancestorsize` to get the feerate in sat/byte for a transaction including all its dependencies.",
      "created_at" : "2017-05-11T22:32:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/10389#issuecomment-300934812",
      "id" : 300934812,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10389",
      "updated_at" : "2017-05-11T22:32:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/300934812",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "@sipa That's wouldn't take into consideration CPFP\r\n\r\nAssume all transactions are very small, and we have 4 unconf transactions (A, B, C and D):\r\n\r\nA  = 10 satoshis of fees\r\nB  = 100 satoshis of fees  (and depends on A)\r\nC  = 1  satoshi of fees (and depends on B)\r\nD = 1000 satoshis of fees (and depends on B)\r\n\r\n---\r\n\r\nIf we're querying B, what we care about is size/fee of the (A, B, D) set. This is all the ancestors and some (but not all) of the descendants (when they boost the effective fee rate)",
      "created_at" : "2017-05-11T23:49:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/10389#issuecomment-300946555",
      "id" : 300946555,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10389",
      "updated_at" : "2017-05-12T00:04:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/300946555",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/9326759?v=3",
         "events_url" : "https://api.github.com/users/RHavar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/RHavar/followers",
         "following_url" : "https://api.github.com/users/RHavar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/RHavar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/RHavar",
         "id" : 9326759,
         "login" : "RHavar",
         "organizations_url" : "https://api.github.com/users/RHavar/orgs",
         "received_events_url" : "https://api.github.com/users/RHavar/received_events",
         "repos_url" : "https://api.github.com/users/RHavar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/RHavar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/RHavar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/RHavar"
      }
   },
   {
      "body" : "@rhavar I think you may be interested in the `getmempoolancestors` and `getmempooldescendants` rpc calls (introduced in https://github.com/bitcoin/bitcoin/pull/7292).\r\n\r\n>Assume all transactions are very small, and we have 4 unconf transactions (A, B, C and D):\r\n>\r\n>A = 10 satoshis of fees\r\n>B = 100 satoshis of fees (and depends on A)\r\n>C = 1 satoshi of fees (and depends on B)\r\n>D = 1000 satoshis of fees (and depends on B)\r\n\r\nKeep in mind that it's a bit tricky to exactly calculate the \"effective\" feerate of transaction B.  Imagine if A had some other descendant, E, which has a much higher feerate than D.  Then A's effective feerate is actually determined by E, and B's effective feerate is determined only by B and D (since B no longer has to pay for A).\r\n\r\nIf you're interested in transaction B and willing to ignore the effect of descendants of B's ancestors on the effective feerate of B, then I think you could just look at all the descendants of B, and look at the max ancestor feerate of B and each of B's descendants.  Does that seem like it'd be good enough for your use cases?",
      "created_at" : "2017-05-12T01:11:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/10389#issuecomment-300957306",
      "id" : 300957306,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10389",
      "updated_at" : "2017-05-12T01:11:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/300957306",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7463573?v=3",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "body" : "> @RHavar I think you may be interested in the getmempoolancestors and getmempooldescendants rpc calls (introduced in #7292).\r\n\r\nYeah, that's neat. It'll make my code a little simpler, I won't need to dump the whole mempool. It's not ideal though, because I still need to:\r\n\r\ngetmempoolancestors on the transaction, and then loop over all the results with getmempooldescendants  to compile enough information.\r\n\r\n> Keep in mind that it's a bit tricky to exactly calculate the \"effective\" feerate of transaction B. \r\n\r\nYeah, it's annoying. That's why it should be provided by bitcoin :P\r\n\r\n> Does that seem like it'd be good enough for your use cases?\r\n\r\nNope :(  I really need to know exactly in order to do CPFP myself properly. \r\n\r\n",
      "created_at" : "2017-05-12T01:49:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/10389#issuecomment-300962282",
      "id" : 300962282,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10389",
      "updated_at" : "2017-05-12T01:49:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/300962282",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/9326759?v=3",
         "events_url" : "https://api.github.com/users/RHavar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/RHavar/followers",
         "following_url" : "https://api.github.com/users/RHavar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/RHavar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/RHavar",
         "id" : 9326759,
         "login" : "RHavar",
         "organizations_url" : "https://api.github.com/users/RHavar/orgs",
         "received_events_url" : "https://api.github.com/users/RHavar/received_events",
         "repos_url" : "https://api.github.com/users/RHavar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/RHavar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/RHavar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/RHavar"
      }
   }
]
