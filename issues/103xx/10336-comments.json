[
   {
      "body" : "Not sure about this.\r\nThe linux man page states:\r\n\r\n`The pw_dir field contains the name of the initial working directory of the user. Login programs use the value of this field to initialize the HOME environment variable for the login shell. [====>] An application that wants to determine its user's home directory should inspect the value of HOME (rather than the value getpwuid(getuid())->pw_dir) since this allows the user to modify their notion of \"the home directory\" during a login session [<====]. To determine the (initial) home directory of another user, it is necessary to use getpwnam(\"username\")->pw_dir or similar.`\r\n",
      "created_at" : "2017-05-04T12:04:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10336#issuecomment-299166022",
      "id" : 299166022,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10336",
      "updated_at" : "2017-05-04T12:04:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/299166022",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "jonasschnelli, when you are root, or run commands by root via sudo, your HOME env is '/root'. So when you try to execute 'sudo bitcoin-cli getinfo' with u+s flag, 'bitcoin-cli' will be ran by user 'bitcoin', but HOME env will be still '/root'. In this case, 'bitcoin-cli' cannot find the bitcoind without current patch.",
      "created_at" : "2017-05-04T14:08:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10336#issuecomment-299195610",
      "id" : 299195610,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10336",
      "updated_at" : "2017-05-04T14:08:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/299195610",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/9421133?v=3",
         "events_url" : "https://api.github.com/users/snvakula/events{/privacy}",
         "followers_url" : "https://api.github.com/users/snvakula/followers",
         "following_url" : "https://api.github.com/users/snvakula/following{/other_user}",
         "gists_url" : "https://api.github.com/users/snvakula/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/snvakula",
         "id" : 9421133,
         "login" : "snvakula",
         "organizations_url" : "https://api.github.com/users/snvakula/orgs",
         "received_events_url" : "https://api.github.com/users/snvakula/received_events",
         "repos_url" : "https://api.github.com/users/snvakula/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/snvakula/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/snvakula/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/snvakula"
      }
   },
   {
      "body" : "I'd prefer not to introduce this dependency. Most straightforward way would be to make a script that sets $HOME correctly before calling the tools, or passes `-datadir` or `-conf` options explicitly.\r\n\r\nOTOH:\r\n\r\nPlease don't set-UID `bitcoin-cli`. This **cannot** be guaranteed to be secure, there may be lots of ways to get the tool to do something with the permissions that it shouldn't.\r\n\r\nThere's also no need to:  `bitcoind` and `bitcoin-cli` can run as different users. Communication happens over TCP localhost, which all users on the local system can access. They just need the RPC credentials.\r\n\r\nMy suggestion would be to put bitcoin.conf in a place that's accessible to the users that need access.\r\n",
      "created_at" : "2017-05-11T05:27:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10336#issuecomment-300686040",
      "id" : 300686040,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10336",
      "updated_at" : "2017-05-11T05:27:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/300686040",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Closing this for above reasons (and lack of other feedback)",
      "created_at" : "2017-05-23T16:52:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10336#issuecomment-303464246",
      "id" : 303464246,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10336",
      "updated_at" : "2017-05-23T16:52:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/303464246",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   }
]
