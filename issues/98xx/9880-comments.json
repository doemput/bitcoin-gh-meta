[
   {
      "body" : "While concept ACK, note that collision attacks on sha1 signatures - particularly in selfsigs - aren't as insecure as you might think. The reason is they're basically an attack on yourself. For instance, in the case of a selfsig, you already can add multiple subkeys to your PGP identity anyway, and you can do so without revealing that fact to the public, so there isn't a direct attack vector.\r\n\r\nSimilarly, given that a git commit signature is an expression of trust anyway, creating two commit objects so you can sign both with the same OpenPGP signature isn't a clear attack on anything; unlike the case where someone inserts a malicious *file* into the Git tree, that can only be done by the signer\r\n\r\nMeanwhile, with second-preimage attacks that third-parties can do, [almost every cryptographic hash function in history has proven immune](https://z.cash/technology/history-of-hash-function-attacks.html). In fact, in my OpenTimestamps Python library I note that [even MD5 is secure enough for timestamping](https://github.com/opentimestamps/python-opentimestamps/blob/b395fcc25354184cb2c6a3a899f671f62af4ab44/opentimestamps/core/op.py#L311) (though I'm still not inclined to add support for it out of a healthy sense of caution!).\r\n\r\nNow there *are* more complex cases where this stuff matters - timestamping is one of them depending on how it's implemented - so we probably should still merge this for the long-term. But we can certainly wait until people fix their keys.",
      "created_at" : "2017-02-27T21:58:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9880#issuecomment-282869360",
      "id" : 282869360,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9880",
      "updated_at" : "2017-02-27T21:58:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/282869360",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7042?v=3",
         "events_url" : "https://api.github.com/users/petertodd/events{/privacy}",
         "followers_url" : "https://api.github.com/users/petertodd/followers",
         "following_url" : "https://api.github.com/users/petertodd/following{/other_user}",
         "gists_url" : "https://api.github.com/users/petertodd/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/petertodd",
         "id" : 7042,
         "login" : "petertodd",
         "organizations_url" : "https://api.github.com/users/petertodd/orgs",
         "received_events_url" : "https://api.github.com/users/petertodd/received_events",
         "repos_url" : "https://api.github.com/users/petertodd/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/petertodd/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/petertodd/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/petertodd"
      }
   },
   {
      "body" : "Oh, and another reason to Concept ACK this: it wouldn't be surprising if a colliding self-sig or similar could be used to trigger a non-cryptographic bug in validation somewhere, given that you're violating the common assumption that hash functions don't collide.",
      "created_at" : "2017-02-27T22:04:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9880#issuecomment-282871270",
      "id" : 282871270,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9880",
      "updated_at" : "2017-02-27T22:04:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/282871270",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7042?v=3",
         "events_url" : "https://api.github.com/users/petertodd/events{/privacy}",
         "followers_url" : "https://api.github.com/users/petertodd/followers",
         "following_url" : "https://api.github.com/users/petertodd/following{/other_user}",
         "gists_url" : "https://api.github.com/users/petertodd/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/petertodd",
         "id" : 7042,
         "login" : "petertodd",
         "organizations_url" : "https://api.github.com/users/petertodd/orgs",
         "received_events_url" : "https://api.github.com/users/petertodd/received_events",
         "repos_url" : "https://api.github.com/users/petertodd/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/petertodd/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/petertodd/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/petertodd"
      }
   },
   {
      "body" : "@petertodd indeed, selfsig attacks aren't so interesting, but I'm not aware of another way to prevent sha1-based signatures. While probably also not particularly interesting attack vectors, its good belt-and-suspenders when signing \"untrusted input\" (in the form of the git tree root/sha512 tree root/commit messages/etc) to avoid sha1 inputs.",
      "created_at" : "2017-02-27T22:04:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9880#issuecomment-282871285",
      "id" : 282871285,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9880",
      "updated_at" : "2017-02-27T22:04:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/282871285",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "@TheBlueMatt Oh, yeah you make a good point in saying this is a case of \"untrusted input\", as the commit message to be made is semi-deterministic and under the control of the pull-requester.\r\n\r\nOne sec, I'll write up a comment for you. :)",
      "created_at" : "2017-02-27T22:07:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9880#issuecomment-282872197",
      "id" : 282872197,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9880",
      "updated_at" : "2017-02-27T22:07:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/282872197",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7042?v=3",
         "events_url" : "https://api.github.com/users/petertodd/events{/privacy}",
         "followers_url" : "https://api.github.com/users/petertodd/followers",
         "following_url" : "https://api.github.com/users/petertodd/following{/other_user}",
         "gists_url" : "https://api.github.com/users/petertodd/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/petertodd",
         "id" : 7042,
         "login" : "petertodd",
         "organizations_url" : "https://api.github.com/users/petertodd/orgs",
         "received_events_url" : "https://api.github.com/users/petertodd/received_events",
         "repos_url" : "https://api.github.com/users/petertodd/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/petertodd/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/petertodd/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/petertodd"
      }
   },
   {
      "body" : "* Rebased.\r\n* Now enforces lack of symlinks in github-merge.py.\r\n* Now enforces lack of symlinks in verify-commits.sh\r\n* Always enforce non-SHA1-sigs even when --tree-checks is off\r\n* Update trusted-sha256-root-commit until Marco updates his subkeys.",
      "created_at" : "2017-03-01T16:31:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9880#issuecomment-283391825",
      "id" : 283391825,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9880",
      "updated_at" : "2017-03-01T16:31:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/283391825",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "Concept ACK",
      "created_at" : "2017-03-02T09:24:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9880#issuecomment-283601040",
      "id" : 283601040,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9880",
      "updated_at" : "2017-03-02T09:24:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/283601040",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Note that verify-commits on master is currently failing. I've tried it with this version and it doesn't pass either:\r\n```\r\nUsing verify-commits data from /.../bitcoin/contrib/verify-commits.new\r\nNo parent of 58861ad91b499f6902c0f1c51bb745b91a275826 was signed with a trusted key!\r\nParents are:\r\ncommit f7ec7cfd38b543ba81ac7bed5b77f9a19739460b\r\nMerge: 65d90f5 7ed143c\r\nAuthor: MarcoFalke <falke.marco@gmail.com>\r\nDate:   Thu Mar 2 22:30:12 2017 +0100\r\n\r\n    Merge #9359: Add test for CWalletTx::GetImmatureCredit() returning stale values.\r\n    \r\n    7ed143c Add test for CWalletTx::GetImmatureCredit() returning stale values. (Russell Yanofsky)\r\n    \r\n    Tree-SHA512: c95088ed6dfc5a0774ddaa2fe14ac0a9ebd830922a4d77100ec3d51fdeb6df40ad97de4f2ea970ed0f4122dcc0022ee1d43ab3c7188becd7f90c1c6af0ed39b7\r\ncommit 64854666f57d9f94269000f10897858e8c60d99f\r\nAuthor: Wladimir J. van der Laan <laanwj@gmail.com>\r\nDate:   Thu Mar 2 14:49:11 2017 +0100\r\n\r\n    test: Report InitBlockIndex result\r\n    \r\n    If InitBlockIndex fails, then it will segfault later. Same for the later\r\n    ActivateBestChain. BOOST_REQUIRE the result, so that an error will be\r\n    reported and the test case aborted.\r\n```\r\n",
      "created_at" : "2017-03-03T13:56:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9880#issuecomment-283959063",
      "id" : 283959063,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9880",
      "updated_at" : "2017-03-03T13:56:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/283959063",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "* Updated the trusted-sha256-root-commit for Jonas' sha2 commit.\r\n* Allow any subkey that is properly signed, instead of only listing specific subkeys (this should fix verify-commits on master).",
      "created_at" : "2017-03-04T00:08:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9880#issuecomment-284105213",
      "id" : 284105213,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9880",
      "updated_at" : "2017-03-04T00:08:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/284105213",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/9880#discussion_r104287436"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9880"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104287436"
         }
      },
      "body" : "Either the constant is off by one or the line this is placed in is off by two.",
      "commit_id" : "bbd757940bcb0628df6f7a5bd1fb348cf2290502",
      "created_at" : "2017-03-04T12:59:08Z",
      "diff_hunk" : "@@ -9,26 +9,84 @@\n DIR=$(dirname \"$0\")\n [ \"/${DIR#/}\" != \"$DIR\" ] && DIR=$(dirname \"$(pwd)/$0\")\n \n+echo \"Using verify-commits data from ${DIR}\"\n+\n VERIFIED_ROOT=$(cat \"${DIR}/trusted-git-root\")\n+VERIFIED_SHA512_ROOT=$(cat \"${DIR}/trusted-sha512-root-commit\")\n REVSIG_ALLOWED=$(cat \"${DIR}/allow-revsig-commits\")\n \n HAVE_FAILED=false\n IS_SIGNED () {\n \tif [ $1 = $VERIFIED_ROOT ]; then\n \t\treturn 0;\n \tfi\n+\n+\tVERIFY_TREE=$2\n+\tNO_SHA1=$3\n+\tif [ $1 = $VERIFIED_SHA512_ROOT ]; then\n+\t\tVERIFY_TREE=0\n+\t\tNO_SHA1=0\n+\t\tif [ \"$VERIFY_TREE\" = \"1\" ]; then",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9880#discussion_r104287436",
      "id" : 104287436,
      "original_commit_id" : "fd8a9c104bd324102e3f80ba5bc83866a5fdea05",
      "original_position" : 21,
      "path" : "contrib/verify-commits/verify-commits.sh",
      "position" : null,
      "pull_request_review_id" : 25123084,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9880",
      "updated_at" : "2017-03-05T16:22:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104287436",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/6399679?v=3",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "body" : "utACK 6b2a4a3",
      "created_at" : "2017-03-04T13:01:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9880#issuecomment-284150111",
      "id" : 284150111,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9880",
      "updated_at" : "2017-03-04T13:01:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/284150111",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/6399679?v=3",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/9880#discussion_r104289092"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9880"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104289092"
         }
      },
      "body" : "Oops, indeed. Fixed and squashed.",
      "commit_id" : "bbd757940bcb0628df6f7a5bd1fb348cf2290502",
      "created_at" : "2017-03-04T14:41:52Z",
      "diff_hunk" : "@@ -9,26 +9,84 @@\n DIR=$(dirname \"$0\")\n [ \"/${DIR#/}\" != \"$DIR\" ] && DIR=$(dirname \"$(pwd)/$0\")\n \n+echo \"Using verify-commits data from ${DIR}\"\n+\n VERIFIED_ROOT=$(cat \"${DIR}/trusted-git-root\")\n+VERIFIED_SHA512_ROOT=$(cat \"${DIR}/trusted-sha512-root-commit\")\n REVSIG_ALLOWED=$(cat \"${DIR}/allow-revsig-commits\")\n \n HAVE_FAILED=false\n IS_SIGNED () {\n \tif [ $1 = $VERIFIED_ROOT ]; then\n \t\treturn 0;\n \tfi\n+\n+\tVERIFY_TREE=$2\n+\tNO_SHA1=$3\n+\tif [ $1 = $VERIFIED_SHA512_ROOT ]; then\n+\t\tVERIFY_TREE=0\n+\t\tNO_SHA1=0\n+\t\tif [ \"$VERIFY_TREE\" = \"1\" ]; then",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9880#discussion_r104289092",
      "id" : 104289092,
      "original_commit_id" : "fd8a9c104bd324102e3f80ba5bc83866a5fdea05",
      "original_position" : 21,
      "path" : "contrib/verify-commits/verify-commits.sh",
      "position" : null,
      "pull_request_review_id" : 25124676,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9880",
      "updated_at" : "2017-03-05T16:22:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104289092",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "We may want to backport at least the \"Allow any subkey in verify-commits\" commit for 0.14 so that verify-commits passes on release",
      "created_at" : "2017-03-04T20:22:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9880#issuecomment-284178227",
      "id" : 284178227,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9880",
      "updated_at" : "2017-03-04T20:22:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/284178227",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "Pushed a new commit which will fix the checks on the 0.14 branch.",
      "created_at" : "2017-03-05T16:22:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9880#issuecomment-284240756",
      "id" : 284240756,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9880",
      "updated_at" : "2017-03-05T16:22:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/284240756",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "Verified the new/changed keys (same as in #9920).\r\nTested ACK bbd757940bcb0628df6f7a5bd1fb348cf2290502",
      "created_at" : "2017-03-06T11:14:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9880#issuecomment-284368862",
      "id" : 284368862,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9880",
      "updated_at" : "2017-03-06T11:14:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/284368862",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/9880#discussion_r104393646"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9880"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104393646"
         }
      },
      "body" : "nit: IMO `sha512sum` is not portable (at least it's not available on OSX). What about `shasum -a 512` instead?",
      "commit_id" : "bbd757940bcb0628df6f7a5bd1fb348cf2290502",
      "created_at" : "2017-03-06T11:28:56Z",
      "diff_hunk" : "@@ -9,26 +9,84 @@\n DIR=$(dirname \"$0\")\n [ \"/${DIR#/}\" != \"$DIR\" ] && DIR=$(dirname \"$(pwd)/$0\")\n \n+echo \"Using verify-commits data from ${DIR}\"\n+\n VERIFIED_ROOT=$(cat \"${DIR}/trusted-git-root\")\n+VERIFIED_SHA512_ROOT=$(cat \"${DIR}/trusted-sha512-root-commit\")\n REVSIG_ALLOWED=$(cat \"${DIR}/allow-revsig-commits\")\n \n HAVE_FAILED=false\n IS_SIGNED () {\n \tif [ $1 = $VERIFIED_ROOT ]; then\n \t\treturn 0;\n \tfi\n+\n+\tVERIFY_TREE=$2\n+\tNO_SHA1=$3\n+\tif [ $1 = $VERIFIED_SHA512_ROOT ]; then\n+\t\tif [ \"$VERIFY_TREE\" = \"1\" ]; then\n+\t\t\techo \"All Tree-SHA512s matched up to $VERIFIED_SHA512_ROOT\" > /dev/stderr\n+\t\tfi\n+\t\tVERIFY_TREE=0\n+\t\tNO_SHA1=0\n+\tfi\n+\n+\tif [ \"$NO_SHA1\" = \"1\" ]; then\n+\t\texport BITCOIN_VERIFY_COMMITS_ALLOW_SHA1=0\n+\telse\n+\t\texport BITCOIN_VERIFY_COMMITS_ALLOW_SHA1=1\n+\tfi\n+\n \tif [ \"${REVSIG_ALLOWED#*$1}\" != \"$REVSIG_ALLOWED\" ]; then\n \t\texport BITCOIN_VERIFY_COMMITS_ALLOW_REVSIG=1\n \telse\n \t\texport BITCOIN_VERIFY_COMMITS_ALLOW_REVSIG=0\n \tfi\n+\n \tif ! git -c \"gpg.program=${DIR}/gpg.sh\" verify-commit $1 > /dev/null 2>&1; then\n \t\treturn 1;\n \tfi\n+\n+\tif [ \"$VERIFY_TREE\" = 1 ]; then\n+\t\tIFS_CACHE=\"$IFS\"\n+\t\tIFS='\n+'\n+\t\tfor LINE in $(git ls-tree --full-tree -r $1); do\n+\t\t\tcase \"$LINE\" in\n+\t\t\t\t\"12\"*)\n+\t\t\t\t\techo \"Repo contains symlinks\" > /dev/stderr\n+\t\t\t\t\tIFS=\"$IFS_CACHE\"\n+\t\t\t\t\treturn 1\n+\t\t\t\t\t;;\n+\t\t\tesac\n+\t\tdone\n+\t\tIFS=\"$IFS_CACHE\"\n+\n+\t\tFILE_HASHES=\"\"\n+\t\tfor FILE in $(git ls-tree --full-tree -r --name-only $1 | LANG=C sort); do\n+\t\t\tHASH=$(git cat-file blob $1:\"$FILE\" | sha512sum | { read FIRST OTHER; echo $FIRST; } )",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9880#discussion_r104393646",
      "id" : 104393646,
      "original_commit_id" : "bbd757940bcb0628df6f7a5bd1fb348cf2290502",
      "original_position" : 59,
      "path" : "contrib/verify-commits/verify-commits.sh",
      "position" : 59,
      "pull_request_review_id" : 25227862,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9880",
      "updated_at" : "2017-03-06T11:28:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104393646",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "Going to merge this to fix travis. The shasum nit can be fixed later.",
      "created_at" : "2017-03-06T16:17:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9880#issuecomment-284446011",
      "id" : 284446011,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9880",
      "updated_at" : "2017-03-06T16:17:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/284446011",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/9880#discussion_r104454495"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9880"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104454495"
         }
      },
      "body" : "shasum is part of perl, so is probably less standard than sha512sum. We should have a check for whether sha512sum is available and only use shasum if it is not.",
      "commit_id" : "bbd757940bcb0628df6f7a5bd1fb348cf2290502",
      "created_at" : "2017-03-06T16:20:26Z",
      "diff_hunk" : "@@ -9,26 +9,84 @@\n DIR=$(dirname \"$0\")\n [ \"/${DIR#/}\" != \"$DIR\" ] && DIR=$(dirname \"$(pwd)/$0\")\n \n+echo \"Using verify-commits data from ${DIR}\"\n+\n VERIFIED_ROOT=$(cat \"${DIR}/trusted-git-root\")\n+VERIFIED_SHA512_ROOT=$(cat \"${DIR}/trusted-sha512-root-commit\")\n REVSIG_ALLOWED=$(cat \"${DIR}/allow-revsig-commits\")\n \n HAVE_FAILED=false\n IS_SIGNED () {\n \tif [ $1 = $VERIFIED_ROOT ]; then\n \t\treturn 0;\n \tfi\n+\n+\tVERIFY_TREE=$2\n+\tNO_SHA1=$3\n+\tif [ $1 = $VERIFIED_SHA512_ROOT ]; then\n+\t\tif [ \"$VERIFY_TREE\" = \"1\" ]; then\n+\t\t\techo \"All Tree-SHA512s matched up to $VERIFIED_SHA512_ROOT\" > /dev/stderr\n+\t\tfi\n+\t\tVERIFY_TREE=0\n+\t\tNO_SHA1=0\n+\tfi\n+\n+\tif [ \"$NO_SHA1\" = \"1\" ]; then\n+\t\texport BITCOIN_VERIFY_COMMITS_ALLOW_SHA1=0\n+\telse\n+\t\texport BITCOIN_VERIFY_COMMITS_ALLOW_SHA1=1\n+\tfi\n+\n \tif [ \"${REVSIG_ALLOWED#*$1}\" != \"$REVSIG_ALLOWED\" ]; then\n \t\texport BITCOIN_VERIFY_COMMITS_ALLOW_REVSIG=1\n \telse\n \t\texport BITCOIN_VERIFY_COMMITS_ALLOW_REVSIG=0\n \tfi\n+\n \tif ! git -c \"gpg.program=${DIR}/gpg.sh\" verify-commit $1 > /dev/null 2>&1; then\n \t\treturn 1;\n \tfi\n+\n+\tif [ \"$VERIFY_TREE\" = 1 ]; then\n+\t\tIFS_CACHE=\"$IFS\"\n+\t\tIFS='\n+'\n+\t\tfor LINE in $(git ls-tree --full-tree -r $1); do\n+\t\t\tcase \"$LINE\" in\n+\t\t\t\t\"12\"*)\n+\t\t\t\t\techo \"Repo contains symlinks\" > /dev/stderr\n+\t\t\t\t\tIFS=\"$IFS_CACHE\"\n+\t\t\t\t\treturn 1\n+\t\t\t\t\t;;\n+\t\t\tesac\n+\t\tdone\n+\t\tIFS=\"$IFS_CACHE\"\n+\n+\t\tFILE_HASHES=\"\"\n+\t\tfor FILE in $(git ls-tree --full-tree -r --name-only $1 | LANG=C sort); do\n+\t\t\tHASH=$(git cat-file blob $1:\"$FILE\" | sha512sum | { read FIRST OTHER; echo $FIRST; } )",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9880#discussion_r104454495",
      "id" : 104454495,
      "original_commit_id" : "bbd757940bcb0628df6f7a5bd1fb348cf2290502",
      "original_position" : 59,
      "path" : "contrib/verify-commits/verify-commits.sh",
      "position" : 59,
      "pull_request_review_id" : 25292995,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9880",
      "updated_at" : "2017-03-06T16:20:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104454495",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   }
]
