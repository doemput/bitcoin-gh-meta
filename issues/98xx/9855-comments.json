[
   {
      "body" : "Concept ACK.  I think that it is important to have an API Break at some point. Moving away from Decimal Amounts is very desirable.",
      "created_at" : "2017-02-25T02:23:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9855#issuecomment-282452749",
      "id" : 282452749,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9855",
      "updated_at" : "2017-02-25T02:23:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/282452749",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/691439?v=3",
         "events_url" : "https://api.github.com/users/da2ce7/events{/privacy}",
         "followers_url" : "https://api.github.com/users/da2ce7/followers",
         "following_url" : "https://api.github.com/users/da2ce7/following{/other_user}",
         "gists_url" : "https://api.github.com/users/da2ce7/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/da2ce7",
         "id" : 691439,
         "login" : "da2ce7",
         "organizations_url" : "https://api.github.com/users/da2ce7/orgs",
         "received_events_url" : "https://api.github.com/users/da2ce7/received_events",
         "repos_url" : "https://api.github.com/users/da2ce7/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/da2ce7/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/da2ce7/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/da2ce7"
      }
   },
   {
      "body" : "General agreement, with a notable caveat:\r\n\r\nOlder but widely deployed versions of the jansson library will truncate JSON numbers that are integers larger than unsigned 32-bit.\r\n",
      "created_at" : "2017-02-25T02:53:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9855#issuecomment-282454584",
      "id" : 282454584,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9855",
      "updated_at" : "2017-02-25T02:53:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/282454584",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/494411?v=3",
         "events_url" : "https://api.github.com/users/jgarzik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jgarzik/followers",
         "following_url" : "https://api.github.com/users/jgarzik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jgarzik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jgarzik",
         "id" : 494411,
         "login" : "jgarzik",
         "organizations_url" : "https://api.github.com/users/jgarzik/orgs",
         "received_events_url" : "https://api.github.com/users/jgarzik/received_events",
         "repos_url" : "https://api.github.com/users/jgarzik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jgarzik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jgarzik"
      }
   },
   {
      "body" : "Dislike making another numbered argument.\r\n\r\nIf we care about jansson bugs, I suspect throwing a \".0\" on the end would workaround them.",
      "created_at" : "2017-02-25T03:21:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9855#issuecomment-282456074",
      "id" : 282456074,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9855",
      "updated_at" : "2017-02-25T03:21:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/282456074",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "On the floating point side, you're limited by the 'double' C data type.\r\n\r\nSome people just throw up their hands and store numbers inside of strings :)\r\n",
      "created_at" : "2017-02-25T03:26:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9855#issuecomment-282456393",
      "id" : 282456393,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9855",
      "updated_at" : "2017-02-25T03:26:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/282456393",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/494411?v=3",
         "events_url" : "https://api.github.com/users/jgarzik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jgarzik/followers",
         "following_url" : "https://api.github.com/users/jgarzik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jgarzik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jgarzik",
         "id" : 494411,
         "login" : "jgarzik",
         "organizations_url" : "https://api.github.com/users/jgarzik/orgs",
         "received_events_url" : "https://api.github.com/users/jgarzik/received_events",
         "repos_url" : "https://api.github.com/users/jgarzik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jgarzik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jgarzik"
      }
   },
   {
      "body" : "One idea:\r\n\r\npass a \"multiplier\" argument to the RPCs such that users can select arbitrary number systems. Default it to Bitcoin or Satoshis. This future proofs the API design in the event of any popular system (or even prepping for fractional satoshis...)\r\n\r\n\r\nThis could also be useful for people wishing to pay at an exchange rate :)",
      "created_at" : "2017-02-25T03:33:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9855#issuecomment-282456716",
      "id" : 282456716,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9855",
      "updated_at" : "2017-02-25T03:33:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/282456716",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/886523?v=3",
         "events_url" : "https://api.github.com/users/JeremyRubin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JeremyRubin/followers",
         "following_url" : "https://api.github.com/users/JeremyRubin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JeremyRubin",
         "id" : 886523,
         "login" : "JeremyRubin",
         "organizations_url" : "https://api.github.com/users/JeremyRubin/orgs",
         "received_events_url" : "https://api.github.com/users/JeremyRubin/received_events",
         "repos_url" : "https://api.github.com/users/JeremyRubin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JeremyRubin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JeremyRubin"
      }
   },
   {
      "body" : "This is the kind of thing I think should be an option in the named\narguments list, but probably not added to every single RPC command's\npositional parameters.\n\nOn 02/25/17 00:40, Jorge TimÃÂ³n wrote:\n> There's been talks about using satoshis in RPC instead of BTC, which\n> requires decimals and don't work well with json.\n> \n> On the other hand, such a change would break the RPC API as well as many\n> tests.\n> This is a draft on how we could move there (doing it only for 2 of the 8\n> RPC calls that would need to be changed). An useDecimalAmounts optional\n> param is added. If true, the user can introduce BTC amounts as before.\n> If false, the user needs to introduce the amounts in satoshis.\n> \n> Interestingly enough, for signrawtransaction, useDecimalAmounts can\n> default to false without breaking any tests (which means the amounts in\n> useDecimalAmounts are not being currently tested).\n> In contrast, createrawtransaction would break many tests.\n> \n> We could slowly adapt the tests to use satoshis and once that's done, at\n> some point in the future we could break the API, remove all\n> useDecimalAmounts params and not allow to BTC amounts anymore.\n> \n> I didn't want go further before getting some feedback.\n> \n> ------------------------------------------------------------------------\n> \n> \n>         You can view, comment on, or merge this pull request online at:\n> \n>   https://github.com/bitcoin/bitcoin/pull/9855\n> \n> \n>         Commit Summary\n> \n>   * RPC: Allow AmountFromValue() to process in units other than satoshis\n>   * RPC: Allow int satoshis instead of BTC with decimals for amounts:\n>   * TODO: named params\n>   * TODO: Remaining RPC functions that use BTC instead of satoshis for\n>     amounts\n> \n> \n>         File Changes\n> \n>   * *M* qa/rpc-tests/fundrawtransaction.py\n>     <https://github.com/bitcoin/bitcoin/pull/9855/files#diff-0> (4)\n>   * *M* src/rpc/client.cpp\n>     <https://github.com/bitcoin/bitcoin/pull/9855/files#diff-1> (2)\n>   * *M* src/rpc/rawtransaction.cpp\n>     <https://github.com/bitcoin/bitcoin/pull/9855/files#diff-2> (26)\n>   * *M* src/rpc/server.cpp\n>     <https://github.com/bitcoin/bitcoin/pull/9855/files#diff-3> (4)\n>   * *M* src/rpc/server.h\n>     <https://github.com/bitcoin/bitcoin/pull/9855/files#diff-4> (2)\n>   * *M* src/wallet/rpcwallet.cpp\n>     <https://github.com/bitcoin/bitcoin/pull/9855/files#diff-5> (12)\n> \n> \n>         Patch Links:\n> \n>   * https://github.com/bitcoin/bitcoin/pull/9855.patch\n>   * https://github.com/bitcoin/bitcoin/pull/9855.diff\n> \n> Ã¢ÂÂ\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/bitcoin/bitcoin/pull/9855>, or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AAnoHrz_SwveslAtCRJeFYOEXrqLbob2ks5rf3iZgaJpZM4ML1JD>.\n> \n",
      "created_at" : "2017-02-25T04:17:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9855#issuecomment-282458717",
      "id" : 282458717,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9855",
      "updated_at" : "2017-02-25T04:17:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/282458717",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "`double` is large enough for any satoshi amounts on most systems (and any exceptions are likely to not support Core at all right now).",
      "created_at" : "2017-02-25T05:49:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9855#issuecomment-282462642",
      "id" : 282462642,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9855",
      "updated_at" : "2017-02-25T05:49:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/282462642",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "NACK doing it in this way.\r\n\r\n- I'd prefer \"return amounts as strings\". It would be more consistent.  \"Integers\" don't exist in JSON. A JSON parser could still convert large numbers to float silently. Returning the values as strings means the program can use whatever internal format they want - it moves parsing away from the JSON parser, which is usually hard to override.\r\n\r\nWe already added handling of these for input in `AmountFromValue` in #6380, with the idea of making that an option later.\r\n\r\n- If you really want to go ahead with this please see my implementation in #3759. It was much less invasive, effectively only two functions were touched `AmountFromValue`  and `ValueFromAmount`, and it allowed the user to select between four variants with a command-line option. \r\n\r\nThere is no need to change every single call site of those functions for this!\r\n",
      "created_at" : "2017-02-25T07:49:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9855#issuecomment-282467878",
      "id" : 282467878,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9855",
      "updated_at" : "2017-02-25T07:50:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/282467878",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Replaced by #9882",
      "created_at" : "2017-02-28T00:13:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9855#issuecomment-282899968",
      "id" : 282899968,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9855",
      "updated_at" : "2017-02-28T00:13:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/282899968",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   }
]
