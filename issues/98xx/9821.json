{
   "assignee" : null,
   "assignees" : [],
   "body" : "These are available in sandboxes without access to files or to devices. Also [they are considered safer and more straightforward](https://en.wikipedia.org/wiki/Entropy-supplying_system_calls) to use than `/dev/urandom` as reading from a file has quite a few edge cases:\r\n\r\n- Linux: `getrandom(buf, buflen, 0)`. [getrandom(2)](http://man7.org/linux/manpages/man2/getrandom.2.html)  was introduced in version 3.17 of the Linux kernel.\r\n- OpenBSD: `getentropy(buf, buflen)`. The [getentropy(2)](http://man.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man2/getentropy.2)  function appeared in OpenBSD 5.6.\r\n- FreeBSD and NetBSD: `sysctl(KERN_ARND)`. Not sure when this was added but it has existed for quite a while.\r\n\r\nAlternatives:\r\n\r\n- Linux has sysctl `CTL_KERN` / `KERN_RANDOM` / `RANDOM_UUID`  which gives 16 bytes of randomness. This may be available on older kernels, however [sysctl is deprecated on Linux](https://lwn.net/Articles/605392/)  and even removed in some distros so we shouldn't use it.\r\n\r\nAdd tests for `GetOSRand()`:\r\n\r\n- Test that no error happens (otherwise `RandFailure()` which aborts)\r\n- Test that all 32 bytes are overwritten (initialize with zeros, try multiple times)\r\n\r\nDiscussion:\r\n\r\n- When to use these? Currently they are always used when available. Another option would be to use them only when `/dev/urandom` is not  available. But this would mean these code paths receive less testing,  and I'm not sure there is any reason to prefer `/dev/urandom`.\r\n\r\nCloses: #9676. I've tested this on all three OS-es.",
   "closed_at" : "2017-03-01T11:42:23Z",
   "closed_by" : {
      "avatar_url" : "https://avatars3.githubusercontent.com/u/126646?v=3",
      "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
      "followers_url" : "https://api.github.com/users/laanwj/followers",
      "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/laanwj",
      "id" : 126646,
      "login" : "laanwj",
      "organizations_url" : "https://api.github.com/users/laanwj/orgs",
      "received_events_url" : "https://api.github.com/users/laanwj/received_events",
      "repos_url" : "https://api.github.com/users/laanwj/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/laanwj"
   },
   "comments" : 12,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9821/comments",
   "created_at" : "2017-02-21T20:07:40Z",
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9821/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/pull/9821",
   "id" : 209258207,
   "labels" : [
      {
         "color" : "5319e7",
         "default" : false,
         "id" : 241832923,
         "name" : "Utils and libraries",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/Utils%20and%20libraries"
      }
   ],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9821/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "number" : 9821,
   "pull_request" : {
      "diff_url" : "https://github.com/bitcoin/bitcoin/pull/9821.diff",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9821",
      "patch_url" : "https://github.com/bitcoin/bitcoin/pull/9821.patch",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9821"
   },
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "closed",
   "title" : "util: Specific GetOSRandom for Linux/FreeBSD/OpenBSD",
   "updated_at" : "2017-03-01T11:42:23Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9821",
   "user" : {
      "avatar_url" : "https://avatars3.githubusercontent.com/u/126646?v=3",
      "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
      "followers_url" : "https://api.github.com/users/laanwj/followers",
      "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/laanwj",
      "id" : 126646,
      "login" : "laanwj",
      "organizations_url" : "https://api.github.com/users/laanwj/orgs",
      "received_events_url" : "https://api.github.com/users/laanwj/received_events",
      "repos_url" : "https://api.github.com/users/laanwj/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/laanwj"
   }
}
