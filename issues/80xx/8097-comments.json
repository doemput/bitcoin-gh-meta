[
   {
      "body" : "Concept/ut ACK. This function was crazy, it shouldn't be doing DNS lookups in the RPC function. I also can't imagine this being useful to anyone.\r\nAPI change needs mention in the release notes",
      "created_at" : "2016-05-26T05:20:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8097#issuecomment-221780192",
      "id" : 221780192,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8097",
      "updated_at" : "2016-05-26T05:24:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/221780192",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Concept ACK",
      "created_at" : "2016-05-26T10:34:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8097#issuecomment-221836366",
      "id" : 221836366,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8097",
      "updated_at" : "2016-05-26T10:34:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/221836366",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7042?v=3",
         "events_url" : "https://api.github.com/users/petertodd/events{/privacy}",
         "followers_url" : "https://api.github.com/users/petertodd/followers",
         "following_url" : "https://api.github.com/users/petertodd/following{/other_user}",
         "gists_url" : "https://api.github.com/users/petertodd/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/petertodd",
         "id" : 7042,
         "login" : "petertodd",
         "organizations_url" : "https://api.github.com/users/petertodd/orgs",
         "received_events_url" : "https://api.github.com/users/petertodd/received_events",
         "repos_url" : "https://api.github.com/users/petertodd/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/petertodd/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/petertodd/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/petertodd"
      }
   },
   {
      "body" : "Concept ACK",
      "created_at" : "2016-05-26T13:03:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8097#issuecomment-221864256",
      "id" : 221864256,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8097",
      "updated_at" : "2016-05-26T13:03:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/221864256",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Ok, I'll add a mention in the notes and drop the RFC in the title.",
      "created_at" : "2016-05-26T15:38:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8097#issuecomment-221908587",
      "id" : 221908587,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8097",
      "updated_at" : "2016-05-26T15:38:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/221908587",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/417043?v=3",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "body" : "Knowing whether or not your addnodes are connected is a useful feature, and not trivial from getpeerinfo. I certainly use this regularly.\n\nOn May 24, 2016 11:24:09 AM PDT, Cory Fields <notifications@github.com> wrote:\n>As discussed with @laanwj and @sdaftuar in Zurich. The output format is\n>kept the same as before, though the input params change.\n>\n>As far as I can tell, this has no test coverage, and I'm willing to bet\n>it gets very little usage. The behavior is subtle and non-obvious: it\n>does a real-time resolve in order to check whether an addnode entry is\n>connected at the time of that resolve, and makes no mention of whether\n>or not a connection once matched a resolved addnode.\n>\n>This complicates the net encapsulation work, so I propose that we\n>simply drop it unless there's a good reason not to. If preferred, it\n>could swallow a dummy bool parameter, in order to remain api\n>compatible.\n>You can view, comment on, or merge this pull request online at:\n>\n>  https://github.com/bitcoin/bitcoin/pull/8097\n>\n>-- Commit Summary --\n>\n>  * rpc: Remove dns argument for getaddednodeinfo\n>\n>-- File Changes --\n>\n>    M src/rpc/net.cpp (86)\n>\n>-- Patch Links --\n>\n>https://github.com/bitcoin/bitcoin/pull/8097.patch\n>https://github.com/bitcoin/bitcoin/pull/8097.diff\n>\n>---\n>You are receiving this because you are subscribed to this thread.\n>Reply to this email directly or view it on GitHub:\n>https://github.com/bitcoin/bitcoin/pull/8097\n",
      "created_at" : "2016-05-27T09:15:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8097#issuecomment-222099426",
      "id" : 222099426,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8097",
      "updated_at" : "2016-05-27T09:15:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/222099426",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "Can't we just check addrName to see whether we're connected to a particular addnode? That changes the question from \"is there a connection whose IP corresponds to what name N currently refers to?\" to \"is there a connection to what N referred to at the time of connection?\". I don't think that matters, or is it intended to migrate addnode'd connections even when the IP their name refers to changes?",
      "created_at" : "2016-05-27T09:17:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8097#issuecomment-222099955",
      "id" : 222099955,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8097",
      "updated_at" : "2016-05-27T09:20:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/222099955",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "We could, but thats a bit of an awkward question given the behavior of the auto-connect thread (which I do not think should change). If you change the question to that, then the background auto-connect thread may still spin trying to connect to/connecting to the host that was added, as its hostname has changed, even though the RPC will tell you you're connected.",
      "created_at" : "2016-05-27T18:49:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8097#issuecomment-222225243",
      "id" : 222225243,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8097",
      "updated_at" : "2016-05-27T18:49:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/222225243",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "Agree, the RPC and the thread should be consistent.",
      "created_at" : "2016-05-27T18:55:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8097#issuecomment-222226570",
      "id" : 222226570,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8097",
      "updated_at" : "2016-05-27T18:55:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/222226570",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "They're not consistent, though. If I call \"getaddednodeinfo true\", and there's a disconnected dns entry, it will resolve at that moment and return with a list of ip's. However, the connection thread re-resolves and attempts to connect up to 2 min later.\r\n\r\nSo when using a seednode here (the only plausible use-case I can imagine), the results won't match what the thread actually tries to connect to because the attempt could be minutes later. Odds are I'll find that it connected to an IP that wasn't in the previous list. So I'm not sure how the result is any more useful than dropping to a terminal and running dig.\r\n\r\nThinking more constructively: maybe the fix (which I think we might've discussed at one point) would be to have the pending connection attempts stored so that the rpc could grab them, rather than working in parallel.\r\n\r\nI'm still not convinced that this is broadly useful, though I suppose the burden's on me to prove otherwise.\r\n\r\n@TheBlueMatt Maybe it would be more helpful if you described your specific use-case?",
      "created_at" : "2016-05-27T19:24:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8097#issuecomment-222232869",
      "id" : 222232869,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8097",
      "updated_at" : "2016-05-27T19:24:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/222232869",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/417043?v=3",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   }
]
