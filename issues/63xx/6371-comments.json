[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6371#discussion_r33845689"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6371"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/33845689"
         }
      },
      "body" : "This line `CNode::SetBannedSetDirty(false);` should be called even if `bandb.Read(ban map)` failed.",
      "commit_id" : "0947bf92ef783d861c9a0870ef108bc78bcd3914",
      "created_at" : "2015-07-03T07:52:18Z",
      "diff_hunk" : "@@ -1705,31 +1702,37 @@ void static Discover(boost::thread_group& threadGroup)\n void StartNode(boost::thread_group& threadGroup, CScheduler& scheduler)\n {\n     uiInterface.InitMessage(_(\"Loading addresses...\"));\n-    // Load addresses for peers.dat\n+    // Load addresses from peers.dat\n     int64_t nStart = GetTimeMillis();\n     {\n         CAddrDB adb;\n         if (!adb.Read(addrman))\n             LogPrintf(\"Invalid or missing peers.dat; recreating\\n\");\n+        else\n+            LogPrintf(\"Loaded %i addresses from peers.dat  %dms\\n\", addrman.size(), GetTimeMillis() - nStart);\n     }\n \n-    //try to read stored banlist\n+    uiInterface.InitMessage(_(\"Loading banned addresses...\"));\n+    // Load addresses from banlist.dat\n+    nStart = GetTimeMillis();\n     CBanDB bandb;\n     banmap_t banmap;\n-    if (!bandb.Read(banmap))\n+    if (!bandb.Read(banmap)) {\n         LogPrintf(\"Invalid or missing banlist.dat; recreating\\n\");\n+    } else {\n+        CNode::SetBanned(banmap); // thread save setter\n+        CNode::SetBannedSetDirty(false); // no need to write down, just read data",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6371#discussion_r33845689",
      "id" : 33845689,
      "original_commit_id" : "860da409ccfce1e0576f786ce49efc7f189f6370",
      "original_position" : 46,
      "path" : "src/net.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6371",
      "updated_at" : "2015-09-23T11:00:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/33845689",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "utACK (mind the nit above).",
      "created_at" : "2015-07-03T07:54:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6371#issuecomment-118267842",
      "id" : 118267842,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6371",
      "updated_at" : "2015-07-03T07:54:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/118267842",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6371#discussion_r33845801"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6371"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/33845801"
         }
      },
      "body" : "As written in the code, it is false as default, so it isn't dirty, because no functions were called that change the flag :).",
      "commit_id" : "0947bf92ef783d861c9a0870ef108bc78bcd3914",
      "created_at" : "2015-07-03T07:54:17Z",
      "diff_hunk" : "@@ -1705,31 +1702,37 @@ void static Discover(boost::thread_group& threadGroup)\n void StartNode(boost::thread_group& threadGroup, CScheduler& scheduler)\n {\n     uiInterface.InitMessage(_(\"Loading addresses...\"));\n-    // Load addresses for peers.dat\n+    // Load addresses from peers.dat\n     int64_t nStart = GetTimeMillis();\n     {\n         CAddrDB adb;\n         if (!adb.Read(addrman))\n             LogPrintf(\"Invalid or missing peers.dat; recreating\\n\");\n+        else\n+            LogPrintf(\"Loaded %i addresses from peers.dat  %dms\\n\", addrman.size(), GetTimeMillis() - nStart);\n     }\n \n-    //try to read stored banlist\n+    uiInterface.InitMessage(_(\"Loading banned addresses...\"));\n+    // Load addresses from banlist.dat\n+    nStart = GetTimeMillis();\n     CBanDB bandb;\n     banmap_t banmap;\n-    if (!bandb.Read(banmap))\n+    if (!bandb.Read(banmap)) {\n         LogPrintf(\"Invalid or missing banlist.dat; recreating\\n\");\n+    } else {\n+        CNode::SetBanned(banmap); // thread save setter\n+        CNode::SetBannedSetDirty(false); // no need to write down, just read data",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6371#discussion_r33845801",
      "id" : 33845801,
      "original_commit_id" : "860da409ccfce1e0576f786ce49efc7f189f6370",
      "original_position" : 46,
      "path" : "src/net.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6371",
      "updated_at" : "2015-09-23T11:00:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/33845801",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6371#discussion_r33845850"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6371"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/33845850"
         }
      },
      "body" : "@jonasschnelli Should this be ``ips/subnets`` rather than ``addresses``?",
      "commit_id" : "0947bf92ef783d861c9a0870ef108bc78bcd3914",
      "created_at" : "2015-07-03T07:55:18Z",
      "diff_hunk" : "@@ -1705,31 +1702,37 @@ void static Discover(boost::thread_group& threadGroup)\n void StartNode(boost::thread_group& threadGroup, CScheduler& scheduler)\n {\n     uiInterface.InitMessage(_(\"Loading addresses...\"));\n-    // Load addresses for peers.dat\n+    // Load addresses from peers.dat\n     int64_t nStart = GetTimeMillis();\n     {\n         CAddrDB adb;\n         if (!adb.Read(addrman))\n             LogPrintf(\"Invalid or missing peers.dat; recreating\\n\");\n+        else\n+            LogPrintf(\"Loaded %i addresses from peers.dat  %dms\\n\", addrman.size(), GetTimeMillis() - nStart);\n     }\n \n-    //try to read stored banlist\n+    uiInterface.InitMessage(_(\"Loading banned addresses...\"));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6371#discussion_r33845850",
      "id" : 33845850,
      "original_commit_id" : "860da409ccfce1e0576f786ce49efc7f189f6370",
      "original_position" : 36,
      "path" : "src/net.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6371",
      "updated_at" : "2015-09-23T11:00:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/33845850",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6371#discussion_r33846119"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6371"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/33846119"
         }
      },
      "body" : "Why is it's default false (`net.cppL448)?\r\nI would recommend to call `CNode::SetBannedSetDirty(false);` when we start up a node. There is no case where the list can be \"dirty\" in this state.",
      "commit_id" : "0947bf92ef783d861c9a0870ef108bc78bcd3914",
      "created_at" : "2015-07-03T08:00:16Z",
      "diff_hunk" : "@@ -1705,31 +1702,37 @@ void static Discover(boost::thread_group& threadGroup)\n void StartNode(boost::thread_group& threadGroup, CScheduler& scheduler)\n {\n     uiInterface.InitMessage(_(\"Loading addresses...\"));\n-    // Load addresses for peers.dat\n+    // Load addresses from peers.dat\n     int64_t nStart = GetTimeMillis();\n     {\n         CAddrDB adb;\n         if (!adb.Read(addrman))\n             LogPrintf(\"Invalid or missing peers.dat; recreating\\n\");\n+        else\n+            LogPrintf(\"Loaded %i addresses from peers.dat  %dms\\n\", addrman.size(), GetTimeMillis() - nStart);\n     }\n \n-    //try to read stored banlist\n+    uiInterface.InitMessage(_(\"Loading banned addresses...\"));\n+    // Load addresses from banlist.dat\n+    nStart = GetTimeMillis();\n     CBanDB bandb;\n     banmap_t banmap;\n-    if (!bandb.Read(banmap))\n+    if (!bandb.Read(banmap)) {\n         LogPrintf(\"Invalid or missing banlist.dat; recreating\\n\");\n+    } else {\n+        CNode::SetBanned(banmap); // thread save setter\n+        CNode::SetBannedSetDirty(false); // no need to write down, just read data",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6371#discussion_r33846119",
      "id" : 33846119,
      "original_commit_id" : "860da409ccfce1e0576f786ce49efc7f189f6370",
      "original_position" : 46,
      "path" : "src/net.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6371",
      "updated_at" : "2015-09-23T11:00:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/33846119",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6371#discussion_r33846197"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6371"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/33846197"
         }
      },
      "body" : "Hmm.... it could be `_(\"Loading banned addresses/subnets...\")` but if we be particular about this: a subnet defines an amount of \"addresses\". But i don't care about that.",
      "commit_id" : "0947bf92ef783d861c9a0870ef108bc78bcd3914",
      "created_at" : "2015-07-03T08:01:58Z",
      "diff_hunk" : "@@ -1705,31 +1702,37 @@ void static Discover(boost::thread_group& threadGroup)\n void StartNode(boost::thread_group& threadGroup, CScheduler& scheduler)\n {\n     uiInterface.InitMessage(_(\"Loading addresses...\"));\n-    // Load addresses for peers.dat\n+    // Load addresses from peers.dat\n     int64_t nStart = GetTimeMillis();\n     {\n         CAddrDB adb;\n         if (!adb.Read(addrman))\n             LogPrintf(\"Invalid or missing peers.dat; recreating\\n\");\n+        else\n+            LogPrintf(\"Loaded %i addresses from peers.dat  %dms\\n\", addrman.size(), GetTimeMillis() - nStart);\n     }\n \n-    //try to read stored banlist\n+    uiInterface.InitMessage(_(\"Loading banned addresses...\"));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6371#discussion_r33846197",
      "id" : 33846197,
      "original_commit_id" : "860da409ccfce1e0576f786ce49efc7f189f6370",
      "original_position" : 36,
      "path" : "src/net.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6371",
      "updated_at" : "2015-09-23T11:00:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/33846197",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6371#discussion_r33846235"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6371"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/33846235"
         }
      },
      "body" : "`\"Loading ban list...\"`",
      "commit_id" : "0947bf92ef783d861c9a0870ef108bc78bcd3914",
      "created_at" : "2015-07-03T08:02:50Z",
      "diff_hunk" : "@@ -1705,31 +1702,37 @@ void static Discover(boost::thread_group& threadGroup)\n void StartNode(boost::thread_group& threadGroup, CScheduler& scheduler)\n {\n     uiInterface.InitMessage(_(\"Loading addresses...\"));\n-    // Load addresses for peers.dat\n+    // Load addresses from peers.dat\n     int64_t nStart = GetTimeMillis();\n     {\n         CAddrDB adb;\n         if (!adb.Read(addrman))\n             LogPrintf(\"Invalid or missing peers.dat; recreating\\n\");\n+        else\n+            LogPrintf(\"Loaded %i addresses from peers.dat  %dms\\n\", addrman.size(), GetTimeMillis() - nStart);\n     }\n \n-    //try to read stored banlist\n+    uiInterface.InitMessage(_(\"Loading banned addresses...\"));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6371#discussion_r33846235",
      "id" : 33846235,
      "original_commit_id" : "860da409ccfce1e0576f786ce49efc7f189f6370",
      "original_position" : 36,
      "path" : "src/net.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6371",
      "updated_at" : "2015-09-23T11:00:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/33846235",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6371#discussion_r33846612"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6371"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/33846612"
         }
      },
      "body" : "IMHO an not explicitly initialized bool defaults to false (0).\r\nThis call here (where the comment is), is necessary because we just read and didn't change anything, as the ``CNode::SetBanned()`` call sets ``setBannedIsDirty = true``.",
      "commit_id" : "0947bf92ef783d861c9a0870ef108bc78bcd3914",
      "created_at" : "2015-07-03T08:10:36Z",
      "diff_hunk" : "@@ -1705,31 +1702,37 @@ void static Discover(boost::thread_group& threadGroup)\n void StartNode(boost::thread_group& threadGroup, CScheduler& scheduler)\n {\n     uiInterface.InitMessage(_(\"Loading addresses...\"));\n-    // Load addresses for peers.dat\n+    // Load addresses from peers.dat\n     int64_t nStart = GetTimeMillis();\n     {\n         CAddrDB adb;\n         if (!adb.Read(addrman))\n             LogPrintf(\"Invalid or missing peers.dat; recreating\\n\");\n+        else\n+            LogPrintf(\"Loaded %i addresses from peers.dat  %dms\\n\", addrman.size(), GetTimeMillis() - nStart);\n     }\n \n-    //try to read stored banlist\n+    uiInterface.InitMessage(_(\"Loading banned addresses...\"));\n+    // Load addresses from banlist.dat\n+    nStart = GetTimeMillis();\n     CBanDB bandb;\n     banmap_t banmap;\n-    if (!bandb.Read(banmap))\n+    if (!bandb.Read(banmap)) {\n         LogPrintf(\"Invalid or missing banlist.dat; recreating\\n\");\n+    } else {\n+        CNode::SetBanned(banmap); // thread save setter\n+        CNode::SetBannedSetDirty(false); // no need to write down, just read data",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6371#discussion_r33846612",
      "id" : 33846612,
      "original_commit_id" : "860da409ccfce1e0576f786ce49efc7f189f6370",
      "original_position" : 46,
      "path" : "src/net.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6371",
      "updated_at" : "2015-09-23T11:00:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/33846612",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "body" : "@jonasschnelli Would be nice if you could test this pull and review commit 4, so this can get merged soon. I've got further small fixes for this but don't want to blow up this pull ;).",
      "created_at" : "2015-07-03T15:59:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6371#issuecomment-118380744",
      "id" : 118380744,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6371",
      "updated_at" : "2015-07-03T15:59:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/118380744",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "body" : "@jonasschnelli Ping",
      "created_at" : "2015-07-21T19:17:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6371#issuecomment-123450858",
      "id" : 123450858,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6371",
      "updated_at" : "2015-07-21T19:17:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/123450858",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "body" : "@jonasschnelli @laanwj Can we get this in please?",
      "created_at" : "2015-07-29T09:25:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6371#issuecomment-125890942",
      "id" : 125890942,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6371",
      "updated_at" : "2015-07-29T09:25:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/125890942",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "body" : "@jonasschnelli Too sad you couldn't yet ACK this, mind taking a look?",
      "created_at" : "2015-08-10T12:14:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6371#issuecomment-129424607",
      "id" : 129424607,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6371",
      "updated_at" : "2015-08-10T12:14:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/129424607",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6371#discussion_r39628910"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6371"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/39628910"
         }
      },
      "body" : "General principle:  Code like \"if (!dirty) return;\" reduces the indentation level for the standard case, and makes the code more readable.\r\n",
      "commit_id" : "0947bf92ef783d861c9a0870ef108bc78bcd3914",
      "created_at" : "2015-09-16T13:31:06Z",
      "diff_hunk" : "@@ -2470,28 +2473,31 @@ bool CBanDB::Read(banmap_t& banSet)\n         // ... verify the network matches ours\n         if (memcmp(pchMsgTmp, Params().MessageStart(), sizeof(pchMsgTmp)))\n             return error(\"%s: Invalid network magic number\", __func__);\n-        \n+\n         // de-serialize address data into one CAddrMan object\n         ssBanlist >> banSet;\n     }\n     catch (const std::exception& e) {\n         return error(\"%s: Deserialize or I/O error - %s\", __func__, e.what());\n     }\n-    \n+\n     return true;\n }\n \n void DumpBanlist()\n {\n-    int64_t nStart = GetTimeMillis();\n+    CNode::SweepBanned(); // clean unused entires (if bantime has expired)\n \n-    CNode::SweepBanned(); //clean unused entries (if bantime has expired)\n+    if (CNode::BannedSetIsDirty()) {\n+        int64_t nStart = GetTimeMillis();\n \n-    CBanDB bandb;\n-    banmap_t banmap;\n-    CNode::GetBanned(banmap);\n-    bandb.Write(banmap);\n+        CBanDB bandb;\n+        banmap_t banmap;\n+        CNode::GetBanned(banmap);\n+        if (bandb.Write(banmap))\n+            CNode::SetBannedSetDirty(false);\n \n-    LogPrint(\"net\", \"Flushed %d banned node ips/subnets to banlist.dat  %dms\\n\",\n-             banmap.size(), GetTimeMillis() - nStart);\n+        LogPrint(\"net\", \"Flushed %d banned node ips/subnets to banlist.dat  %dms\\n\",\n+            banmap.size(), GetTimeMillis() - nStart);\n+    }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6371#discussion_r39628910",
      "id" : 39628910,
      "original_commit_id" : "2678c7cc93eef4267a1cfa4ef92e58e61b1693f2",
      "original_position" : 124,
      "path" : "src/net.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6371",
      "updated_at" : "2015-09-23T11:00:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/39628910",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/494411?v=3",
         "events_url" : "https://api.github.com/users/jgarzik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jgarzik/followers",
         "following_url" : "https://api.github.com/users/jgarzik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jgarzik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jgarzik",
         "id" : 494411,
         "login" : "jgarzik",
         "organizations_url" : "https://api.github.com/users/jgarzik/orgs",
         "received_events_url" : "https://api.github.com/users/jgarzik/received_events",
         "repos_url" : "https://api.github.com/users/jgarzik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jgarzik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jgarzik"
      }
   },
   {
      "body" : "ut ACK\r\n",
      "created_at" : "2015-09-16T13:31:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6371#issuecomment-140743271",
      "id" : 140743271,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6371",
      "updated_at" : "2015-09-16T13:31:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/140743271",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/494411?v=3",
         "events_url" : "https://api.github.com/users/jgarzik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jgarzik/followers",
         "following_url" : "https://api.github.com/users/jgarzik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jgarzik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jgarzik",
         "id" : 494411,
         "login" : "jgarzik",
         "organizations_url" : "https://api.github.com/users/jgarzik/orgs",
         "received_events_url" : "https://api.github.com/users/jgarzik/received_events",
         "repos_url" : "https://api.github.com/users/jgarzik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jgarzik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jgarzik"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6371#discussion_r39632922"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6371"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/39632922"
         }
      },
      "body" : "So you would have written?\r\n```\r\nif (bandb.Write(banmap)) CNode::SetBannedSetDirty(false);\r\n```\r\n\r\nOr are you talking about:\r\n```\r\nLogPrint(\"net\", \"Flushed %d banned node ips/subnets to banlist.dat  %dms\\n\", banmap.size(), GetTimeMillis() - Start);\r\n```",
      "commit_id" : "0947bf92ef783d861c9a0870ef108bc78bcd3914",
      "created_at" : "2015-09-16T14:03:33Z",
      "diff_hunk" : "@@ -2470,28 +2473,31 @@ bool CBanDB::Read(banmap_t& banSet)\n         // ... verify the network matches ours\n         if (memcmp(pchMsgTmp, Params().MessageStart(), sizeof(pchMsgTmp)))\n             return error(\"%s: Invalid network magic number\", __func__);\n-        \n+\n         // de-serialize address data into one CAddrMan object\n         ssBanlist >> banSet;\n     }\n     catch (const std::exception& e) {\n         return error(\"%s: Deserialize or I/O error - %s\", __func__, e.what());\n     }\n-    \n+\n     return true;\n }\n \n void DumpBanlist()\n {\n-    int64_t nStart = GetTimeMillis();\n+    CNode::SweepBanned(); // clean unused entires (if bantime has expired)\n \n-    CNode::SweepBanned(); //clean unused entries (if bantime has expired)\n+    if (CNode::BannedSetIsDirty()) {\n+        int64_t nStart = GetTimeMillis();\n \n-    CBanDB bandb;\n-    banmap_t banmap;\n-    CNode::GetBanned(banmap);\n-    bandb.Write(banmap);\n+        CBanDB bandb;\n+        banmap_t banmap;\n+        CNode::GetBanned(banmap);\n+        if (bandb.Write(banmap))\n+            CNode::SetBannedSetDirty(false);\n \n-    LogPrint(\"net\", \"Flushed %d banned node ips/subnets to banlist.dat  %dms\\n\",\n-             banmap.size(), GetTimeMillis() - nStart);\n+        LogPrint(\"net\", \"Flushed %d banned node ips/subnets to banlist.dat  %dms\\n\",\n+            banmap.size(), GetTimeMillis() - nStart);\n+    }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6371#discussion_r39632922",
      "id" : 39632922,
      "original_commit_id" : "2678c7cc93eef4267a1cfa4ef92e58e61b1693f2",
      "original_position" : 124,
      "path" : "src/net.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6371",
      "updated_at" : "2015-09-23T11:00:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/39632922",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "body" : "@jgarzik Thanks for review :).",
      "created_at" : "2015-09-16T14:04:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6371#issuecomment-140751522",
      "id" : 140751522,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6371",
      "updated_at" : "2015-09-16T14:04:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/140751522",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6371#discussion_r39648416"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6371"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/39648416"
         }
      },
      "body" : "I think it was `if (!CNode::BannedSetIsDirty()) return;`",
      "commit_id" : "0947bf92ef783d861c9a0870ef108bc78bcd3914",
      "created_at" : "2015-09-16T15:57:45Z",
      "diff_hunk" : "@@ -2470,28 +2473,31 @@ bool CBanDB::Read(banmap_t& banSet)\n         // ... verify the network matches ours\n         if (memcmp(pchMsgTmp, Params().MessageStart(), sizeof(pchMsgTmp)))\n             return error(\"%s: Invalid network magic number\", __func__);\n-        \n+\n         // de-serialize address data into one CAddrMan object\n         ssBanlist >> banSet;\n     }\n     catch (const std::exception& e) {\n         return error(\"%s: Deserialize or I/O error - %s\", __func__, e.what());\n     }\n-    \n+\n     return true;\n }\n \n void DumpBanlist()\n {\n-    int64_t nStart = GetTimeMillis();\n+    CNode::SweepBanned(); // clean unused entires (if bantime has expired)\n \n-    CNode::SweepBanned(); //clean unused entries (if bantime has expired)\n+    if (CNode::BannedSetIsDirty()) {\n+        int64_t nStart = GetTimeMillis();\n \n-    CBanDB bandb;\n-    banmap_t banmap;\n-    CNode::GetBanned(banmap);\n-    bandb.Write(banmap);\n+        CBanDB bandb;\n+        banmap_t banmap;\n+        CNode::GetBanned(banmap);\n+        if (bandb.Write(banmap))\n+            CNode::SetBannedSetDirty(false);\n \n-    LogPrint(\"net\", \"Flushed %d banned node ips/subnets to banlist.dat  %dms\\n\",\n-             banmap.size(), GetTimeMillis() - nStart);\n+        LogPrint(\"net\", \"Flushed %d banned node ips/subnets to banlist.dat  %dms\\n\",\n+            banmap.size(), GetTimeMillis() - nStart);\n+    }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6371#discussion_r39648416",
      "id" : 39648416,
      "original_commit_id" : "2678c7cc93eef4267a1cfa4ef92e58e61b1693f2",
      "original_position" : 124,
      "path" : "src/net.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6371",
      "updated_at" : "2015-09-23T11:00:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/39648416",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=3",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6371#discussion_r39654044"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6371"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/39654044"
         }
      },
      "body" : "LOL, got it now ;)... thanks for that hint.",
      "commit_id" : "0947bf92ef783d861c9a0870ef108bc78bcd3914",
      "created_at" : "2015-09-16T16:44:55Z",
      "diff_hunk" : "@@ -2470,28 +2473,31 @@ bool CBanDB::Read(banmap_t& banSet)\n         // ... verify the network matches ours\n         if (memcmp(pchMsgTmp, Params().MessageStart(), sizeof(pchMsgTmp)))\n             return error(\"%s: Invalid network magic number\", __func__);\n-        \n+\n         // de-serialize address data into one CAddrMan object\n         ssBanlist >> banSet;\n     }\n     catch (const std::exception& e) {\n         return error(\"%s: Deserialize or I/O error - %s\", __func__, e.what());\n     }\n-    \n+\n     return true;\n }\n \n void DumpBanlist()\n {\n-    int64_t nStart = GetTimeMillis();\n+    CNode::SweepBanned(); // clean unused entires (if bantime has expired)\n \n-    CNode::SweepBanned(); //clean unused entries (if bantime has expired)\n+    if (CNode::BannedSetIsDirty()) {\n+        int64_t nStart = GetTimeMillis();\n \n-    CBanDB bandb;\n-    banmap_t banmap;\n-    CNode::GetBanned(banmap);\n-    bandb.Write(banmap);\n+        CBanDB bandb;\n+        banmap_t banmap;\n+        CNode::GetBanned(banmap);\n+        if (bandb.Write(banmap))\n+            CNode::SetBannedSetDirty(false);\n \n-    LogPrint(\"net\", \"Flushed %d banned node ips/subnets to banlist.dat  %dms\\n\",\n-             banmap.size(), GetTimeMillis() - nStart);\n+        LogPrint(\"net\", \"Flushed %d banned node ips/subnets to banlist.dat  %dms\\n\",\n+            banmap.size(), GetTimeMillis() - nStart);\n+    }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6371#discussion_r39654044",
      "id" : 39654044,
      "original_commit_id" : "2678c7cc93eef4267a1cfa4ef92e58e61b1693f2",
      "original_position" : 124,
      "path" : "src/net.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6371",
      "updated_at" : "2015-09-23T11:00:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/39654044",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6371#discussion_r39913917"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6371"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/39913917"
         }
      },
      "body" : "`const`?",
      "commit_id" : "0947bf92ef783d861c9a0870ef108bc78bcd3914",
      "created_at" : "2015-09-19T01:01:47Z",
      "diff_hunk" : "@@ -555,11 +555,13 @@ void CNode::SweepBanned()\n     banmap_t::iterator it = setBanned.begin();\n     while(it != setBanned.end())\n     {\n+        CSubNet subNet = (*it).first;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6371#discussion_r39913917",
      "id" : 39913917,
      "original_commit_id" : "2678c7cc93eef4267a1cfa4ef92e58e61b1693f2",
      "original_position" : 13,
      "path" : "src/net.cpp",
      "position" : 13,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6371",
      "updated_at" : "2015-09-23T11:00:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/39913917",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/413395?v=3",
         "events_url" : "https://api.github.com/users/dcousens/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dcousens/followers",
         "following_url" : "https://api.github.com/users/dcousens/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dcousens/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dcousens",
         "id" : 413395,
         "login" : "dcousens",
         "organizations_url" : "https://api.github.com/users/dcousens/orgs",
         "received_events_url" : "https://api.github.com/users/dcousens/received_events",
         "repos_url" : "https://api.github.com/users/dcousens/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dcousens/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dcousens/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dcousens"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6371#discussion_r39913999"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6371"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/39913999"
         }
      },
      "body" : "nit: Avoid the negation in logic here now that we handle both cases?",
      "commit_id" : "0947bf92ef783d861c9a0870ef108bc78bcd3914",
      "created_at" : "2015-09-19T01:05:33Z",
      "diff_hunk" : "@@ -1901,31 +1898,37 @@ void static Discover(boost::thread_group& threadGroup)\n void StartNode(boost::thread_group& threadGroup, CScheduler& scheduler)\n {\n     uiInterface.InitMessage(_(\"Loading addresses...\"));\n-    // Load addresses for peers.dat\n+    // Load addresses from peers.dat\n     int64_t nStart = GetTimeMillis();\n     {\n         CAddrDB adb;\n         if (!adb.Read(addrman))",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6371#discussion_r39913999",
      "id" : 39913999,
      "original_commit_id" : "2678c7cc93eef4267a1cfa4ef92e58e61b1693f2",
      "original_position" : 46,
      "path" : "src/net.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6371",
      "updated_at" : "2015-09-23T11:00:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/39913999",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/413395?v=3",
         "events_url" : "https://api.github.com/users/dcousens/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dcousens/followers",
         "following_url" : "https://api.github.com/users/dcousens/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dcousens/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dcousens",
         "id" : 413395,
         "login" : "dcousens",
         "organizations_url" : "https://api.github.com/users/dcousens/orgs",
         "received_events_url" : "https://api.github.com/users/dcousens/received_events",
         "repos_url" : "https://api.github.com/users/dcousens/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dcousens/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dcousens/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dcousens"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6371#discussion_r39914135"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6371"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/39914135"
         }
      },
      "body" : "nit: same here?",
      "commit_id" : "0947bf92ef783d861c9a0870ef108bc78bcd3914",
      "created_at" : "2015-09-19T01:12:11Z",
      "diff_hunk" : "@@ -1901,31 +1898,37 @@ void static Discover(boost::thread_group& threadGroup)\n void StartNode(boost::thread_group& threadGroup, CScheduler& scheduler)\n {\n     uiInterface.InitMessage(_(\"Loading addresses...\"));\n-    // Load addresses for peers.dat\n+    // Load addresses from peers.dat\n     int64_t nStart = GetTimeMillis();\n     {\n         CAddrDB adb;\n         if (!adb.Read(addrman))\n             LogPrintf(\"Invalid or missing peers.dat; recreating\\n\");\n+        else\n+            LogPrintf(\"Loaded %i addresses from peers.dat  %dms\\n\", addrman.size(), GetTimeMillis() - nStart);\n     }\n \n-    //try to read stored banlist\n+    uiInterface.InitMessage(_(\"Loading banlist...\"));\n+    // Load addresses from banlist.dat\n+    nStart = GetTimeMillis();\n     CBanDB bandb;\n     banmap_t banmap;\n-    if (!bandb.Read(banmap))\n+    if (!bandb.Read(banmap)) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6371#discussion_r39914135",
      "id" : 39914135,
      "original_commit_id" : "2678c7cc93eef4267a1cfa4ef92e58e61b1693f2",
      "original_position" : 59,
      "path" : "src/net.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6371",
      "updated_at" : "2015-09-23T11:00:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/39914135",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/413395?v=3",
         "events_url" : "https://api.github.com/users/dcousens/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dcousens/followers",
         "following_url" : "https://api.github.com/users/dcousens/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dcousens/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dcousens",
         "id" : 413395,
         "login" : "dcousens",
         "organizations_url" : "https://api.github.com/users/dcousens/orgs",
         "received_events_url" : "https://api.github.com/users/dcousens/received_events",
         "repos_url" : "https://api.github.com/users/dcousens/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dcousens/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dcousens/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dcousens"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6371#discussion_r39914439"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6371"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/39914439"
         }
      },
      "body" : "`s/entires/entries`",
      "commit_id" : "0947bf92ef783d861c9a0870ef108bc78bcd3914",
      "created_at" : "2015-09-19T01:27:46Z",
      "diff_hunk" : "@@ -2470,28 +2473,31 @@ bool CBanDB::Read(banmap_t& banSet)\n         // ... verify the network matches ours\n         if (memcmp(pchMsgTmp, Params().MessageStart(), sizeof(pchMsgTmp)))\n             return error(\"%s: Invalid network magic number\", __func__);\n-        \n+\n         // de-serialize address data into one CAddrMan object\n         ssBanlist >> banSet;\n     }\n     catch (const std::exception& e) {\n         return error(\"%s: Deserialize or I/O error - %s\", __func__, e.what());\n     }\n-    \n+\n     return true;\n }\n \n void DumpBanlist()\n {\n-    int64_t nStart = GetTimeMillis();\n+    CNode::SweepBanned(); // clean unused entires (if bantime has expired)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6371#discussion_r39914439",
      "id" : 39914439,
      "original_commit_id" : "2678c7cc93eef4267a1cfa4ef92e58e61b1693f2",
      "original_position" : 104,
      "path" : "src/net.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6371",
      "updated_at" : "2015-09-23T11:00:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/39914439",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/413395?v=3",
         "events_url" : "https://api.github.com/users/dcousens/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dcousens/followers",
         "following_url" : "https://api.github.com/users/dcousens/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dcousens/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dcousens",
         "id" : 413395,
         "login" : "dcousens",
         "organizations_url" : "https://api.github.com/users/dcousens/orgs",
         "received_events_url" : "https://api.github.com/users/dcousens/received_events",
         "repos_url" : "https://api.github.com/users/dcousens/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dcousens/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dcousens/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dcousens"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6371#discussion_r39914523"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6371"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/39914523"
         }
      },
      "body" : "@Diapolo any chance you'll do the early exit as @jgarzik suggested?",
      "commit_id" : "0947bf92ef783d861c9a0870ef108bc78bcd3914",
      "created_at" : "2015-09-19T01:34:16Z",
      "diff_hunk" : "@@ -2470,28 +2473,31 @@ bool CBanDB::Read(banmap_t& banSet)\n         // ... verify the network matches ours\n         if (memcmp(pchMsgTmp, Params().MessageStart(), sizeof(pchMsgTmp)))\n             return error(\"%s: Invalid network magic number\", __func__);\n-        \n+\n         // de-serialize address data into one CAddrMan object\n         ssBanlist >> banSet;\n     }\n     catch (const std::exception& e) {\n         return error(\"%s: Deserialize or I/O error - %s\", __func__, e.what());\n     }\n-    \n+\n     return true;\n }\n \n void DumpBanlist()\n {\n-    int64_t nStart = GetTimeMillis();\n+    CNode::SweepBanned(); // clean unused entires (if bantime has expired)\n \n-    CNode::SweepBanned(); //clean unused entries (if bantime has expired)\n+    if (CNode::BannedSetIsDirty()) {\n+        int64_t nStart = GetTimeMillis();\n \n-    CBanDB bandb;\n-    banmap_t banmap;\n-    CNode::GetBanned(banmap);\n-    bandb.Write(banmap);\n+        CBanDB bandb;\n+        banmap_t banmap;\n+        CNode::GetBanned(banmap);\n+        if (bandb.Write(banmap))\n+            CNode::SetBannedSetDirty(false);\n \n-    LogPrint(\"net\", \"Flushed %d banned node ips/subnets to banlist.dat  %dms\\n\",\n-             banmap.size(), GetTimeMillis() - nStart);\n+        LogPrint(\"net\", \"Flushed %d banned node ips/subnets to banlist.dat  %dms\\n\",\n+            banmap.size(), GetTimeMillis() - nStart);\n+    }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6371#discussion_r39914523",
      "id" : 39914523,
      "original_commit_id" : "2678c7cc93eef4267a1cfa4ef92e58e61b1693f2",
      "original_position" : 124,
      "path" : "src/net.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6371",
      "updated_at" : "2015-09-23T11:00:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/39914523",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/413395?v=3",
         "events_url" : "https://api.github.com/users/dcousens/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dcousens/followers",
         "following_url" : "https://api.github.com/users/dcousens/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dcousens/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dcousens",
         "id" : 413395,
         "login" : "dcousens",
         "organizations_url" : "https://api.github.com/users/dcousens/orgs",
         "received_events_url" : "https://api.github.com/users/dcousens/received_events",
         "repos_url" : "https://api.github.com/users/dcousens/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dcousens/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dcousens/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dcousens"
      }
   },
   {
      "body" : "utACK",
      "created_at" : "2015-09-19T01:50:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6371#issuecomment-141607988",
      "id" : 141607988,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6371",
      "updated_at" : "2015-09-19T01:50:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/141607988",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/413395?v=3",
         "events_url" : "https://api.github.com/users/dcousens/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dcousens/followers",
         "following_url" : "https://api.github.com/users/dcousens/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dcousens/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dcousens",
         "id" : 413395,
         "login" : "dcousens",
         "organizations_url" : "https://api.github.com/users/dcousens/orgs",
         "received_events_url" : "https://api.github.com/users/dcousens/received_events",
         "repos_url" : "https://api.github.com/users/dcousens/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dcousens/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dcousens/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dcousens"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6371#discussion_r39918826"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6371"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/39918826"
         }
      },
      "body" : "Not used a single time currently in net.cpp with (*it), so I'll leave that. But I'm open for further comments on this.",
      "commit_id" : "0947bf92ef783d861c9a0870ef108bc78bcd3914",
      "created_at" : "2015-09-19T11:28:39Z",
      "diff_hunk" : "@@ -555,11 +555,13 @@ void CNode::SweepBanned()\n     banmap_t::iterator it = setBanned.begin();\n     while(it != setBanned.end())\n     {\n+        CSubNet subNet = (*it).first;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6371#discussion_r39918826",
      "id" : 39918826,
      "original_commit_id" : "2678c7cc93eef4267a1cfa4ef92e58e61b1693f2",
      "original_position" : 13,
      "path" : "src/net.cpp",
      "position" : 13,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6371",
      "updated_at" : "2015-09-23T11:00:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/39918826",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6371#discussion_r39918842"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6371"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/39918842"
         }
      },
      "body" : "OK, will push a new version.",
      "commit_id" : "0947bf92ef783d861c9a0870ef108bc78bcd3914",
      "created_at" : "2015-09-19T11:32:26Z",
      "diff_hunk" : "@@ -1901,31 +1898,37 @@ void static Discover(boost::thread_group& threadGroup)\n void StartNode(boost::thread_group& threadGroup, CScheduler& scheduler)\n {\n     uiInterface.InitMessage(_(\"Loading addresses...\"));\n-    // Load addresses for peers.dat\n+    // Load addresses from peers.dat\n     int64_t nStart = GetTimeMillis();\n     {\n         CAddrDB adb;\n         if (!adb.Read(addrman))",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6371#discussion_r39918842",
      "id" : 39918842,
      "original_commit_id" : "2678c7cc93eef4267a1cfa4ef92e58e61b1693f2",
      "original_position" : 46,
      "path" : "src/net.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6371",
      "updated_at" : "2015-09-23T11:00:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/39918842",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6371#discussion_r39918862"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6371"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/39918862"
         }
      },
      "body" : "Yeah, will also push a new version ;).",
      "commit_id" : "0947bf92ef783d861c9a0870ef108bc78bcd3914",
      "created_at" : "2015-09-19T11:36:38Z",
      "diff_hunk" : "@@ -1901,31 +1898,37 @@ void static Discover(boost::thread_group& threadGroup)\n void StartNode(boost::thread_group& threadGroup, CScheduler& scheduler)\n {\n     uiInterface.InitMessage(_(\"Loading addresses...\"));\n-    // Load addresses for peers.dat\n+    // Load addresses from peers.dat\n     int64_t nStart = GetTimeMillis();\n     {\n         CAddrDB adb;\n         if (!adb.Read(addrman))\n             LogPrintf(\"Invalid or missing peers.dat; recreating\\n\");\n+        else\n+            LogPrintf(\"Loaded %i addresses from peers.dat  %dms\\n\", addrman.size(), GetTimeMillis() - nStart);\n     }\n \n-    //try to read stored banlist\n+    uiInterface.InitMessage(_(\"Loading banlist...\"));\n+    // Load addresses from banlist.dat\n+    nStart = GetTimeMillis();\n     CBanDB bandb;\n     banmap_t banmap;\n-    if (!bandb.Read(banmap))\n+    if (!bandb.Read(banmap)) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6371#discussion_r39918862",
      "id" : 39918862,
      "original_commit_id" : "2678c7cc93eef4267a1cfa4ef92e58e61b1693f2",
      "original_position" : 59,
      "path" : "src/net.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6371",
      "updated_at" : "2015-09-23T11:00:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/39918862",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "body" : "@dcousens @jgarzik Reworked to fix your valuable nits, can you re-check and re-ACK please?",
      "created_at" : "2015-09-19T11:58:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6371#issuecomment-141656996",
      "id" : 141656996,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6371",
      "updated_at" : "2015-09-19T11:58:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/141656996",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "body" : "@Diapolo re-reviewed commit-by-commit.  utACK / concept ACK (683275e)",
      "created_at" : "2015-09-19T15:21:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6371#issuecomment-141679272",
      "id" : 141679272,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6371",
      "updated_at" : "2015-09-19T15:21:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/141679272",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/413395?v=3",
         "events_url" : "https://api.github.com/users/dcousens/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dcousens/followers",
         "following_url" : "https://api.github.com/users/dcousens/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dcousens/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dcousens",
         "id" : 413395,
         "login" : "dcousens",
         "organizations_url" : "https://api.github.com/users/dcousens/orgs",
         "received_events_url" : "https://api.github.com/users/dcousens/received_events",
         "repos_url" : "https://api.github.com/users/dcousens/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dcousens/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dcousens/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dcousens"
      }
   },
   {
      "body" : "Seems unrelated!?\r\n\r\n```\r\nRunning 161 test cases...\r\n\r\nNo output has been received in the last 10 minutes, this potentially indicates a stalled build or something wrong with the build itself.\r\n\r\nThe build has been terminated\r\n```",
      "created_at" : "2015-09-21T05:58:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6371#issuecomment-141883262",
      "id" : 141883262,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6371",
      "updated_at" : "2015-09-21T05:58:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/141883262",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "body" : "What is holding up the merge here?\r\n@jgarzik Ping :)",
      "created_at" : "2015-10-09T07:16:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6371#issuecomment-146775342",
      "id" : 146775342,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6371",
      "updated_at" : "2015-10-09T07:16:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/146775342",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "body" : "utACK",
      "created_at" : "2015-10-12T23:56:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6371#issuecomment-147551879",
      "id" : 147551879,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6371",
      "updated_at" : "2015-10-12T23:56:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/147551879",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/413395?v=3",
         "events_url" : "https://api.github.com/users/dcousens/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dcousens/followers",
         "following_url" : "https://api.github.com/users/dcousens/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dcousens/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dcousens",
         "id" : 413395,
         "login" : "dcousens",
         "organizations_url" : "https://api.github.com/users/dcousens/orgs",
         "received_events_url" : "https://api.github.com/users/dcousens/received_events",
         "repos_url" : "https://api.github.com/users/dcousens/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dcousens/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dcousens/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dcousens"
      }
   },
   {
      "body" : "All utACK but I can't really see from the code changes whether it's correct. No one has tested this yet? Or is this covered by the current tests?",
      "created_at" : "2015-10-27T08:14:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6371#issuecomment-151410217",
      "id" : 151410217,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6371",
      "updated_at" : "2015-10-27T08:14:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/151410217",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Well, I tested it :-D and I also was aware of these things while @jonasschnelli implemented it, but AFAIK no one was interrested in fixing/improving at that time...",
      "created_at" : "2015-10-27T16:57:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6371#issuecomment-151568545",
      "id" : 151568545,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6371",
      "updated_at" : "2015-10-27T16:57:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/151568545",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "body" : "utACK. A unittest would be nice (or extending the rpc test with some banlist.dat checking on file basis).",
      "created_at" : "2015-10-27T17:05:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6371#issuecomment-151570985",
      "id" : 151570985,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6371",
      "updated_at" : "2015-10-27T17:05:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/151570985",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   }
]
