[
   {
      "body" : "Very nice, I was just struggling with some failing tests and thinking about adding logging. Concept ACK, testing.",
      "created_at" : "2016-10-26T11:37:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9023#issuecomment-256322221",
      "id" : 256322221,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9023",
      "updated_at" : "2016-10-26T11:37:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/256322221",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7275704?v=3",
         "events_url" : "https://api.github.com/users/btcdrak/events{/privacy}",
         "followers_url" : "https://api.github.com/users/btcdrak/followers",
         "following_url" : "https://api.github.com/users/btcdrak/following{/other_user}",
         "gists_url" : "https://api.github.com/users/btcdrak/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/btcdrak",
         "id" : 7275704,
         "login" : "btcdrak",
         "organizations_url" : "https://api.github.com/users/btcdrak/orgs",
         "received_events_url" : "https://api.github.com/users/btcdrak/received_events",
         "repos_url" : "https://api.github.com/users/btcdrak/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/btcdrak/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/btcdrak/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/btcdrak"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/9023#discussion_r85103060"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9023"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/85103060"
         }
      },
      "body" : "Any reason to use `raise Exception` instead of `raise`?",
      "commit_id" : "32c0d6e1d2b360501370efef40468ca28cc2cd89",
      "created_at" : "2016-10-26T11:39:48Z",
      "diff_hunk" : "@@ -23,39 +25,56 @@ def bctest(testDir, testObj, exeext):\n \toutputData = None\n \tif \"output_cmp\" in testObj:\n \t\toutputFn = testObj['output_cmp']\n-\t\toutputData = open(testDir + \"/\" + outputFn).read()\n+\t\ttry:\n+\t\t\toutputData = open(testDir + \"/\" + outputFn).read()\n+\t\texcept:\n+\t\t\tlogging.error(\"Output file \" + outputFn + \" can not be opened\")\n+\t\t\traise Exception",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9023#discussion_r85103060",
      "id" : 85103060,
      "original_commit_id" : "d7df43b202f2bbeba3d94e2bbc9a301141bfa62f",
      "original_position" : 18,
      "path" : "src/test/bctest.py",
      "position" : null,
      "pull_request_review_id" : 5837282,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9023",
      "updated_at" : "2016-11-02T18:17:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/85103060",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=3",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/9023#discussion_r85126757"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9023"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/85126757"
         }
      },
      "body" : "You're right - `raise` is better. I've updated it.",
      "commit_id" : "32c0d6e1d2b360501370efef40468ca28cc2cd89",
      "created_at" : "2016-10-26T13:53:15Z",
      "diff_hunk" : "@@ -23,39 +25,56 @@ def bctest(testDir, testObj, exeext):\n \toutputData = None\n \tif \"output_cmp\" in testObj:\n \t\toutputFn = testObj['output_cmp']\n-\t\toutputData = open(testDir + \"/\" + outputFn).read()\n+\t\ttry:\n+\t\t\toutputData = open(testDir + \"/\" + outputFn).read()\n+\t\texcept:\n+\t\t\tlogging.error(\"Output file \" + outputFn + \" can not be opened\")\n+\t\t\traise Exception",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9023#discussion_r85126757",
      "id" : 85126757,
      "original_commit_id" : "d7df43b202f2bbeba3d94e2bbc9a301141bfa62f",
      "original_position" : 18,
      "path" : "src/test/bctest.py",
      "position" : null,
      "pull_request_review_id" : 5859535,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9023",
      "updated_at" : "2016-11-02T18:17:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/85126757",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "body" : "Tested ACK d7df43b202f2bbeba3d94e2bbc9a301141bfa62f",
      "created_at" : "2016-10-26T15:18:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9023#issuecomment-256379743",
      "id" : 256379743,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9023",
      "updated_at" : "2016-10-26T15:18:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/256379743",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7275704?v=3",
         "events_url" : "https://api.github.com/users/btcdrak/events{/privacy}",
         "followers_url" : "https://api.github.com/users/btcdrak/followers",
         "following_url" : "https://api.github.com/users/btcdrak/following{/other_user}",
         "gists_url" : "https://api.github.com/users/btcdrak/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/btcdrak",
         "id" : 7275704,
         "login" : "btcdrak",
         "organizations_url" : "https://api.github.com/users/btcdrak/orgs",
         "received_events_url" : "https://api.github.com/users/btcdrak/received_events",
         "repos_url" : "https://api.github.com/users/btcdrak/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/btcdrak/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/btcdrak/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/btcdrak"
      }
   },
   {
      "body" : "Concept ACK, but I think this makes the test too noisy in the passing case. Ideally tests are silent if nothing is wrong and noisy if they break.\r\n\r\nWhy not just print a diff when the comparison fails, and leave it at that? (in non-verbose mode)\r\n",
      "created_at" : "2016-10-27T12:16:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9023#issuecomment-256624789",
      "id" : 256624789,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9023",
      "updated_at" : "2016-10-27T12:26:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/256624789",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "After some chat with @laanwj can you make this silently pass tests unless `--verbose` is selected? But output failure cases by default without `--verbose`?",
      "created_at" : "2016-10-27T12:26:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9023#issuecomment-256626677",
      "id" : 256626677,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9023",
      "updated_at" : "2016-10-27T12:26:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/256626677",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7275704?v=3",
         "events_url" : "https://api.github.com/users/btcdrak/events{/privacy}",
         "followers_url" : "https://api.github.com/users/btcdrak/followers",
         "following_url" : "https://api.github.com/users/btcdrak/following{/other_user}",
         "gists_url" : "https://api.github.com/users/btcdrak/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/btcdrak",
         "id" : 7275704,
         "login" : "btcdrak",
         "organizations_url" : "https://api.github.com/users/btcdrak/orgs",
         "received_events_url" : "https://api.github.com/users/btcdrak/received_events",
         "repos_url" : "https://api.github.com/users/btcdrak/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/btcdrak/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/btcdrak/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/btcdrak"
      }
   },
   {
      "body" : "Easiest way would be to move PASSED messages to the debug level:\r\n```patch\r\ndiff --git a/src/test/bctest.py b/src/test/bctest.py\r\nindex e575b22..0e83284 100644\r\n--- a/src/test/bctest.py\r\n+++ b/src/test/bctest.py\r\n@@ -67,7 +67,7 @@ def bctester(testDir, input_basename, buildenv):\r\n        for testObj in input_data:\r\n                try:\r\n                        bctest(testDir, testObj, buildenv.exeext)\r\n-                       logging.info(\"PASSED: \" + testObj[\"description\"])\r\n+                       logging.debug(\"PASSED: \" + testObj[\"description\"])\r\n                except:\r\n                        logging.info(\"FAILED: \" + testObj[\"description\"])\r\n                        failed_testcases.append(testObj[\"description\"])\r\n```\r\nHowever `-v` doesn't seem to work here? Debug messages aren't printed.\r\n",
      "created_at" : "2016-10-27T12:39:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9023#issuecomment-256629357",
      "id" : 256629357,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9023",
      "updated_at" : "2016-10-27T12:39:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/256629357",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "This helps, you're setting the log level twice.\r\n```patch\r\ndiff --git a/src/test/bitcoin-util-test.py b/src/test/bitcoin-util-test.py\r\nindex 3bae55d..c72dc9f 100755\r\n--- a/src/test/bitcoin-util-test.py\r\n+++ b/src/test/bitcoin-util-test.py\r\n@@ -35,12 +35,12 @@ if __name__ == '__main__':\r\n     # Create logging handler\r\n     ch = logging.StreamHandler(sys.stdout)\r\n     if verbose:\r\n-        ch.setLevel(logging.DEBUG)\r\n+        level = logging.DEBUG\r\n     else:\r\n-        ch.setLevel(logging.ERROR)\r\n+        level = logging.ERROR\r\n     formatter = logging.Formatter('%(asctime)s - %(levelname)s - %(message)s')\r\n     ch.setFormatter(formatter)\r\n     # Add the handlers to the logger\r\n-    logging.basicConfig(level=logging.INFO, handlers=[ch])\r\n+    logging.basicConfig(level=level, handlers=[ch])\r\n \r\n     bctest.bctester(srcdir + \"/test/data\", \"bitcoin-util-test.json\", buildenv)\r\n```",
      "created_at" : "2016-10-27T12:42:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9023#issuecomment-256629925",
      "id" : 256629925,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9023",
      "updated_at" : "2016-10-27T12:42:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/256629925",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "@laanwj - I believe the log level needs to be set once for the logger and once for the handler. See https://docs.python.org/3/howto/logging.html#logging-flow for how log levels are set in logging.\r\n\r\nThe intent was certainly that without verbose the behaviour would be:\r\n\r\n- failures are logged\r\n- successes are silent\r\n- a summary of failed testcases is printed at the end.\r\n\r\nWith verbose, both failure and success is logged along with a summary of results.\r\n\r\nHere's my output when running with and without verbose for a single test failing:\r\n\r\n**NOT VERBOSE:**\r\n\r\n```\r\nvagrant@vagrant-ubuntu-trusty-64:~/bitcoin/src$ python3 test/bitcoin-util-test.py --srcdir='.'\r\n2016-10-27 14:07:31,584 - ERROR - Output data mismatch for txcreate1.json:\r\n*** txcreate1.json\r\n--- returned\r\n***************\r\n*** 1,6 ****\r\n  {\r\n      \"txid\": \"f70f0d6c71416ed538e37549f430ab3665fee2437a42f10238c1bd490e782231\",\r\n!     \"hash\": \"I'm a bad hash\",\r\n      \"version\": 1,\r\n      \"locktime\": 0,\r\n      \"vin\": [\r\n--- 1,6 ----\r\n  {\r\n      \"txid\": \"f70f0d6c71416ed538e37549f430ab3665fee2437a42f10238c1bd490e782231\",\r\n!     \"hash\": \"f70f0d6c71416ed538e37549f430ab3665fee2437a42f10238c1bd490e782231\",\r\n      \"version\": 1,\r\n      \"locktime\": 0,\r\n      \"vin\": [\r\n\r\n2016-10-27 14:07:31,688 - ERROR - FAILED TESTCASES: [Creates a new transaction with three inputs and two outputs (output in json)]\r\n```\r\n\r\n**VERBOSE:**\r\n\r\n```\r\nvagrant@vagrant-ubuntu-trusty-64:~/bitcoin/src$ python3 test/bitcoin-util-test.py --srcdir='.' --verbose\r\n2016-10-27 14:07:26,766 - INFO - PASSED: Creates a blank transaction\r\n2016-10-27 14:07:26,771 - INFO - PASSED: Creates a blank transaction (output in json)\r\n2016-10-27 14:07:26,778 - INFO - PASSED: Creates a blank transaction when nothing is piped into bitcoin-tx\r\n2016-10-27 14:07:26,785 - INFO - PASSED: Creates a blank transaction when nothing is piped into bitcoin-tx (output in json)\r\n2016-10-27 14:07:26,791 - INFO - PASSED: Deletes a single input from a transaction\r\n2016-10-27 14:07:26,797 - INFO - PASSED: Deletes a single input from a transaction (output in json)\r\n2016-10-27 14:07:26,810 - INFO - PASSED: Attempts to delete an input with a bad index from a transaction. Expected to fail.\r\n2016-10-27 14:07:26,818 - INFO - PASSED: Deletes a single output from a transaction\r\n2016-10-27 14:07:26,828 - INFO - PASSED: Deletes a single output from a transaction (output in json)\r\n2016-10-27 14:07:26,835 - INFO - PASSED: Attempts to delete an output with a bad index from a transaction. Expected to fail.\r\n2016-10-27 14:07:26,840 - INFO - PASSED: Adds an nlocktime to a transaction\r\n2016-10-27 14:07:26,847 - INFO - PASSED: Adds an nlocktime to a transaction (output in json)\r\n2016-10-27 14:07:26,855 - INFO - PASSED: Creates a new transaction with three inputs and two outputs\r\n2016-10-27 14:07:26,865 - ERROR - Output data mismatch for txcreate1.json:\r\n*** txcreate1.json\r\n--- returned\r\n***************\r\n*** 1,6 ****\r\n  {\r\n      \"txid\": \"f70f0d6c71416ed538e37549f430ab3665fee2437a42f10238c1bd490e782231\",\r\n!     \"hash\": \"I'm a bad hash\",\r\n      \"version\": 1,\r\n      \"locktime\": 0,\r\n      \"vin\": [\r\n--- 1,6 ----\r\n  {\r\n      \"txid\": \"f70f0d6c71416ed538e37549f430ab3665fee2437a42f10238c1bd490e782231\",\r\n!     \"hash\": \"f70f0d6c71416ed538e37549f430ab3665fee2437a42f10238c1bd490e782231\",\r\n      \"version\": 1,\r\n      \"locktime\": 0,\r\n      \"vin\": [\r\n\r\n2016-10-27 14:07:26,869 - INFO - FAILED: Creates a new transaction with three inputs and two outputs (output in json)\r\n2016-10-27 14:07:26,877 - INFO - PASSED: Creates a new transaction with a single empty output script\r\n2016-10-27 14:07:26,884 - INFO - PASSED: Creates a new transaction with a single empty output script (output in json)\r\n2016-10-27 14:07:26,912 - INFO - PASSED: Creates a new transaction with a single input and a single output, and then signs the transaction\r\n2016-10-27 14:07:26,934 - INFO - PASSED: Creates a new transaction with a single input and a single output, and then signs the transaction (output in json)\r\n2016-10-27 14:07:26,940 - INFO - PASSED: Attempts to create a new transaction with one input and an output with malformed hex data. Expected to fail\r\n2016-10-27 14:07:26,945 - INFO - PASSED: Attempts to create a new transaction with one input and an output with no value and malformed hex data. Expected to fail\r\n2016-10-27 14:07:26,955 - INFO - PASSED: Creates a new transaction with one input, one address output and one data output\r\n2016-10-27 14:07:26,962 - INFO - PASSED: Creates a new transaction with one input, one address output and one data output (output in json)\r\n2016-10-27 14:07:26,968 - INFO - PASSED: Creates a new transaction with one input, one address output and one data (zero value) output\r\n2016-10-27 14:07:26,974 - INFO - PASSED: Creates a new transaction with one input, one address output and one data (zero value) output (output in json)\r\n2016-10-27 14:07:26,982 - INFO - PASSED: Creates a new transaction with one input with sequence number and one address output\r\n2016-10-27 14:07:26,991 - INFO - PASSED: Creates a new transaction with one input with sequence number and one address output (output in json)\r\n2016-10-27 14:07:26,999 - INFO - PASSED: Adds a new input with sequence number to a transaction\r\n2016-10-27 14:07:27,007 - INFO - PASSED: Adds a new input with sequence number to a transaction (output in json)\r\n2016-10-27 14:07:27,007 - ERROR - FAILED TESTCASES: [Creates a new transaction with three inputs and two outputs (output in json)]\r\n```\r\n\r\nwith automated runs (`make check`) verbose should not be set.\r\n\r\nAre you seeing something different?",
      "created_at" : "2016-10-27T14:11:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9023#issuecomment-256652535",
      "id" : 256652535,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9023",
      "updated_at" : "2016-10-27T14:11:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/256652535",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "body" : "Ah I'm apparently testing with python, the default interpreter in the `#!` line (which is python2, not python3 on Ubuntu 16.04). In any case the `-v` flag didn't do anything, until applying the second patch.\r\n\r\nThe first patch doesn't seem to be necessary. Indeed the log level for non-verbose is set to ERROR so the INFO messages should already not get logged.\r\n\r\nWithout that, I always get verbose behavior:\r\n\r\n```bash\r\n$ PYTHONPATH=./test $HOME/projects/bitcoin/bitcoin/src/test/bitcoin-util-test.py -s $HOME/projects/bitcoin/bitcoin/src\r\nINFO:root:PASSED: Creates a blank transaction\r\nINFO:root:PASSED: Creates a blank transaction (output in json)\r\nINFO:root:PASSED: Creates a blank transaction when nothing is piped into bitcoin-tx\r\nINFO:root:PASSED: Creates a blank transaction when nothing is piped into bitcoin-tx (output in json)\r\nINFO:root:PASSED: Deletes a single input from a transaction\r\nINFO:root:PASSED: Deletes a single input from a transaction (output in json)\r\nINFO:root:PASSED: Attempts to delete an input with a bad index from a transaction. Expected to fail.\r\nINFO:root:PASSED: Deletes a single output from a transaction\r\nINFO:root:PASSED: Deletes a single output from a transaction (output in json)\r\nINFO:root:PASSED: Attempts to delete an output with a bad index from a transaction. Expected to fail.\r\nINFO:root:PASSED: Adds an nlocktime to a transaction\r\nINFO:root:PASSED: Adds an nlocktime to a transaction (output in json)\r\nINFO:root:PASSED: Creates a new transaction with three inputs and two outputs\r\nINFO:root:PASSED: Creates a new transaction with three inputs and two outputs (output in json)\r\nINFO:root:PASSED: Creates a new transaction with a single empty output script\r\nINFO:root:PASSED: Creates a new transaction with a single empty output script (output in json)\r\nINFO:root:PASSED: Creates a new transaction with a single input and a single output, and then signs the transaction\r\nINFO:root:PASSED: Creates a new transaction with a single input and a single output, and then signs the transaction (output in json)\r\nINFO:root:PASSED: Attempts to create a new transaction with one input and an output with malformed hex data. Expected to fail\r\nINFO:root:PASSED: Attempts to create a new transaction with one input and an output with no value and malformed hex data. Expected to fail\r\nINFO:root:PASSED: Creates a new transaction with one input, one address output and one data output\r\nINFO:root:PASSED: Creates a new transaction with one input, one address output and one data output (output in json)\r\nINFO:root:PASSED: Creates a new transaction with one input, one address output and one data (zero value) output\r\nINFO:root:PASSED: Creates a new transaction with one input, one address output and one data (zero value) output (output in json)\r\nINFO:root:PASSED: Creates a new transaction with one input with sequence number and one address output\r\nINFO:root:PASSED: Creates a new transaction with one input with sequence number and one address output (output in json)\r\nINFO:root:PASSED: Adds a new input with sequence number to a transaction\r\nINFO:root:PASSED: Adds a new input with sequence number to a transaction (output in json)\r\n```\r\nWith python3 I get the behavior you describe.\r\n",
      "created_at" : "2016-10-27T14:39:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9023#issuecomment-256660729",
      "id" : 256660729,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9023",
      "updated_at" : "2016-10-27T14:39:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/256660729",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Oh, that makes sense. Are you happy for me to bump bitcoin-util-test.py and bctest.py to python3 as part of this PR?",
      "created_at" : "2016-10-27T15:09:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9023#issuecomment-256669572",
      "id" : 256669572,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9023",
      "updated_at" : "2016-10-27T15:09:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/256669572",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "body" : "Right now, all the scripts that are called by the build system work in python 2 and python 3. It seems it is quite easy to keep Python2 compatibility here (I even suggested a fix). But I don't care deeply.\r\n",
      "created_at" : "2016-10-27T15:32:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9023#issuecomment-256676692",
      "id" : 256676692,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9023",
      "updated_at" : "2016-10-28T11:37:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/256676692",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "The qa python scripts were changed to use python3 in https://github.com/bitcoin/bitcoin/pull/7737 , so it seems reasonable to me to also move bitcoin-test-util to python3.",
      "created_at" : "2016-10-28T14:55:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9023#issuecomment-256942991",
      "id" : 256942991,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9023",
      "updated_at" : "2016-10-28T14:55:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/256942991",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "body" : "The python scripts that are *not invoked* by the build system were changed to be Python 3 only. For example `qa/rpctests`, and `contrib/devtools`. This one is used by `make check` which would ideally keep working with python 2.\r\nI don't understand why you don't just apply the small patch I gave above to make it work with python 2 again.\r\n",
      "created_at" : "2016-10-28T16:10:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9023#issuecomment-256961769",
      "id" : 256961769,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9023",
      "updated_at" : "2016-10-28T16:10:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/256961769",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "@laanwj - I went ahead with changing this to Python3 because your last comment was that you didn't care deeply :)\r\n\r\nI can edit bitcoin-util-test.py again to make it compatible with Python 2 again, but I don't like your patch. The reason that the -v flag wasn't working with Python 2 is that the stream handler `ch` is being ignored. On line 44:\r\n\r\n`logging.basicConfig(level=logging.INFO, handlers=[ch])`\r\n\r\n`basicConfig()` takes a named `handlers` argument. This argument was added in Python 3.3 (https://docs.python.org/3.7/library/logging.html#logging.basicConfig), so in Python2 `basicConfig` will create a new stream handler to handle the logging. Your patch works because you change the logger level to `DEBUG`, and the default handler will have level`NOTSET`.\r\n\r\nThe outcome is that the `ch` stream logger is unused when this is run in Python 2 (that's why the formatting isn't correct for the logs). I think that makes the code confusing since we're setting up a handler and then not using it.\r\n\r\nI'd personally prefer to specify Python 3 to avoid having to think about Python2/3 compatibility issues like this. However, if you think there's a good reason to maintain Python 2 compatibility, I'll spend some more time to come up with a proper fix.\r\n\r\nLet me know what you think.\r\n\r\nNote: travis build has failed due to unrelated intermittent failure in `p2p-compactblocks.py`. I expect rerunning the travis build will succeed.",
      "created_at" : "2016-10-31T15:21:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9023#issuecomment-257323312",
      "id" : 257323312,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9023",
      "updated_at" : "2016-10-31T15:21:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/257323312",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "body" : "I don't care deeply, that doesn't mean no one else does. To be clear: breaking python 2 compatibility will possibly result in long discussions (as it means deprecating Python 2 support for \"make check\"), which have to be done on a higher level than in this PR only, whereas maintaining it means this can be merged fairly quickly.",
      "created_at" : "2016-10-31T15:53:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9023#issuecomment-257332788",
      "id" : 257332788,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9023",
      "updated_at" : "2016-10-31T15:53:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/257332788",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "needs rebase.",
      "created_at" : "2016-11-02T10:49:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9023#issuecomment-257831474",
      "id" : 257831474,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9023",
      "updated_at" : "2016-11-02T10:49:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/257831474",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7275704?v=3",
         "events_url" : "https://api.github.com/users/btcdrak/events{/privacy}",
         "followers_url" : "https://api.github.com/users/btcdrak/followers",
         "following_url" : "https://api.github.com/users/btcdrak/following{/other_user}",
         "gists_url" : "https://api.github.com/users/btcdrak/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/btcdrak",
         "id" : 7275704,
         "login" : "btcdrak",
         "organizations_url" : "https://api.github.com/users/btcdrak/orgs",
         "received_events_url" : "https://api.github.com/users/btcdrak/received_events",
         "repos_url" : "https://api.github.com/users/btcdrak/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/btcdrak/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/btcdrak/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/btcdrak"
      }
   },
   {
      "body" : "New squashed commit does the following:\r\n\r\n- rebased\r\n- Python3 compatibility restored\r\n- made logging compatible with Python2. Execution should be the same when running under Python2 and Python3",
      "created_at" : "2016-11-02T18:19:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9023#issuecomment-257954180",
      "id" : 257954180,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9023",
      "updated_at" : "2016-11-02T18:19:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/257954180",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "body" : "Tested ACK 32c0d6e",
      "created_at" : "2016-11-02T19:52:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9023#issuecomment-257979416",
      "id" : 257979416,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9023",
      "updated_at" : "2016-11-02T19:52:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/257979416",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   }
]
