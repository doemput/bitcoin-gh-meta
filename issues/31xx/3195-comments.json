[
   {
      "body" : "To avoid splitting the network on un-banning, we'll need a new block message...",
      "created_at" : "2013-11-04T03:42:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/3195#issuecomment-27663301",
      "id" : 27663301,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3195",
      "updated_at" : "2013-11-04T03:42:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/27663301",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "The plan could be:\r\n\r\n+ Release 0.9 that does not ban on invalid transaction-in-block.\r\n+ Wait until super-majority (e.g. 75%? 95%?) of network has upgraded, then do the relay-first-check-transactions-later thing.\r\n\r\nAn attacker could then try to split off a minority of the network by broadcasting a valid-pow-but-invalid-txn block, but at great cost and arbitrarily little benefit.\r\n\r\nA new variation of the 'block' message (\"block_that_might_possibly_be_invalid\") would work, too, but feels like the wrong solution to me right now.  Then again, having \"block\" mean \"I'm 100% sure this block and all of its transactions are okey dokey\" and another message meaning something slightly different might be best.",
      "created_at" : "2013-11-04T03:53:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/3195#issuecomment-27663524",
      "id" : 27663524,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3195",
      "updated_at" : "2013-11-04T04:42:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/27663524",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/331997?v=3",
         "events_url" : "https://api.github.com/users/gavinandresen/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gavinandresen/followers",
         "following_url" : "https://api.github.com/users/gavinandresen/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gavinandresen/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gavinandresen",
         "id" : 331997,
         "login" : "gavinandresen",
         "organizations_url" : "https://api.github.com/users/gavinandresen/orgs",
         "received_events_url" : "https://api.github.com/users/gavinandresen/received_events",
         "repos_url" : "https://api.github.com/users/gavinandresen/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gavinandresen/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gavinandresen/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gavinandresen"
      }
   },
   {
      "body" : "I don't think we should relay these as the same as validated blocks. Even with the DoS stuff out of the way, SPV nodes depend on full nodes to validate the blocks they've been handed.\r\n\r\nLuke implemented the block_that_might_possibly_be_invalid approach a while back in a long since closed pull request. It didn't yield improved propagation because of other single threading in the network handling code.\r\n\r\nSome thought is required here. That the existing network won't forward your blocks is part of the friction against \"altcoin attacks\", e.g. someone promoting an uncontrolled non-consensus hardfork.\r\n",
      "created_at" : "2013-11-04T16:04:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/3195#issuecomment-27696701",
      "id" : 27696701,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3195",
      "updated_at" : "2013-11-04T16:04:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/27696701",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "You could name the new message  \"block?\"  ;)",
      "created_at" : "2013-11-13T11:23:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/3195#issuecomment-28387167",
      "id" : 28387167,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3195",
      "updated_at" : "2013-11-13T11:23:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/28387167",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/971089?v=3",
         "events_url" : "https://api.github.com/users/mikehearn/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mikehearn/followers",
         "following_url" : "https://api.github.com/users/mikehearn/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mikehearn/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mikehearn",
         "id" : 971089,
         "login" : "mikehearn",
         "organizations_url" : "https://api.github.com/users/mikehearn/orgs",
         "received_events_url" : "https://api.github.com/users/mikehearn/received_events",
         "repos_url" : "https://api.github.com/users/mikehearn/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mikehearn/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mikehearn/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mikehearn"
      }
   },
   {
      "body" : "Why not just bump the nVersion and only relay possibly invalid to newer peers that don't DoS ban?\r\n\r\nBoth the super-majority and new message options seem overly complex to me.",
      "created_at" : "2013-11-26T17:17:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/3195#issuecomment-29311847",
      "id" : 29311847,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3195",
      "updated_at" : "2013-11-26T17:17:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/29311847",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7042?v=3",
         "events_url" : "https://api.github.com/users/petertodd/events{/privacy}",
         "followers_url" : "https://api.github.com/users/petertodd/followers",
         "following_url" : "https://api.github.com/users/petertodd/following{/other_user}",
         "gists_url" : "https://api.github.com/users/petertodd/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/petertodd",
         "id" : 7042,
         "login" : "petertodd",
         "organizations_url" : "https://api.github.com/users/petertodd/orgs",
         "received_events_url" : "https://api.github.com/users/petertodd/received_events",
         "repos_url" : "https://api.github.com/users/petertodd/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/petertodd/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/petertodd/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/petertodd"
      }
   },
   {
      "body" : "I'm wondering about the alternative of only relaying block headers after PoW is validated (which doesn't even need an 'inv' or making the block available to be queried from disk), and using the 'header first seen' criterion as tie-breaker for decision which chain to consider active in case of a fork.",
      "created_at" : "2014-04-24T16:29:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/3195#issuecomment-41301372",
      "id" : 41301372,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3195",
      "updated_at" : "2014-04-24T16:29:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/41301372",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "@sipa Creates a perverse incentive where you announce your found header fast but withhold the actual block until you find the next one so you can mine on it where other people cant.  Then that potentially creates a perverse response where you mine empty blocks on headers you have seen but haven't / can't-yet validate, and then perhaps a doubly perverse counter response where you then never announce the block when you weren't the party that got the block after it...",
      "created_at" : "2014-04-24T17:56:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/3195#issuecomment-41311630",
      "id" : 41311630,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3195",
      "updated_at" : "2014-04-24T17:56:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/41311630",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "@gmaxwell Once a successor block is mined on top, the early-relayed header becomes meaningless, as the rule would be to always aim to connect:\r\n* Look at all chains with fully available blocks.\r\n* Remove those which are known to be invalid.\r\n* Retain the ones whose total work is maximal.\r\n* If there is more than one left, choose the one whose tip's header was seen first.",
      "created_at" : "2014-04-24T18:08:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/3195#issuecomment-41312937",
      "id" : 41312937,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3195",
      "updated_at" : "2014-04-24T18:08:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/41312937",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "@gmaxwell I remember you giving a good explanation why this was a bad idea nonetheless, but I can't remember the details.",
      "created_at" : "2014-06-13T19:31:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/3195#issuecomment-46051056",
      "id" : 46051056,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3195",
      "updated_at" : "2014-06-13T19:31:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/46051056",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "@petertodd 's suggestion seems to make the most sense to me.",
      "created_at" : "2014-07-05T04:43:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/3195#issuecomment-48078320",
      "id" : 48078320,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3195",
      "updated_at" : "2014-07-05T04:43:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/48078320",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1530283?v=3",
         "events_url" : "https://api.github.com/users/rebroad/events{/privacy}",
         "followers_url" : "https://api.github.com/users/rebroad/followers",
         "following_url" : "https://api.github.com/users/rebroad/following{/other_user}",
         "gists_url" : "https://api.github.com/users/rebroad/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/rebroad",
         "id" : 1530283,
         "login" : "rebroad",
         "organizations_url" : "https://api.github.com/users/rebroad/orgs",
         "received_events_url" : "https://api.github.com/users/rebroad/received_events",
         "repos_url" : "https://api.github.com/users/rebroad/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/rebroad/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/rebroad/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/rebroad"
      }
   },
   {
      "body" : "Relaying blocks before checking their transactions would negatively impact miner incentives.\r\n\r\nMiners have strong incentives to minimize orphan rates of their blocks. Orphan rates are a function of block propagation time. Block propagation time is heavily impacted by how many signatures in the block need to be computed upon block receipt, as opposed to being cached when the transactions were received individually.\r\n\r\nThis means that miners are currently incentivized to disperse to the network as quickly and widely as possible not just the blocks they mine, but also the transactions contained in blocks their hashpower is attempting to mine -- which not only encourages transaction propagation, but *preferentially* encourages the propagation of the transactions most likely to be included in upcoming blocks.\r\n\r\nRemoving the effect of ahead-of-block transaction relay on miners' expected returns would eliminate their incentive to use their relay networks to push to the network any transactions. This is an incentive that I believe currently plays an active role in the network: I've been running my node with extra logging for a while that displays how many of the transactions in a received block were already known, and found that some of the time 100% of non-coinbase transactions have already been validated, while the average is much lower (typically ~70%). I think the most likely reason for this higher cluster would be that some miners ensure that transactions they're working on are relayed to the network as broadly as possible, while others do not have expansive relay networks or ill-advisedly use their relay networks only to push blocks.\r\n\r\nUnfortunately this mechanism does currently disincentivize miners from including in blocks non-standard transactions, since their signatures will typically be verified only once they are received in a block. However, this can be addressed without eliminating miners' incentives to broadcast transactions: one approach would be a network message for \"shares\", runt blocks that meet a difficulty criterion some fixed proportion of the network's actual requirement, that could be used to prove to nodes that work on a block containing certain transactions is underway and (like merkleblock) provide a subset of the contained transactions (incentives dictate that miners would typically include only the non-standard transactions), allowing nodes to verify in advance transactions they would not otherwise process or forward.",
      "created_at" : "2014-07-11T21:37:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/3195#issuecomment-48786007",
      "id" : 48786007,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3195",
      "updated_at" : "2014-07-11T21:38:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/48786007",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1047859?v=3",
         "events_url" : "https://api.github.com/users/kazcw/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kazcw/followers",
         "following_url" : "https://api.github.com/users/kazcw/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kazcw/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kazcw",
         "id" : 1047859,
         "login" : "kazcw",
         "organizations_url" : "https://api.github.com/users/kazcw/orgs",
         "received_events_url" : "https://api.github.com/users/kazcw/received_events",
         "repos_url" : "https://api.github.com/users/kazcw/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kazcw/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kazcw/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kazcw"
      }
   },
   {
      "body" : "@kazcw Really appreciating the analysis being done here. What branch of your fork\r\nincludes this extra logging please?",
      "created_at" : "2014-07-17T10:58:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/3195#issuecomment-49292300",
      "id" : 49292300,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3195",
      "updated_at" : "2014-09-06T09:51:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/49292300",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1530283?v=3",
         "events_url" : "https://api.github.com/users/rebroad/events{/privacy}",
         "followers_url" : "https://api.github.com/users/rebroad/followers",
         "following_url" : "https://api.github.com/users/rebroad/following{/other_user}",
         "gists_url" : "https://api.github.com/users/rebroad/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/rebroad",
         "id" : 1530283,
         "login" : "rebroad",
         "organizations_url" : "https://api.github.com/users/rebroad/orgs",
         "received_events_url" : "https://api.github.com/users/rebroad/received_events",
         "repos_url" : "https://api.github.com/users/rebroad/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/rebroad/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/rebroad/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/rebroad"
      }
   },
   {
      "body" : "Miners currently have an an incentive to relay transactions they include in blocks but It's more the reverse way: they have an incentive to include transactions already relayed by the network and already in other miners pools. \r\nSo relaying headers is optimal, as long as the transactions included are known.\r\nMining on empty headers is also fine, as long as the miner rolls-back to whatever block was mining before if after some time (e.g. 10 seconds) the transactions are not received and verified. The maximum empty mining time is accumulated for successive blocks (if a miner doesn't have transactions for the last 2 blocks, then he waits only 10 seconds before rolling-back, not 20 seconds, to prevent creating an infinite long empty branch).\r\n \r\nPublishing a header but withholding transactions becomes a bad strategy.\r\nThe only drawback is that a block mined on top of an unverified header must em empty (apart from the coinbase or self-transactions), and this requires the subsidy to be non-zero to incentivize this mining) \r\nSo the header-first strategy with immediate mining will work for, probably, 15 years.\r\nThere will be plenty of time to think of a better strategy then.\r\nAs an additional measure, the header can be marked with a bit in the nVersion field if it is empty, to allow miners so start mining non-empty blocks when an empty header is received.\r\n\r\nA little more info I posted here: http://bitslog.wordpress.com/2014/02/17/5-sec-block-interval/\r\nbut not much that has not already been said.\r\n ",
      "created_at" : "2014-08-12T03:05:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/3195#issuecomment-51868309",
      "id" : 51868309,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3195",
      "updated_at" : "2014-08-12T03:05:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/51868309",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1752347?v=3",
         "events_url" : "https://api.github.com/users/SergioDemianLerner/events{/privacy}",
         "followers_url" : "https://api.github.com/users/SergioDemianLerner/followers",
         "following_url" : "https://api.github.com/users/SergioDemianLerner/following{/other_user}",
         "gists_url" : "https://api.github.com/users/SergioDemianLerner/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/SergioDemianLerner",
         "id" : 1752347,
         "login" : "SergioDemianLerner",
         "organizations_url" : "https://api.github.com/users/SergioDemianLerner/orgs",
         "received_events_url" : "https://api.github.com/users/SergioDemianLerner/received_events",
         "repos_url" : "https://api.github.com/users/SergioDemianLerner/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/SergioDemianLerner/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/SergioDemianLerner/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/SergioDemianLerner"
      }
   },
   {
      "body" : "I had the opportunity to talk with sipa about this, and it is clear to me now: as gmaxwell points out, whoever finds a block would have an incentive to only announce the header but withhold the actual block. As long as that miner is the only one who know the full block, he is also the only one who can mine additional blocks with transactions, and thus the only one who can collect transaction fees. So the proposed timeout would lead to a situation in which the full block is withheld until just before the timeout, which is not something we would want.\r\n\r\n-> IMHO, this issue can be closed.",
      "created_at" : "2014-09-06T09:06:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/3195#issuecomment-54707065",
      "id" : 54707065,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3195",
      "updated_at" : "2014-09-06T09:07:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/54707065",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3128389?v=3",
         "events_url" : "https://api.github.com/users/swissbit/events{/privacy}",
         "followers_url" : "https://api.github.com/users/swissbit/followers",
         "following_url" : "https://api.github.com/users/swissbit/following{/other_user}",
         "gists_url" : "https://api.github.com/users/swissbit/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/swissbit",
         "id" : 3128389,
         "login" : "swissbit",
         "organizations_url" : "https://api.github.com/users/swissbit/orgs",
         "received_events_url" : "https://api.github.com/users/swissbit/received_events",
         "repos_url" : "https://api.github.com/users/swissbit/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/swissbit/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/swissbit/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/swissbit"
      }
   },
   {
      "body" : "Whoever finds a block and only announce the header but withhold the actual block is doing a very risky bet, that he'll probably loose. He is risking 25 BTC. He would need to wait a number of seconds between 0 and 10 hoping that no miner times-out in between, only to earn as little as 1% (tx fees / subsidy) during 10 seconds window (which represents $ 2 (USD) more on the average block reward).\r\nMiners are currently including transactions which cost them about $ 100 (USD) in block propagation time for free, so they will be happy to spend $ 2 instead of $ 100.\r\n\r\nIf you want to prevent the $ 2 incentive, then set a rule that miners won't switch back to a full-block X mining, after the header-only mining of X has time-out, before another 10 seconds timeout. So now there is a penalty for sending the header and not the data.",
      "created_at" : "2014-09-06T11:53:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/3195#issuecomment-54710199",
      "id" : 54710199,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3195",
      "updated_at" : "2014-09-06T11:53:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/54710199",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1752347?v=3",
         "events_url" : "https://api.github.com/users/SergioDemianLerner/events{/privacy}",
         "followers_url" : "https://api.github.com/users/SergioDemianLerner/followers",
         "following_url" : "https://api.github.com/users/SergioDemianLerner/following{/other_user}",
         "gists_url" : "https://api.github.com/users/SergioDemianLerner/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/SergioDemianLerner",
         "id" : 1752347,
         "login" : "SergioDemianLerner",
         "organizations_url" : "https://api.github.com/users/SergioDemianLerner/orgs",
         "received_events_url" : "https://api.github.com/users/SergioDemianLerner/received_events",
         "repos_url" : "https://api.github.com/users/SergioDemianLerner/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/SergioDemianLerner/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/SergioDemianLerner/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/SergioDemianLerner"
      }
   },
   {
      "body" : "@SergioDemianLerner That's what I thought first too. However, once you try to define a clear and concise rule about when to accept a block and when not, things turn ugly. For example, what if the block transmission hits the timeout with 20% of the nodes, but is ok with the majority? When should you re-accept a block you previously dismissed due to reaching the timeout? Whenever you try to fix one issue, a few new ones emerge. This is typically a symptom of trying to do something that does not fit the spirit of the system - on our case accepting a block without having seen it. And even if you come up with watertight rules for when a block should be accepted, it will be extremely hard to prove that the rules actually are watertight.",
      "created_at" : "2014-09-06T18:21:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/3195#issuecomment-54723458",
      "id" : 54723458,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3195",
      "updated_at" : "2014-09-06T18:21:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/54723458",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3128389?v=3",
         "events_url" : "https://api.github.com/users/swissbit/events{/privacy}",
         "followers_url" : "https://api.github.com/users/swissbit/followers",
         "following_url" : "https://api.github.com/users/swissbit/following{/other_user}",
         "gists_url" : "https://api.github.com/users/swissbit/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/swissbit",
         "id" : 3128389,
         "login" : "swissbit",
         "organizations_url" : "https://api.github.com/users/swissbit/orgs",
         "received_events_url" : "https://api.github.com/users/swissbit/received_events",
         "repos_url" : "https://api.github.com/users/swissbit/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/swissbit/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/swissbit/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/swissbit"
      }
   },
   {
      "body" : "@swissbit Keep in mind that you can't easily force people to follow such \"rules\", and often not following them may give you an economic advantage.",
      "created_at" : "2014-09-08T03:47:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/3195#issuecomment-54774294",
      "id" : 54774294,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3195",
      "updated_at" : "2014-09-08T03:47:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/54774294",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7042?v=3",
         "events_url" : "https://api.github.com/users/petertodd/events{/privacy}",
         "followers_url" : "https://api.github.com/users/petertodd/followers",
         "following_url" : "https://api.github.com/users/petertodd/following{/other_user}",
         "gists_url" : "https://api.github.com/users/petertodd/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/petertodd",
         "id" : 7042,
         "login" : "petertodd",
         "organizations_url" : "https://api.github.com/users/petertodd/orgs",
         "received_events_url" : "https://api.github.com/users/petertodd/received_events",
         "repos_url" : "https://api.github.com/users/petertodd/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/petertodd/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/petertodd/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/petertodd"
      }
   },
   {
      "body" : "Think about this: a miner A that withhold the block data (but not the header) does not get any direct additional income. Only if another miner B finds a block within the 10 second window and the block has no transactions because the block transactions were never received by X, then A could take those transaction fees if he is lucky enough to mine the next block, and assuming the remaining existent transactions in the pool do not provide equal profit. But if the block is saturated the remaining transactions, on average, should have approximately the same amount of fees. So nothing is gained.\r\n\r\nAs an example, assuming the current state of Bitcoin. Let $ 40 (USD) be the average tx fees per block. Let the probability of a collision in a 10 seconds windows be 1.6%. if miner A has 20 % of the hashing rate, and 1 every two blocks has transaction fees which are 50% higher than the next block fees, then A would get an average of  40/2/5= 4 (USD) of additional income per block by not relying txs  on a collision, which happens 1.6% of the times. Or an average of 6 cents per block. Or a total of $ 57 (USD) more per month over 54 MILLION USD earned. Not very significant.\r\n\r\nAnd this is what Microsoft \"Bitcoin and Red Balloons\" discovered two years ago. That Miners withholding transactions could get some advantage in a purely theoretical setup (or in a distant future, when subsidy is near zero), but in practice no miner is withholding transactions today, and no miner will do it for the next 15 years, if Bitcoin succeeds. \r\n\r\nThis is true while the subsidy is high. In 20 years, when Bitcoin is the world most valuable currency, but there is no subsidy and only tx fees matter, miners will voluntarily turn off this feature. No big deal.\r\n\r\nAnd there there are other reasons why miners won't invest in gambling this aspect of the system. Think about the current network state. Why aren't all miners using TheBlueMatt high speed relay system? Why haven't they implemented a system to relay blocks without sending all the already known transactions? Why aren't they creating blocks without transactions and saving 100 $ in every block? \r\n\r\nBecause Miners generally follow the rules. They are conservative. They don't seem to want to maximize their short-term profit to the extend to destroying Bitcoin. So miner's won't rewrite their mining software to increase their profit in 6 cents per block (the additional mining fees they could get, if they manage not to risk 10K USD by doing it).\r\n\r\nAt any time a miner that doesn't think this is good for him can stop mining on headers, but if the majority of the remaining miners still do it, he will be loosing a lot of money. A miner switching off this feature today would loose 1.6% of every block mined on average (aprox. 200 USD).\r\n\r\nAnd about the spirit of Bitcoin. I don't know which this spirit is, but (IMHO) the spirit of Bitcoin Mining is this: every miner wants his block to be accepted by the network as much as possible. Sooner or later miners will exchange block headers before block transaction-data, wether using the Bitcoin network or using a private backbone. We won't be able to stop this.\r\n\r\n\r\n\r\n\r\n\r\n",
      "created_at" : "2014-09-08T14:06:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/3195#issuecomment-54822240",
      "id" : 54822240,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3195",
      "updated_at" : "2014-09-08T14:08:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/54822240",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1752347?v=3",
         "events_url" : "https://api.github.com/users/SergioDemianLerner/events{/privacy}",
         "followers_url" : "https://api.github.com/users/SergioDemianLerner/followers",
         "following_url" : "https://api.github.com/users/SergioDemianLerner/following{/other_user}",
         "gists_url" : "https://api.github.com/users/SergioDemianLerner/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/SergioDemianLerner",
         "id" : 1752347,
         "login" : "SergioDemianLerner",
         "organizations_url" : "https://api.github.com/users/SergioDemianLerner/orgs",
         "received_events_url" : "https://api.github.com/users/SergioDemianLerner/received_events",
         "repos_url" : "https://api.github.com/users/SergioDemianLerner/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/SergioDemianLerner/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/SergioDemianLerner/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/SergioDemianLerner"
      }
   },
   {
      "body" : "@SergioDemianLerner As you did not seem to have noticed: implementing a protocol to relay blocks faster (without having to resend known transactions) is exactly what Gavin recently proposed and is currently working on. It might look more complex at first, but it has also much fewer unintended side-effects.",
      "created_at" : "2014-09-08T15:54:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/3195#issuecomment-54842097",
      "id" : 54842097,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3195",
      "updated_at" : "2014-09-08T15:54:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/54842097",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3128389?v=3",
         "events_url" : "https://api.github.com/users/swissbit/events{/privacy}",
         "followers_url" : "https://api.github.com/users/swissbit/followers",
         "following_url" : "https://api.github.com/users/swissbit/following{/other_user}",
         "gists_url" : "https://api.github.com/users/swissbit/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/swissbit",
         "id" : 3128389,
         "login" : "swissbit",
         "organizations_url" : "https://api.github.com/users/swissbit/orgs",
         "received_events_url" : "https://api.github.com/users/swissbit/received_events",
         "repos_url" : "https://api.github.com/users/swissbit/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/swissbit/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/swissbit/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/swissbit"
      }
   },
   {
      "body" : "> Because Miners generally follow the rules. They are conservative.They don't seem to want to maximize their short-term profit to the extend to destroying Bitcoin.\r\n\r\nGHash.IO is strong evidence otherwise. Equally, it can be interpreted that we have miners who understand the system so poorly they'll do harm to it by accident.\r\n\r\n> So miner's won't rewrite their mining software to increase their profit in 6 cents per block\r\n\r\ngmaxwell reported recently that some miners were using getblocktemplate to get a head start on new blocks on the network and configuring their miners to mine on top of them without doing any validation.",
      "created_at" : "2014-09-11T08:13:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/3195#issuecomment-55233217",
      "id" : 55233217,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3195",
      "updated_at" : "2014-09-11T08:13:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/55233217",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7042?v=3",
         "events_url" : "https://api.github.com/users/petertodd/events{/privacy}",
         "followers_url" : "https://api.github.com/users/petertodd/followers",
         "following_url" : "https://api.github.com/users/petertodd/following{/other_user}",
         "gists_url" : "https://api.github.com/users/petertodd/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/petertodd",
         "id" : 7042,
         "login" : "petertodd",
         "organizations_url" : "https://api.github.com/users/petertodd/orgs",
         "received_events_url" : "https://api.github.com/users/petertodd/received_events",
         "repos_url" : "https://api.github.com/users/petertodd/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/petertodd/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/petertodd/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/petertodd"
      }
   },
   {
      "body" : "@petertodd Interesting. I had previously said (without actually knowing) that this will happen sooner or later. And it's happening very soon..\r\nBut they are doing it not for the 6 cents (it header-only transmission were implemented in the protocol), but for 100 USD because we haven't implemented the header-only transmission! \r\nIf we implement it correctly, then they will still do it, but in a controlled way (e.g. for no more than 10 seconds). This is how Bitcoin freedom works: we don't dictate the rules, we try to best accommodate the network so miners can still do what they want to do, but securely.\r\n",
      "created_at" : "2014-09-11T16:52:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/3195#issuecomment-55293585",
      "id" : 55293585,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3195",
      "updated_at" : "2014-09-11T16:52:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/55293585",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1752347?v=3",
         "events_url" : "https://api.github.com/users/SergioDemianLerner/events{/privacy}",
         "followers_url" : "https://api.github.com/users/SergioDemianLerner/followers",
         "following_url" : "https://api.github.com/users/SergioDemianLerner/following{/other_user}",
         "gists_url" : "https://api.github.com/users/SergioDemianLerner/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/SergioDemianLerner",
         "id" : 1752347,
         "login" : "SergioDemianLerner",
         "organizations_url" : "https://api.github.com/users/SergioDemianLerner/orgs",
         "received_events_url" : "https://api.github.com/users/SergioDemianLerner/received_events",
         "repos_url" : "https://api.github.com/users/SergioDemianLerner/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/SergioDemianLerner/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/SergioDemianLerner/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/SergioDemianLerner"
      }
   },
   {
      "body" : "> This is how Bitcoin freedom works: we don't dictate the rules, we try to best accommodate the network so miners can still do what they want to do, but securely.\r\n\r\nWhat miners want is more money; if that involves less security so what? Attacks and screwups are rare enough that they personally aren't being harmed sufficiently to disuade them.\r\n\r\nAnyway, it's just a flaw in the protocol, fortunately one we can fix in a soft-fork. But that's a topic for elsewhere.",
      "created_at" : "2014-09-11T18:16:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/3195#issuecomment-55305421",
      "id" : 55305421,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3195",
      "updated_at" : "2014-09-11T18:16:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/55305421",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7042?v=3",
         "events_url" : "https://api.github.com/users/petertodd/events{/privacy}",
         "followers_url" : "https://api.github.com/users/petertodd/followers",
         "following_url" : "https://api.github.com/users/petertodd/following{/other_user}",
         "gists_url" : "https://api.github.com/users/petertodd/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/petertodd",
         "id" : 7042,
         "login" : "petertodd",
         "organizations_url" : "https://api.github.com/users/petertodd/orgs",
         "received_events_url" : "https://api.github.com/users/petertodd/received_events",
         "repos_url" : "https://api.github.com/users/petertodd/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/petertodd/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/petertodd/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/petertodd"
      }
   },
   {
      "body" : "@petertodd can you reference the soft-fork in question once it has a pull request please?",
      "created_at" : "2016-01-31T16:51:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/3195#issuecomment-177548844",
      "id" : 177548844,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3195",
      "updated_at" : "2016-01-31T16:51:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/177548844",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1530283?v=3",
         "events_url" : "https://api.github.com/users/rebroad/events{/privacy}",
         "followers_url" : "https://api.github.com/users/rebroad/followers",
         "following_url" : "https://api.github.com/users/rebroad/following{/other_user}",
         "gists_url" : "https://api.github.com/users/rebroad/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/rebroad",
         "id" : 1530283,
         "login" : "rebroad",
         "organizations_url" : "https://api.github.com/users/rebroad/orgs",
         "received_events_url" : "https://api.github.com/users/rebroad/received_events",
         "repos_url" : "https://api.github.com/users/rebroad/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/rebroad/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/rebroad/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/rebroad"
      }
   }
]
