[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10885#discussion_r128398223"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10885"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/128398223"
         }
      },
      "body" : "This is a helper, like the above. For the test below I had to drop `const`,",
      "commit_id" : "fa11691d59b186425fab04b102fef4fba4e23b11",
      "created_at" : "2017-07-20T00:06:50Z",
      "diff_hunk" : "@@ -104,7 +104,7 @@ class TestArgsManager : public ArgsManager\n     {\n         return mapArgs;\n     };\n-    const std::map<std::string, std::vector<std::string> >& GetMapMultiArgs()\n+    std::map<std::string, std::vector<std::string> >& GetMapMultiArgs()",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10885#discussion_r128398223",
      "id" : 128398223,
      "original_commit_id" : "4b58cae78715035d40635054ce82c1edd68d43d3",
      "original_position" : 5,
      "path" : "src/test/util_tests.cpp",
      "position" : null,
      "pull_request_review_id" : 51074178,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10885",
      "updated_at" : "2017-07-27T00:21:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/128398223",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10885#discussion_r128398372"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10885"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/128398372"
         }
      },
      "body" : "This is set because `IsArgSet` uses `mapArgs`.",
      "commit_id" : "fa11691d59b186425fab04b102fef4fba4e23b11",
      "created_at" : "2017-07-20T00:07:54Z",
      "diff_hunk" : "@@ -160,6 +160,21 @@ BOOST_AUTO_TEST_CASE(util_GetArg)\n     BOOST_CHECK_EQUAL(testArgs.GetBoolArg(\"booltest4\", false), true);\n }\n \n+BOOST_AUTO_TEST_CASE(util_GetUniqueArgs)\n+{\n+    TestArgsManager testArgs;\n+\n+    BOOST_CHECK_EQUAL(testArgs.GetUniqueArgs(\"a\").size(), 0);\n+\n+    testArgs.GetMapArgs()[\"a\"] = \"biz\";",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10885#discussion_r128398372",
      "id" : 128398372,
      "original_commit_id" : "4b58cae78715035d40635054ce82c1edd68d43d3",
      "original_position" : 19,
      "path" : "src/test/util_tests.cpp",
      "position" : null,
      "pull_request_review_id" : 51074178,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10885",
      "updated_at" : "2017-07-27T00:21:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/128398372",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10885#discussion_r128543286"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10885"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/128543286"
         }
      },
      "body" : "Can you briefly describe what it does in a comment above this line?",
      "commit_id" : "fa11691d59b186425fab04b102fef4fba4e23b11",
      "created_at" : "2017-07-20T15:09:20Z",
      "diff_hunk" : "@@ -202,6 +202,7 @@ class ArgsManager\n     void ParseParameters(int argc, const char*const argv[]);\n     void ReadConfigFile(const std::string& confPath);\n     std::vector<std::string> GetArgs(const std::string& strArg);\n+    std::vector<std::string> GetUniqueArgs(const std::string& strArg);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10885#discussion_r128543286",
      "id" : 128543286,
      "original_commit_id" : "099e5efba068f0aefe03d4ae167c548871ce3800",
      "original_position" : 4,
      "path" : "src/util.h",
      "position" : null,
      "pull_request_review_id" : 51233694,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10885",
      "updated_at" : "2017-07-27T00:21:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/128543286",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10885#discussion_r128549084"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10885"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/128549084"
         }
      },
      "body" : "Is this use-case common enough to add a new argument getter to the API for?\r\nIf not, I'd prefer chaining more general functions, for example defining a function `std::vector<string> UniqueStrings(const std::vector<string>&)` then using it as\r\n```c++\r\nUniqueStrings(GetArgs(\"-wallet\"))\r\n```\r\n",
      "commit_id" : "fa11691d59b186425fab04b102fef4fba4e23b11",
      "created_at" : "2017-07-20T15:28:56Z",
      "diff_hunk" : "@@ -202,6 +202,7 @@ class ArgsManager\n     void ParseParameters(int argc, const char*const argv[]);\n     void ReadConfigFile(const std::string& confPath);\n     std::vector<std::string> GetArgs(const std::string& strArg);\n+    std::vector<std::string> GetUniqueArgs(const std::string& strArg);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10885#discussion_r128549084",
      "id" : 128549084,
      "original_commit_id" : "099e5efba068f0aefe03d4ae167c548871ce3800",
      "original_position" : 4,
      "path" : "src/util.h",
      "position" : null,
      "pull_request_review_id" : 51240236,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10885",
      "updated_at" : "2017-07-27T00:21:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/128549084",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10885#discussion_r128553500"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10885"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/128553500"
         }
      },
      "body" : "There are other multiargs that may use this getter, but I'm checking it. There is also the option of `GetArgs(const std::string& strArg, fUnique = false)`.",
      "commit_id" : "fa11691d59b186425fab04b102fef4fba4e23b11",
      "created_at" : "2017-07-20T15:43:57Z",
      "diff_hunk" : "@@ -202,6 +202,7 @@ class ArgsManager\n     void ParseParameters(int argc, const char*const argv[]);\n     void ReadConfigFile(const std::string& confPath);\n     std::vector<std::string> GetArgs(const std::string& strArg);\n+    std::vector<std::string> GetUniqueArgs(const std::string& strArg);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10885#discussion_r128553500",
      "id" : 128553500,
      "original_commit_id" : "099e5efba068f0aefe03d4ae167c548871ce3800",
      "original_position" : 4,
      "path" : "src/util.h",
      "position" : null,
      "pull_request_review_id" : 51245071,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10885",
      "updated_at" : "2017-07-27T00:21:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/128553500",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10885#discussion_r128554065"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10885"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/128554065"
         }
      },
      "body" : "But I also like that option @laanwj.",
      "commit_id" : "fa11691d59b186425fab04b102fef4fba4e23b11",
      "created_at" : "2017-07-20T15:45:27Z",
      "diff_hunk" : "@@ -202,6 +202,7 @@ class ArgsManager\n     void ParseParameters(int argc, const char*const argv[]);\n     void ReadConfigFile(const std::string& confPath);\n     std::vector<std::string> GetArgs(const std::string& strArg);\n+    std::vector<std::string> GetUniqueArgs(const std::string& strArg);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10885#discussion_r128554065",
      "id" : 128554065,
      "original_commit_id" : "099e5efba068f0aefe03d4ae167c548871ce3800",
      "original_position" : 4,
      "path" : "src/util.h",
      "position" : null,
      "pull_request_review_id" : 51245559,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10885",
      "updated_at" : "2017-07-27T00:21:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/128554065",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10885#discussion_r128635592"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10885"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/128635592"
         }
      },
      "body" : "Why not let std::set do the heavy lifting for you:\r\n\r\n```\r\n    std::vector<std::string> args = GetArgs(strArg);\r\n    std::set<std::string> uniques(args.begin(), args.end());\r\n    args.assign(uniques.begin(), uniques.end());\r\n    return args;\r\n```",
      "commit_id" : "fa11691d59b186425fab04b102fef4fba4e23b11",
      "created_at" : "2017-07-20T21:28:48Z",
      "diff_hunk" : "@@ -427,6 +427,19 @@ std::vector<std::string> ArgsManager::GetArgs(const std::string& strArg)\n     return {};\n }\n \n+std::vector<std::string> ArgsManager::GetUniqueArgs(const std::string& strArg)\n+{\n+    LOCK(cs_args);\n+    std::vector<std::string> args;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10885#discussion_r128635592",
      "id" : 128635592,
      "original_commit_id" : "4b58cae78715035d40635054ce82c1edd68d43d3",
      "original_position" : 7,
      "path" : "src/util.cpp",
      "position" : null,
      "pull_request_review_id" : 51335546,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10885",
      "updated_at" : "2017-07-27T00:21:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/128635592",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10885#discussion_r128636857"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10885"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/128636857"
         }
      },
      "body" : "+1 to comment.\r\n\r\nI can imagine this having wider use, so I don't think adding a ArgsManager member function is a problem.",
      "commit_id" : "fa11691d59b186425fab04b102fef4fba4e23b11",
      "created_at" : "2017-07-20T21:35:04Z",
      "diff_hunk" : "@@ -202,6 +202,7 @@ class ArgsManager\n     void ParseParameters(int argc, const char*const argv[]);\n     void ReadConfigFile(const std::string& confPath);\n     std::vector<std::string> GetArgs(const std::string& strArg);\n+    std::vector<std::string> GetUniqueArgs(const std::string& strArg);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10885#discussion_r128636857",
      "id" : 128636857,
      "original_commit_id" : "099e5efba068f0aefe03d4ae167c548871ce3800",
      "original_position" : 4,
      "path" : "src/util.h",
      "position" : null,
      "pull_request_review_id" : 51335546,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10885",
      "updated_at" : "2017-07-27T00:21:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/128636857",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10885#discussion_r128639698"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10885"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/128639698"
         }
      },
      "body" : "We want to keep order.",
      "commit_id" : "fa11691d59b186425fab04b102fef4fba4e23b11",
      "created_at" : "2017-07-20T21:51:11Z",
      "diff_hunk" : "@@ -427,6 +427,19 @@ std::vector<std::string> ArgsManager::GetArgs(const std::string& strArg)\n     return {};\n }\n \n+std::vector<std::string> ArgsManager::GetUniqueArgs(const std::string& strArg)\n+{\n+    LOCK(cs_args);\n+    std::vector<std::string> args;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10885#discussion_r128639698",
      "id" : 128639698,
      "original_commit_id" : "4b58cae78715035d40635054ce82c1edd68d43d3",
      "original_position" : 7,
      "path" : "src/util.cpp",
      "position" : null,
      "pull_request_review_id" : 51340096,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10885",
      "updated_at" : "2017-07-27T00:21:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/128639698",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10885#discussion_r128640058"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10885"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/128640058"
         }
      },
      "body" : "ah. Makes sense. Thanks.",
      "commit_id" : "fa11691d59b186425fab04b102fef4fba4e23b11",
      "created_at" : "2017-07-20T21:53:12Z",
      "diff_hunk" : "@@ -427,6 +427,19 @@ std::vector<std::string> ArgsManager::GetArgs(const std::string& strArg)\n     return {};\n }\n \n+std::vector<std::string> ArgsManager::GetUniqueArgs(const std::string& strArg)\n+{\n+    LOCK(cs_args);\n+    std::vector<std::string> args;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10885#discussion_r128640058",
      "id" : 128640058,
      "original_commit_id" : "4b58cae78715035d40635054ce82c1edd68d43d3",
      "original_position" : 7,
      "path" : "src/util.cpp",
      "position" : null,
      "pull_request_review_id" : 51340507,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10885",
      "updated_at" : "2017-07-27T00:21:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/128640058",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10885#discussion_r128641038"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10885"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/128641038"
         }
      },
      "body" : "I was tempted to name it `GetStableUniqueArgs` but maybe it's too much for most of you.",
      "commit_id" : "fa11691d59b186425fab04b102fef4fba4e23b11",
      "created_at" : "2017-07-20T21:58:14Z",
      "diff_hunk" : "@@ -427,6 +427,19 @@ std::vector<std::string> ArgsManager::GetArgs(const std::string& strArg)\n     return {};\n }\n \n+std::vector<std::string> ArgsManager::GetUniqueArgs(const std::string& strArg)\n+{\n+    LOCK(cs_args);\n+    std::vector<std::string> args;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10885#discussion_r128641038",
      "id" : 128641038,
      "original_commit_id" : "4b58cae78715035d40635054ce82c1edd68d43d3",
      "original_position" : 7,
      "path" : "src/util.cpp",
      "position" : null,
      "pull_request_review_id" : 51341553,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10885",
      "updated_at" : "2017-07-27T00:21:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/128641038",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "body" : "Concept ACK",
      "created_at" : "2017-07-21T09:22:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10885#issuecomment-316951756",
      "id" : 316951756,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10885",
      "updated_at" : "2017-07-21T09:22:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/316951756",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10885#discussion_r128737676"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10885"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/128737676"
         }
      },
      "body" : "I think just make sure there's a comment at the declaration saying that ordering is stable.",
      "commit_id" : "fa11691d59b186425fab04b102fef4fba4e23b11",
      "created_at" : "2017-07-21T11:05:56Z",
      "diff_hunk" : "@@ -427,6 +427,19 @@ std::vector<std::string> ArgsManager::GetArgs(const std::string& strArg)\n     return {};\n }\n \n+std::vector<std::string> ArgsManager::GetUniqueArgs(const std::string& strArg)\n+{\n+    LOCK(cs_args);\n+    std::vector<std::string> args;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10885#discussion_r128737676",
      "id" : 128737676,
      "original_commit_id" : "4b58cae78715035d40635054ce82c1edd68d43d3",
      "original_position" : 7,
      "path" : "src/util.cpp",
      "position" : null,
      "pull_request_review_id" : 51446013,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10885",
      "updated_at" : "2017-07-27T00:21:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/128737676",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "body" : "#10604 has been merged. Suggest ~you rebase on master and~ add something like the following to multiwallet.py as a functional test:\r\n\r\n```\r\n@@ -15,7 +15,8 @@ class MultiWalletTest(BitcoinTestFramework):\r\n         super().__init__()\r\n         self.setup_clean_chain = True\r\n         self.num_nodes = 1\r\n-        self.extra_args = [['-wallet=w1', '-wallet=w2', '-wallet=w3']]\r\n+        # bitcoind should ignore duplicate wallets in config\r\n+        self.extra_args = [['-wallet=w1', '-wallet=w2', '-wallet=w3', '-wallet=w2']]\r\n \r\n     def run_test(self):\r\n         w1 = self.nodes[0] / \"wallet/w1\"\r\n@@ -41,7 +42,7 @@ class MultiWalletTest(BitcoinTestFramework):\r\n         w3_name = w3.getwalletinfo()['walletname']\r\n         assert_equal(w3_name, \"w3\")\r\n \r\n-        assert_equal({\"w1\", \"w2\", \"w3\"}, {w1_name, w2_name, w3_name})\r\n+        assert_equal(self.nodes[0].listwallets(), [\"w1\", \"w2\", \"w3\"])\r\n \r\n         w1.generate(101)\r\n         assert_equal(w1.getbalance(), 100)\r\n```",
      "created_at" : "2017-07-21T14:07:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10885#issuecomment-317010599",
      "id" : 317010599,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10885",
      "updated_at" : "2017-07-21T14:24:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/317010599",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "body" : "@jnewbery thanks for the tip, it's in 7605a8d. @instagibbs added the missing comment in 8cf06d7.",
      "created_at" : "2017-07-21T14:48:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10885#issuecomment-317021474",
      "id" : 317021474,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10885",
      "updated_at" : "2017-07-21T14:48:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/317021474",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10885#discussion_r128787407"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10885"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/128787407"
         }
      },
      "body" : "ultranit: match the doxygen style comments below.",
      "commit_id" : "fa11691d59b186425fab04b102fef4fba4e23b11",
      "created_at" : "2017-07-21T15:14:18Z",
      "diff_hunk" : "@@ -203,6 +203,10 @@ class ArgsManager\n     void ReadConfigFile(const std::string& confPath);\n     std::vector<std::string> GetArgs(const std::string& strArg);\n \n+    // Returns unique values of the given argument, preserving the order",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10885#discussion_r128787407",
      "id" : 128787407,
      "original_commit_id" : "7605a8d4c18461c7673214c068f632f0aa340c3f",
      "original_position" : 4,
      "path" : "src/util.h",
      "position" : null,
      "pull_request_review_id" : 51503311,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10885",
      "updated_at" : "2017-07-27T00:21:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/128787407",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "body" : "Looks good @promag . I've added one nitty comment. utACK either way.",
      "created_at" : "2017-07-21T15:14:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10885#issuecomment-317028552",
      "id" : 317028552,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10885",
      "updated_at" : "2017-07-21T15:14:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/317028552",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "body" : "@jnewbery added missing comment to `GetArgs` too.",
      "created_at" : "2017-07-21T21:57:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10885#issuecomment-317121885",
      "id" : 317121885,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10885",
      "updated_at" : "2017-07-21T21:57:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/317121885",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "body" : "please correct me if I'm wrong. As far as I can tell, since this only prevents specifying the same *filename* multiple times, it still doesn't prevent you from loading the same *file* twice. You just have to use different names/paths to refer to it:\r\n\r\n``--wallet=w1 --wallet=../wallets/w1`` (assuming we're in a directory called ``wallets``)\r\n\r\nOne could also use hard- or soft links to give a single wallet multiple names.",
      "created_at" : "2017-07-22T01:05:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10885#issuecomment-317143484",
      "id" : 317143484,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10885",
      "updated_at" : "2017-07-22T01:05:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/317143484",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/661450?v=4",
         "events_url" : "https://api.github.com/users/arvidn/events{/privacy}",
         "followers_url" : "https://api.github.com/users/arvidn/followers",
         "following_url" : "https://api.github.com/users/arvidn/following{/other_user}",
         "gists_url" : "https://api.github.com/users/arvidn/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/arvidn",
         "id" : 661450,
         "login" : "arvidn",
         "organizations_url" : "https://api.github.com/users/arvidn/orgs",
         "received_events_url" : "https://api.github.com/users/arvidn/received_events",
         "repos_url" : "https://api.github.com/users/arvidn/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/arvidn/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/arvidn/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/arvidn"
      }
   },
   {
      "body" : "@arvidn I'll test. Thanks!",
      "created_at" : "2017-07-22T07:30:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10885#issuecomment-317163450",
      "id" : 317163450,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10885",
      "updated_at" : "2017-07-22T07:30:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/317163450",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10885#discussion_r128963203"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10885"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/128963203"
         }
      },
      "body" : "you should `#include <set>`",
      "commit_id" : "fa11691d59b186425fab04b102fef4fba4e23b11",
      "created_at" : "2017-07-24T07:16:17Z",
      "diff_hunk" : "@@ -427,6 +427,19 @@ std::vector<std::string> ArgsManager::GetArgs(const std::string& strArg)\n     return {};\n }\n \n+std::vector<std::string> ArgsManager::GetUniqueArgs(const std::string& strArg)\n+{\n+    LOCK(cs_args);\n+    std::vector<std::string> args;\n+    std::set<std::string> uniques;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10885#discussion_r128963203",
      "id" : 128963203,
      "original_commit_id" : "15489827ef3a4384106cbbc0182c9be88f9e4864",
      "original_position" : 8,
      "path" : "src/util.cpp",
      "position" : null,
      "pull_request_review_id" : 51687949,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10885",
      "updated_at" : "2017-07-27T00:21:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/128963203",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1225267?v=4",
         "events_url" : "https://api.github.com/users/benma/events{/privacy}",
         "followers_url" : "https://api.github.com/users/benma/followers",
         "following_url" : "https://api.github.com/users/benma/following{/other_user}",
         "gists_url" : "https://api.github.com/users/benma/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/benma",
         "id" : 1225267,
         "login" : "benma",
         "organizations_url" : "https://api.github.com/users/benma/orgs",
         "received_events_url" : "https://api.github.com/users/benma/received_events",
         "repos_url" : "https://api.github.com/users/benma/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/benma/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/benma/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/benma"
      }
   },
   {
      "body" : "I'm updating to take into account @arvidn review.",
      "created_at" : "2017-07-24T07:36:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10885#issuecomment-317342746",
      "id" : 317342746,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10885",
      "updated_at" : "2017-07-24T07:36:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/317342746",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "body" : "After @arvidn observation, I took a different approach. In order to correctly detect duplicate wallets I'm using `boost:filesystem::equivalent` in `bool CWallet::Verify()`. This means that if a wallet is duplicate then an initialization error is raised.\r\n\r\n@jnewbery removed the functional test because the app now quits with an error, AFAIK we don't test these?",
      "created_at" : "2017-07-24T22:46:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10885#issuecomment-317576490",
      "id" : 317576490,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10885",
      "updated_at" : "2017-07-24T22:46:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/317576490",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "body" : "@arvidn there is already a `-wallet` validation to prevent relative paths. However the initial approach failed with symlinks. Thanks for the feedback.",
      "created_at" : "2017-07-24T22:49:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10885#issuecomment-317577087",
      "id" : 317577087,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10885",
      "updated_at" : "2017-07-24T22:49:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/317577087",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10885#discussion_r129200697"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10885"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/129200697"
         }
      },
      "body" : "Based on the documentation, I'm not sure that `boost::filesystem::absolute` resolves symlinks; only that it resolves relative path elements (lack of root, and `.` and `..` path elements). `boost::filesystem::canonical` resolves symlinks too.\r\n\r\nEDIT: nevermind, it seems that `fs::equivalent` further takes care of this.",
      "commit_id" : "fa11691d59b186425fab04b102fef4fba4e23b11",
      "created_at" : "2017-07-25T02:38:45Z",
      "diff_hunk" : "@@ -468,13 +468,31 @@ bool CWallet::Verify()\n \n     uiInterface.InitMessage(_(\"Verifying wallet(s)...\"));\n \n+    // Keep track of each existing wallet absolute path in order to detect\n+    // when a wallet is already loaded by using boost::filesystem::equivalent.\n+    std::vector<fs::path> wallet_paths;\n+\n     for (const std::string& walletFile : gArgs.GetArgs(\"-wallet\")) {\n         if (boost::filesystem::path(walletFile).filename() != walletFile) {\n             return InitError(_(\"-wallet parameter must only specify a filename (not a path)\"));\n-        } else if (SanitizeString(walletFile, SAFE_CHARS_FILENAME) != walletFile) {\n+        }\n+\n+        if (SanitizeString(walletFile, SAFE_CHARS_FILENAME) != walletFile) {\n             return InitError(_(\"Invalid characters in -wallet filename\"));\n         }\n \n+        fs::path wallet_path = fs::absolute(walletFile, GetDataDir());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10885#discussion_r129200697",
      "id" : 129200697,
      "original_commit_id" : "b1b4e8ac1687fac1dd275b7bab2c45eb879be30d",
      "original_position" : 18,
      "path" : "src/wallet/wallet.cpp",
      "position" : 17,
      "pull_request_review_id" : 51947422,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10885",
      "updated_at" : "2017-07-27T00:21:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/129200697",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "utACK b1b4e8ac1687fac1dd275b7bab2c45eb879be30d",
      "created_at" : "2017-07-25T02:40:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10885#issuecomment-317612149",
      "id" : 317612149,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10885",
      "updated_at" : "2017-07-25T02:40:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/317612149",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10885#discussion_r129409240"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10885"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/129409240"
         }
      },
      "body" : "Doesn't this imply you can specify duplicate wallets if the wallet doesn't (yet) exist? It seems strange mostly because it would result in you being able to restart your node and then suddently it will fail but succeed the first time.",
      "commit_id" : "fa11691d59b186425fab04b102fef4fba4e23b11",
      "created_at" : "2017-07-25T19:59:11Z",
      "diff_hunk" : "@@ -468,13 +468,31 @@ bool CWallet::Verify()\n \n     uiInterface.InitMessage(_(\"Verifying wallet(s)...\"));\n \n+    // Keep track of each existing wallet absolute path in order to detect\n+    // when a wallet is already loaded by using boost::filesystem::equivalent.\n+    std::vector<fs::path> wallet_paths;\n+\n     for (const std::string& walletFile : gArgs.GetArgs(\"-wallet\")) {\n         if (boost::filesystem::path(walletFile).filename() != walletFile) {\n             return InitError(_(\"-wallet parameter must only specify a filename (not a path)\"));\n-        } else if (SanitizeString(walletFile, SAFE_CHARS_FILENAME) != walletFile) {\n+        }\n+\n+        if (SanitizeString(walletFile, SAFE_CHARS_FILENAME) != walletFile) {\n             return InitError(_(\"Invalid characters in -wallet filename\"));\n         }\n \n+        fs::path wallet_path = fs::absolute(walletFile, GetDataDir());\n+\n+        if (fs::exists(wallet_path)) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10885#discussion_r129409240",
      "id" : 129409240,
      "original_commit_id" : "b1b4e8ac1687fac1dd275b7bab2c45eb879be30d",
      "original_position" : 20,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 52179335,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10885",
      "updated_at" : "2017-07-27T00:21:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/129409240",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/649246?v=4",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "This approach seems pretty fragile, but maybe it's the simplest safeguard we can implement right now. I'd think ideally bitcoin would try to acquire an exclusive write lock on a wallet database file while opening it, and just not open files that can't be locked.",
      "created_at" : "2017-07-25T21:51:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10885#issuecomment-317883603",
      "id" : 317883603,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10885",
      "updated_at" : "2017-07-25T21:51:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/317883603",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10885#discussion_r129437723"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10885"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/129437723"
         }
      },
      "body" : "7c4058d disallows having wallets as symlinks whereas addffb2 resolves symlink to the concrete absolute path.",
      "commit_id" : "fa11691d59b186425fab04b102fef4fba4e23b11",
      "created_at" : "2017-07-25T22:03:53Z",
      "diff_hunk" : "@@ -468,13 +468,31 @@ bool CWallet::Verify()\n \n     uiInterface.InitMessage(_(\"Verifying wallet(s)...\"));\n \n+    // Keep track of each existing wallet absolute path in order to detect\n+    // when a wallet is already loaded by using boost::filesystem::equivalent.\n+    std::vector<fs::path> wallet_paths;\n+\n     for (const std::string& walletFile : gArgs.GetArgs(\"-wallet\")) {\n         if (boost::filesystem::path(walletFile).filename() != walletFile) {\n             return InitError(_(\"-wallet parameter must only specify a filename (not a path)\"));\n-        } else if (SanitizeString(walletFile, SAFE_CHARS_FILENAME) != walletFile) {\n+        }\n+\n+        if (SanitizeString(walletFile, SAFE_CHARS_FILENAME) != walletFile) {\n             return InitError(_(\"Invalid characters in -wallet filename\"));\n         }\n \n+        fs::path wallet_path = fs::absolute(walletFile, GetDataDir());\n+\n+        if (fs::exists(wallet_path)) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10885#discussion_r129437723",
      "id" : 129437723,
      "original_commit_id" : "b1b4e8ac1687fac1dd275b7bab2c45eb879be30d",
      "original_position" : 20,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 52211102,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10885",
      "updated_at" : "2017-07-27T00:21:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/129437723",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10885#discussion_r129439010"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10885"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/129439010"
         }
      },
      "body" : "@sipa `fs::equivalent` is not used in the latest version.\r\n",
      "commit_id" : "fa11691d59b186425fab04b102fef4fba4e23b11",
      "created_at" : "2017-07-25T22:10:56Z",
      "diff_hunk" : "@@ -468,13 +468,31 @@ bool CWallet::Verify()\n \n     uiInterface.InitMessage(_(\"Verifying wallet(s)...\"));\n \n+    // Keep track of each existing wallet absolute path in order to detect\n+    // when a wallet is already loaded by using boost::filesystem::equivalent.\n+    std::vector<fs::path> wallet_paths;\n+\n     for (const std::string& walletFile : gArgs.GetArgs(\"-wallet\")) {\n         if (boost::filesystem::path(walletFile).filename() != walletFile) {\n             return InitError(_(\"-wallet parameter must only specify a filename (not a path)\"));\n-        } else if (SanitizeString(walletFile, SAFE_CHARS_FILENAME) != walletFile) {\n+        }\n+\n+        if (SanitizeString(walletFile, SAFE_CHARS_FILENAME) != walletFile) {\n             return InitError(_(\"Invalid characters in -wallet filename\"));\n         }\n \n+        fs::path wallet_path = fs::absolute(walletFile, GetDataDir());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10885#discussion_r129439010",
      "id" : 129439010,
      "original_commit_id" : "b1b4e8ac1687fac1dd275b7bab2c45eb879be30d",
      "original_position" : 18,
      "path" : "src/wallet/wallet.cpp",
      "position" : 17,
      "pull_request_review_id" : 52212494,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10885",
      "updated_at" : "2017-07-27T00:21:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/129439010",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10885#discussion_r129460005"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10885"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/129460005"
         }
      },
      "body" : "It seems this could be done using `fs::canonical` ?",
      "commit_id" : "fa11691d59b186425fab04b102fef4fba4e23b11",
      "created_at" : "2017-07-26T00:40:33Z",
      "diff_hunk" : "@@ -468,13 +468,34 @@ bool CWallet::Verify()\n \n     uiInterface.InitMessage(_(\"Verifying wallet(s)...\"));\n \n+    // Keep track of each wallet absolute path to detect duplicates.\n+    std::set<fs::path> wallet_paths;\n+\n     for (const std::string& walletFile : gArgs.GetArgs(\"-wallet\")) {\n         if (boost::filesystem::path(walletFile).filename() != walletFile) {\n             return InitError(_(\"-wallet parameter must only specify a filename (not a path)\"));\n-        } else if (SanitizeString(walletFile, SAFE_CHARS_FILENAME) != walletFile) {\n+        }\n+\n+        if (SanitizeString(walletFile, SAFE_CHARS_FILENAME) != walletFile) {\n             return InitError(_(\"Invalid characters in -wallet filename\"));\n         }\n \n+        fs::path wallet_path = fs::absolute(walletFile, GetDataDir());\n+\n+        if (fs::exists(wallet_path)) {\n+            if (!fs::is_regular_file(wallet_path)) {\n+                return InitError(_(\"Invalid -wallet file\"));\n+            }\n+\n+            if (fs::is_symlink(wallet_path)) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10885#discussion_r129460005",
      "id" : 129460005,
      "original_commit_id" : "addffb2ba3edb6a0427ecc42a04efac0e2c8f4ec",
      "original_position" : 24,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 52234684,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10885",
      "updated_at" : "2017-07-27T00:21:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/129460005",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "> This approach seems pretty fragile, but maybe it's the simplest safeguard we can implement right now. I'd think ideally bitcoin would try to acquire an exclusive write lock on a wallet database file while opening it, and just not open files that can't be locked.\r\n\r\nRight, ideally it's something that would be handled at the database layer, in the same way it's avoided that multiple applications open the wallet at once. It's unfortunate that BerkeleyDB itself doesn't provide protection against opening a database multiple times.\r\n\r\nAnyhow it's better to have some check in place, so concept ACK.\r\n",
      "created_at" : "2017-07-26T06:37:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10885#issuecomment-317962248",
      "id" : 317962248,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10885",
      "updated_at" : "2017-07-26T06:37:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/317962248",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "At this point there's no file opening, it's a configuration error. Like you said it's a runtime error. Both make sense for me.",
      "created_at" : "2017-07-26T07:00:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10885#issuecomment-317966522",
      "id" : 317966522,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10885",
      "updated_at" : "2017-07-26T07:00:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/317966522",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "body" : "> the app now quits with an error, AFAIK we don't test these?\r\n\r\nWe have a way of testing this: if you're expecting bitcoind to fail on startup, take a look at `assert_start_raises_init_error()`. If you're expecting bitcoind to startup successfully and then exit, look at the new test in #10882 : https://github.com/bitcoin/bitcoin/pull/10882/commits/ec59b2eaaccd4d42d98345e9719265f102494e46#diff-8d6207d4df9ed2a74441a199714a612aR92",
      "created_at" : "2017-07-26T08:10:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10885#issuecomment-317981438",
      "id" : 317981438,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10885",
      "updated_at" : "2017-07-26T08:10:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/317981438",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "body" : "@jnewbery thanks, will add the missing tests.\r\n\r\nThe current approach is to raise an error when a wallet absolute path:\r\n - exists and it's not a regular file or a symlink, or (@sipa FYI)\r\n - does not exists and it's a duplicate (@TheBlueMatt FYI).",
      "created_at" : "2017-07-26T12:27:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10885#issuecomment-318038067",
      "id" : 318038067,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10885",
      "updated_at" : "2017-07-26T12:27:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/318038067",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10885#discussion_r129663401"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10885"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/129663401"
         }
      },
      "body" : "Boost documentation seems to indicate that is_regular_file implies !is_symlink.",
      "commit_id" : "fa11691d59b186425fab04b102fef4fba4e23b11",
      "created_at" : "2017-07-26T18:48:56Z",
      "diff_hunk" : "@@ -468,13 +468,28 @@ bool CWallet::Verify()\n \n     uiInterface.InitMessage(_(\"Verifying wallet(s)...\"));\n \n+    // Keep track of each wallet absolute path to detect duplicates.\n+    std::set<fs::path> wallet_paths;\n+\n     for (const std::string& walletFile : gArgs.GetArgs(\"-wallet\")) {\n         if (boost::filesystem::path(walletFile).filename() != walletFile) {\n             return InitError(_(\"-wallet parameter must only specify a filename (not a path)\"));\n-        } else if (SanitizeString(walletFile, SAFE_CHARS_FILENAME) != walletFile) {\n+        }\n+\n+        if (SanitizeString(walletFile, SAFE_CHARS_FILENAME) != walletFile) {\n             return InitError(_(\"Invalid characters in -wallet filename\"));\n         }\n \n+        fs::path wallet_path = fs::absolute(walletFile, GetDataDir());\n+\n+        if (fs::exists(wallet_path) && (!fs::is_regular_file(wallet_path) || fs::is_symlink(wallet_path))) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10885#discussion_r129663401",
      "id" : 129663401,
      "original_commit_id" : "c84a5a9e561409a3b1b15f81ac1d425acf2122b6",
      "original_position" : 19,
      "path" : "src/wallet/wallet.cpp",
      "position" : 19,
      "pull_request_review_id" : 52460983,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10885",
      "updated_at" : "2017-07-27T00:21:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/129663401",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/649246?v=4",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10885#discussion_r129728616"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10885"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/129728616"
         }
      },
      "body" : "No, one does not implies the other. A symlink to a file is a regular file. A symlink to a directory is not a regular file.",
      "commit_id" : "fa11691d59b186425fab04b102fef4fba4e23b11",
      "created_at" : "2017-07-27T00:23:26Z",
      "diff_hunk" : "@@ -468,13 +468,28 @@ bool CWallet::Verify()\n \n     uiInterface.InitMessage(_(\"Verifying wallet(s)...\"));\n \n+    // Keep track of each wallet absolute path to detect duplicates.\n+    std::set<fs::path> wallet_paths;\n+\n     for (const std::string& walletFile : gArgs.GetArgs(\"-wallet\")) {\n         if (boost::filesystem::path(walletFile).filename() != walletFile) {\n             return InitError(_(\"-wallet parameter must only specify a filename (not a path)\"));\n-        } else if (SanitizeString(walletFile, SAFE_CHARS_FILENAME) != walletFile) {\n+        }\n+\n+        if (SanitizeString(walletFile, SAFE_CHARS_FILENAME) != walletFile) {\n             return InitError(_(\"Invalid characters in -wallet filename\"));\n         }\n \n+        fs::path wallet_path = fs::absolute(walletFile, GetDataDir());\n+\n+        if (fs::exists(wallet_path) && (!fs::is_regular_file(wallet_path) || fs::is_symlink(wallet_path))) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10885#discussion_r129728616",
      "id" : 129728616,
      "original_commit_id" : "c84a5a9e561409a3b1b15f81ac1d425acf2122b6",
      "original_position" : 19,
      "path" : "src/wallet/wallet.cpp",
      "position" : 19,
      "pull_request_review_id" : 52531859,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10885",
      "updated_at" : "2017-07-27T00:23:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/129728616",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "body" : "@jnewbery tests added, thank you.\r\n\r\nSplitted in two commits: the first tests for duplicate arguments while the second tests for invalid files (must be regular file and not a symlink).",
      "created_at" : "2017-07-27T00:27:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10885#issuecomment-318221540",
      "id" : 318221540,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10885",
      "updated_at" : "2017-07-27T00:27:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/318221540",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10885#discussion_r129729391"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10885"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/129729391"
         }
      },
      "body" : "BTW, if I remove the `!is_symlink` condition then `multiwallet.py` test fails.",
      "commit_id" : "fa11691d59b186425fab04b102fef4fba4e23b11",
      "created_at" : "2017-07-27T00:30:14Z",
      "diff_hunk" : "@@ -468,13 +468,28 @@ bool CWallet::Verify()\n \n     uiInterface.InitMessage(_(\"Verifying wallet(s)...\"));\n \n+    // Keep track of each wallet absolute path to detect duplicates.\n+    std::set<fs::path> wallet_paths;\n+\n     for (const std::string& walletFile : gArgs.GetArgs(\"-wallet\")) {\n         if (boost::filesystem::path(walletFile).filename() != walletFile) {\n             return InitError(_(\"-wallet parameter must only specify a filename (not a path)\"));\n-        } else if (SanitizeString(walletFile, SAFE_CHARS_FILENAME) != walletFile) {\n+        }\n+\n+        if (SanitizeString(walletFile, SAFE_CHARS_FILENAME) != walletFile) {\n             return InitError(_(\"Invalid characters in -wallet filename\"));\n         }\n \n+        fs::path wallet_path = fs::absolute(walletFile, GetDataDir());\n+\n+        if (fs::exists(wallet_path) && (!fs::is_regular_file(wallet_path) || fs::is_symlink(wallet_path))) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10885#discussion_r129729391",
      "id" : 129729391,
      "original_commit_id" : "c84a5a9e561409a3b1b15f81ac1d425acf2122b6",
      "original_position" : 19,
      "path" : "src/wallet/wallet.cpp",
      "position" : 19,
      "pull_request_review_id" : 52532605,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10885",
      "updated_at" : "2017-07-27T00:30:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/129729391",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10885#discussion_r129765057"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10885"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/129765057"
         }
      },
      "body" : "Suggestion: can you include the invalid wallet name in this error message? If the user has specified multiple wallets, then this error won't indicate which one of them is invalid.\r\n\r\nSame goes for the other error conditions.",
      "commit_id" : "fa11691d59b186425fab04b102fef4fba4e23b11",
      "created_at" : "2017-07-27T06:50:23Z",
      "diff_hunk" : "@@ -468,13 +468,28 @@ bool CWallet::Verify()\n \n     uiInterface.InitMessage(_(\"Verifying wallet(s)...\"));\n \n+    // Keep track of each wallet absolute path to detect duplicates.\n+    std::set<fs::path> wallet_paths;\n+\n     for (const std::string& walletFile : gArgs.GetArgs(\"-wallet\")) {\n         if (boost::filesystem::path(walletFile).filename() != walletFile) {\n             return InitError(_(\"-wallet parameter must only specify a filename (not a path)\"));\n-        } else if (SanitizeString(walletFile, SAFE_CHARS_FILENAME) != walletFile) {\n+        }\n+\n+        if (SanitizeString(walletFile, SAFE_CHARS_FILENAME) != walletFile) {\n             return InitError(_(\"Invalid characters in -wallet filename\"));\n         }\n \n+        fs::path wallet_path = fs::absolute(walletFile, GetDataDir());\n+\n+        if (fs::exists(wallet_path) && (!fs::is_regular_file(wallet_path) || fs::is_symlink(wallet_path))) {\n+            return InitError(_(\"Invalid -wallet file\"));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10885#discussion_r129765057",
      "id" : 129765057,
      "original_commit_id" : "fa11691d59b186425fab04b102fef4fba4e23b11",
      "original_position" : 20,
      "path" : "src/wallet/wallet.cpp",
      "position" : 20,
      "pull_request_review_id" : 52570140,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10885",
      "updated_at" : "2017-07-27T06:59:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/129765057",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10885#discussion_r129766229"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10885"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/129766229"
         }
      },
      "body" : "Note for other reviewers: It seemed slightly weird to start-stop the node at the beginning of this test. The reason we need to do that is that the `w1` file doesn't exist until the node has been started, and we can't do the symlink test below without an existing wallet file.\r\n\r\nmicronit: I think it feels more natural to do these invalid tests at the end of this test script, and removes the confusing start-stop at the beginning of the test. That's just personal taste though.",
      "commit_id" : "fa11691d59b186425fab04b102fef4fba4e23b11",
      "created_at" : "2017-07-27T06:59:00Z",
      "diff_hunk" : "@@ -18,6 +20,21 @@ def __init__(self):\n         self.extra_args = [['-wallet=w1', '-wallet=w2', '-wallet=w3']]\n \n     def run_test(self):\n+        self.stop_node(0)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10885#discussion_r129766229",
      "id" : 129766229,
      "original_commit_id" : "fa11691d59b186425fab04b102fef4fba4e23b11",
      "original_position" : 13,
      "path" : "test/functional/multiwallet.py",
      "position" : 13,
      "pull_request_review_id" : 52570140,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10885",
      "updated_at" : "2017-07-27T06:59:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/129766229",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10885#discussion_r129766999"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10885"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/129766999"
         }
      },
      "body" : "Other errors doesn't specify the invalid argument.",
      "commit_id" : "fa11691d59b186425fab04b102fef4fba4e23b11",
      "created_at" : "2017-07-27T07:04:01Z",
      "diff_hunk" : "@@ -468,13 +468,28 @@ bool CWallet::Verify()\n \n     uiInterface.InitMessage(_(\"Verifying wallet(s)...\"));\n \n+    // Keep track of each wallet absolute path to detect duplicates.\n+    std::set<fs::path> wallet_paths;\n+\n     for (const std::string& walletFile : gArgs.GetArgs(\"-wallet\")) {\n         if (boost::filesystem::path(walletFile).filename() != walletFile) {\n             return InitError(_(\"-wallet parameter must only specify a filename (not a path)\"));\n-        } else if (SanitizeString(walletFile, SAFE_CHARS_FILENAME) != walletFile) {\n+        }\n+\n+        if (SanitizeString(walletFile, SAFE_CHARS_FILENAME) != walletFile) {\n             return InitError(_(\"Invalid characters in -wallet filename\"));\n         }\n \n+        fs::path wallet_path = fs::absolute(walletFile, GetDataDir());\n+\n+        if (fs::exists(wallet_path) && (!fs::is_regular_file(wallet_path) || fs::is_symlink(wallet_path))) {\n+            return InitError(_(\"Invalid -wallet file\"));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10885#discussion_r129766999",
      "id" : 129766999,
      "original_commit_id" : "fa11691d59b186425fab04b102fef4fba4e23b11",
      "original_position" : 20,
      "path" : "src/wallet/wallet.cpp",
      "position" : 20,
      "pull_request_review_id" : 52572102,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10885",
      "updated_at" : "2017-07-27T07:04:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/129766999",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10885#discussion_r129767268"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10885"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/129767268"
         }
      },
      "body" : "I'm used to see the success tests at bottom. Can change if it's better as you suggest.",
      "commit_id" : "fa11691d59b186425fab04b102fef4fba4e23b11",
      "created_at" : "2017-07-27T07:05:57Z",
      "diff_hunk" : "@@ -18,6 +20,21 @@ def __init__(self):\n         self.extra_args = [['-wallet=w1', '-wallet=w2', '-wallet=w3']]\n \n     def run_test(self):\n+        self.stop_node(0)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10885#discussion_r129767268",
      "id" : 129767268,
      "original_commit_id" : "fa11691d59b186425fab04b102fef4fba4e23b11",
      "original_position" : 13,
      "path" : "test/functional/multiwallet.py",
      "position" : 13,
      "pull_request_review_id" : 52572375,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10885",
      "updated_at" : "2017-07-27T07:05:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/129767268",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10885#discussion_r129770952"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10885"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/129770952"
         }
      },
      "body" : "right, because until now there's only been a single wallet, so it's clear what the problem is. With multiwallet, it's helpful to know which wallet is the problem.",
      "commit_id" : "fa11691d59b186425fab04b102fef4fba4e23b11",
      "created_at" : "2017-07-27T07:28:59Z",
      "diff_hunk" : "@@ -468,13 +468,28 @@ bool CWallet::Verify()\n \n     uiInterface.InitMessage(_(\"Verifying wallet(s)...\"));\n \n+    // Keep track of each wallet absolute path to detect duplicates.\n+    std::set<fs::path> wallet_paths;\n+\n     for (const std::string& walletFile : gArgs.GetArgs(\"-wallet\")) {\n         if (boost::filesystem::path(walletFile).filename() != walletFile) {\n             return InitError(_(\"-wallet parameter must only specify a filename (not a path)\"));\n-        } else if (SanitizeString(walletFile, SAFE_CHARS_FILENAME) != walletFile) {\n+        }\n+\n+        if (SanitizeString(walletFile, SAFE_CHARS_FILENAME) != walletFile) {\n             return InitError(_(\"Invalid characters in -wallet filename\"));\n         }\n \n+        fs::path wallet_path = fs::absolute(walletFile, GetDataDir());\n+\n+        if (fs::exists(wallet_path) && (!fs::is_regular_file(wallet_path) || fs::is_symlink(wallet_path))) {\n+            return InitError(_(\"Invalid -wallet file\"));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10885#discussion_r129770952",
      "id" : 129770952,
      "original_commit_id" : "fa11691d59b186425fab04b102fef4fba4e23b11",
      "original_position" : 20,
      "path" : "src/wallet/wallet.cpp",
      "position" : 20,
      "pull_request_review_id" : 52576308,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10885",
      "updated_at" : "2017-07-27T07:28:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/129770952",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10885#discussion_r129771089"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10885"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/129771089"
         }
      },
      "body" : "sure, like I said just personal taste to remove the weird start-stop behaviour at the top. Doesn't make any difference.",
      "commit_id" : "fa11691d59b186425fab04b102fef4fba4e23b11",
      "created_at" : "2017-07-27T07:29:49Z",
      "diff_hunk" : "@@ -18,6 +20,21 @@ def __init__(self):\n         self.extra_args = [['-wallet=w1', '-wallet=w2', '-wallet=w3']]\n \n     def run_test(self):\n+        self.stop_node(0)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10885#discussion_r129771089",
      "id" : 129771089,
      "original_commit_id" : "fa11691d59b186425fab04b102fef4fba4e23b11",
      "original_position" : 13,
      "path" : "test/functional/multiwallet.py",
      "position" : 13,
      "pull_request_review_id" : 52576465,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10885",
      "updated_at" : "2017-07-27T07:29:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/129771089",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "body" : "utACK. Would be nice to print the wallet which generated the error as @jnewbery suggested, but ready for merge either way.",
      "created_at" : "2017-07-27T20:35:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10885#issuecomment-318478956",
      "id" : 318478956,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10885",
      "updated_at" : "2017-07-27T20:35:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/318478956",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/649246?v=4",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "Yep - as Matt says, ready for merge with or without the error message improvement. Can always be added later.",
      "created_at" : "2017-07-28T00:19:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10885#issuecomment-318522035",
      "id" : 318522035,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10885",
      "updated_at" : "2017-07-28T00:19:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/318522035",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10885#discussion_r130017809"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10885"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/130017809"
         }
      },
      "body" : "Yes, please add the name here. @jnewbery has a good point that it matters when loading multiple wallets.",
      "commit_id" : "fa11691d59b186425fab04b102fef4fba4e23b11",
      "created_at" : "2017-07-28T05:59:20Z",
      "diff_hunk" : "@@ -468,13 +468,28 @@ bool CWallet::Verify()\n \n     uiInterface.InitMessage(_(\"Verifying wallet(s)...\"));\n \n+    // Keep track of each wallet absolute path to detect duplicates.\n+    std::set<fs::path> wallet_paths;\n+\n     for (const std::string& walletFile : gArgs.GetArgs(\"-wallet\")) {\n         if (boost::filesystem::path(walletFile).filename() != walletFile) {\n             return InitError(_(\"-wallet parameter must only specify a filename (not a path)\"));\n-        } else if (SanitizeString(walletFile, SAFE_CHARS_FILENAME) != walletFile) {\n+        }\n+\n+        if (SanitizeString(walletFile, SAFE_CHARS_FILENAME) != walletFile) {\n             return InitError(_(\"Invalid characters in -wallet filename\"));\n         }\n \n+        fs::path wallet_path = fs::absolute(walletFile, GetDataDir());\n+\n+        if (fs::exists(wallet_path) && (!fs::is_regular_file(wallet_path) || fs::is_symlink(wallet_path))) {\n+            return InitError(_(\"Invalid -wallet file\"));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10885#discussion_r130017809",
      "id" : 130017809,
      "original_commit_id" : "fa11691d59b186425fab04b102fef4fba4e23b11",
      "original_position" : 20,
      "path" : "src/wallet/wallet.cpp",
      "position" : 20,
      "pull_request_review_id" : 52849597,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10885",
      "updated_at" : "2017-07-28T06:02:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/130017809",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Suggested change to error messages here: https://github.com/jnewbery/bitcoin/tree/pr10885 . Feel free to cherry-pick or squash in. Or else I can open a PR after this is merged.",
      "created_at" : "2017-07-28T10:05:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10885#issuecomment-318614115",
      "id" : 318614115,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10885",
      "updated_at" : "2017-07-28T10:05:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/318614115",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "body" : "Thanks @jnewbery, if you don't mind I'll squash.\r\n\r\nEDIT: Actually since you fixed the other error messages I'll leave it as is.",
      "created_at" : "2017-07-28T10:18:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10885#issuecomment-318616640",
      "id" : 318616640,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10885",
      "updated_at" : "2017-07-28T10:26:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/318616640",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "I know it's a bit late for this, but on upgrading to v0.15, this is a bit of a showstopper for me.\r\n\r\nI have the wallet.dat file as a symlink to another partition. The reasons for this are not entirely crazy:\r\n\r\n- The other partition is block encrypted and I have encryption at rest.\r\n- The other partition is on a SSD which has great I/O, but is limited in space.\r\n\r\nChecking for the wallet being a symlink stops me from being able to do this, and I can't specify the full path on the -wallet command line argument as that only supports files in the datadir, not full paths.\r\n\r\nI don't think there's a neat solution to my problem, but I've discussed a few on #bitcoin-dev anyway.\r\n\r\n1. \"You could put everything on the SSD\" - it uses up too much space.\r\n2. \"You could use wallet encryption\" - yes, but it can't then be on the SSD. Being on the SSD is great as there's quite a bit of I/O on the wallet and this speeds things up considerably.\r\n3. \"You could move the datadir to the SSD and symlink everything else out of there (especially blocks, chainstate and debug.log)\" - yes, but yuck. That just feels a bit wrong, since I want to just move the one file.\r\n\r\nI will live with option 3 if I need to, but was wondering if the symlink check is a bit of an overkill safety check here. Is it really likely the user will specify a -wallet argument for the real wallet, and another for a symlink to that real wallet?",
      "created_at" : "2017-09-15T08:21:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10885#issuecomment-329715523",
      "id" : 329715523,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10885",
      "updated_at" : "2017-09-15T08:21:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/329715523",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/15180124?v=4",
         "events_url" : "https://api.github.com/users/bittylicious/events{/privacy}",
         "followers_url" : "https://api.github.com/users/bittylicious/followers",
         "following_url" : "https://api.github.com/users/bittylicious/following{/other_user}",
         "gists_url" : "https://api.github.com/users/bittylicious/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/bittylicious",
         "id" : 15180124,
         "login" : "bittylicious",
         "organizations_url" : "https://api.github.com/users/bittylicious/orgs",
         "received_events_url" : "https://api.github.com/users/bittylicious/received_events",
         "repos_url" : "https://api.github.com/users/bittylicious/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/bittylicious/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/bittylicious/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/bittylicious"
      }
   },
   {
      "author_association" : "OWNER",
      "body" : "@bittylicious I understand this sounds like an unnecessary measure, but perhaps it is a bit more complicated than you realize. Effectively, the wallet is not just a single file, but a whole directory. Bitcoin Core will clean up all other files before shutdown, but in case of a crash, other files in the directory are needed for recovery. Symlinks may break these assumptions - making it look like a wallet file could be shared across datadirs, for example.\n\nI think the correct approach for the issue you have is an ability to specify a wallet datadir, separate from the node's datadir.",
      "created_at" : "2017-09-15T08:31:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10885#issuecomment-329717802",
      "id" : 329717802,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10885",
      "updated_at" : "2017-09-15T08:31:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/329717802",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "@sipa Thanks for the response. I appreciate what you're saying and there's a reliance between the wallet and other files in the datadir.\r\n\r\nI think what I'm saying is that if you're messing around with symlinks, you're probably technical enough to know what you're doing, so having artificial restrictions like the symlink check probably won't result in much real safety. Having to find a workaround in this case is probably more risky.\r\n\r\nRe: wallet datadir, I'm not sure how that could work given dependencies between that and the regular datadir, or do you mean that it would essentially work as a flag to say \"I really do know what I'm doing\"?",
      "created_at" : "2017-09-15T08:42:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10885#issuecomment-329720057",
      "id" : 329720057,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10885",
      "updated_at" : "2017-09-15T08:42:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/329720057",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/15180124?v=4",
         "events_url" : "https://api.github.com/users/bittylicious/events{/privacy}",
         "followers_url" : "https://api.github.com/users/bittylicious/followers",
         "following_url" : "https://api.github.com/users/bittylicious/following{/other_user}",
         "gists_url" : "https://api.github.com/users/bittylicious/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/bittylicious",
         "id" : 15180124,
         "login" : "bittylicious",
         "organizations_url" : "https://api.github.com/users/bittylicious/orgs",
         "received_events_url" : "https://api.github.com/users/bittylicious/received_events",
         "repos_url" : "https://api.github.com/users/bittylicious/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/bittylicious/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/bittylicious/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/bittylicious"
      }
   },
   {
      "author_association" : "OWNER",
      "body" : "There are no dependencies between the wallet and the rest of the datadir, in either direction.",
      "created_at" : "2017-09-15T08:46:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10885#issuecomment-329720971",
      "id" : 329720971,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10885",
      "updated_at" : "2017-09-15T08:46:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/329720971",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Sorry, I meant wallet.dat dependencies (those that make up the full wallet during runtime).",
      "created_at" : "2017-09-15T08:55:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10885#issuecomment-329723208",
      "id" : 329723208,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10885",
      "updated_at" : "2017-09-15T08:55:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/329723208",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/15180124?v=4",
         "events_url" : "https://api.github.com/users/bittylicious/events{/privacy}",
         "followers_url" : "https://api.github.com/users/bittylicious/followers",
         "following_url" : "https://api.github.com/users/bittylicious/following{/other_user}",
         "gists_url" : "https://api.github.com/users/bittylicious/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/bittylicious",
         "id" : 15180124,
         "login" : "bittylicious",
         "organizations_url" : "https://api.github.com/users/bittylicious/orgs",
         "received_events_url" : "https://api.github.com/users/bittylicious/received_events",
         "repos_url" : "https://api.github.com/users/bittylicious/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/bittylicious/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/bittylicious/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/bittylicious"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Having discussed this a bit more on #bitcoin-dev I see what you're saying - the wallet should really be in its own directory as a BDB database expects this, hence the suggestion for a -walletdir argument.",
      "created_at" : "2017-09-15T09:07:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10885#issuecomment-329725990",
      "id" : 329725990,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10885",
      "updated_at" : "2017-09-15T09:07:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/329725990",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/15180124?v=4",
         "events_url" : "https://api.github.com/users/bittylicious/events{/privacy}",
         "followers_url" : "https://api.github.com/users/bittylicious/followers",
         "following_url" : "https://api.github.com/users/bittylicious/following{/other_user}",
         "gists_url" : "https://api.github.com/users/bittylicious/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/bittylicious",
         "id" : 15180124,
         "login" : "bittylicious",
         "organizations_url" : "https://api.github.com/users/bittylicious/orgs",
         "received_events_url" : "https://api.github.com/users/bittylicious/received_events",
         "repos_url" : "https://api.github.com/users/bittylicious/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/bittylicious/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/bittylicious/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/bittylicious"
      }
   }
]
