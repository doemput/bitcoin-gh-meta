[
   {
      "body" : "I believe we *won't* broadcast any transaction with fees > maxtxfee, because they won't be admitted to our mempool (all calls to `AcceptToMemoryPool()` in the wallet use `maxTxFee`, which gets set from the `-maxtxfee` argument here: https://github.com/bitcoin/bitcoin/blob/8c28670e92b6422eb7576f074446238f9f221999/src/wallet/wallet.cpp#L3918).\r\n\r\nI can't comment on the specific case you observed, since you haven't included details about the total fee attached to the transaction. Note that `-mxtxfee` is limiting the *total* fee, not the fee rate. `paytxfee`, on the other hand, sets the feerate in BTC per kB.",
      "created_at" : "2017-04-07T12:50:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/10122#issuecomment-292527860",
      "id" : 292527860,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10122",
      "updated_at" : "2017-04-07T12:50:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/292527860",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "body" : "Indeed, there is a belt and suspender check in ATMP that rejects any\ntransactions with fees larger than nAbsurdFee (==maxTxFee for the wallet).\nAdditionally, it is wanted that the wallet does not create transactions\nthat would be rejected by the mempool, so capping the total fee to maxTxFee\nmakes sense. I'd suggest to update the documentation for -maxtxfee.\n\nOn Fri, Apr 7, 2017 at 2:51 PM, John Newbery <notifications@github.com>\nwrote:\n\n> I believe we *won't* broadcast any transaction with fees > maxtxfee,\n> because they won't be admitted to our mempool (all calls to\n> AcceptToMemoryPool() in the wallet use maxTxFee, which gets set from the\n> -maxtxfee argument here: https://github.com/bitcoin/bitcoin/blob/\n> 8c28670e92b6422eb7576f074446238f9f221999/src/wallet/wallet.cpp#L3918).\n>\n> I can't comment on the specific case you observed, since you haven't\n> included details about the total fee attached to the transaction. Note that\n> -mxtxfee is limiting the *total* fee, not the fee rate. paytxfee, on the\n> other hand, sets the feerate in BTC per kB.\n>\n> Ã¢ÂÂ\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/bitcoin/bitcoin/issues/10122#issuecomment-292527860>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AGGmvwW6Cp_JDp8ZpnJr5Y4dT8UCi8y3ks5rtjE6gaJpZM4Mufxp>\n> .\n>\n",
      "created_at" : "2017-04-07T13:26:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/10122#issuecomment-292535564",
      "id" : 292535564,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10122",
      "updated_at" : "2017-04-07T13:26:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/292535564",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/6399679?v=3",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "body" : "Capping transactions to maxtxfee is all well and good, but the unexpected part was the transaction being broadcast with a very low (capped) fee despite the \"setting this too low may abort large transactions\" wording. I believe the transaction in question was in the ~60 KB range and hit the 0.01 limit configured for that wallet, leaving the fee at ~15 sat/byte.\r\n\r\nMy suggestion is that it would make sense if a transaction is aborted (i.e. not broadcast) if maxtxfee ends up capping the fee to less than paytxfee, as that could indicate a problem. I assume a setting like this is intended as a safeguard against fat-fingered or erroneously calculated fees, but right now with the default setting, it would just limit the fee to ~$120 at today's rate.",
      "created_at" : "2017-04-07T22:33:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/10122#issuecomment-292667671",
      "id" : 292667671,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10122",
      "updated_at" : "2017-04-07T22:33:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/292667671",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/17721714?v=3",
         "events_url" : "https://api.github.com/users/Celean/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Celean/followers",
         "following_url" : "https://api.github.com/users/Celean/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Celean/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Celean",
         "id" : 17721714,
         "login" : "Celean",
         "organizations_url" : "https://api.github.com/users/Celean/orgs",
         "received_events_url" : "https://api.github.com/users/Celean/received_events",
         "repos_url" : "https://api.github.com/users/Celean/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Celean/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Celean/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Celean"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Is this still the case in .15 @celean? I think the transaction fee logic and coin-selection upgrades should have resolved this..",
      "created_at" : "2017-09-12T05:35:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/10122#issuecomment-328741855",
      "id" : 328741855,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10122",
      "updated_at" : "2017-09-12T05:35:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/328741855",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/14876936?v=4",
         "events_url" : "https://api.github.com/users/Leviathn/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Leviathn/followers",
         "following_url" : "https://api.github.com/users/Leviathn/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Leviathn/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Leviathn",
         "id" : 14876936,
         "login" : "Leviathn",
         "organizations_url" : "https://api.github.com/users/Leviathn/orgs",
         "received_events_url" : "https://api.github.com/users/Leviathn/received_events",
         "repos_url" : "https://api.github.com/users/Leviathn/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Leviathn/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Leviathn/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Leviathn"
      }
   }
]
