[
   {
      "body" : "Concept ACK. Though if we're going to be exposing this value to our apis, we need to define it sanely first.\r\n\r\nATM it's just an int, so it's tricky encode/decode it safely. I'd prefer change it to a uint32_t first, so that we can use ParseUInt32 here.",
      "created_at" : "2017-04-03T20:27:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10143#issuecomment-291263527",
      "id" : 291263527,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10143",
      "updated_at" : "2017-04-03T20:27:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/291263527",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/417043?v=3",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "body" : "Concept ACK, I've wanted this many times before... but I'm concerned about the nodeid--- right now if it wraps bad things happen, and it will be harder to fix if we've made it a part of the API.",
      "created_at" : "2017-04-03T21:23:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10143#issuecomment-291278184",
      "id" : 291278184,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10143",
      "updated_at" : "2017-04-03T21:23:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/291278184",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "edit: Decided I didn't like this thought and bailed. Meant to cancel, closed instead. Sorry!",
      "created_at" : "2017-04-03T21:52:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10143#issuecomment-291285238",
      "id" : 291285238,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10143",
      "updated_at" : "2017-04-03T22:05:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/291285238",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/417043?v=3",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "body" : "I suppose it would be prudent to\r\n- determine where we assume nodeids are increasing in value, as opposed to just being unique. I should hope there are none of these, other than generally being able to assume that higher node == earlier connection\r\n- determine when we assume a nodeid to be globally unique. For example, if there's a global map<nodeid,int> that tallies sent bytes, that would be broken by duplicated values when ids wrapped.\r\n- determine when we assume that a nodeid is a unique identifier among current nodes.\r\n\r\nThe last one is what happens all over the place, and is fine as long as we ensure that the values really are unique. To do so, we can either:\r\n- maintain a set of currently used nodeids, and make sure that new values aren't in use before assigning a new one\r\n- disconnect all nodes when we hit max, forcing new connections starting from 0.\r\n\r\nObviously the first is cleaner, and would probably end up being simpler too.",
      "created_at" : "2017-04-03T23:27:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10143#issuecomment-291314820",
      "id" : 291314820,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10143",
      "updated_at" : "2017-04-03T23:27:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/291314820",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/417043?v=3",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "body" : "See https://github.com/theuni/bitcoin/commit/57ea0cc55e0368466c32f3fd272e48504ab2871d for the wrapping/defining changes. Still need to verify the first two points above, though.\r\n\r\n@jnewbery If you don't object, I'll go ahead and PR that as a prerequisite for this one.",
      "created_at" : "2017-04-04T03:05:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10143#issuecomment-291381298",
      "id" : 291381298,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10143",
      "updated_at" : "2017-04-04T03:59:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/291381298",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/417043?v=3",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10143#discussion_r109587798"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10143"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/109587798"
         }
      },
      "body" : "Concept ACK, but please make this API explicit.\r\n\r\n- APIs that switch based on magic heuristics on how a value 'looks'. Initially this seems user friendly, but it will quickly grow to maintainable, insecure monsters of obscure rules. It should be made completely explicit.\r\n\r\n- Also: do not encode integers as strings and use functions like std::stoi. Just use .get_int() if you need an int value and leave the encoding of values up to the RPC mechanism.\r\n\r\nThe most straightforward way would be to just add a function `disconnectnodebyid`.",
      "commit_id" : "6af6bdf9575defd0fe81378279abdbad01538de5",
      "created_at" : "2017-04-04T06:48:21Z",
      "diff_hunk" : "@@ -248,7 +248,16 @@ UniValue disconnectnode(const JSONRPCRequest& request)\n     if(!g_connman)\n         throw JSONRPCError(RPC_CLIENT_P2P_DISABLED, \"Error: Peer-to-peer functionality missing or disabled\");\n \n-    bool ret = g_connman->DisconnectNode(request.params[0].get_str());\n+    std::string node = (request.params[0].get_str());\n+    bool ret;\n+    if (std::all_of(node.begin(), node.end(), ::isdigit)) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10143#discussion_r109587798",
      "id" : 109587798,
      "original_commit_id" : "54695963da369e47fd16f1685e3d0da911f8349d",
      "original_position" : 7,
      "path" : "src/rpc/net.cpp",
      "position" : null,
      "pull_request_review_id" : 30698091,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10143",
      "updated_at" : "2017-04-19T14:49:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/109587798",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "> Concept ACK. Though if we're going to be exposing this value to our apis, we need to define it sanely first.\r\n\r\nThis value is already exposed in APIs since `getpeerinfo` added `{\"id\": 14669}`. Handling wrapping sanely is important, but I don't think this is a blocker for more usage on the RPC API. Client applications should treat these numbers as opaque identifiers and the only thing they can rely on is that that an ID won't be reused for a different node within a very short timespan.",
      "created_at" : "2017-04-04T06:54:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10143#issuecomment-291410743",
      "id" : 291410743,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10143",
      "updated_at" : "2017-04-04T06:54:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/291410743",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Found myself wanting this for disconnect after reading debug.log many times, annoying to have to getpeerinfo for it.",
      "created_at" : "2017-04-04T09:30:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10143#issuecomment-291445489",
      "id" : 291445489,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10143",
      "updated_at" : "2017-04-04T09:30:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/291445489",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10143#discussion_r109783590"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10143"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/109783590"
         }
      },
      "body" : "Yes, I agree that APIs shouldn't be magic. I thought it wouldn't be too problematic here because there can't be any ambiguity at all between nodeIds and IP addresses (and `disconnectnode()` is already a bit magic - it can take either IPv4 or IPv6 addresses).\r\n\r\nI don't like the proliferation of additional RPCs that perform a very small function if we can avoid it.\r\n\r\nHow about we add a new argument to this RPC called \"nodeId\"? The RPC can be called with strictly one of the arguments. There's no magic or ambiguity, and the node disconnection logic is contained within one RPC.",
      "commit_id" : "6af6bdf9575defd0fe81378279abdbad01538de5",
      "created_at" : "2017-04-04T21:35:31Z",
      "diff_hunk" : "@@ -248,7 +248,16 @@ UniValue disconnectnode(const JSONRPCRequest& request)\n     if(!g_connman)\n         throw JSONRPCError(RPC_CLIENT_P2P_DISABLED, \"Error: Peer-to-peer functionality missing or disabled\");\n \n-    bool ret = g_connman->DisconnectNode(request.params[0].get_str());\n+    std::string node = (request.params[0].get_str());\n+    bool ret;\n+    if (std::all_of(node.begin(), node.end(), ::isdigit)) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10143#discussion_r109783590",
      "id" : 109783590,
      "original_commit_id" : "54695963da369e47fd16f1685e3d0da911f8349d",
      "original_position" : 7,
      "path" : "src/rpc/net.cpp",
      "position" : null,
      "pull_request_review_id" : 30908582,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10143",
      "updated_at" : "2017-04-19T14:49:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/109783590",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "body" : "@theuni - of course, no objection at all!",
      "created_at" : "2017-04-04T21:38:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10143#issuecomment-291639710",
      "id" : 291639710,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10143",
      "updated_at" : "2017-04-04T21:38:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/291639710",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "body" : "> ÃÂ there can't be any ambiguity at all between nodeIds and IP addresses\n\nWell you can write an IPv4 address as a decimal integer... I guess we're excluding that (very uncommon) usage?",
      "created_at" : "2017-04-04T22:29:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10143#issuecomment-291654066",
      "id" : 291654066,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10143",
      "updated_at" : "2017-04-04T22:29:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/291654066",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10143#discussion_r109867692"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10143"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/109867692"
         }
      },
      "body" : "> How about we add a new argument to this RPC called \"nodeId\"? The RPC can be called with strictly one of the arguments. There's no magic or ambiguity, and the node disconnection logic is contained within one RPC.\r\n\r\nSounds reasonable to me. To be clear: anything that doesn't encode the integer as a string is more reasonable to me than this (another reason: because it allows passing the 'id' value literally without having to string-encode it in the client). I don't have a strong opinion whether it should be one or multiple RPCs.",
      "commit_id" : "6af6bdf9575defd0fe81378279abdbad01538de5",
      "created_at" : "2017-04-05T09:21:52Z",
      "diff_hunk" : "@@ -248,7 +248,16 @@ UniValue disconnectnode(const JSONRPCRequest& request)\n     if(!g_connman)\n         throw JSONRPCError(RPC_CLIENT_P2P_DISABLED, \"Error: Peer-to-peer functionality missing or disabled\");\n \n-    bool ret = g_connman->DisconnectNode(request.params[0].get_str());\n+    std::string node = (request.params[0].get_str());\n+    bool ret;\n+    if (std::all_of(node.begin(), node.end(), ::isdigit)) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10143#discussion_r109867692",
      "id" : 109867692,
      "original_commit_id" : "54695963da369e47fd16f1685e3d0da911f8349d",
      "original_position" : 7,
      "path" : "src/rpc/net.cpp",
      "position" : null,
      "pull_request_review_id" : 30996049,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10143",
      "updated_at" : "2017-04-19T14:49:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/109867692",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "> Well you can write an IPv4 address as a decimal integer... I guess we're excluding that (very uncommon) usage?\r\n\r\n+1. Exactly. This is exactly why these things get ugly. There's always overlaps in representations that you may not be thinking about in the initial design, then get realized later. Let's just take the sane route here and make the ambiguity impossible.",
      "created_at" : "2017-04-05T09:23:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10143#issuecomment-291804273",
      "id" : 291804273,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10143",
      "updated_at" : "2017-04-05T09:23:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/291804273",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "> Let's just take the sane route here and make the ambiguity impossible.\r\n\r\nYep, fine.",
      "created_at" : "2017-04-05T14:09:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10143#issuecomment-291873071",
      "id" : 291873071,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10143",
      "updated_at" : "2017-04-05T14:09:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/291873071",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "body" : "ok, another idea. I think it's reasonable that people might want to update node by id in other ways (ie switching whitelisting on and off, changing ban score, etc). How would you feel about an updatenode RPC to do those things? To begin with it will allow disconnecting and turning whitelisting on/off, and it can be added to later if people think further functionality is useful.\r\n\r\nI already have a branch with an updatenode RPC here: https://github.com/jnewbery/bitcoin/commit/5bbe24fd7597237388b73017036f5fe18c8470a6 . Adding a 'disconnect' argument to it is trivial.\r\n\r\nWe should keep this RPC hidden in order to not commit ourselves to a public API that we might want to change later (eg if we break out whitelisting into more granular behaviour at some point).\r\n\r\nThoughts?",
      "created_at" : "2017-04-05T14:15:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10143#issuecomment-291874889",
      "id" : 291874889,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10143",
      "updated_at" : "2017-04-05T14:15:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/291874889",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "body" : "I've added an `updatepeer` RPC here: #10160 which I think is better and more extensible, but I'd be interested to hear others' thoughts.",
      "created_at" : "2017-04-05T21:52:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10143#issuecomment-292008255",
      "id" : 292008255,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10143",
      "updated_at" : "2017-04-05T21:52:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/292008255",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "body" : "I don't think 'updatepeer X disconnect' is clearer than 'disconnectnode'. Having the RPC call as the verb is easier to use and remember.\r\n\r\nWe have an example of a very bad multiplexed call in the API: `addnode X remove`. Your proposal isn't half as crazy as that :) And the idea of having a `updatenode` makes sense for changing other per-node variables, certainly for testing/debugging, but I don't think it's a good place to place disconnect.",
      "created_at" : "2017-04-07T15:02:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10143#issuecomment-292561280",
      "id" : 292561280,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10143",
      "updated_at" : "2017-04-07T15:02:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/292561280",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Yes, `addnode X remove` is nuts, and I agree that having the RPC call as the verb is sensible.\r\n\r\nI'll reimplement this as an additional argument to disconnectnode.\r\n\r\nLonger term, my thinking around updatepeer is that it'd be handy as a swiss army knife for peer interop. We may wish to disconnect/ban/whitelist/change other attributes/etc for peers, and having a single RPC that does all of that would be a sensible API, and certainly better than a different RPC for each attribute. On the other hand, I do agree that 'disconnect' is a verb, so naturally `updatenode disconnect` is a bit weird.",
      "created_at" : "2017-04-07T16:13:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10143#issuecomment-292580430",
      "id" : 292580430,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10143",
      "updated_at" : "2017-04-07T16:13:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/292580430",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "body" : "I've pushed a version where disconnectnode now takes two arguments: address and nodeid. Strictly one argument must be given. (note: with named arguments, you can just supply a single argument, with positional arguments you need to set 'address' to the empty string if you want to use 'nodeid').\r\n\r\nI changed the name of the existing argument from 'node' to 'address', since it only takes address. I think that's the right thing to do since the current name is misleading, but we'll need release notes to document the API change.\r\n\r\nThis should only be merged after @theuni's branch here: https://github.com/theuni/bitcoin/commit/57ea0cc55e0368466c32f3fd272e48504ab2871d.",
      "created_at" : "2017-04-07T20:55:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10143#issuecomment-292649420",
      "id" : 292649420,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10143",
      "updated_at" : "2017-04-07T20:55:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/292649420",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10143#discussion_r110519238"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10143"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/110519238"
         }
      },
      "body" : "Second argument is missing here\r\n",
      "commit_id" : "6af6bdf9575defd0fe81378279abdbad01538de5",
      "created_at" : "2017-04-08T14:05:04Z",
      "diff_hunk" : "@@ -234,12 +234,15 @@ UniValue addnode(const JSONRPCRequest& request)\n \n UniValue disconnectnode(const JSONRPCRequest& request)\n {\n-    if (request.fHelp || request.params.size() != 1)\n+    if (request.fHelp || request.params.size() >= 3)\n         throw std::runtime_error(\n             \"disconnectnode \\\"node\\\" \\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10143#discussion_r110519238",
      "id" : 110519238,
      "original_commit_id" : "3ed1bef2b9669d31b6c2f9996afcb291a5440fce",
      "original_position" : 7,
      "path" : "src/rpc/net.cpp",
      "position" : null,
      "pull_request_review_id" : 31701866,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10143",
      "updated_at" : "2017-04-19T14:49:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/110519238",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "While you can write an IP as a decimal number, you can't specify an IP *plus port* in such a manner. Makes perfect sense to say String = IP and Number = nodeid IMO. Don't care too strongly if the current (two arguments) approach is used, but I wouldn't call it sane. :p",
      "created_at" : "2017-04-08T14:07:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10143#issuecomment-292720403",
      "id" : 292720403,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10143",
      "updated_at" : "2017-04-08T14:07:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/292720403",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "@luke-jr thanks for the review. I agree that the two arguments approach looks a bit odd when used as positional arguments, but it makes perfect sense when using named arguments: call the RPC with address=<address> if you want to disconnect by address, or call with nodeid=<nodeid> if you want to disconnect by nodeid. The fact that it works at all with positional arguments is more a historical quirk of bitcoin's RPC rather than a feature.\r\n\r\nI think any of the three approaches I've implemented are fine (overloading one argument, having a second argument or having a separate 'update peer' RPC). I really just want the functionality somewhere, and I'm happy to go along with the consensus view for where the best place to put it is.",
      "created_at" : "2017-04-10T13:14:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10143#issuecomment-292945554",
      "id" : 292945554,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10143",
      "updated_at" : "2017-04-10T13:14:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/292945554",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10143#discussion_r110651474"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10143"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/110651474"
         }
      },
      "body" : "Thanks. Help text now fixed. I'll squash the commit when this is ready for merge.",
      "commit_id" : "6af6bdf9575defd0fe81378279abdbad01538de5",
      "created_at" : "2017-04-10T13:17:40Z",
      "diff_hunk" : "@@ -234,12 +234,15 @@ UniValue addnode(const JSONRPCRequest& request)\n \n UniValue disconnectnode(const JSONRPCRequest& request)\n {\n-    if (request.fHelp || request.params.size() != 1)\n+    if (request.fHelp || request.params.size() >= 3)\n         throw std::runtime_error(\n             \"disconnectnode \\\"node\\\" \\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10143#discussion_r110651474",
      "id" : 110651474,
      "original_commit_id" : "3ed1bef2b9669d31b6c2f9996afcb291a5440fce",
      "original_position" : 7,
      "path" : "src/rpc/net.cpp",
      "position" : null,
      "pull_request_review_id" : 31837953,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10143",
      "updated_at" : "2017-04-19T14:49:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/110651474",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "body" : "(aside, the addnode thing isn't that nuts if you thing of it as a shortening of \"addednodelist <verb>\", which is what it actually is :) )",
      "created_at" : "2017-04-11T08:53:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10143#issuecomment-293194105",
      "id" : 293194105,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10143",
      "updated_at" : "2017-04-11T08:53:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/293194105",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "> aside, the addnode thing isn't that nuts if ...\r\n\r\nYes, it makes sense if you're a scholar of Bitcoin Core code archaeology :)\r\n\r\nIt'd be nice if `addnode` could be renamed to `trusted peer` or `persistent peer`, but that's a lot of work (and a change to public APIs).",
      "created_at" : "2017-04-11T13:07:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10143#issuecomment-293255283",
      "id" : 293255283,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10143",
      "updated_at" : "2017-04-11T13:07:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/293255283",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10143#discussion_r111337812"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10143"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/111337812"
         }
      },
      "body" : "This is yet another breaking change. Needs rationale and mention in the release notes. Maybe backport.\r\n\r\n\r\n```\r\nJSONRPCException: Unknown named parameter address (-8)",
      "commit_id" : "6af6bdf9575defd0fe81378279abdbad01538de5",
      "created_at" : "2017-04-13T08:39:25Z",
      "diff_hunk" : "@@ -607,7 +629,7 @@ static const CRPCCommand commands[] =\n     { \"network\",            \"ping\",                   &ping,                   true,  {} },\n     { \"network\",            \"getpeerinfo\",            &getpeerinfo,            true,  {} },\n     { \"network\",            \"addnode\",                &addnode,                true,  {\"node\",\"command\"} },\n-    { \"network\",            \"disconnectnode\",         &disconnectnode,         true,  {\"node\"} },\n+    { \"network\",            \"disconnectnode\",         &disconnectnode,         true,  {\"address\", \"nodeid\"} },",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10143#discussion_r111337812",
      "id" : 111337812,
      "original_commit_id" : "c070d5db5ac82210742c070f106d2c9193aba771",
      "original_position" : 52,
      "path" : "src/rpc/net.cpp",
      "position" : null,
      "pull_request_review_id" : 32575173,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10143",
      "updated_at" : "2017-04-19T14:49:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/111337812",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/6399679?v=3",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "body" : "@MarcoFalke indeed. See my earlier comment:\r\n\r\n> I changed the name of the existing argument from 'node' to 'address', since it only takes address. I think that's the right thing to do since the current name is misleading, but we'll need release notes to document the API change.\r\n\r\nThe fact that this argument is currently called 'node' and the help text say `(string, required) The node (see getpeerinfo for nodes)` is misleading at best. It currently only accepts a string which must match on the  CNode::addrName, which is the IP address/port.",
      "created_at" : "2017-04-13T12:48:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10143#issuecomment-293885720",
      "id" : 293885720,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10143",
      "updated_at" : "2017-04-13T12:48:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/293885720",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "body" : "Rebased and squashed, with a couple of code cleanups.\r\n\r\n#10176 is merged so this is now ready for review.",
      "created_at" : "2017-04-13T15:36:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10143#issuecomment-293931479",
      "id" : 293931479,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10143",
      "updated_at" : "2017-04-13T15:36:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/293931479",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "body" : "@jnewbery Yeah sorry for missing that. During my review flow I look at the code first, then read the comments before sending the ACK.\r\n\r\nGenerally I think it makes sense to keep breaking changes at a minimum or at least don't splatter them across consecutive releases. As we already have such a breaking change in 0.14.1 it makes sense to bundle this one in as well.\r\n\r\nWould you mind to create a minimal fix (similar to #10084) and tag that for backport? Not sure if it can into 0.14.1 at this stage, but having the pull open can not hurt.",
      "created_at" : "2017-04-13T19:13:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10143#issuecomment-293995368",
      "id" : 293995368,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10143",
      "updated_at" : "2017-04-13T19:13:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/293995368",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/6399679?v=3",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "body" : "rebased",
      "created_at" : "2017-04-17T13:39:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10143#issuecomment-294487301",
      "id" : 294487301,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10143",
      "updated_at" : "2017-04-17T13:39:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/294487301",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10143#discussion_r111963404"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10143"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/111963404"
         }
      },
      "body" : "Please mention in the documentation that only one of either can be provided, and the other one needs to be null (or missing, in case of the second argument, I guess).\r\nAlso I'd prefer a space after `ID` before `(` otherwise it looks like a parametrized something",
      "commit_id" : "6af6bdf9575defd0fe81378279abdbad01538de5",
      "created_at" : "2017-04-18T14:11:20Z",
      "diff_hunk" : "@@ -234,12 +234,14 @@ UniValue addnode(const JSONRPCRequest& request)\n \n UniValue disconnectnode(const JSONRPCRequest& request)\n {\n-    if (request.fHelp || request.params.size() != 1)\n+    if (request.fHelp || request.params.size() >= 3)\n         throw std::runtime_error(\n-            \"disconnectnode \\\"address\\\" \\n\"\n+            \"disconnectnode \\\"address\\\" [nodeid]\\n\"\n             \"\\nImmediately disconnects from the specified node.\\n\"\n             \"\\nArguments:\\n\"\n             \"1. \\\"address\\\"     (string, required) The IP address/port of the node\\n\"\n+            \"2. \\\"nodeid\\\"   (string, required) The node ID(see getpeerinfo for nodes)\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10143#discussion_r111963404",
      "id" : 111963404,
      "original_commit_id" : "569e5bb5a0a010ba2694e3f16b06307c7cc2b9fe",
      "original_position" : 12,
      "path" : "src/rpc/net.cpp",
      "position" : null,
      "pull_request_review_id" : 33241563,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10143",
      "updated_at" : "2017-04-19T14:49:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/111963404",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "fixed @laanwj's review comment.",
      "created_at" : "2017-04-18T15:56:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10143#issuecomment-294890470",
      "id" : 294890470,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10143",
      "updated_at" : "2017-04-18T15:56:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/294890470",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "body" : "ACK 18718846c9ab7b7b4392912a14e1a64e9136e970",
      "created_at" : "2017-04-18T16:26:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10143#issuecomment-294900322",
      "id" : 294900322,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10143",
      "updated_at" : "2017-04-18T16:26:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/294900322",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7463573?v=3",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10143#discussion_r112100775"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10143"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/112100775"
         }
      },
      "body" : "Use `address` here?",
      "commit_id" : "6af6bdf9575defd0fe81378279abdbad01538de5",
      "created_at" : "2017-04-19T01:40:53Z",
      "diff_hunk" : "@@ -234,23 +234,46 @@ UniValue addnode(const JSONRPCRequest& request)\n \n UniValue disconnectnode(const JSONRPCRequest& request)\n {\n-    if (request.fHelp || request.params.size() != 1)\n+    if (request.fHelp || request.params.size() == 0 || request.params.size() >= 3)\n         throw std::runtime_error(\n-            \"disconnectnode \\\"address\\\" \\n\"\n-            \"\\nImmediately disconnects from the specified node.\\n\"\n+            \"disconnectnode \\\"address\\\" [nodeid]\\n\"\n+            \"\\nImmediately disconnects from the specified peer node.\\n\"\n+            \"\\nStrictly one out of 'address' and 'nodeid' can be provided to identify the node.\\n\"\n+            \"\\nTo disconnect by nodeid, either set \\\"address\\\" to the empty string, or call using the named \\\"nodeid\\\" argument only.\\n\"\n             \"\\nArguments:\\n\"\n-            \"1. \\\"address\\\"     (string, required) The IP address/port of the node\\n\"\n+            \"1. \\\"address\\\"     (string, optional) The IP address/port of the node\\n\"\n+            \"2. \\\"nodeid\\\"      (int, optional) The node ID (see getpeerinfo for node IDs)\\n\"\n             \"\\nExamples:\\n\"\n             + HelpExampleCli(\"disconnectnode\", \"\\\"192.168.0.6:8333\\\"\")\n+            + HelpExampleCli(\"disconnectnode\", \"\\\"\\\" 1\")\n             + HelpExampleRpc(\"disconnectnode\", \"\\\"192.168.0.6:8333\\\"\")\n+            + HelpExampleRpc(\"disconnectnode\", \"\\\"\\\", 1\")\n         );\n \n     if(!g_connman)\n         throw JSONRPCError(RPC_CLIENT_P2P_DISABLED, \"Error: Peer-to-peer functionality missing or disabled\");\n \n-    bool ret = g_connman->DisconnectNode(request.params[0].get_str());\n-    if (!ret)\n+    bool ret;\n+    std::string address;\n+\n+    if (request.params[0].isStr()) {\n+        address = request.params[0].get_str();\n+    }\n+\n+    if (request.params.size() == 1) {\n+        ret = g_connman->DisconnectNode(request.params[0].get_str());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10143#discussion_r112100775",
      "id" : 112100775,
      "original_commit_id" : "18718846c9ab7b7b4392912a14e1a64e9136e970",
      "original_position" : 37,
      "path" : "src/rpc/net.cpp",
      "position" : null,
      "pull_request_review_id" : 33389802,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10143",
      "updated_at" : "2017-04-19T14:49:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/112100775",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10143#discussion_r112100829"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10143"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/112100829"
         }
      },
      "body" : "What about `disconnectnode(\"address\", null)`?",
      "commit_id" : "6af6bdf9575defd0fe81378279abdbad01538de5",
      "created_at" : "2017-04-19T01:41:27Z",
      "diff_hunk" : "@@ -234,23 +234,46 @@ UniValue addnode(const JSONRPCRequest& request)\n \n UniValue disconnectnode(const JSONRPCRequest& request)\n {\n-    if (request.fHelp || request.params.size() != 1)\n+    if (request.fHelp || request.params.size() == 0 || request.params.size() >= 3)\n         throw std::runtime_error(\n-            \"disconnectnode \\\"address\\\" \\n\"\n-            \"\\nImmediately disconnects from the specified node.\\n\"\n+            \"disconnectnode \\\"address\\\" [nodeid]\\n\"\n+            \"\\nImmediately disconnects from the specified peer node.\\n\"\n+            \"\\nStrictly one out of 'address' and 'nodeid' can be provided to identify the node.\\n\"\n+            \"\\nTo disconnect by nodeid, either set \\\"address\\\" to the empty string, or call using the named \\\"nodeid\\\" argument only.\\n\"\n             \"\\nArguments:\\n\"\n-            \"1. \\\"address\\\"     (string, required) The IP address/port of the node\\n\"\n+            \"1. \\\"address\\\"     (string, optional) The IP address/port of the node\\n\"\n+            \"2. \\\"nodeid\\\"      (int, optional) The node ID (see getpeerinfo for node IDs)\\n\"\n             \"\\nExamples:\\n\"\n             + HelpExampleCli(\"disconnectnode\", \"\\\"192.168.0.6:8333\\\"\")\n+            + HelpExampleCli(\"disconnectnode\", \"\\\"\\\" 1\")\n             + HelpExampleRpc(\"disconnectnode\", \"\\\"192.168.0.6:8333\\\"\")\n+            + HelpExampleRpc(\"disconnectnode\", \"\\\"\\\", 1\")\n         );\n \n     if(!g_connman)\n         throw JSONRPCError(RPC_CLIENT_P2P_DISABLED, \"Error: Peer-to-peer functionality missing or disabled\");\n \n-    bool ret = g_connman->DisconnectNode(request.params[0].get_str());\n-    if (!ret)\n+    bool ret;\n+    std::string address;\n+\n+    if (request.params[0].isStr()) {\n+        address = request.params[0].get_str();\n+    }\n+\n+    if (request.params.size() == 1) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10143#discussion_r112100829",
      "id" : 112100829,
      "original_commit_id" : "18718846c9ab7b7b4392912a14e1a64e9136e970",
      "original_position" : 36,
      "path" : "src/rpc/net.cpp",
      "position" : null,
      "pull_request_review_id" : 33389802,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10143",
      "updated_at" : "2017-04-19T14:49:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/112100829",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10143#discussion_r112100873"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10143"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/112100873"
         }
      },
      "body" : "`get_int64`",
      "commit_id" : "6af6bdf9575defd0fe81378279abdbad01538de5",
      "created_at" : "2017-04-19T01:42:02Z",
      "diff_hunk" : "@@ -234,23 +234,46 @@ UniValue addnode(const JSONRPCRequest& request)\n \n UniValue disconnectnode(const JSONRPCRequest& request)\n {\n-    if (request.fHelp || request.params.size() != 1)\n+    if (request.fHelp || request.params.size() == 0 || request.params.size() >= 3)\n         throw std::runtime_error(\n-            \"disconnectnode \\\"address\\\" \\n\"\n-            \"\\nImmediately disconnects from the specified node.\\n\"\n+            \"disconnectnode \\\"address\\\" [nodeid]\\n\"\n+            \"\\nImmediately disconnects from the specified peer node.\\n\"\n+            \"\\nStrictly one out of 'address' and 'nodeid' can be provided to identify the node.\\n\"\n+            \"\\nTo disconnect by nodeid, either set \\\"address\\\" to the empty string, or call using the named \\\"nodeid\\\" argument only.\\n\"\n             \"\\nArguments:\\n\"\n-            \"1. \\\"address\\\"     (string, required) The IP address/port of the node\\n\"\n+            \"1. \\\"address\\\"     (string, optional) The IP address/port of the node\\n\"\n+            \"2. \\\"nodeid\\\"      (int, optional) The node ID (see getpeerinfo for node IDs)\\n\"\n             \"\\nExamples:\\n\"\n             + HelpExampleCli(\"disconnectnode\", \"\\\"192.168.0.6:8333\\\"\")\n+            + HelpExampleCli(\"disconnectnode\", \"\\\"\\\" 1\")\n             + HelpExampleRpc(\"disconnectnode\", \"\\\"192.168.0.6:8333\\\"\")\n+            + HelpExampleRpc(\"disconnectnode\", \"\\\"\\\", 1\")\n         );\n \n     if(!g_connman)\n         throw JSONRPCError(RPC_CLIENT_P2P_DISABLED, \"Error: Peer-to-peer functionality missing or disabled\");\n \n-    bool ret = g_connman->DisconnectNode(request.params[0].get_str());\n-    if (!ret)\n+    bool ret;\n+    std::string address;\n+\n+    if (request.params[0].isStr()) {\n+        address = request.params[0].get_str();\n+    }\n+\n+    if (request.params.size() == 1) {\n+        ret = g_connman->DisconnectNode(request.params[0].get_str());\n+    } else {\n+        if (!address.empty()) {\n+            throw JSONRPCError(RPC_INVALID_PARAMS, \"Only one of adress and nodeid should be provided.\");\n+        }\n+\n+        NodeId nodeid = (NodeId) request.params[1].get_int();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10143#discussion_r112100873",
      "id" : 112100873,
      "original_commit_id" : "18718846c9ab7b7b4392912a14e1a64e9136e970",
      "original_position" : 43,
      "path" : "src/rpc/net.cpp",
      "position" : null,
      "pull_request_review_id" : 33389802,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10143",
      "updated_at" : "2017-04-19T14:49:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/112100873",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "@jnewbery I don't consider positional arguments to be merely historical.",
      "created_at" : "2017-04-19T01:45:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10143#issuecomment-295038005",
      "id" : 295038005,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10143",
      "updated_at" : "2017-04-19T01:45:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/295038005",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10143#discussion_r112139563"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10143"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/112139563"
         }
      },
      "body" : "Right, I also wondered about that.\r\nMy recommendation, also for readability, would be to structure this symmetrically e.g.\r\n```c++\r\nconst UniValue &address_arg = request.params[0];\r\nconst UniValue &id_arg = request.params.size() < 2 ? NullUniValue : request.params[1];\r\n...\r\nif (!address_arg.IsNull() && id_arg.IsNull()) {\r\n    /* handle kick-by-address */\r\n    std::string address = address_arg.get_str();\r\n} else if (!id_arg.IsNull() && address_arg.IsNull()) {\r\n    /* handle kick-by-id */\r\n    NodeId nodeid = (NodeId) id_arg.get_int64();\r\n} else {\r\n    throw JSONRPCError(RPC_INVALID_PARAMS, \"Only one of adress and nodeid should be provided.\");\r\n}\r\n```",
      "commit_id" : "6af6bdf9575defd0fe81378279abdbad01538de5",
      "created_at" : "2017-04-19T08:12:17Z",
      "diff_hunk" : "@@ -234,23 +234,46 @@ UniValue addnode(const JSONRPCRequest& request)\n \n UniValue disconnectnode(const JSONRPCRequest& request)\n {\n-    if (request.fHelp || request.params.size() != 1)\n+    if (request.fHelp || request.params.size() == 0 || request.params.size() >= 3)\n         throw std::runtime_error(\n-            \"disconnectnode \\\"address\\\" \\n\"\n-            \"\\nImmediately disconnects from the specified node.\\n\"\n+            \"disconnectnode \\\"address\\\" [nodeid]\\n\"\n+            \"\\nImmediately disconnects from the specified peer node.\\n\"\n+            \"\\nStrictly one out of 'address' and 'nodeid' can be provided to identify the node.\\n\"\n+            \"\\nTo disconnect by nodeid, either set \\\"address\\\" to the empty string, or call using the named \\\"nodeid\\\" argument only.\\n\"\n             \"\\nArguments:\\n\"\n-            \"1. \\\"address\\\"     (string, required) The IP address/port of the node\\n\"\n+            \"1. \\\"address\\\"     (string, optional) The IP address/port of the node\\n\"\n+            \"2. \\\"nodeid\\\"      (int, optional) The node ID (see getpeerinfo for node IDs)\\n\"\n             \"\\nExamples:\\n\"\n             + HelpExampleCli(\"disconnectnode\", \"\\\"192.168.0.6:8333\\\"\")\n+            + HelpExampleCli(\"disconnectnode\", \"\\\"\\\" 1\")\n             + HelpExampleRpc(\"disconnectnode\", \"\\\"192.168.0.6:8333\\\"\")\n+            + HelpExampleRpc(\"disconnectnode\", \"\\\"\\\", 1\")\n         );\n \n     if(!g_connman)\n         throw JSONRPCError(RPC_CLIENT_P2P_DISABLED, \"Error: Peer-to-peer functionality missing or disabled\");\n \n-    bool ret = g_connman->DisconnectNode(request.params[0].get_str());\n-    if (!ret)\n+    bool ret;\n+    std::string address;\n+\n+    if (request.params[0].isStr()) {\n+        address = request.params[0].get_str();\n+    }\n+\n+    if (request.params.size() == 1) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10143#discussion_r112139563",
      "id" : 112139563,
      "original_commit_id" : "18718846c9ab7b7b4392912a14e1a64e9136e970",
      "original_position" : 36,
      "path" : "src/rpc/net.cpp",
      "position" : null,
      "pull_request_review_id" : 33430295,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10143",
      "updated_at" : "2017-04-19T14:49:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/112139563",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10143#discussion_r112140887"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10143"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/112140887"
         }
      },
      "body" : "General advice when designing new RPC APIs: please try to treat IsNull arguments the same as missing arguments, both in the middle as at the end. I know a lot of the current RPCs don't heed that advice, but that's something that needs to be improved to prevent unexpected behavior when switching to using named arguments.",
      "commit_id" : "6af6bdf9575defd0fe81378279abdbad01538de5",
      "created_at" : "2017-04-19T08:19:22Z",
      "diff_hunk" : "@@ -234,23 +234,46 @@ UniValue addnode(const JSONRPCRequest& request)\n \n UniValue disconnectnode(const JSONRPCRequest& request)\n {\n-    if (request.fHelp || request.params.size() != 1)\n+    if (request.fHelp || request.params.size() == 0 || request.params.size() >= 3)\n         throw std::runtime_error(\n-            \"disconnectnode \\\"address\\\" \\n\"\n-            \"\\nImmediately disconnects from the specified node.\\n\"\n+            \"disconnectnode \\\"address\\\" [nodeid]\\n\"\n+            \"\\nImmediately disconnects from the specified peer node.\\n\"\n+            \"\\nStrictly one out of 'address' and 'nodeid' can be provided to identify the node.\\n\"\n+            \"\\nTo disconnect by nodeid, either set \\\"address\\\" to the empty string, or call using the named \\\"nodeid\\\" argument only.\\n\"\n             \"\\nArguments:\\n\"\n-            \"1. \\\"address\\\"     (string, required) The IP address/port of the node\\n\"\n+            \"1. \\\"address\\\"     (string, optional) The IP address/port of the node\\n\"\n+            \"2. \\\"nodeid\\\"      (int, optional) The node ID (see getpeerinfo for node IDs)\\n\"\n             \"\\nExamples:\\n\"\n             + HelpExampleCli(\"disconnectnode\", \"\\\"192.168.0.6:8333\\\"\")\n+            + HelpExampleCli(\"disconnectnode\", \"\\\"\\\" 1\")\n             + HelpExampleRpc(\"disconnectnode\", \"\\\"192.168.0.6:8333\\\"\")\n+            + HelpExampleRpc(\"disconnectnode\", \"\\\"\\\", 1\")\n         );\n \n     if(!g_connman)\n         throw JSONRPCError(RPC_CLIENT_P2P_DISABLED, \"Error: Peer-to-peer functionality missing or disabled\");\n \n-    bool ret = g_connman->DisconnectNode(request.params[0].get_str());\n-    if (!ret)\n+    bool ret;\n+    std::string address;\n+\n+    if (request.params[0].isStr()) {\n+        address = request.params[0].get_str();\n+    }\n+\n+    if (request.params.size() == 1) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10143#discussion_r112140887",
      "id" : 112140887,
      "original_commit_id" : "18718846c9ab7b7b4392912a14e1a64e9136e970",
      "original_position" : 36,
      "path" : "src/rpc/net.cpp",
      "position" : null,
      "pull_request_review_id" : 33431668,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10143",
      "updated_at" : "2017-04-19T14:49:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/112140887",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10143#discussion_r112223987"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10143"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/112223987"
         }
      },
      "body" : "Thanks @laanwj. That's good advice. I've rewritten this function based on your suggested structure.",
      "commit_id" : "6af6bdf9575defd0fe81378279abdbad01538de5",
      "created_at" : "2017-04-19T14:50:20Z",
      "diff_hunk" : "@@ -234,23 +234,46 @@ UniValue addnode(const JSONRPCRequest& request)\n \n UniValue disconnectnode(const JSONRPCRequest& request)\n {\n-    if (request.fHelp || request.params.size() != 1)\n+    if (request.fHelp || request.params.size() == 0 || request.params.size() >= 3)\n         throw std::runtime_error(\n-            \"disconnectnode \\\"address\\\" \\n\"\n-            \"\\nImmediately disconnects from the specified node.\\n\"\n+            \"disconnectnode \\\"address\\\" [nodeid]\\n\"\n+            \"\\nImmediately disconnects from the specified peer node.\\n\"\n+            \"\\nStrictly one out of 'address' and 'nodeid' can be provided to identify the node.\\n\"\n+            \"\\nTo disconnect by nodeid, either set \\\"address\\\" to the empty string, or call using the named \\\"nodeid\\\" argument only.\\n\"\n             \"\\nArguments:\\n\"\n-            \"1. \\\"address\\\"     (string, required) The IP address/port of the node\\n\"\n+            \"1. \\\"address\\\"     (string, optional) The IP address/port of the node\\n\"\n+            \"2. \\\"nodeid\\\"      (int, optional) The node ID (see getpeerinfo for node IDs)\\n\"\n             \"\\nExamples:\\n\"\n             + HelpExampleCli(\"disconnectnode\", \"\\\"192.168.0.6:8333\\\"\")\n+            + HelpExampleCli(\"disconnectnode\", \"\\\"\\\" 1\")\n             + HelpExampleRpc(\"disconnectnode\", \"\\\"192.168.0.6:8333\\\"\")\n+            + HelpExampleRpc(\"disconnectnode\", \"\\\"\\\", 1\")\n         );\n \n     if(!g_connman)\n         throw JSONRPCError(RPC_CLIENT_P2P_DISABLED, \"Error: Peer-to-peer functionality missing or disabled\");\n \n-    bool ret = g_connman->DisconnectNode(request.params[0].get_str());\n-    if (!ret)\n+    bool ret;\n+    std::string address;\n+\n+    if (request.params[0].isStr()) {\n+        address = request.params[0].get_str();\n+    }\n+\n+    if (request.params.size() == 1) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10143#discussion_r112223987",
      "id" : 112223987,
      "original_commit_id" : "18718846c9ab7b7b4392912a14e1a64e9136e970",
      "original_position" : 36,
      "path" : "src/rpc/net.cpp",
      "position" : null,
      "pull_request_review_id" : 33521669,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10143",
      "updated_at" : "2017-04-19T14:50:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/112223987",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "body" : "Rewritten using @laanwj's suggested structure.",
      "created_at" : "2017-04-19T14:51:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10143#issuecomment-295297370",
      "id" : 295297370,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10143",
      "updated_at" : "2017-04-19T14:51:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/295297370",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10143#discussion_r112238922"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10143"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/112238922"
         }
      },
      "body" : "This doesn't convey that address is also optional.",
      "commit_id" : "6af6bdf9575defd0fe81378279abdbad01538de5",
      "created_at" : "2017-04-19T15:42:44Z",
      "diff_hunk" : "@@ -234,23 +234,43 @@ UniValue addnode(const JSONRPCRequest& request)\n \n UniValue disconnectnode(const JSONRPCRequest& request)\n {\n-    if (request.fHelp || request.params.size() != 1)\n+    if (request.fHelp || request.params.size() == 0 || request.params.size() >= 3)\n         throw std::runtime_error(\n-            \"disconnectnode \\\"address\\\" \\n\"\n-            \"\\nImmediately disconnects from the specified node.\\n\"\n+            \"disconnectnode \\\"address\\\" [nodeid]\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10143#discussion_r112238922",
      "id" : 112238922,
      "original_commit_id" : "6af6bdf9575defd0fe81378279abdbad01538de5",
      "original_position" : 9,
      "path" : "src/rpc/net.cpp",
      "position" : 9,
      "pull_request_review_id" : 33537949,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10143",
      "updated_at" : "2017-04-19T15:46:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/112238922",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10143#discussion_r112239030"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10143"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/112239030"
         }
      },
      "body" : "s/int/number/\r\n\r\nJSON doesn't have ints.",
      "commit_id" : "6af6bdf9575defd0fe81378279abdbad01538de5",
      "created_at" : "2017-04-19T15:43:06Z",
      "diff_hunk" : "@@ -234,23 +234,43 @@ UniValue addnode(const JSONRPCRequest& request)\n \n UniValue disconnectnode(const JSONRPCRequest& request)\n {\n-    if (request.fHelp || request.params.size() != 1)\n+    if (request.fHelp || request.params.size() == 0 || request.params.size() >= 3)\n         throw std::runtime_error(\n-            \"disconnectnode \\\"address\\\" \\n\"\n-            \"\\nImmediately disconnects from the specified node.\\n\"\n+            \"disconnectnode \\\"address\\\" [nodeid]\\n\"\n+            \"\\nImmediately disconnects from the specified peer node.\\n\"\n+            \"\\nStrictly one out of 'address' and 'nodeid' can be provided to identify the node.\\n\"\n+            \"\\nTo disconnect by nodeid, either set 'address' to the empty string, or call using the named 'nodeid' argument only.\\n\"\n             \"\\nArguments:\\n\"\n-            \"1. \\\"address\\\"     (string, required) The IP address/port of the node\\n\"\n+            \"1. \\\"address\\\"     (string, optional) The IP address/port of the node\\n\"\n+            \"2. \\\"nodeid\\\"      (int, optional) The node ID (see getpeerinfo for node IDs)\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10143#discussion_r112239030",
      "id" : 112239030,
      "original_commit_id" : "6af6bdf9575defd0fe81378279abdbad01538de5",
      "original_position" : 16,
      "path" : "src/rpc/net.cpp",
      "position" : 16,
      "pull_request_review_id" : 33537949,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10143",
      "updated_at" : "2017-04-19T15:46:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/112239030",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "Thanks @luke-jr . Nits addressed.\r\n\r\nI've added tests for the new functionality in the nodehandling.py test script (and renamed it to disconnect_ban.py). Whilst I was there I tidied up the test script, reduced the dependencies on standard libraries, and reduced the runtime from 20s to 9s on my pc.\r\n\r\nHappy to split the test script changes out into a new PR if that's preferable for people.",
      "created_at" : "2017-04-19T17:50:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10143#issuecomment-295364886",
      "id" : 295364886,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10143",
      "updated_at" : "2017-04-19T17:50:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/295364886",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "body" : "utACK d54297f",
      "created_at" : "2017-04-20T09:47:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10143#issuecomment-295656517",
      "id" : 295656517,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10143",
      "updated_at" : "2017-04-20T09:47:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/295656517",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "@laanwj thanks for merging (and thanks for the suggestion of structuring the disconnectnode code differently). In future, feel free to squash my test commits before merging, or ask me to squash. I feel like micro commits are helpful for reviewers, but don't necessarily need to be in the history.",
      "created_at" : "2017-04-20T13:26:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10143#issuecomment-295737895",
      "id" : 295737895,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10143",
      "updated_at" : "2017-04-20T13:26:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/295737895",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "body" : "@jnewbery Yes, that would have made sense. I try to keep some pace in merging things once they're ready to merge, as there are so many PRs held up on one thing or another.",
      "created_at" : "2017-04-20T18:23:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10143#issuecomment-295844888",
      "id" : 295844888,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10143",
      "updated_at" : "2017-04-20T18:23:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/295844888",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   }
]
