[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10165#discussion_r110379979"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10165"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/110379979"
         }
      },
      "body" : "Would suggest throwing std::out_of_range if this condition is not true. This should be compatible with all the places this code is called (since they previously would have resulted in out-of-bounds memory accesses).",
      "commit_id" : "c37e32af0d2f8723f89c5304d41a4a41d4d34ea3",
      "created_at" : "2017-04-07T12:39:57Z",
      "diff_hunk" : "@@ -475,7 +475,38 @@ class CWalletTx : public CMerkleTx\n };\n \n \n-using CInputCoin = std::pair<const CWalletTx*, unsigned int>;\n+class CInputCoin {\r\n+public:\r\n+    CInputCoin()\r\n+    {\r\n+    }\r\n+    CInputCoin(const CWalletTx* walletTx, unsigned int i)\r\n+    {\r\n+        if (walletTx != nullptr && i < walletTx->tx->vout.size())\r",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10165#discussion_r110379979",
      "id" : 110379979,
      "original_commit_id" : "8227fcc0ba94ae2af3e85171c9f0bfbe518a34bf",
      "original_position" : 12,
      "path" : "src/wallet/wallet.h",
      "position" : null,
      "pull_request_review_id" : 31548993,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10165",
      "updated_at" : "2017-04-13T05:33:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/110379979",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/7133040?v=3",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "body" : "utACK https://github.com/bitcoin/bitcoin/pull/10165/commits/2f5eb873dda9d1561c233a2313322a53afea5161",
      "created_at" : "2017-04-07T12:44:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10165#issuecomment-292526495",
      "id" : 292526495,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10165",
      "updated_at" : "2017-04-07T12:44:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/292526495",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10165#discussion_r110384304"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10165"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/110384304"
         }
      },
      "body" : "Would suggest deleting default constructor and IsNull method. Their presence seem to make this class more complex and precarious than is necessary, and could lead to bugs and unintended behavior.\r\n\r\nThe only place where a nullable `CInputCoin` seems to be used is in one `coinLowestLarger` local variable, and you could more easily declare this variable as `boost::optional<CInputCoin> coinLowestLarger;` (or [std::optional](http://en.cppreference.com/w/cpp/utility/optional) in the future) instead of building in a layer of optionality into the type.",
      "commit_id" : "c37e32af0d2f8723f89c5304d41a4a41d4d34ea3",
      "created_at" : "2017-04-07T13:04:58Z",
      "diff_hunk" : "@@ -475,7 +475,38 @@ class CWalletTx : public CMerkleTx\n };\n \n \n-using CInputCoin = std::pair<const CWalletTx*, unsigned int>;\n+class CInputCoin {\r\n+public:\r\n+    CInputCoin()\r",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10165#discussion_r110384304",
      "id" : 110384304,
      "original_commit_id" : "8227fcc0ba94ae2af3e85171c9f0bfbe518a34bf",
      "original_position" : 7,
      "path" : "src/wallet/wallet.h",
      "position" : null,
      "pull_request_review_id" : 31548993,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10165",
      "updated_at" : "2017-04-13T05:33:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/110384304",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/7133040?v=3",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10165#discussion_r110400583"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10165"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/110400583"
         }
      },
      "body" : "I don't think using `optional` would make the code more clear. I never saw it used anywhere in bitcoin.\r\nWhat about using `CInputCoin*` for coinLowestLarger instead?",
      "commit_id" : "c37e32af0d2f8723f89c5304d41a4a41d4d34ea3",
      "created_at" : "2017-04-07T14:20:53Z",
      "diff_hunk" : "@@ -475,7 +475,38 @@ class CWalletTx : public CMerkleTx\n };\n \n \n-using CInputCoin = std::pair<const CWalletTx*, unsigned int>;\n+class CInputCoin {\r\n+public:\r\n+    CInputCoin()\r",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10165#discussion_r110400583",
      "id" : 110400583,
      "original_commit_id" : "8227fcc0ba94ae2af3e85171c9f0bfbe518a34bf",
      "original_position" : 7,
      "path" : "src/wallet/wallet.h",
      "position" : null,
      "pull_request_review_id" : 31572909,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10165",
      "updated_at" : "2017-04-13T05:33:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/110400583",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3020646?v=3",
         "events_url" : "https://api.github.com/users/NicolasDorier/events{/privacy}",
         "followers_url" : "https://api.github.com/users/NicolasDorier/followers",
         "following_url" : "https://api.github.com/users/NicolasDorier/following{/other_user}",
         "gists_url" : "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/NicolasDorier",
         "id" : 3020646,
         "login" : "NicolasDorier",
         "organizations_url" : "https://api.github.com/users/NicolasDorier/orgs",
         "received_events_url" : "https://api.github.com/users/NicolasDorier/received_events",
         "repos_url" : "https://api.github.com/users/NicolasDorier/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/NicolasDorier/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/NicolasDorier"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10165#discussion_r110406605"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10165"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/110406605"
         }
      },
      "body" : "> I don't think using optional would make the code more clear.\r\n\r\nI think optional's useful. It saves work of having to build optionality into types you define, and more importantly it allows the same type to be optional in some contexts and required in others, which I think is exactly what you want here. std::optional is part of c++17 so eventually it will start becoming more commonly used.\r\n\r\nAnyway, this was just a suggestion, so feel free to ignore it if you have a different preference.\r\n\r\n> What about using CInputCoin* for coinLowestLarger instead?\r\n\r\nUsing a pointer was actually going to be my first suggestion, but I didn't see a way to make that work because coinLowestLarger is assigned from a local variable. But I think this would be an improvement if it could work.",
      "commit_id" : "c37e32af0d2f8723f89c5304d41a4a41d4d34ea3",
      "created_at" : "2017-04-07T14:44:23Z",
      "diff_hunk" : "@@ -475,7 +475,38 @@ class CWalletTx : public CMerkleTx\n };\n \n \n-using CInputCoin = std::pair<const CWalletTx*, unsigned int>;\n+class CInputCoin {\r\n+public:\r\n+    CInputCoin()\r",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10165#discussion_r110406605",
      "id" : 110406605,
      "original_commit_id" : "8227fcc0ba94ae2af3e85171c9f0bfbe518a34bf",
      "original_position" : 7,
      "path" : "src/wallet/wallet.h",
      "position" : null,
      "pull_request_review_id" : 31579563,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10165",
      "updated_at" : "2017-04-13T05:33:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/110406605",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/7133040?v=3",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10165#discussion_r110429299"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10165"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/110429299"
         }
      },
      "body" : "I agree. That's safer than leaving the object as invalid dummy object, which would be harder to troubleshoot as it's not checked against everywhere..",
      "commit_id" : "c37e32af0d2f8723f89c5304d41a4a41d4d34ea3",
      "created_at" : "2017-04-07T16:26:51Z",
      "diff_hunk" : "@@ -475,7 +475,38 @@ class CWalletTx : public CMerkleTx\n };\n \n \n-using CInputCoin = std::pair<const CWalletTx*, unsigned int>;\n+class CInputCoin {\r\n+public:\r\n+    CInputCoin()\r\n+    {\r\n+    }\r\n+    CInputCoin(const CWalletTx* walletTx, unsigned int i)\r\n+    {\r\n+        if (walletTx != nullptr && i < walletTx->tx->vout.size())\r",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10165#discussion_r110429299",
      "id" : 110429299,
      "original_commit_id" : "8227fcc0ba94ae2af3e85171c9f0bfbe518a34bf",
      "original_position" : 12,
      "path" : "src/wallet/wallet.h",
      "position" : null,
      "pull_request_review_id" : 31605183,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10165",
      "updated_at" : "2017-04-13T05:33:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/110429299",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "I needed to rebase, I ended up using `boost::optional` and getting ride of `IsNull()` + added checks for inconsistency in the constructor. @ryanofsky @laanwj can you reACK?",
      "created_at" : "2017-04-08T03:54:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10165#issuecomment-292692731",
      "id" : 292692731,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10165",
      "updated_at" : "2017-04-08T04:51:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/292692731",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3020646?v=3",
         "events_url" : "https://api.github.com/users/NicolasDorier/events{/privacy}",
         "followers_url" : "https://api.github.com/users/NicolasDorier/followers",
         "following_url" : "https://api.github.com/users/NicolasDorier/following{/other_user}",
         "gists_url" : "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/NicolasDorier",
         "id" : 3020646,
         "login" : "NicolasDorier",
         "organizations_url" : "https://api.github.com/users/NicolasDorier/orgs",
         "received_events_url" : "https://api.github.com/users/NicolasDorier/received_events",
         "repos_url" : "https://api.github.com/users/NicolasDorier/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/NicolasDorier/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/NicolasDorier"
      }
   },
   {
      "body" : "utACK 7e0b365\r\n",
      "created_at" : "2017-04-09T20:03:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10165#issuecomment-292809222",
      "id" : 292809222,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10165",
      "updated_at" : "2017-04-09T20:03:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/292809222",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/7275704?v=3",
         "events_url" : "https://api.github.com/users/btcdrak/events{/privacy}",
         "followers_url" : "https://api.github.com/users/btcdrak/followers",
         "following_url" : "https://api.github.com/users/btcdrak/following{/other_user}",
         "gists_url" : "https://api.github.com/users/btcdrak/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/btcdrak",
         "id" : 7275704,
         "login" : "btcdrak",
         "organizations_url" : "https://api.github.com/users/btcdrak/orgs",
         "received_events_url" : "https://api.github.com/users/btcdrak/received_events",
         "repos_url" : "https://api.github.com/users/btcdrak/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/btcdrak/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/btcdrak/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/btcdrak"
      }
   },
   {
      "body" : "> I needed to rebase, I ended up using boost::optional \r\n\r\nWas about to ask \"why not std::optional\" but apparently that's C++17. Well, easy to replace when we adapt that - the concept is great.",
      "created_at" : "2017-04-10T12:07:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10165#issuecomment-292930343",
      "id" : 292930343,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10165",
      "updated_at" : "2017-04-10T12:07:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/292930343",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10165#discussion_r110685804"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10165"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/110685804"
         }
      },
      "body" : "Prefer to use a typedef (I actually prefer using personally, but some devs are unfamiliar with it and you don't need it as CInputCoin is not templated)\r\n\r\nAlso, prefer a non-Hungarian name if you're introducing a new class.\r\nSee https://github.com/bitcoin/bitcoin/pull/9472#discussion_r95775684 -- Hungarians for new code discouraged.",
      "commit_id" : "c37e32af0d2f8723f89c5304d41a4a41d4d34ea3",
      "created_at" : "2017-04-10T15:24:13Z",
      "diff_hunk" : "@@ -475,7 +475,7 @@ class CWalletTx : public CMerkleTx\n };\n \n \n-\n+using CInputCoin = std::pair<const CWalletTx*, unsigned int>;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10165#discussion_r110685804",
      "id" : 110685804,
      "original_commit_id" : "fd44ac1e8b75f6f83cc0fea20ae721de163ff9cc",
      "original_position" : 5,
      "path" : "src/wallet/wallet.h",
      "position" : null,
      "pull_request_review_id" : 31874980,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10165",
      "updated_at" : "2017-04-13T05:33:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/110685804",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/886523?v=3",
         "events_url" : "https://api.github.com/users/JeremyRubin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JeremyRubin/followers",
         "following_url" : "https://api.github.com/users/JeremyRubin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JeremyRubin",
         "id" : 886523,
         "login" : "JeremyRubin",
         "organizations_url" : "https://api.github.com/users/JeremyRubin/orgs",
         "received_events_url" : "https://api.github.com/users/JeremyRubin/received_events",
         "repos_url" : "https://api.github.com/users/JeremyRubin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JeremyRubin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JeremyRubin"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10165#discussion_r110688487"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10165"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/110688487"
         }
      },
      "body" : "I'm a bit confused here -- isn't coinLowestLarger always null at this point?",
      "commit_id" : "c37e32af0d2f8723f89c5304d41a4a41d4d34ea3",
      "created_at" : "2017-04-10T15:33:38Z",
      "diff_hunk" : "@@ -2106,22 +2105,21 @@ bool CWallet::SelectCoinsMinConf(const CAmount& nTargetValue, const int nConfMin\n             continue;\n \n         int i = output.i;\n-        CAmount n = pcoin->tx->vout[i].nValue;\n \n-        std::pair<CAmount,CInputCoin> coin = std::make_pair(n, CInputCoin(pcoin, i));\n+        CInputCoin coin = CInputCoin(pcoin, i);\n \n-        if (n == nTargetValue)\n+        if (coin.txout.nValue == nTargetValue)\n         {\n-            setCoinsRet.insert(coin.second);\n-            nValueRet += coin.first;\n+            setCoinsRet.insert(coin);\n+            nValueRet += coin.txout.nValue;\n             return true;\n         }\n-        else if (n < nTargetValue + MIN_CHANGE)\n+        else if (coin.txout.nValue < nTargetValue + MIN_CHANGE)\n         {\n             vValue.push_back(coin);\n-            nTotalLower += n;\n+            nTotalLower += coin.txout.nValue;\n         }\n-        else if (n < coinLowestLarger.first)\n+        else if (coinLowestLarger.IsNull() || coin.txout.nValue < coinLowestLarger.txout.nValue)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10165#discussion_r110688487",
      "id" : 110688487,
      "original_commit_id" : "da0d2aaafa07d5418c5d3b455313d73e48ac6c51",
      "original_position" : 79,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 31874980,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10165",
      "updated_at" : "2017-04-13T05:33:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/110688487",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/886523?v=3",
         "events_url" : "https://api.github.com/users/JeremyRubin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JeremyRubin/followers",
         "following_url" : "https://api.github.com/users/JeremyRubin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JeremyRubin",
         "id" : 886523,
         "login" : "JeremyRubin",
         "organizations_url" : "https://api.github.com/users/JeremyRubin/orgs",
         "received_events_url" : "https://api.github.com/users/JeremyRubin/received_events",
         "repos_url" : "https://api.github.com/users/JeremyRubin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JeremyRubin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JeremyRubin"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10165#discussion_r110688970"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10165"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/110688970"
         }
      },
      "body" : "prefer not to have fields intermixed with functions.",
      "commit_id" : "c37e32af0d2f8723f89c5304d41a4a41d4d34ea3",
      "created_at" : "2017-04-10T15:35:27Z",
      "diff_hunk" : "@@ -475,7 +475,38 @@ class CWalletTx : public CMerkleTx\n };\n \n \n-using CInputCoin = std::pair<const CWalletTx*, unsigned int>;\n+class CInputCoin {\r\n+public:\r\n+    CInputCoin()\r\n+    {\r\n+    }\r\n+    CInputCoin(const CWalletTx* walletTx, unsigned int i)\r\n+    {\r\n+        if (walletTx != nullptr && i < walletTx->tx->vout.size())\r\n+        {\r\n+            outpoint = COutPoint(walletTx->GetHash(), i);\r\n+            txout = walletTx->tx->vout[i];\r\n+        }\r\n+    }\r\n+    bool IsNull() const\r\n+    {\r\n+        return outpoint.IsNull() && txout.IsNull();\r\n+    }\r\n+    COutPoint outpoint;\r",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10165#discussion_r110688970",
      "id" : 110688970,
      "original_commit_id" : "ba540965ed286c16724a46bbea684de87723a1d3",
      "original_position" : 22,
      "path" : "src/wallet/wallet.h",
      "position" : null,
      "pull_request_review_id" : 31874980,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10165",
      "updated_at" : "2017-04-13T05:33:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/110688970",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/886523?v=3",
         "events_url" : "https://api.github.com/users/JeremyRubin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JeremyRubin/followers",
         "following_url" : "https://api.github.com/users/JeremyRubin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JeremyRubin",
         "id" : 886523,
         "login" : "JeremyRubin",
         "organizations_url" : "https://api.github.com/users/JeremyRubin/orgs",
         "received_events_url" : "https://api.github.com/users/JeremyRubin/received_events",
         "repos_url" : "https://api.github.com/users/JeremyRubin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JeremyRubin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JeremyRubin"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10165#discussion_r110690341"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10165"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/110690341"
         }
      },
      "body" : "Can you invert the logic here `if (!P) throw` is a bit easier to read.\r\n\r\nMight also be good to make it a `const CWalletTx&` so as to make sure that de-referencability is checked everywhere that this is called.",
      "commit_id" : "c37e32af0d2f8723f89c5304d41a4a41d4d34ea3",
      "created_at" : "2017-04-10T15:41:13Z",
      "diff_hunk" : "@@ -477,21 +477,21 @@ class CWalletTx : public CMerkleTx\n \n class CInputCoin {\r\n public:\r\n-    CInputCoin()\r\n-    {\r\n-    }\r\n     CInputCoin(const CWalletTx* walletTx, unsigned int i)\r\n     {\r\n-        if (walletTx != nullptr && i < walletTx->tx->vout.size())\r\n+        if (walletTx == nullptr)\r\n+            throw std::invalid_argument(\"walletTx should not be null\");\r\n+        if (i < walletTx->tx->vout.size())\r",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10165#discussion_r110690341",
      "id" : 110690341,
      "original_commit_id" : "7e0b36583d854f878a60dd7f895d1cbf2768ce4b",
      "original_position" : 12,
      "path" : "src/wallet/wallet.h",
      "position" : null,
      "pull_request_review_id" : 31874980,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10165",
      "updated_at" : "2017-04-13T05:33:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/110690341",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/886523?v=3",
         "events_url" : "https://api.github.com/users/JeremyRubin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JeremyRubin/followers",
         "following_url" : "https://api.github.com/users/JeremyRubin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JeremyRubin",
         "id" : 886523,
         "login" : "JeremyRubin",
         "organizations_url" : "https://api.github.com/users/JeremyRubin/orgs",
         "received_events_url" : "https://api.github.com/users/JeremyRubin/received_events",
         "repos_url" : "https://api.github.com/users/JeremyRubin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JeremyRubin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JeremyRubin"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10165#discussion_r110701084"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10165"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/110701084"
         }
      },
      "body" : "Why are these data members public and not private?",
      "commit_id" : "c37e32af0d2f8723f89c5304d41a4a41d4d34ea3",
      "created_at" : "2017-04-10T16:26:04Z",
      "diff_hunk" : "@@ -475,7 +475,38 @@ class CWalletTx : public CMerkleTx\n };\n \n \n-\n+class CInputCoin {\r\n+public:\r\n+    CInputCoin(const CWalletTx* walletTx, unsigned int i)\r\n+    {\r\n+        if (walletTx == nullptr)\r\n+            throw std::invalid_argument(\"walletTx should not be null\");\r\n+        if (i < walletTx->tx->vout.size())\r\n+        {\r\n+            outpoint = COutPoint(walletTx->GetHash(), i);\r\n+            txout = walletTx->tx->vout[i];\r\n+        }\r\n+        else\r\n+        {\r\n+            throw std::out_of_range(\"The output index is out of range\");\r\n+        }\r\n+    }\r\n+\r\n+    COutPoint outpoint;\r\n+    CTxOut txout;\r",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10165#discussion_r110701084",
      "id" : 110701084,
      "original_commit_id" : "7e0b36583d854f878a60dd7f895d1cbf2768ce4b",
      "original_position" : 23,
      "path" : "src/wallet/wallet.h",
      "position" : null,
      "pull_request_review_id" : 31891911,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10165",
      "updated_at" : "2017-04-13T05:33:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/110701084",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/4436398?v=3",
         "events_url" : "https://api.github.com/users/bulldozer00/events{/privacy}",
         "followers_url" : "https://api.github.com/users/bulldozer00/followers",
         "following_url" : "https://api.github.com/users/bulldozer00/following{/other_user}",
         "gists_url" : "https://api.github.com/users/bulldozer00/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/bulldozer00",
         "id" : 4436398,
         "login" : "bulldozer00",
         "organizations_url" : "https://api.github.com/users/bulldozer00/orgs",
         "received_events_url" : "https://api.github.com/users/bulldozer00/received_events",
         "repos_url" : "https://api.github.com/users/bulldozer00/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/bulldozer00/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/bulldozer00/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/bulldozer00"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10165#discussion_r110701730"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10165"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/110701730"
         }
      },
      "body" : "Think about replacing old style \"typedef  X Y \" with the more intuitive C++11 \"using Y = X\" style",
      "commit_id" : "c37e32af0d2f8723f89c5304d41a4a41d4d34ea3",
      "created_at" : "2017-04-10T16:28:51Z",
      "diff_hunk" : "@@ -29,7 +29,7 @@ extern UniValue importmulti(const JSONRPCRequest& request);\n \n std::vector<std::unique_ptr<CWalletTx>> wtxn;\n \n-typedef std::set<std::pair<const CWalletTx*,unsigned int> > CoinSet;\n+typedef std::set<CInputCoin> CoinSet;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10165#discussion_r110701730",
      "id" : 110701730,
      "original_commit_id" : "7e0b36583d854f878a60dd7f895d1cbf2768ce4b",
      "original_position" : 5,
      "path" : "src/wallet/test/wallet_tests.cpp",
      "position" : 5,
      "pull_request_review_id" : 31892658,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10165",
      "updated_at" : "2017-04-13T05:33:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/110701730",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/4436398?v=3",
         "events_url" : "https://api.github.com/users/bulldozer00/events{/privacy}",
         "followers_url" : "https://api.github.com/users/bulldozer00/followers",
         "following_url" : "https://api.github.com/users/bulldozer00/following{/other_user}",
         "gists_url" : "https://api.github.com/users/bulldozer00/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/bulldozer00",
         "id" : 4436398,
         "login" : "bulldozer00",
         "organizations_url" : "https://api.github.com/users/bulldozer00/orgs",
         "received_events_url" : "https://api.github.com/users/bulldozer00/received_events",
         "repos_url" : "https://api.github.com/users/bulldozer00/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/bulldozer00/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/bulldozer00/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/bulldozer00"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10165#discussion_r110866200"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10165"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/110866200"
         }
      },
      "body" : "better to do in a separate PR. I want to keep it focused on `CInputCoin`.",
      "commit_id" : "c37e32af0d2f8723f89c5304d41a4a41d4d34ea3",
      "created_at" : "2017-04-11T10:23:34Z",
      "diff_hunk" : "@@ -29,7 +29,7 @@ extern UniValue importmulti(const JSONRPCRequest& request);\n \n std::vector<std::unique_ptr<CWalletTx>> wtxn;\n \n-typedef std::set<std::pair<const CWalletTx*,unsigned int> > CoinSet;\n+typedef std::set<CInputCoin> CoinSet;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10165#discussion_r110866200",
      "id" : 110866200,
      "original_commit_id" : "7e0b36583d854f878a60dd7f895d1cbf2768ce4b",
      "original_position" : 5,
      "path" : "src/wallet/test/wallet_tests.cpp",
      "position" : 5,
      "pull_request_review_id" : 32066815,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10165",
      "updated_at" : "2017-04-13T05:33:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/110866200",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3020646?v=3",
         "events_url" : "https://api.github.com/users/NicolasDorier/events{/privacy}",
         "followers_url" : "https://api.github.com/users/NicolasDorier/followers",
         "following_url" : "https://api.github.com/users/NicolasDorier/following{/other_user}",
         "gists_url" : "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/NicolasDorier",
         "id" : 3020646,
         "login" : "NicolasDorier",
         "organizations_url" : "https://api.github.com/users/NicolasDorier/orgs",
         "received_events_url" : "https://api.github.com/users/NicolasDorier/received_events",
         "repos_url" : "https://api.github.com/users/NicolasDorier/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/NicolasDorier/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/NicolasDorier"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10165#discussion_r110866272"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10165"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/110866272"
         }
      },
      "body" : "because I use them outside the class.",
      "commit_id" : "c37e32af0d2f8723f89c5304d41a4a41d4d34ea3",
      "created_at" : "2017-04-11T10:23:57Z",
      "diff_hunk" : "@@ -475,7 +475,38 @@ class CWalletTx : public CMerkleTx\n };\n \n \n-\n+class CInputCoin {\r\n+public:\r\n+    CInputCoin(const CWalletTx* walletTx, unsigned int i)\r\n+    {\r\n+        if (walletTx == nullptr)\r\n+            throw std::invalid_argument(\"walletTx should not be null\");\r\n+        if (i < walletTx->tx->vout.size())\r\n+        {\r\n+            outpoint = COutPoint(walletTx->GetHash(), i);\r\n+            txout = walletTx->tx->vout[i];\r\n+        }\r\n+        else\r\n+        {\r\n+            throw std::out_of_range(\"The output index is out of range\");\r\n+        }\r\n+    }\r\n+\r\n+    COutPoint outpoint;\r\n+    CTxOut txout;\r",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10165#discussion_r110866272",
      "id" : 110866272,
      "original_commit_id" : "7e0b36583d854f878a60dd7f895d1cbf2768ce4b",
      "original_position" : 23,
      "path" : "src/wallet/wallet.h",
      "position" : null,
      "pull_request_review_id" : 32066896,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10165",
      "updated_at" : "2017-04-13T05:33:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/110866272",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3020646?v=3",
         "events_url" : "https://api.github.com/users/NicolasDorier/events{/privacy}",
         "followers_url" : "https://api.github.com/users/NicolasDorier/followers",
         "following_url" : "https://api.github.com/users/NicolasDorier/following{/other_user}",
         "gists_url" : "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/NicolasDorier",
         "id" : 3020646,
         "login" : "NicolasDorier",
         "organizations_url" : "https://api.github.com/users/NicolasDorier/orgs",
         "received_events_url" : "https://api.github.com/users/NicolasDorier/received_events",
         "repos_url" : "https://api.github.com/users/NicolasDorier/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/NicolasDorier/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/NicolasDorier"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10165#discussion_r110867730"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10165"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/110867730"
         }
      },
      "body" : "Ah indeed, C# habits... Just replaced by `if(!walletTx)`.\r\n\r\nI would like to do `const CWalletTx&` in a separate PR, as it need more code change, and I need this PR for another one depending on it.",
      "commit_id" : "c37e32af0d2f8723f89c5304d41a4a41d4d34ea3",
      "created_at" : "2017-04-11T10:32:45Z",
      "diff_hunk" : "@@ -477,21 +477,21 @@ class CWalletTx : public CMerkleTx\n \n class CInputCoin {\r\n public:\r\n-    CInputCoin()\r\n-    {\r\n-    }\r\n     CInputCoin(const CWalletTx* walletTx, unsigned int i)\r\n     {\r\n-        if (walletTx != nullptr && i < walletTx->tx->vout.size())\r\n+        if (walletTx == nullptr)\r\n+            throw std::invalid_argument(\"walletTx should not be null\");\r\n+        if (i < walletTx->tx->vout.size())\r",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10165#discussion_r110867730",
      "id" : 110867730,
      "original_commit_id" : "7e0b36583d854f878a60dd7f895d1cbf2768ce4b",
      "original_position" : 12,
      "path" : "src/wallet/wallet.h",
      "position" : null,
      "pull_request_review_id" : 32068441,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10165",
      "updated_at" : "2017-04-13T05:33:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/110867730",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3020646?v=3",
         "events_url" : "https://api.github.com/users/NicolasDorier/events{/privacy}",
         "followers_url" : "https://api.github.com/users/NicolasDorier/followers",
         "following_url" : "https://api.github.com/users/NicolasDorier/following{/other_user}",
         "gists_url" : "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/NicolasDorier",
         "id" : 3020646,
         "login" : "NicolasDorier",
         "organizations_url" : "https://api.github.com/users/NicolasDorier/orgs",
         "received_events_url" : "https://api.github.com/users/NicolasDorier/received_events",
         "repos_url" : "https://api.github.com/users/NicolasDorier/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/NicolasDorier/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/NicolasDorier"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10165#discussion_r110985081"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10165"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/110985081"
         }
      },
      "body" : "Ah, I was unclear -- I actually don't mind a `== nullptr` (although current state is cleaner), I was referring to the `throw out_of_range`. It's easier if a constructor is: `if (! preconditionA) throw A; if (!preconditionB) throw B; ....;` rather than `if (! preconditionA) throw A; if (preconditionB)...; else throw B;`",
      "commit_id" : "c37e32af0d2f8723f89c5304d41a4a41d4d34ea3",
      "created_at" : "2017-04-11T18:52:35Z",
      "diff_hunk" : "@@ -477,21 +477,21 @@ class CWalletTx : public CMerkleTx\n \n class CInputCoin {\r\n public:\r\n-    CInputCoin()\r\n-    {\r\n-    }\r\n     CInputCoin(const CWalletTx* walletTx, unsigned int i)\r\n     {\r\n-        if (walletTx != nullptr && i < walletTx->tx->vout.size())\r\n+        if (walletTx == nullptr)\r\n+            throw std::invalid_argument(\"walletTx should not be null\");\r\n+        if (i < walletTx->tx->vout.size())\r",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10165#discussion_r110985081",
      "id" : 110985081,
      "original_commit_id" : "7e0b36583d854f878a60dd7f895d1cbf2768ce4b",
      "original_position" : 12,
      "path" : "src/wallet/wallet.h",
      "position" : null,
      "pull_request_review_id" : 32196207,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10165",
      "updated_at" : "2017-04-13T05:33:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/110985081",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/886523?v=3",
         "events_url" : "https://api.github.com/users/JeremyRubin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JeremyRubin/followers",
         "following_url" : "https://api.github.com/users/JeremyRubin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JeremyRubin",
         "id" : 886523,
         "login" : "JeremyRubin",
         "organizations_url" : "https://api.github.com/users/JeremyRubin/orgs",
         "received_events_url" : "https://api.github.com/users/JeremyRubin/received_events",
         "repos_url" : "https://api.github.com/users/JeremyRubin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JeremyRubin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JeremyRubin"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10165#discussion_r111054968"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10165"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/111054968"
         }
      },
      "body" : "@JeremyRubin indeed, much clearer. I updated the PR.",
      "commit_id" : "c37e32af0d2f8723f89c5304d41a4a41d4d34ea3",
      "created_at" : "2017-04-12T02:36:29Z",
      "diff_hunk" : "@@ -477,21 +477,21 @@ class CWalletTx : public CMerkleTx\n \n class CInputCoin {\r\n public:\r\n-    CInputCoin()\r\n-    {\r\n-    }\r\n     CInputCoin(const CWalletTx* walletTx, unsigned int i)\r\n     {\r\n-        if (walletTx != nullptr && i < walletTx->tx->vout.size())\r\n+        if (walletTx == nullptr)\r\n+            throw std::invalid_argument(\"walletTx should not be null\");\r\n+        if (i < walletTx->tx->vout.size())\r",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10165#discussion_r111054968",
      "id" : 111054968,
      "original_commit_id" : "7e0b36583d854f878a60dd7f895d1cbf2768ce4b",
      "original_position" : 12,
      "path" : "src/wallet/wallet.h",
      "position" : null,
      "pull_request_review_id" : 32271324,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10165",
      "updated_at" : "2017-04-13T05:33:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/111054968",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3020646?v=3",
         "events_url" : "https://api.github.com/users/NicolasDorier/events{/privacy}",
         "followers_url" : "https://api.github.com/users/NicolasDorier/followers",
         "following_url" : "https://api.github.com/users/NicolasDorier/following{/other_user}",
         "gists_url" : "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/NicolasDorier",
         "id" : 3020646,
         "login" : "NicolasDorier",
         "organizations_url" : "https://api.github.com/users/NicolasDorier/orgs",
         "received_events_url" : "https://api.github.com/users/NicolasDorier/received_events",
         "repos_url" : "https://api.github.com/users/NicolasDorier/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/NicolasDorier/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/NicolasDorier"
      }
   },
   {
      "body" : "Travis fail unrelated to this PR, @laanwj can you kick the travis box one time to fix the issue ?",
      "created_at" : "2017-04-12T06:14:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10165#issuecomment-293483858",
      "id" : 293483858,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10165",
      "updated_at" : "2017-04-12T06:14:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/293483858",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3020646?v=3",
         "events_url" : "https://api.github.com/users/NicolasDorier/events{/privacy}",
         "followers_url" : "https://api.github.com/users/NicolasDorier/followers",
         "following_url" : "https://api.github.com/users/NicolasDorier/following{/other_user}",
         "gists_url" : "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/NicolasDorier",
         "id" : 3020646,
         "login" : "NicolasDorier",
         "organizations_url" : "https://api.github.com/users/NicolasDorier/orgs",
         "received_events_url" : "https://api.github.com/users/NicolasDorier/received_events",
         "repos_url" : "https://api.github.com/users/NicolasDorier/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/NicolasDorier/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/NicolasDorier"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10165#discussion_r111179521"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10165"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/111179521"
         }
      },
      "body" : "We don't use that style anywhere, introducing it here is not a good idea. I'd prefer to save that for new code.",
      "commit_id" : "c37e32af0d2f8723f89c5304d41a4a41d4d34ea3",
      "created_at" : "2017-04-12T15:16:43Z",
      "diff_hunk" : "@@ -29,7 +29,7 @@ extern UniValue importmulti(const JSONRPCRequest& request);\n \n std::vector<std::unique_ptr<CWalletTx>> wtxn;\n \n-typedef std::set<std::pair<const CWalletTx*,unsigned int> > CoinSet;\n+typedef std::set<CInputCoin> CoinSet;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10165#discussion_r111179521",
      "id" : 111179521,
      "original_commit_id" : "7e0b36583d854f878a60dd7f895d1cbf2768ce4b",
      "original_position" : 5,
      "path" : "src/wallet/test/wallet_tests.cpp",
      "position" : 5,
      "pull_request_review_id" : 32406437,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10165",
      "updated_at" : "2017-04-13T05:33:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/111179521",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10165#discussion_r111185227"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10165"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/111185227"
         }
      },
      "body" : "It is not visible on github but local diff shows me that line endings are weird here:\r\n```diff\r\n-using CInputCoin = std::pair<const CWalletTx*, unsigned int>;\r\n+class CInputCoin {^M\r\n+public:^M\r\n```\r\n^M is 13, so I suppose these are DOS line endings. Looks like it is only in `src/wallet/wallet.h`, and only the newly  introduced code.\r\nsuggest running:\r\n```bash\r\n$ dos2unix src/wallet/wallet.h\r\ndos2unix: converting file src/wallet/wallet.h to Unix format ...\r\n```",
      "commit_id" : "c37e32af0d2f8723f89c5304d41a4a41d4d34ea3",
      "created_at" : "2017-04-12T15:37:41Z",
      "diff_hunk" : "@@ -475,7 +475,34 @@ class CWalletTx : public CMerkleTx\n };\n \n \n-\n+class CInputCoin {\r",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10165#discussion_r111185227",
      "id" : 111185227,
      "original_commit_id" : "bffa5e5969ea59792bce20158b47a0e911090fb2",
      "original_position" : 5,
      "path" : "src/wallet/wallet.h",
      "position" : null,
      "pull_request_review_id" : 32412711,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10165",
      "updated_at" : "2017-04-13T05:33:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/111185227",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10165#discussion_r111314230"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10165"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/111314230"
         }
      },
      "body" : "oops. Yes, developping on visual studio... Fixed.",
      "commit_id" : "c37e32af0d2f8723f89c5304d41a4a41d4d34ea3",
      "created_at" : "2017-04-13T05:33:50Z",
      "diff_hunk" : "@@ -475,7 +475,34 @@ class CWalletTx : public CMerkleTx\n };\n \n \n-\n+class CInputCoin {\r",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10165#discussion_r111314230",
      "id" : 111314230,
      "original_commit_id" : "bffa5e5969ea59792bce20158b47a0e911090fb2",
      "original_position" : 5,
      "path" : "src/wallet/wallet.h",
      "position" : null,
      "pull_request_review_id" : 32549997,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10165",
      "updated_at" : "2017-04-13T05:33:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/111314230",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3020646?v=3",
         "events_url" : "https://api.github.com/users/NicolasDorier/events{/privacy}",
         "followers_url" : "https://api.github.com/users/NicolasDorier/followers",
         "following_url" : "https://api.github.com/users/NicolasDorier/following{/other_user}",
         "gists_url" : "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/NicolasDorier",
         "id" : 3020646,
         "login" : "NicolasDorier",
         "organizations_url" : "https://api.github.com/users/NicolasDorier/orgs",
         "received_events_url" : "https://api.github.com/users/NicolasDorier/received_events",
         "repos_url" : "https://api.github.com/users/NicolasDorier/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/NicolasDorier/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/NicolasDorier"
      }
   }
]
