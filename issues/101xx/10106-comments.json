[
   {
      "body" : "utACK https://github.com/bitcoin/bitcoin/pull/10106/commits/71a61336789c5c0bf8b5cf1b1a20614ba513d5ce",
      "created_at" : "2017-03-28T13:06:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10106#issuecomment-289763329",
      "id" : 289763329,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10106",
      "updated_at" : "2017-03-28T13:06:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/289763329",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/5767891?v=3",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "body" : "MutateTxAddOutPubKey appears to have the same issue. I recommend reviewing 61a153443ef87d0cf187d2203f0d5ef88e52e7ed and addressing it completely.\r\n\r\nAlso, pinging @jnewbery ",
      "created_at" : "2017-03-28T19:39:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10106#issuecomment-289881320",
      "id" : 289881320,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10106",
      "updated_at" : "2017-03-28T19:40:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/289881320",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "Ugh. Needs backport to 0.14.1",
      "created_at" : "2017-03-29T08:00:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10106#issuecomment-290013775",
      "id" : 290013775,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10106",
      "updated_at" : "2017-03-29T08:00:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/290013775",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "I've reviewed https://github.com/bitcoin/bitcoin/commit/61a153443ef87d0cf187d2203f0d5ef88e52e7ed and I think `MutateTxAddOutAddr()` and `MutateTxAddOutPubKey()` are the only functions that aren't properly checking their inputs. Extra eyes to review are always good though.\r\n\r\nThe check in `MutateTxAddOutPubKey()` should be:\r\n\r\n```c\r\n    if (vStrInputParts.size() < 2 || vStrInputParts.size() > 3)\r\n        throw std::runtime_error(\"TX output missing or too many separators\");\r\n```\r\n\r\nsince `MutateTxAddOutPubKey()` can have an optional flag.\r\n\r\nI'm currently writing test cases for bitcoin-tx that test this and other errors. We should include that in this PR when it's ready.",
      "created_at" : "2017-03-29T14:19:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10106#issuecomment-290104555",
      "id" : 290104555,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10106",
      "updated_at" : "2017-03-29T14:19:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/290104555",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "body" : "Extra testcases are here: https://github.com/jnewbery/bitcoin/commits/bitcoin_tx_input_sanitiser\r\n\r\n- 31c4dbf81a164e57a414ee548ec3227dfee35cba adds stderr checking to bctest.py\r\n- 718063a84dd78187171f60759bebd64aea1fed58 is the fix for bitcoin-tx (which you should just squash into your existing fix)\r\n- 0768e51977924aadf19c21331a15e30d97ba44c0 adds tests for bitcoin-tx correctly checking the number of separators in inputs.",
      "created_at" : "2017-03-29T14:56:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10106#issuecomment-290116567",
      "id" : 290116567,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10106",
      "updated_at" : "2017-03-29T14:56:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/290116567",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "body" : "Yes, it seems MutateTxAddOutAddr and MutateTxAddOutPubKey are the only ones with more than one part but not checking it.\r\nutACK but better to fix both.\r\n",
      "created_at" : "2017-03-30T19:17:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10106#issuecomment-290516273",
      "id" : 290516273,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10106",
      "updated_at" : "2017-03-30T19:17:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/290516273",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "body" : "@awemany - there's some enthusiasm to get this merged into master quickly, so I've opened #10130 with your fix and my test changes.\r\n\r\nThanks for reporting this (and providing a fix!)",
      "created_at" : "2017-03-30T20:45:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10106#issuecomment-290539650",
      "id" : 290539650,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10106",
      "updated_at" : "2017-03-30T20:45:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/290539650",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "body" : "Closing in favour of #10130 . @awemany your changes are still included in the new pull-request.",
      "created_at" : "2017-03-30T23:09:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10106#issuecomment-290570549",
      "id" : 290570549,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10106",
      "updated_at" : "2017-03-30T23:09:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/290570549",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/863730?v=3",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   }
]
