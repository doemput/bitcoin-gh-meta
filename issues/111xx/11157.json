{
   "assignee" : null,
   "assignees" : [],
   "body" : "### Describe the issue\r\ndecode to a strange result of a raw transaction \r\n\r\n### Can you reliably reproduce the issue?\r\n#### If so, please list the steps to reproduce below:\r\nuse `bitcoin-cli decoderawtransaction 010000000001011d35c185f8bb0fe4d6f4ccfc06412040bcdce7e67614990d2eae82dc9cc5e6620000000017160014750849d2d607b9a5085a78b2a4daa5404ac3c4c2ffffffff02102700000000000017a914f7cd0db841b1da5c613194f16924ef5a3c800b1c87d354d0000000000017a914f7ef5bb0d096f5b96b7ad6d4c999d66a0776f33d870247304402203c424595c2ad559f33769d494eefedfa71d3312cb1e6fb0f64fbdbe358aaf6d602204f26789a64457e972c705757023978ed825e45a051ea07744773c6899e5bfbcd012102fa03fe77aa01b00bff222732de668f12084231e29a3dffbbd62322889afcf4a800000000`\r\n\r\nThe transaction id is `89c86c5dddb4786324df8cb5a4d67537b7cf4b800e4432e3c7d60f38adb7046a`\r\n\r\n\r\n### Expected behaviour\r\nas https://blockchain.info/decode-tx show, it should be:\r\n```\r\n{\r\n   \"lock_time\":0,\r\n   \"size\":247,\r\n   \"inputs\":[\r\n      {\r\n         \"prev_out\":{\r\n            \"index\":0,\r\n            \"hash\":\"62e6c59cdc82ae2e0d991476e6e7dcbc40204106fcccf4d6e40fbbf885c1351d\"\r\n         },\r\n         \"script\":\"160014750849d2d607b9a5085a78b2a4daa5404ac3c4c2\"\r\n      }\r\n   ],\r\n   \"version\":1,\r\n   \"vin_sz\":1,\r\n   \"hash\":\"89c86c5dddb4786324df8cb5a4d67537b7cf4b800e4432e3c7d60f38adb7046a\",\r\n   \"vout_sz\":2,\r\n   \"out\":[\r\n      {\r\n         \"script_string\":\"OP_HASH160 f7cd0db841b1da5c613194f16924ef5a3c800b1c OP_EQUAL\",\r\n         \"address\":\"3QHGUJJzHiq2FFUnJF8MJayp6ZpmwHDKY6\",\r\n         \"value\":10000,\r\n         \"script\":\"a914f7cd0db841b1da5c613194f16924ef5a3c800b1c87\"\r\n      },\r\n      {\r\n         \"script_string\":\"OP_HASH160 f7ef5bb0d096f5b96b7ad6d4c999d66a0776f33d OP_EQUAL\",\r\n         \"address\":\"3QHyZpgKmm39371utHvQMM8WNFTRjFa7NU\",\r\n         \"value\":13653203,\r\n         \"script\":\"a914f7ef5bb0d096f5b96b7ad6d4c999d66a0776f33d87\"\r\n      }\r\n   ]\r\n}\r\n```\r\n### Actual behaviour\r\nA very large vout value is included `11337729845.69634049` which definitely is wrong.\r\n```\r\n{\r\n  \"txid\": \"96a5f667ab421ce2ae92d3f54727a191cd1a95a55a10efa3817e93534f725038\",\r\n  \"hash\": \"96a5f667ab421ce2ae92d3f54727a191cd1a95a55a10efa3817e93534f725038\",\r\n  \"size\": 247,\r\n  \"vsize\": 247,\r\n  \"version\": 1,\r\n  \"locktime\": 0,\r\n  \"vin\": [\r\n  ],\r\n  \"vout\": [\r\n    {\r\n      \"value\": 11337729845.69634049,\r\n      \"n\": 0,\r\n      \"scriptPubKey\": {\r\n        \"asm\": \"OP_UNKNOWN OP_UNKNOWN OP_UNKNOWN OP_UNKNOWN 412040bcdce7 OP_UNKNOWN OP_DUP 990d2eae82dc9cc5e66200000000171600147508 d2d607b9a5085a78b2a4daa5404ac3c4c2ffffffff02102700000000000017a914f7cd0db841b1da5c613194f16924ef5a3c800b1c87d354d0000000000017a914f7ef5bb0d096f5b9 OP_TOALTSTACK OP_ROLL OP_UNKNOWN OP_UNKNOWN OP_UNKNOWN OP_RSHIFT OP_UNKNOWN OP_RETURN 76f33d87024730 02203c424595c2ad559f33769d494eefedfa71d3312cb1e6fb0f64fbdbe358aaf6d602204f26789a64457e972c705757023978ed825e45a051ea07744773c6899e5bfbcd 33 1018 OP_UNKNOWN OP_NIP OP_HASH256 -48 ff222732de668f12084231 OP_UNKNOWN OP_BOOLAND [error]\",\r\n        \"hex\": \"d6f4ccfc06412040bcdce7e67614990d2eae82dc9cc5e6620000000017160014750849d2d607b9a5085a78b2a4daa5404ac3c4c2ffffffff02102700000000000017a914f7cd0db841b1da5c613194f16924ef5a3c800b1c87d354d0000000000017a914f7ef5bb0d096f5b96b7ad6d4c999d66a0776f33d870247304402203c424595c2ad559f33769d494eefedfa71d3312cb1e6fb0f64fbdbe358aaf6d602204f26789a64457e972c705757023978ed825e45a051ea07744773c6899e5bfbcd012102fa03fe77aa01b00bff222732de668f12084231e29a3dffbbd62322889afcf4a8\",\r\n        \"type\": \"nonstandard\"\r\n      }\r\n    }\r\n  ]\r\n}\r\n```\r\n\r\n### What version of bitcoin-core are you using?\r\nversion 0.14.2 \r\ngit commit fc61c8322bd7288f7546d18ad04c36c345be13cd , self compiled.\r\n\r\n\r\n### Machine specs:\r\n- OS: MacOS Darwin 16.7.0 Darwin Kernel Version 16.7.0: Thu Jun 15 17:36:27 PDT 2017; root:xnu-3789.70.16~2/RELEASE_X86_64 x86_64\r\n- CPU:   Model Name:\tMacBook Pro\r\n  Processor Speed:\t2.5 GHz\r\n  L2 Cache (per Core):\t256 KB\r\n  L3 Cache:\t6 MB\r\n- RAM: \r\n  Memory:\t16 GB\r\n- Disk size:\r\n  500G\r\n- Disk Type (HD/SDD):\r\n  SDD\r\n\r\n### Any extra information that might be useful in the debugging process.\r\nThis is normally the contents of a `debug.log` or `config.log` file. Raw text or a link to a pastebin type site are preferred.\r\n```\r\n(venv) zjc@MP:bt-py$ bitcoin-cli getrawtransaction 89c86c5dddb4786324df8cb5a4d67537b7cf4b800e4432e3c7d60f38adb7046a\r\n\r\n010000000001011d35c185f8bb0fe4d6f4ccfc06412040bcdce7e67614990d2eae82dc9cc5e6620000000017160014750849d2d607b9a5085a78b2a4daa5404ac3c4c2ffffffff02102700000000000017a914f7cd0db841b1da5c613194f16924ef5a3c800b1c87d354d0000000000017a914f7ef5bb0d096f5b96b7ad6d4c999d66a0776f33d870247304402203c424595c2ad559f33769d494eefedfa71d3312cb1e6fb0f64fbdbe358aaf6d602204f26789a64457e972c705757023978ed825e45a051ea07744773c6899e5bfbcd012102fa03fe77aa01b00bff222732de668f12084231e29a3dffbbd62322889afcf4a800000000\r\n\r\n(venv) zjc@MP:bt-py$ bitcoin-cli decoderawtransaction 010000000001011d35c185f8bb0fe4d6f4ccfc06412040bcdce7e67614990d2eae82dc9cc5e6620000000017160014750849d2d607b9a5085a78b2a4daa5404ac3c4c2ffffffff02102700000000000017a914f7cd0db841b1da5c613194f16924ef5a3c800b1c87d354d0000000000017a914f7ef5bb0d096f5b96b7ad6d4c999d66a0776f33d870247304402203c424595c2ad559f33769d494eefedfa71d3312cb1e6fb0f64fbdbe358aaf6d602204f26789a64457e972c705757023978ed825e45a051ea07744773c6899e5bfbcd012102fa03fe77aa01b00bff222732de668f12084231e29a3dffbbd62322889afcf4a800000000\r\n\r\n{\r\n  \"txid\": \"96a5f667ab421ce2ae92d3f54727a191cd1a95a55a10efa3817e93534f725038\",\r\n  \"hash\": \"96a5f667ab421ce2ae92d3f54727a191cd1a95a55a10efa3817e93534f725038\",\r\n  \"size\": 247,\r\n  \"vsize\": 247,\r\n  \"version\": 1,\r\n  \"locktime\": 0,\r\n  \"vin\": [\r\n  ],\r\n  \"vout\": [\r\n    {\r\n      \"value\": 11337729845.69634049,\r\n      \"n\": 0,\r\n      \"scriptPubKey\": {\r\n        \"asm\": \"OP_UNKNOWN OP_UNKNOWN OP_UNKNOWN OP_UNKNOWN 412040bcdce7 OP_UNKNOWN OP_DUP 990d2eae82dc9cc5e66200000000171600147508 d2d607b9a5085a78b2a4daa5404ac3c4c2ffffffff02102700000000000017a914f7cd0db841b1da5c613194f16924ef5a3c800b1c87d354d0000000000017a914f7ef5bb0d096f5b9 OP_TOALTSTACK OP_ROLL OP_UNKNOWN OP_UNKNOWN OP_UNKNOWN OP_RSHIFT OP_UNKNOWN OP_RETURN 76f33d87024730 02203c424595c2ad559f33769d494eefedfa71d3312cb1e6fb0f64fbdbe358aaf6d602204f26789a64457e972c705757023978ed825e45a051ea07744773c6899e5bfbcd 33 1018 OP_UNKNOWN OP_NIP OP_HASH256 -48 ff222732de668f12084231 OP_UNKNOWN OP_BOOLAND [error]\",\r\n        \"hex\": \"d6f4ccfc06412040bcdce7e67614990d2eae82dc9cc5e6620000000017160014750849d2d607b9a5085a78b2a4daa5404ac3c4c2ffffffff02102700000000000017a914f7cd0db841b1da5c613194f16924ef5a3c800b1c87d354d0000000000017a914f7ef5bb0d096f5b96b7ad6d4c999d66a0776f33d870247304402203c424595c2ad559f33769d494eefedfa71d3312cb1e6fb0f64fbdbe358aaf6d602204f26789a64457e972c705757023978ed825e45a051ea07744773c6899e5bfbcd012102fa03fe77aa01b00bff222732de668f12084231e29a3dffbbd62322889afcf4a8\",\r\n        \"type\": \"nonstandard\"\r\n      }\r\n    }\r\n  ]\r\n}\r\n```",
   "closed_at" : "2017-08-27T03:38:22Z",
   "closed_by" : {
      "avatar_url" : "https://avatars0.githubusercontent.com/u/3647317?v=4",
      "events_url" : "https://api.github.com/users/JiechengZhao/events{/privacy}",
      "followers_url" : "https://api.github.com/users/JiechengZhao/followers",
      "following_url" : "https://api.github.com/users/JiechengZhao/following{/other_user}",
      "gists_url" : "https://api.github.com/users/JiechengZhao/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/JiechengZhao",
      "id" : 3647317,
      "login" : "JiechengZhao",
      "organizations_url" : "https://api.github.com/users/JiechengZhao/orgs",
      "received_events_url" : "https://api.github.com/users/JiechengZhao/received_events",
      "repos_url" : "https://api.github.com/users/JiechengZhao/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/JiechengZhao/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/JiechengZhao/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/JiechengZhao"
   },
   "comments" : 3,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11157/comments",
   "created_at" : "2017-08-26T10:36:07Z",
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11157/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/issues/11157",
   "id" : 253082514,
   "labels" : [],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11157/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "number" : 11157,
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "closed",
   "title" : "Fail to decode transaction correctly.",
   "updated_at" : "2017-08-27T03:38:22Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11157",
   "user" : {
      "avatar_url" : "https://avatars0.githubusercontent.com/u/3647317?v=4",
      "events_url" : "https://api.github.com/users/JiechengZhao/events{/privacy}",
      "followers_url" : "https://api.github.com/users/JiechengZhao/followers",
      "following_url" : "https://api.github.com/users/JiechengZhao/following{/other_user}",
      "gists_url" : "https://api.github.com/users/JiechengZhao/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/JiechengZhao",
      "id" : 3647317,
      "login" : "JiechengZhao",
      "organizations_url" : "https://api.github.com/users/JiechengZhao/orgs",
      "received_events_url" : "https://api.github.com/users/JiechengZhao/received_events",
      "repos_url" : "https://api.github.com/users/JiechengZhao/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/JiechengZhao/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/JiechengZhao/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/JiechengZhao"
   }
}
