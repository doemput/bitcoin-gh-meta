[
   {
      "body" : "utACK 43e7dcb",
      "created_at" : "2017-08-25T11:40:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11131#issuecomment-324894669",
      "id" : 324894669,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11131",
      "updated_at" : "2017-08-25T12:54:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/324894669",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11131#discussion_r135251797"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11131"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135251797"
         }
      },
      "body" : "Append the suffix in `GenerateAuthCookie()` and there is no need to call `GetAuthCookieFile()` twice.",
      "commit_id" : "82dd7195e1fb943f9cd45a48188f9678219c0206",
      "created_at" : "2017-08-25T12:57:35Z",
      "diff_hunk" : "@@ -66,9 +69,13 @@ static const std::string COOKIEAUTH_USER = \"__cookie__\";\n /** Default name for auth cookie file */\n static const std::string COOKIEAUTH_FILE = \".cookie\";\n \n-fs::path GetAuthCookieFile()\n+static fs::path GetAuthCookieFile(bool temp)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11131#discussion_r135251797",
      "id" : 135251797,
      "original_commit_id" : "43e7dcbcf0abf9bd6777c52f03fb96ac5f1029cd",
      "original_position" : 15,
      "path" : "src/rpc/protocol.cpp",
      "position" : null,
      "pull_request_review_id" : 58645039,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11131",
      "updated_at" : "2017-08-25T13:38:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135251797",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11131#discussion_r135252007"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11131"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135252007"
         }
      },
      "body" : "Remove forward declaration?",
      "commit_id" : "82dd7195e1fb943f9cd45a48188f9678219c0206",
      "created_at" : "2017-08-25T12:58:33Z",
      "diff_hunk" : "@@ -15,6 +15,9 @@\n #include <stdint.h>\n #include <fstream>\n \n+/** Get name of RPC authentication cookie file */\n+static fs::path GetAuthCookieFile(bool temp=false);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11131#discussion_r135252007",
      "id" : 135252007,
      "original_commit_id" : "43e7dcbcf0abf9bd6777c52f03fb96ac5f1029cd",
      "original_position" : 5,
      "path" : "src/rpc/protocol.cpp",
      "position" : null,
      "pull_request_review_id" : 58645039,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11131",
      "updated_at" : "2017-08-25T13:38:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135252007",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "body" : "> Another option is to use fs::unique_path.\r\n\r\nI wasn't sure that would work in all cases - using a temporary file would potentially move over filesystem boundaries, right? Cross-filesystem move is not atomic IIRC.",
      "created_at" : "2017-08-25T13:14:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11131#issuecomment-324916336",
      "id" : 324916336,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11131",
      "updated_at" : "2017-08-25T13:19:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/324916336",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11131#discussion_r135255445"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11131"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135255445"
         }
      },
      "body" : "Yeah, well, find a fool proof and portable way to append to a fs::path (without adding path components!) and get back me. After browsing stack overflow and boost documentation for a while, I deemed it easier and safer to just do it where the filename is constructed initially.\r\n\r\nEdit: oh, and if you want to hear something else funny, calling `path::replace_extension` will replace `.cookie` with `.tmp`. ARg.",
      "commit_id" : "82dd7195e1fb943f9cd45a48188f9678219c0206",
      "created_at" : "2017-08-25T13:16:01Z",
      "diff_hunk" : "@@ -66,9 +69,13 @@ static const std::string COOKIEAUTH_USER = \"__cookie__\";\n /** Default name for auth cookie file */\n static const std::string COOKIEAUTH_FILE = \".cookie\";\n \n-fs::path GetAuthCookieFile()\n+static fs::path GetAuthCookieFile(bool temp)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11131#discussion_r135255445",
      "id" : 135255445,
      "in_reply_to_id" : 135251797,
      "original_commit_id" : "43e7dcbcf0abf9bd6777c52f03fb96ac5f1029cd",
      "original_position" : 15,
      "path" : "src/rpc/protocol.cpp",
      "position" : null,
      "pull_request_review_id" : 58649165,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11131",
      "updated_at" : "2017-08-25T13:38:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135255445",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11131#discussion_r135255758"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11131"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135255758"
         }
      },
      "body" : "Is it only used after the declaration? To minimize diff I didn't want to move the function around and had some compile issues, but that might have been for another reason, will try again.",
      "commit_id" : "82dd7195e1fb943f9cd45a48188f9678219c0206",
      "created_at" : "2017-08-25T13:17:25Z",
      "diff_hunk" : "@@ -15,6 +15,9 @@\n #include <stdint.h>\n #include <fstream>\n \n+/** Get name of RPC authentication cookie file */\n+static fs::path GetAuthCookieFile(bool temp=false);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11131#discussion_r135255758",
      "id" : 135255758,
      "in_reply_to_id" : 135252007,
      "original_commit_id" : "43e7dcbcf0abf9bd6777c52f03fb96ac5f1029cd",
      "original_position" : 5,
      "path" : "src/rpc/protocol.cpp",
      "position" : null,
      "pull_request_review_id" : 58649518,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11131",
      "updated_at" : "2017-08-25T13:38:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135255758",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "I meant `GetDataDir() / fs::unique_path()`.\r\n",
      "created_at" : "2017-08-25T13:19:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11131#issuecomment-324917685",
      "id" : 324917685,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11131",
      "updated_at" : "2017-08-25T13:19:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/324917685",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11131#discussion_r135257224"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11131"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135257224"
         }
      },
      "body" : "I also saw all that, but with `GetDataDir() / fs::unique_path()` none of ths is really necessary.",
      "commit_id" : "82dd7195e1fb943f9cd45a48188f9678219c0206",
      "created_at" : "2017-08-25T13:24:53Z",
      "diff_hunk" : "@@ -66,9 +69,13 @@ static const std::string COOKIEAUTH_USER = \"__cookie__\";\n /** Default name for auth cookie file */\n static const std::string COOKIEAUTH_FILE = \".cookie\";\n \n-fs::path GetAuthCookieFile()\n+static fs::path GetAuthCookieFile(bool temp)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11131#discussion_r135257224",
      "id" : 135257224,
      "in_reply_to_id" : 135251797,
      "original_commit_id" : "43e7dcbcf0abf9bd6777c52f03fb96ac5f1029cd",
      "original_position" : 15,
      "path" : "src/rpc/protocol.cpp",
      "position" : null,
      "pull_request_review_id" : 58651273,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11131",
      "updated_at" : "2017-08-25T13:38:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135257224",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "body" : "> I meant GetDataDir() / fs::unique_path().\r\n\r\nIt's possible to place the cookie file outside of the data directory with an option. Also my gut feeling says it's better to create files with deterministic names in the data directory, what if e.g. boost accidentally generates a name used as a wallet name :) I don't see any advantages.",
      "created_at" : "2017-08-25T13:24:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11131#issuecomment-324919081",
      "id" : 324919081,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11131",
      "updated_at" : "2017-08-25T13:24:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/324919081",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "> what if e.g. boost accidentally generates a name used as a wallet name :)\r\n\r\nI see you take serious precautions Ã°ÂÂÂ\r\n\r\nIn the documentation there is http://www.boost.org/doc/libs/1_53_0/libs/filesystem/doc/reference.html#path-concatenation.",
      "created_at" : "2017-08-25T13:28:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11131#issuecomment-324919958",
      "id" : 324919958,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11131",
      "updated_at" : "2017-08-25T13:28:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/324919958",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11131#discussion_r135258840"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11131"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135258840"
         }
      },
      "body" : "I've not tested but [here](http://www.microhowto.info/howto/atomically_rewrite_the_content_of_a_file.html) says:\r\n> A common misconception is that calling close will necessarily perform an implicit fsync.\r\n\r\nFrom the [docs](http://www.cplusplus.com/reference/fstream/ofstream/close/) there is no explicit mention to flush, only:\r\n\r\n> Any pending output sequence is written to the file.",
      "commit_id" : "82dd7195e1fb943f9cd45a48188f9678219c0206",
      "created_at" : "2017-08-25T13:32:37Z",
      "diff_hunk" : "@@ -84,14 +91,20 @@ bool GenerateAuthCookie(std::string *cookie_out)\n      * these are set to 077 in init.cpp unless overridden with -sysperms.\n      */\n     std::ofstream file;\n-    fs::path filepath = GetAuthCookieFile();\n-    file.open(filepath.string().c_str());\n+    fs::path filepath_tmp = GetAuthCookieFile(true);\n+    file.open(filepath_tmp.string().c_str());\n     if (!file.is_open()) {\n-        LogPrintf(\"Unable to open cookie authentication file %s for writing\\n\", filepath.string());\n+        LogPrintf(\"Unable to open cookie authentication file %s for writing\\n\", filepath_tmp.string());\n         return false;\n     }\n     file << cookie;\n     file.close();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11131#discussion_r135258840",
      "id" : 135258840,
      "original_commit_id" : "43e7dcbcf0abf9bd6777c52f03fb96ac5f1029cd",
      "original_position" : 40,
      "path" : "src/rpc/protocol.cpp",
      "position" : 31,
      "pull_request_review_id" : 58653246,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11131",
      "updated_at" : "2017-08-25T13:38:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135258840",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "body" : ">  http://www.boost.org/doc/libs/1_53_0/libs/filesystem/doc/reference.html#path-concatenation.\r\n\r\nYes, but as I understoof, there is difference between boost_filesystem versions there. I don't really have a lot of time to dive into that, and I don't want this to come back with some strange compile error, and this works so...",
      "created_at" : "2017-08-25T13:33:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11131#issuecomment-324921479",
      "id" : 324921479,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11131",
      "updated_at" : "2017-08-25T13:33:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/324921479",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11131#discussion_r135259586"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11131"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135259586"
         }
      },
      "body" : "In other words, call `file.flush()` before close?",
      "commit_id" : "82dd7195e1fb943f9cd45a48188f9678219c0206",
      "created_at" : "2017-08-25T13:34:54Z",
      "diff_hunk" : "@@ -84,14 +91,20 @@ bool GenerateAuthCookie(std::string *cookie_out)\n      * these are set to 077 in init.cpp unless overridden with -sysperms.\n      */\n     std::ofstream file;\n-    fs::path filepath = GetAuthCookieFile();\n-    file.open(filepath.string().c_str());\n+    fs::path filepath_tmp = GetAuthCookieFile(true);\n+    file.open(filepath_tmp.string().c_str());\n     if (!file.is_open()) {\n-        LogPrintf(\"Unable to open cookie authentication file %s for writing\\n\", filepath.string());\n+        LogPrintf(\"Unable to open cookie authentication file %s for writing\\n\", filepath_tmp.string());\n         return false;\n     }\n     file << cookie;\n     file.close();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11131#discussion_r135259586",
      "id" : 135259586,
      "in_reply_to_id" : 135258840,
      "original_commit_id" : "43e7dcbcf0abf9bd6777c52f03fb96ac5f1029cd",
      "original_position" : 40,
      "path" : "src/rpc/protocol.cpp",
      "position" : 31,
      "pull_request_review_id" : 58654080,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11131",
      "updated_at" : "2017-08-25T13:38:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135259586",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11131#discussion_r135259628"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11131"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135259628"
         }
      },
      "body" : "You're having another misconception there: fsync is not necessary for other processes to see the result! Only to make sure that the data hits disk, in case of crashes etc. Which is not relevant here.",
      "commit_id" : "82dd7195e1fb943f9cd45a48188f9678219c0206",
      "created_at" : "2017-08-25T13:35:02Z",
      "diff_hunk" : "@@ -84,14 +91,20 @@ bool GenerateAuthCookie(std::string *cookie_out)\n      * these are set to 077 in init.cpp unless overridden with -sysperms.\n      */\n     std::ofstream file;\n-    fs::path filepath = GetAuthCookieFile();\n-    file.open(filepath.string().c_str());\n+    fs::path filepath_tmp = GetAuthCookieFile(true);\n+    file.open(filepath_tmp.string().c_str());\n     if (!file.is_open()) {\n-        LogPrintf(\"Unable to open cookie authentication file %s for writing\\n\", filepath.string());\n+        LogPrintf(\"Unable to open cookie authentication file %s for writing\\n\", filepath_tmp.string());\n         return false;\n     }\n     file << cookie;\n     file.close();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11131#discussion_r135259628",
      "id" : 135259628,
      "in_reply_to_id" : 135258840,
      "original_commit_id" : "43e7dcbcf0abf9bd6777c52f03fb96ac5f1029cd",
      "original_position" : 40,
      "path" : "src/rpc/protocol.cpp",
      "position" : 31,
      "pull_request_review_id" : 58654132,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11131",
      "updated_at" : "2017-08-25T13:38:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135259628",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11131#discussion_r135261858"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11131"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135261858"
         }
      },
      "body" : "Let's ask @theuni just in case.",
      "commit_id" : "82dd7195e1fb943f9cd45a48188f9678219c0206",
      "created_at" : "2017-08-25T13:45:09Z",
      "diff_hunk" : "@@ -84,14 +91,20 @@ bool GenerateAuthCookie(std::string *cookie_out)\n      * these are set to 077 in init.cpp unless overridden with -sysperms.\n      */\n     std::ofstream file;\n-    fs::path filepath = GetAuthCookieFile();\n-    file.open(filepath.string().c_str());\n+    fs::path filepath_tmp = GetAuthCookieFile(true);\n+    file.open(filepath_tmp.string().c_str());\n     if (!file.is_open()) {\n-        LogPrintf(\"Unable to open cookie authentication file %s for writing\\n\", filepath.string());\n+        LogPrintf(\"Unable to open cookie authentication file %s for writing\\n\", filepath_tmp.string());\n         return false;\n     }\n     file << cookie;\n     file.close();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11131#discussion_r135261858",
      "id" : 135261858,
      "in_reply_to_id" : 135258840,
      "original_commit_id" : "43e7dcbcf0abf9bd6777c52f03fb96ac5f1029cd",
      "original_position" : 40,
      "path" : "src/rpc/protocol.cpp",
      "position" : 31,
      "pull_request_review_id" : 58656838,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11131",
      "updated_at" : "2017-08-25T13:45:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135261858",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11131#discussion_r135269345"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11131"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135269345"
         }
      },
      "body" : "I thought we always put the documentation above the declaration, but whatever, no need to change it back now.",
      "commit_id" : "82dd7195e1fb943f9cd45a48188f9678219c0206",
      "created_at" : "2017-08-25T14:17:28Z",
      "diff_hunk" : "@@ -15,6 +15,9 @@\n #include <stdint.h>\n #include <fstream>\n \n+/** Get name of RPC authentication cookie file */\n+static fs::path GetAuthCookieFile(bool temp=false);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11131#discussion_r135269345",
      "id" : 135269345,
      "in_reply_to_id" : 135252007,
      "original_commit_id" : "43e7dcbcf0abf9bd6777c52f03fb96ac5f1029cd",
      "original_position" : 5,
      "path" : "src/rpc/protocol.cpp",
      "position" : null,
      "pull_request_review_id" : 58665907,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11131",
      "updated_at" : "2017-08-25T14:17:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135269345",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11131#discussion_r135313990"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11131"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135313990"
         }
      },
      "body" : "I think the only concern is that libc may buffer the write as long as the file is open, in which case a flush would be useful to make it visible to the OS (and thus other processes). However, as you're closing the file anyway, I don't believe that matters.",
      "commit_id" : "82dd7195e1fb943f9cd45a48188f9678219c0206",
      "created_at" : "2017-08-25T17:40:51Z",
      "diff_hunk" : "@@ -84,14 +91,20 @@ bool GenerateAuthCookie(std::string *cookie_out)\n      * these are set to 077 in init.cpp unless overridden with -sysperms.\n      */\n     std::ofstream file;\n-    fs::path filepath = GetAuthCookieFile();\n-    file.open(filepath.string().c_str());\n+    fs::path filepath_tmp = GetAuthCookieFile(true);\n+    file.open(filepath_tmp.string().c_str());\n     if (!file.is_open()) {\n-        LogPrintf(\"Unable to open cookie authentication file %s for writing\\n\", filepath.string());\n+        LogPrintf(\"Unable to open cookie authentication file %s for writing\\n\", filepath_tmp.string());\n         return false;\n     }\n     file << cookie;\n     file.close();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11131#discussion_r135313990",
      "id" : 135313990,
      "in_reply_to_id" : 135258840,
      "original_commit_id" : "43e7dcbcf0abf9bd6777c52f03fb96ac5f1029cd",
      "original_position" : 40,
      "path" : "src/rpc/protocol.cpp",
      "position" : 31,
      "pull_request_review_id" : 58717726,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11131",
      "updated_at" : "2017-08-25T17:40:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135313990",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "utACK https://github.com/bitcoin/bitcoin/pull/11131/commits/82dd7195e1fb943f9cd45a48188f9678219c0206\r\n\r\n> I don't want this to come back with some strange compile error, and this works so...\r\n\r\nAgreed, this seems fine to me\r\n",
      "created_at" : "2017-08-26T12:40:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11131#issuecomment-325123565",
      "id" : 325123565,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11131",
      "updated_at" : "2017-08-26T12:40:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/325123565",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/3211283?v=4",
         "events_url" : "https://api.github.com/users/MeshCollider/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MeshCollider/followers",
         "following_url" : "https://api.github.com/users/MeshCollider/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MeshCollider/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MeshCollider",
         "id" : 3211283,
         "login" : "MeshCollider",
         "organizations_url" : "https://api.github.com/users/MeshCollider/orgs",
         "received_events_url" : "https://api.github.com/users/MeshCollider/received_events",
         "repos_url" : "https://api.github.com/users/MeshCollider/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MeshCollider/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MeshCollider/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MeshCollider"
      }
   },
   {
      "body" : "utACK 82dd7195e1fb943f9cd45a48188f9678219c0206",
      "created_at" : "2017-08-27T18:54:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11131#issuecomment-325217139",
      "id" : 325217139,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11131",
      "updated_at" : "2017-08-27T18:54:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/325217139",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   }
]
