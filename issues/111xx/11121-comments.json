[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11121#discussion_r134874934"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11121"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/134874934"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I prefer to explicitly set the network topology and initial state of the chain.",
      "commit_id" : "7148b74dc39110f53c665b94fa9d994c6ad6dc1c",
      "created_at" : "2017-08-23T21:24:18Z",
      "diff_hunk" : "@@ -8,12 +8,6 @@\n from test_framework.util import *\n \n class TxnMallTest(BitcoinTestFramework):\n-\n-    def __init__(self):\n-        super().__init__()\n-        self.num_nodes = 4\n-        self.setup_clean_chain = False",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11121#discussion_r134874934",
      "id" : 134874934,
      "original_commit_id" : "06bde74f5ec8660975275f8594aee3a99064e327",
      "original_position" : 8,
      "path" : "test/functional/txn_clone.py",
      "position" : null,
      "pull_request_review_id" : 58220291,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11121",
      "updated_at" : "2017-09-01T16:25:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/134874934",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11121#discussion_r134875521"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11121"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/134875521"
         }
      },
      "author_association" : "MEMBER",
      "body" : "should raise `RuntimeError('Not implemented')` to enforce the docstring.",
      "commit_id" : "7148b74dc39110f53c665b94fa9d994c6ad6dc1c",
      "created_at" : "2017-08-23T21:26:51Z",
      "diff_hunk" : "@@ -202,51 +175,91 @@ def main(self):\n             logging.shutdown()\n             sys.exit(TEST_EXIT_FAILED)\n \n-    # Public helper methods. These can be accessed by the subclass test scripts.\n+    # Methods to override in subclass test scripts.\n+    def set_test_params(self):\n+        \"\"\"Override this method to change default values for number of nodes, topology, etc\"\"\"\n+        pass",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11121#discussion_r134875521",
      "id" : 134875521,
      "original_commit_id" : "06bde74f5ec8660975275f8594aee3a99064e327",
      "original_position" : 75,
      "path" : "test/functional/test_framework/test_framework.py",
      "position" : null,
      "pull_request_review_id" : 58220291,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11121",
      "updated_at" : "2017-09-01T16:25:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/134875521",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11121#discussion_r134948693"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11121"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/134948693"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Since `self` knows about `self.options.tmpdir`, and all calls to `self.add_nodes` passes `self.options.tmpdir` as `dirname` argument, it seems clean to just give it a default `None` and to set to `self.options.tmpdir if None` in `add_nodes`.\r\nOr perhaps remove it entirely and always use `self.options.tmpdir`. Will it ever be anything else?",
      "commit_id" : "7148b74dc39110f53c665b94fa9d994c6ad6dc1c",
      "created_at" : "2017-08-24T07:53:13Z",
      "diff_hunk" : "@@ -202,51 +175,91 @@ def main(self):\n             logging.shutdown()\n             sys.exit(TEST_EXIT_FAILED)\n \n-    # Public helper methods. These can be accessed by the subclass test scripts.\n+    # Methods to override in subclass test scripts.\n+    def set_test_params(self):\n+        \"\"\"Override this method to change default values for number of nodes, topology, etc\"\"\"\n+        pass\n \n-    def start_node(self, i, dirname, extra_args=None, rpchost=None, timewait=None, binary=None, stderr=None):\n-        \"\"\"Start a bitcoind and return RPC connection to it\"\"\"\n+    def add_options(self, parser):\n+        \"\"\"Override this method to add command-line options to the test\"\"\"\n+        pass\n \n-        if extra_args is None:\n-            extra_args = []\n-        if binary is None:\n-            binary = os.getenv(\"BITCOIND\", \"bitcoind\")\n-        node = TestNode(i, dirname, extra_args, rpchost, timewait, binary, stderr, self.mocktime, coverage_dir=self.options.coveragedir)\n-        node.start()\n-        node.wait_for_rpc_connection()\n+    def setup_chain(self):\n+        \"\"\"Override this method to customize blockchain setup\"\"\"\n+        self.log.info(\"Initializing test directory \" + self.options.tmpdir)\n+        if self.setup_clean_chain:\n+            self._initialize_chain_clean(self.options.tmpdir, self.num_nodes)\n+        else:\n+            self._initialize_chain(self.options.tmpdir, self.num_nodes, self.options.cachedir)\n \n-        if self.options.coveragedir is not None:\n-            coverage.write_all_rpc_commands(self.options.coveragedir, node.rpc)\n+    def setup_network(self):\n+        \"\"\"Override this method to customize test network topology\"\"\"\n+        self.setup_nodes()\n+\n+        # Connect the nodes as a \"chain\".  This allows us\n+        # to split the network between nodes 1 and 2 to get\n+        # two halves that can work on competing chains.\n+        for i in range(self.num_nodes - 1):\n+            connect_nodes_bi(self.nodes, i, i + 1)\n+        self.sync_all()\n+\n+    def setup_nodes(self):\n+        \"\"\"Override this method to customize test node setup\"\"\"\n+        extra_args = None\n+        if hasattr(self, \"extra_args\"):\n+            extra_args = self.extra_args\n+        self.add_nodes(self.num_nodes, self.options.tmpdir, extra_args)\n+        self.start_nodes()\n \n-        return node\n+    def run_test(self):\n+        \"\"\"Override this method to define test logic\"\"\"\n+        raise NotImplementedError\n \n-    def start_nodes(self, num_nodes, dirname, extra_args=None, rpchost=None, timewait=None, binary=None):\n-        \"\"\"Start multiple bitcoinds, return RPC connections to them\"\"\"\n+    # Public helper methods. These can be accessed by the subclass test scripts.\n+\n+    def add_nodes(self, num_nodes, dirname, extra_args=None, rpchost=None, timewait=None, binary=None):",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11121#discussion_r134948693",
      "id" : 134948693,
      "original_commit_id" : "06bde74f5ec8660975275f8594aee3a99064e327",
      "original_position" : 128,
      "path" : "test/functional/test_framework/test_framework.py",
      "position" : null,
      "pull_request_review_id" : 58300687,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11121",
      "updated_at" : "2017-09-01T16:25:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/134948693",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11121#discussion_r134948830"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11121"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/134948830"
         }
      },
      "author_association" : "MEMBER",
      "body" : "`extra_args=None, stderr=None` maybe?",
      "commit_id" : "7148b74dc39110f53c665b94fa9d994c6ad6dc1c",
      "created_at" : "2017-08-24T07:53:55Z",
      "diff_hunk" : "@@ -61,9 +61,13 @@ def __getattr__(self, *args, **kwargs):\n         assert self.rpc_connected and self.rpc is not None, \"Error: no RPC connection\"\n         return self.rpc.__getattr__(*args, **kwargs)\n \n-    def start(self):\n+    def start(self, extra_args, stderr=None):",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11121#discussion_r134948830",
      "id" : 134948830,
      "original_commit_id" : "06bde74f5ec8660975275f8594aee3a99064e327",
      "original_position" : 5,
      "path" : "test/functional/test_framework/test_node.py",
      "position" : null,
      "pull_request_review_id" : 58300687,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11121",
      "updated_at" : "2017-09-01T16:25:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/134948830",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11121#discussion_r134949165"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11121"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/134949165"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Faint agreement. It's easy to forget and start up 4 nodes when you only really need 2, for example. Not seeing the number of nodes makes that even harder to remember.",
      "commit_id" : "7148b74dc39110f53c665b94fa9d994c6ad6dc1c",
      "created_at" : "2017-08-24T07:55:57Z",
      "diff_hunk" : "@@ -8,12 +8,6 @@\n from test_framework.util import *\n \n class TxnMallTest(BitcoinTestFramework):\n-\n-    def __init__(self):\n-        super().__init__()\n-        self.num_nodes = 4\n-        self.setup_clean_chain = False",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11121#discussion_r134949165",
      "id" : 134949165,
      "in_reply_to_id" : 134874934,
      "original_commit_id" : "06bde74f5ec8660975275f8594aee3a99064e327",
      "original_position" : 8,
      "path" : "test/functional/txn_clone.py",
      "position" : null,
      "pull_request_review_id" : 58300687,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11121",
      "updated_at" : "2017-09-01T16:25:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/134949165",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11121#discussion_r134950110"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11121"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/134950110"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Why does it not just `add_nodes(3, ..)` here and then add/start/connect the fourth node below? That would remove a lot of necessary `[self.nodes[0:3]]` stuff.",
      "commit_id" : "7148b74dc39110f53c665b94fa9d994c6ad6dc1c",
      "created_at" : "2017-08-24T08:00:35Z",
      "diff_hunk" : "@@ -7,28 +7,27 @@\n from test_framework.util import *\n \n class WalletTest(BitcoinTestFramework):\n-\n-    def check_fee_amount(self, curr_balance, balance_with_fee, fee_per_byte, tx_size):\n-        \"\"\"Return curr_balance after asserting the fee was in range\"\"\"\n-        fee = balance_with_fee - curr_balance\n-        assert_fee_amount(fee, tx_size, fee_per_byte * 1000)\n-        return curr_balance\n-\n-    def __init__(self):\n-        super().__init__()\n+    def set_test_params(self):\n         self.setup_clean_chain = True\n-        self.num_nodes = 4\n         self.extra_args = [['-usehd={:d}'.format(i%2==0)] for i in range(4)]\n \n     def setup_network(self):\n-        self.nodes = self.start_nodes(3, self.options.tmpdir, self.extra_args[:3])\n+        self.add_nodes(4, self.options.tmpdir, self.extra_args)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11121#discussion_r134950110",
      "id" : 134950110,
      "original_commit_id" : "06bde74f5ec8660975275f8594aee3a99064e327",
      "original_position" : 20,
      "path" : "test/functional/wallet.py",
      "position" : null,
      "pull_request_review_id" : 58300687,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11121",
      "updated_at" : "2017-09-01T16:25:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/134950110",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11121#discussion_r135066057"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11121"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135066057"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Sounds good. I've added a new commit that makes setting `self.num_nodes` mandatory. I haven't done the same for `self.setup_clean_chain`, since I think it makes more sense for that to have a default. If people feel strongly, it can be added in a future commit.",
      "commit_id" : "7148b74dc39110f53c665b94fa9d994c6ad6dc1c",
      "created_at" : "2017-08-24T16:32:21Z",
      "diff_hunk" : "@@ -8,12 +8,6 @@\n from test_framework.util import *\n \n class TxnMallTest(BitcoinTestFramework):\n-\n-    def __init__(self):\n-        super().__init__()\n-        self.num_nodes = 4\n-        self.setup_clean_chain = False",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11121#discussion_r135066057",
      "id" : 135066057,
      "in_reply_to_id" : 134874934,
      "original_commit_id" : "06bde74f5ec8660975275f8594aee3a99064e327",
      "original_position" : 8,
      "path" : "test/functional/txn_clone.py",
      "position" : null,
      "pull_request_review_id" : 58435807,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11121",
      "updated_at" : "2017-09-01T16:25:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135066057",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11121#discussion_r135066087"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11121"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135066087"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Yes - done",
      "commit_id" : "7148b74dc39110f53c665b94fa9d994c6ad6dc1c",
      "created_at" : "2017-08-24T16:32:27Z",
      "diff_hunk" : "@@ -202,51 +175,91 @@ def main(self):\n             logging.shutdown()\n             sys.exit(TEST_EXIT_FAILED)\n \n-    # Public helper methods. These can be accessed by the subclass test scripts.\n+    # Methods to override in subclass test scripts.\n+    def set_test_params(self):\n+        \"\"\"Override this method to change default values for number of nodes, topology, etc\"\"\"\n+        pass",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11121#discussion_r135066087",
      "id" : 135066087,
      "in_reply_to_id" : 134875521,
      "original_commit_id" : "06bde74f5ec8660975275f8594aee3a99064e327",
      "original_position" : 75,
      "path" : "test/functional/test_framework/test_framework.py",
      "position" : null,
      "pull_request_review_id" : 58435838,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11121",
      "updated_at" : "2017-09-01T16:25:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135066087",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11121#discussion_r135066194"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11121"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135066194"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Good point. Thanks! Added this in a new commit.",
      "commit_id" : "7148b74dc39110f53c665b94fa9d994c6ad6dc1c",
      "created_at" : "2017-08-24T16:32:55Z",
      "diff_hunk" : "@@ -202,51 +175,91 @@ def main(self):\n             logging.shutdown()\n             sys.exit(TEST_EXIT_FAILED)\n \n-    # Public helper methods. These can be accessed by the subclass test scripts.\n+    # Methods to override in subclass test scripts.\n+    def set_test_params(self):\n+        \"\"\"Override this method to change default values for number of nodes, topology, etc\"\"\"\n+        pass\n \n-    def start_node(self, i, dirname, extra_args=None, rpchost=None, timewait=None, binary=None, stderr=None):\n-        \"\"\"Start a bitcoind and return RPC connection to it\"\"\"\n+    def add_options(self, parser):\n+        \"\"\"Override this method to add command-line options to the test\"\"\"\n+        pass\n \n-        if extra_args is None:\n-            extra_args = []\n-        if binary is None:\n-            binary = os.getenv(\"BITCOIND\", \"bitcoind\")\n-        node = TestNode(i, dirname, extra_args, rpchost, timewait, binary, stderr, self.mocktime, coverage_dir=self.options.coveragedir)\n-        node.start()\n-        node.wait_for_rpc_connection()\n+    def setup_chain(self):\n+        \"\"\"Override this method to customize blockchain setup\"\"\"\n+        self.log.info(\"Initializing test directory \" + self.options.tmpdir)\n+        if self.setup_clean_chain:\n+            self._initialize_chain_clean(self.options.tmpdir, self.num_nodes)\n+        else:\n+            self._initialize_chain(self.options.tmpdir, self.num_nodes, self.options.cachedir)\n \n-        if self.options.coveragedir is not None:\n-            coverage.write_all_rpc_commands(self.options.coveragedir, node.rpc)\n+    def setup_network(self):\n+        \"\"\"Override this method to customize test network topology\"\"\"\n+        self.setup_nodes()\n+\n+        # Connect the nodes as a \"chain\".  This allows us\n+        # to split the network between nodes 1 and 2 to get\n+        # two halves that can work on competing chains.\n+        for i in range(self.num_nodes - 1):\n+            connect_nodes_bi(self.nodes, i, i + 1)\n+        self.sync_all()\n+\n+    def setup_nodes(self):\n+        \"\"\"Override this method to customize test node setup\"\"\"\n+        extra_args = None\n+        if hasattr(self, \"extra_args\"):\n+            extra_args = self.extra_args\n+        self.add_nodes(self.num_nodes, self.options.tmpdir, extra_args)\n+        self.start_nodes()\n \n-        return node\n+    def run_test(self):\n+        \"\"\"Override this method to define test logic\"\"\"\n+        raise NotImplementedError\n \n-    def start_nodes(self, num_nodes, dirname, extra_args=None, rpchost=None, timewait=None, binary=None):\n-        \"\"\"Start multiple bitcoinds, return RPC connections to them\"\"\"\n+    # Public helper methods. These can be accessed by the subclass test scripts.\n+\n+    def add_nodes(self, num_nodes, dirname, extra_args=None, rpchost=None, timewait=None, binary=None):",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11121#discussion_r135066194",
      "id" : 135066194,
      "in_reply_to_id" : 134948693,
      "original_commit_id" : "06bde74f5ec8660975275f8594aee3a99064e327",
      "original_position" : 128,
      "path" : "test/functional/test_framework/test_framework.py",
      "position" : null,
      "pull_request_review_id" : 58435973,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11121",
      "updated_at" : "2017-09-01T16:25:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135066194",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11121#discussion_r135066386"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11121"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135066386"
         }
      },
      "author_association" : "MEMBER",
      "body" : "`TestNode.start` is only ever called by `TestFramework.start_node`, which has its own default for `extra_args`, so not strictly necessary, but I agree having a default here makes it clearer. Added.",
      "commit_id" : "7148b74dc39110f53c665b94fa9d994c6ad6dc1c",
      "created_at" : "2017-08-24T16:33:48Z",
      "diff_hunk" : "@@ -61,9 +61,13 @@ def __getattr__(self, *args, **kwargs):\n         assert self.rpc_connected and self.rpc is not None, \"Error: no RPC connection\"\n         return self.rpc.__getattr__(*args, **kwargs)\n \n-    def start(self):\n+    def start(self, extra_args, stderr=None):",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11121#discussion_r135066386",
      "id" : 135066386,
      "in_reply_to_id" : 134948830,
      "original_commit_id" : "06bde74f5ec8660975275f8594aee3a99064e327",
      "original_position" : 5,
      "path" : "test/functional/test_framework/test_node.py",
      "position" : null,
      "pull_request_review_id" : 58436191,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11121",
      "updated_at" : "2017-09-01T16:25:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135066386",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11121#discussion_r135066746"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11121"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135066746"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Because there's not currently a method to add a single node. The model after this PR is to add all nodes at the top of the test and then start/stop them as required during the test.\r\n\r\nWe could potentially add an `add_node()` method to be called during the test, but lets leave that for a future PR.",
      "commit_id" : "7148b74dc39110f53c665b94fa9d994c6ad6dc1c",
      "created_at" : "2017-08-24T16:35:16Z",
      "diff_hunk" : "@@ -7,28 +7,27 @@\n from test_framework.util import *\n \n class WalletTest(BitcoinTestFramework):\n-\n-    def check_fee_amount(self, curr_balance, balance_with_fee, fee_per_byte, tx_size):\n-        \"\"\"Return curr_balance after asserting the fee was in range\"\"\"\n-        fee = balance_with_fee - curr_balance\n-        assert_fee_amount(fee, tx_size, fee_per_byte * 1000)\n-        return curr_balance\n-\n-    def __init__(self):\n-        super().__init__()\n+    def set_test_params(self):\n         self.setup_clean_chain = True\n-        self.num_nodes = 4\n         self.extra_args = [['-usehd={:d}'.format(i%2==0)] for i in range(4)]\n \n     def setup_network(self):\n-        self.nodes = self.start_nodes(3, self.options.tmpdir, self.extra_args[:3])\n+        self.add_nodes(4, self.options.tmpdir, self.extra_args)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11121#discussion_r135066746",
      "id" : 135066746,
      "in_reply_to_id" : 134950110,
      "original_commit_id" : "06bde74f5ec8660975275f8594aee3a99064e327",
      "original_position" : 20,
      "path" : "test/functional/wallet.py",
      "position" : null,
      "pull_request_review_id" : 58436609,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11121",
      "updated_at" : "2017-09-01T16:25:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135066746",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "body" : "@MarcoFalke @kallewoof - thanks for the review. I think I've responded to all your comments.\r\n\r\nNew commits pushed, and rebased on master.",
      "created_at" : "2017-08-24T16:36:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11121#issuecomment-324689264",
      "id" : 324689264,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11121",
      "updated_at" : "2017-08-24T16:36:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/324689264",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "body" : "utACK df824a9",
      "created_at" : "2017-08-25T01:04:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11121#issuecomment-324796691",
      "id" : 324796691,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11121",
      "updated_at" : "2017-08-25T01:04:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/324796691",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11121#discussion_r135266417"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11121"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135266417"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "It seems there are more `setup_clean_chain = True` so why not make it the default?",
      "commit_id" : "7148b74dc39110f53c665b94fa9d994c6ad6dc1c",
      "created_at" : "2017-08-25T14:05:41Z",
      "diff_hunk" : "@@ -54,16 +54,16 @@ def send_header_for_blocks(self, new_blocks):\n         self.send_message(headers_message)\n \n class AssumeValidTest(BitcoinTestFramework):\n-    def __init__(self):\n-        super().__init__()\n+    def set_test_params(self):\n         self.setup_clean_chain = True",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11121#discussion_r135266417",
      "id" : 135266417,
      "original_commit_id" : "df824a92121eb68849e474e87098a441d4e52926",
      "original_position" : 7,
      "path" : "test/functional/assumevalid.py",
      "position" : 7,
      "pull_request_review_id" : 58662386,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11121",
      "updated_at" : "2017-09-01T16:25:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135266417",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11121#discussion_r135285612"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11121"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135285612"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I haven't made any changes to `setup_clean_chain`. See earlier comment:\r\n\r\n> I haven't done the same for self.setup_clean_chain, since I think it makes more sense for that to have a default. If people feel strongly, it can be added in a future commit.\r\n\r\nFeel free to open a PR to change/remove the default if you think that's necessary. I don't think it's required for this PR.",
      "commit_id" : "7148b74dc39110f53c665b94fa9d994c6ad6dc1c",
      "created_at" : "2017-08-25T15:23:06Z",
      "diff_hunk" : "@@ -54,16 +54,16 @@ def send_header_for_blocks(self, new_blocks):\n         self.send_message(headers_message)\n \n class AssumeValidTest(BitcoinTestFramework):\n-    def __init__(self):\n-        super().__init__()\n+    def set_test_params(self):\n         self.setup_clean_chain = True",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11121#discussion_r135285612",
      "id" : 135285612,
      "in_reply_to_id" : 135266417,
      "original_commit_id" : "df824a92121eb68849e474e87098a441d4e52926",
      "original_position" : 7,
      "path" : "test/functional/assumevalid.py",
      "position" : 7,
      "pull_request_review_id" : 58684704,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11121",
      "updated_at" : "2017-09-01T16:25:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135285612",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "body" : "Thanks for the reivew @promag \r\n\r\n> Have you thought of not having any node started automatically? There are some tests that start with stop_node(0)\r\n\r\nTests that don't need their nodes to start should override the `setup_network()` or `setup_nodes()` methods. The vast majority of tests require nodes to be started at the top of the test, so that's the default.\r\n\r\n> setup_clean_chain would be a start_node argument.\r\n\r\n`setup_clean_chain` is a property of the pre-mined chain. I don't think we should change it to be a property of the individual node (if you disagree please open a separate PR to demonstrate the change).",
      "created_at" : "2017-08-25T15:23:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11121#issuecomment-324953006",
      "id" : 324953006,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11121",
      "updated_at" : "2017-08-25T15:23:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/324953006",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11121#discussion_r136033058"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11121"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/136033058"
         }
      },
      "author_association" : "MEMBER",
      "body" : "This is already done by `setup_network`.\r\n\r\nSame for the line below.",
      "commit_id" : "7148b74dc39110f53c665b94fa9d994c6ad6dc1c",
      "created_at" : "2017-08-30T10:40:59Z",
      "diff_hunk" : "@@ -34,21 +34,18 @@ def __init__(self):\n         super().__init__()\n         self.num_nodes = 2\n         self.setup_clean_chain = True\n+        self.extra_args = [[\"-prematurewitness\", \"-walletprematurewitness\", \"-walletrbf={}\".format(i)]\n+                           for i in range(self.num_nodes)]\n \n-    def setup_network(self, split=False):\n-        extra_args = [[\"-prematurewitness\", \"-walletprematurewitness\", \"-walletrbf={}\".format(i)]\n-                      for i in range(self.num_nodes)]\n-        self.nodes = self.start_nodes(self.num_nodes, self.options.tmpdir, extra_args)\n-\n+    def run_test(self):\n         # Encrypt wallet for test_locked_wallet_fails test\n         self.nodes[1].node_encrypt_wallet(WALLET_PASSPHRASE)\n-        self.nodes[1] = self.start_node(1, self.options.tmpdir, extra_args[1])\n+        self.start_node(1)\n         self.nodes[1].walletpassphrase(WALLET_PASSPHRASE, WALLET_PASSPHRASE_TIMEOUT)\n \n         connect_nodes_bi(self.nodes, 0, 1)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11121#discussion_r136033058",
      "id" : 136033058,
      "original_commit_id" : "1a0801dc74286dc9b1dcbbfb671f9d5151adc111",
      "original_position" : 19,
      "path" : "test/functional/bumpfee.py",
      "position" : 24,
      "pull_request_review_id" : 59514903,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11121",
      "updated_at" : "2017-09-01T16:25:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/136033058",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11121#discussion_r136079025"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11121"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/136079025"
         }
      },
      "author_association" : "MEMBER",
      "body" : "L41 stops node 1 (the `encryptwallet` RPC shuts down the node), so I believe all the p2p connections are lost and we need to reconnect the nodes after restarting node 1.\r\n\r\nI've tested removing these two lines and the test fails (the next call to `sync_all()` fails)",
      "commit_id" : "7148b74dc39110f53c665b94fa9d994c6ad6dc1c",
      "created_at" : "2017-08-30T14:11:18Z",
      "diff_hunk" : "@@ -34,21 +34,18 @@ def __init__(self):\n         super().__init__()\n         self.num_nodes = 2\n         self.setup_clean_chain = True\n+        self.extra_args = [[\"-prematurewitness\", \"-walletprematurewitness\", \"-walletrbf={}\".format(i)]\n+                           for i in range(self.num_nodes)]\n \n-    def setup_network(self, split=False):\n-        extra_args = [[\"-prematurewitness\", \"-walletprematurewitness\", \"-walletrbf={}\".format(i)]\n-                      for i in range(self.num_nodes)]\n-        self.nodes = self.start_nodes(self.num_nodes, self.options.tmpdir, extra_args)\n-\n+    def run_test(self):\n         # Encrypt wallet for test_locked_wallet_fails test\n         self.nodes[1].node_encrypt_wallet(WALLET_PASSPHRASE)\n-        self.nodes[1] = self.start_node(1, self.options.tmpdir, extra_args[1])\n+        self.start_node(1)\n         self.nodes[1].walletpassphrase(WALLET_PASSPHRASE, WALLET_PASSPHRASE_TIMEOUT)\n \n         connect_nodes_bi(self.nodes, 0, 1)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11121#discussion_r136079025",
      "id" : 136079025,
      "in_reply_to_id" : 136033058,
      "original_commit_id" : "1a0801dc74286dc9b1dcbbfb671f9d5151adc111",
      "original_position" : 19,
      "path" : "test/functional/bumpfee.py",
      "position" : 24,
      "pull_request_review_id" : 59567426,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11121",
      "updated_at" : "2017-09-01T16:25:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/136079025",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11121#discussion_r136079813"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11121"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/136079813"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Sorry, missed that the node shuts down.",
      "commit_id" : "7148b74dc39110f53c665b94fa9d994c6ad6dc1c",
      "created_at" : "2017-08-30T14:13:54Z",
      "diff_hunk" : "@@ -34,21 +34,18 @@ def __init__(self):\n         super().__init__()\n         self.num_nodes = 2\n         self.setup_clean_chain = True\n+        self.extra_args = [[\"-prematurewitness\", \"-walletprematurewitness\", \"-walletrbf={}\".format(i)]\n+                           for i in range(self.num_nodes)]\n \n-    def setup_network(self, split=False):\n-        extra_args = [[\"-prematurewitness\", \"-walletprematurewitness\", \"-walletrbf={}\".format(i)]\n-                      for i in range(self.num_nodes)]\n-        self.nodes = self.start_nodes(self.num_nodes, self.options.tmpdir, extra_args)\n-\n+    def run_test(self):\n         # Encrypt wallet for test_locked_wallet_fails test\n         self.nodes[1].node_encrypt_wallet(WALLET_PASSPHRASE)\n-        self.nodes[1] = self.start_node(1, self.options.tmpdir, extra_args[1])\n+        self.start_node(1)\n         self.nodes[1].walletpassphrase(WALLET_PASSPHRASE, WALLET_PASSPHRASE_TIMEOUT)\n \n         connect_nodes_bi(self.nodes, 0, 1)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11121#discussion_r136079813",
      "id" : 136079813,
      "in_reply_to_id" : 136033058,
      "original_commit_id" : "1a0801dc74286dc9b1dcbbfb671f9d5151adc111",
      "original_position" : 19,
      "path" : "test/functional/bumpfee.py",
      "position" : 24,
      "pull_request_review_id" : 59568314,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11121",
      "updated_at" : "2017-09-01T16:25:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/136079813",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11121#discussion_r136600547"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11121"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/136600547"
         }
      },
      "author_association" : "MEMBER",
      "body" : "You are removing `timewait=900` from all calls but the first. I assume this does not cause issues?",
      "commit_id" : "7148b74dc39110f53c665b94fa9d994c6ad6dc1c",
      "created_at" : "2017-09-01T15:23:58Z",
      "diff_hunk" : "@@ -307,15 +313,15 @@ def has_block(index):\n \n         # stop node, start back up with auto-prune at 550MB, make sure still runs\n         self.stop_node(node_number)\n-        self.nodes[node_number] = self.start_node(node_number, self.options.tmpdir, [\"-prune=550\"], timewait=900)\n+        self.start_node(node_number, extra_args=[\"-prune=550\"])",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11121#discussion_r136600547",
      "id" : 136600547,
      "original_commit_id" : "1a0801dc74286dc9b1dcbbfb671f9d5151adc111",
      "original_position" : 62,
      "path" : "test/functional/pruning.py",
      "position" : 73,
      "pull_request_review_id" : 60166656,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11121",
      "updated_at" : "2017-09-01T16:25:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/136600547",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11121#discussion_r136604254"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11121"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/136604254"
         }
      },
      "author_association" : "MEMBER",
      "body" : "debug statement?",
      "commit_id" : "7148b74dc39110f53c665b94fa9d994c6ad6dc1c",
      "created_at" : "2017-09-01T15:40:02Z",
      "diff_hunk" : "@@ -208,8 +211,10 @@ def run_test(self):\n         zeroValueTxid= decRawTx['txid']\n         sendResp = self.nodes[1].sendrawtransaction(signedRawTx['hex'])\n \n+        # self.sync_all([self.nodes[0:3]])",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11121#discussion_r136604254",
      "id" : 136604254,
      "original_commit_id" : "1a0801dc74286dc9b1dcbbfb671f9d5151adc111",
      "original_position" : 107,
      "path" : "test/functional/wallet.py",
      "position" : null,
      "pull_request_review_id" : 60166656,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11121",
      "updated_at" : "2017-09-01T16:25:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/136604254",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11121#discussion_r136604279"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11121"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/136604279"
         }
      },
      "author_association" : "MEMBER",
      "body" : "debug statement?",
      "commit_id" : "7148b74dc39110f53c665b94fa9d994c6ad6dc1c",
      "created_at" : "2017-09-01T15:40:11Z",
      "diff_hunk" : "@@ -208,8 +211,10 @@ def run_test(self):\n         zeroValueTxid= decRawTx['txid']\n         sendResp = self.nodes[1].sendrawtransaction(signedRawTx['hex'])\n \n+        # self.sync_all([self.nodes[0:3]])\n         self.sync_all()\n         self.nodes[1].generate(1) #mine a block\n+        # self.sync_all([self.nodes[0:3]])",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11121#discussion_r136604279",
      "id" : 136604279,
      "original_commit_id" : "1a0801dc74286dc9b1dcbbfb671f9d5151adc111",
      "original_position" : 110,
      "path" : "test/functional/wallet.py",
      "position" : null,
      "pull_request_review_id" : 60166656,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11121",
      "updated_at" : "2017-09-01T16:25:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/136604279",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11121#discussion_r136604781"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11121"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/136604781"
         }
      },
      "author_association" : "MEMBER",
      "body" : "why not `self.nodes[:3]`?",
      "commit_id" : "7148b74dc39110f53c665b94fa9d994c6ad6dc1c",
      "created_at" : "2017-09-01T15:42:37Z",
      "diff_hunk" : "@@ -247,14 +254,16 @@ def run_test(self):\n \n         #restart the nodes with -walletbroadcast=1\n         self.stop_nodes()\n-        self.nodes = self.start_nodes(3, self.options.tmpdir)\n+        self.start_node(0)\n+        self.start_node(1)\n+        self.start_node(2)\n         connect_nodes_bi(self.nodes,0,1)\n         connect_nodes_bi(self.nodes,1,2)\n         connect_nodes_bi(self.nodes,0,2)\n-        sync_blocks(self.nodes)\n+        sync_blocks(self.nodes[0:2])",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11121#discussion_r136604781",
      "id" : 136604781,
      "original_commit_id" : "1a0801dc74286dc9b1dcbbfb671f9d5151adc111",
      "original_position" : 155,
      "path" : "test/functional/wallet.py",
      "position" : null,
      "pull_request_review_id" : 60166656,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11121",
      "updated_at" : "2017-09-01T16:25:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/136604781",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11121#discussion_r136604807"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11121"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/136604807"
         }
      },
      "author_association" : "MEMBER",
      "body" : "why not `self.nodes[:3]`?",
      "commit_id" : "7148b74dc39110f53c665b94fa9d994c6ad6dc1c",
      "created_at" : "2017-09-01T15:42:42Z",
      "diff_hunk" : "@@ -247,14 +254,16 @@ def run_test(self):\n \n         #restart the nodes with -walletbroadcast=1\n         self.stop_nodes()\n-        self.nodes = self.start_nodes(3, self.options.tmpdir)\n+        self.start_node(0)\n+        self.start_node(1)\n+        self.start_node(2)\n         connect_nodes_bi(self.nodes,0,1)\n         connect_nodes_bi(self.nodes,1,2)\n         connect_nodes_bi(self.nodes,0,2)\n-        sync_blocks(self.nodes)\n+        sync_blocks(self.nodes[0:2])\n \n         self.nodes[0].generate(1)\n-        sync_blocks(self.nodes)\n+        sync_blocks(self.nodes[0:2])",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11121#discussion_r136604807",
      "id" : 136604807,
      "original_commit_id" : "1a0801dc74286dc9b1dcbbfb671f9d5151adc111",
      "original_position" : 159,
      "path" : "test/functional/wallet.py",
      "position" : null,
      "pull_request_review_id" : 60166656,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11121",
      "updated_at" : "2017-09-01T16:25:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/136604807",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11121#discussion_r136608277"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11121"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/136608277"
         }
      },
      "author_association" : "MEMBER",
      "body" : "why is this changed in a refactoring commit?",
      "commit_id" : "7148b74dc39110f53c665b94fa9d994c6ad6dc1c",
      "created_at" : "2017-09-01T15:56:55Z",
      "diff_hunk" : "@@ -20,11 +20,9 @@\n                                  )\n \n class ZapWalletTXesTest (BitcoinTestFramework):\n-\n-    def __init__(self):\n-        super().__init__()\n+    def set_test_params(self):\n         self.setup_clean_chain = True\n-        self.num_nodes = 2\n+        self.num_nodes = 3",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11121#discussion_r136608277",
      "id" : 136608277,
      "original_commit_id" : "55073870db8ee2fd32a057fd51a21135bf984e54",
      "original_position" : 10,
      "path" : "test/functional/zapwallettxes.py",
      "position" : null,
      "pull_request_review_id" : 60166656,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11121",
      "updated_at" : "2017-09-01T16:25:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/136608277",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11121#discussion_r136613059"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11121"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/136613059"
         }
      },
      "author_association" : "MEMBER",
      "body" : "`rpc_timeout` is a property of `TestNode` set when instantiating the python object, not when starting up the bitcoind node.",
      "commit_id" : "7148b74dc39110f53c665b94fa9d994c6ad6dc1c",
      "created_at" : "2017-09-01T16:19:35Z",
      "diff_hunk" : "@@ -307,15 +313,15 @@ def has_block(index):\n \n         # stop node, start back up with auto-prune at 550MB, make sure still runs\n         self.stop_node(node_number)\n-        self.nodes[node_number] = self.start_node(node_number, self.options.tmpdir, [\"-prune=550\"], timewait=900)\n+        self.start_node(node_number, extra_args=[\"-prune=550\"])",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11121#discussion_r136613059",
      "id" : 136613059,
      "in_reply_to_id" : 136600547,
      "original_commit_id" : "1a0801dc74286dc9b1dcbbfb671f9d5151adc111",
      "original_position" : 62,
      "path" : "test/functional/pruning.py",
      "position" : 73,
      "pull_request_review_id" : 60181011,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11121",
      "updated_at" : "2017-09-01T16:25:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/136613059",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11121#discussion_r136613442"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11121"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/136613442"
         }
      },
      "author_association" : "MEMBER",
      "body" : "derp. Fixed",
      "commit_id" : "7148b74dc39110f53c665b94fa9d994c6ad6dc1c",
      "created_at" : "2017-09-01T16:21:24Z",
      "diff_hunk" : "@@ -208,8 +211,10 @@ def run_test(self):\n         zeroValueTxid= decRawTx['txid']\n         sendResp = self.nodes[1].sendrawtransaction(signedRawTx['hex'])\n \n+        # self.sync_all([self.nodes[0:3]])",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11121#discussion_r136613442",
      "id" : 136613442,
      "in_reply_to_id" : 136604254,
      "original_commit_id" : "1a0801dc74286dc9b1dcbbfb671f9d5151adc111",
      "original_position" : 107,
      "path" : "test/functional/wallet.py",
      "position" : null,
      "pull_request_review_id" : 60181426,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11121",
      "updated_at" : "2017-09-01T16:25:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/136613442",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11121#discussion_r136613456"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11121"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/136613456"
         }
      },
      "author_association" : "MEMBER",
      "body" : "yep",
      "commit_id" : "7148b74dc39110f53c665b94fa9d994c6ad6dc1c",
      "created_at" : "2017-09-01T16:21:29Z",
      "diff_hunk" : "@@ -208,8 +211,10 @@ def run_test(self):\n         zeroValueTxid= decRawTx['txid']\n         sendResp = self.nodes[1].sendrawtransaction(signedRawTx['hex'])\n \n+        # self.sync_all([self.nodes[0:3]])\n         self.sync_all()\n         self.nodes[1].generate(1) #mine a block\n+        # self.sync_all([self.nodes[0:3]])",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11121#discussion_r136613456",
      "id" : 136613456,
      "in_reply_to_id" : 136604279,
      "original_commit_id" : "1a0801dc74286dc9b1dcbbfb671f9d5151adc111",
      "original_position" : 110,
      "path" : "test/functional/wallet.py",
      "position" : null,
      "pull_request_review_id" : 60181447,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11121",
      "updated_at" : "2017-09-01T16:25:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/136613456",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11121#discussion_r136615556"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11121"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/136615556"
         }
      },
      "author_association" : "MEMBER",
      "body" : "fixed",
      "commit_id" : "7148b74dc39110f53c665b94fa9d994c6ad6dc1c",
      "created_at" : "2017-09-01T16:32:06Z",
      "diff_hunk" : "@@ -247,14 +254,16 @@ def run_test(self):\n \n         #restart the nodes with -walletbroadcast=1\n         self.stop_nodes()\n-        self.nodes = self.start_nodes(3, self.options.tmpdir)\n+        self.start_node(0)\n+        self.start_node(1)\n+        self.start_node(2)\n         connect_nodes_bi(self.nodes,0,1)\n         connect_nodes_bi(self.nodes,1,2)\n         connect_nodes_bi(self.nodes,0,2)\n-        sync_blocks(self.nodes)\n+        sync_blocks(self.nodes[0:2])",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11121#discussion_r136615556",
      "id" : 136615556,
      "in_reply_to_id" : 136604781,
      "original_commit_id" : "1a0801dc74286dc9b1dcbbfb671f9d5151adc111",
      "original_position" : 155,
      "path" : "test/functional/wallet.py",
      "position" : null,
      "pull_request_review_id" : 60183919,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11121",
      "updated_at" : "2017-09-01T16:32:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/136615556",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11121#discussion_r136615574"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11121"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/136615574"
         }
      },
      "author_association" : "MEMBER",
      "body" : "fixed",
      "commit_id" : "7148b74dc39110f53c665b94fa9d994c6ad6dc1c",
      "created_at" : "2017-09-01T16:32:11Z",
      "diff_hunk" : "@@ -247,14 +254,16 @@ def run_test(self):\n \n         #restart the nodes with -walletbroadcast=1\n         self.stop_nodes()\n-        self.nodes = self.start_nodes(3, self.options.tmpdir)\n+        self.start_node(0)\n+        self.start_node(1)\n+        self.start_node(2)\n         connect_nodes_bi(self.nodes,0,1)\n         connect_nodes_bi(self.nodes,1,2)\n         connect_nodes_bi(self.nodes,0,2)\n-        sync_blocks(self.nodes)\n+        sync_blocks(self.nodes[0:2])\n \n         self.nodes[0].generate(1)\n-        sync_blocks(self.nodes)\n+        sync_blocks(self.nodes[0:2])",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11121#discussion_r136615574",
      "id" : 136615574,
      "in_reply_to_id" : 136604807,
      "original_commit_id" : "1a0801dc74286dc9b1dcbbfb671f9d5151adc111",
      "original_position" : 159,
      "path" : "test/functional/wallet.py",
      "position" : null,
      "pull_request_review_id" : 60183939,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11121",
      "updated_at" : "2017-09-01T16:32:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/136615574",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11121#discussion_r136615585"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11121"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/136615585"
         }
      },
      "author_association" : "MEMBER",
      "body" : "fixed",
      "commit_id" : "7148b74dc39110f53c665b94fa9d994c6ad6dc1c",
      "created_at" : "2017-09-01T16:32:13Z",
      "diff_hunk" : "@@ -20,11 +20,9 @@\n                                  )\n \n class ZapWalletTXesTest (BitcoinTestFramework):\n-\n-    def __init__(self):\n-        super().__init__()\n+    def set_test_params(self):\n         self.setup_clean_chain = True\n-        self.num_nodes = 2\n+        self.num_nodes = 3",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11121#discussion_r136615585",
      "id" : 136615585,
      "in_reply_to_id" : 136608277,
      "original_commit_id" : "55073870db8ee2fd32a057fd51a21135bf984e54",
      "original_position" : 10,
      "path" : "test/functional/zapwallettxes.py",
      "position" : null,
      "pull_request_review_id" : 60183957,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11121",
      "updated_at" : "2017-09-01T16:32:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/136615585",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Thanks @MarcoFalke . Review comments addressed.",
      "created_at" : "2017-09-01T16:32:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11121#issuecomment-326626127",
      "id" : 326626127,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11121",
      "updated_at" : "2017-09-01T16:32:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/326626127",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "re-utACK 7148b74dc39110f53c665b94fa9d994c6ad6dc1c",
      "created_at" : "2017-09-01T16:44:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11121#issuecomment-326628970",
      "id" : 326628970,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11121",
      "updated_at" : "2017-09-01T16:44:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/326628970",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   }
]
