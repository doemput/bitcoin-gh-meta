[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11177#discussion_r135500505"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11177"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135500505"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Upper case RPC. Add default value.",
      "commit_id" : "4aa503d55210a751018d6a2b856f382241dac8f5",
      "created_at" : "2017-08-28T11:24:57Z",
      "diff_hunk" : "@@ -453,6 +453,7 @@ std::string HelpMessage(HelpMessageMode mode)\n         strUsage += HelpMessageOpt(\"-limitdescendantcount=<n>\", strprintf(\"Do not accept transactions if any ancestor would have <n> or more in-mempool descendants (default: %u)\", DEFAULT_DESCENDANT_LIMIT));\n         strUsage += HelpMessageOpt(\"-limitdescendantsize=<n>\", strprintf(\"Do not accept transactions if any ancestor would have more than <n> kilobytes of in-mempool descendants (default: %u).\", DEFAULT_DESCENDANT_SIZE_LIMIT));\n         strUsage += HelpMessageOpt(\"-vbparams=deployment:start:end\", \"Use given start/end times for specified version bits deployment (regtest-only)\");\n+        strUsage += HelpMessageOpt(\"-defaultwitnessaddress\", \"Return witness addresses by default in rpc calls\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11177#discussion_r135500505",
      "id" : 135500505,
      "original_commit_id" : "d9489cf3a12555b0f8c7701ac940e64b38df42b8",
      "original_position" : 4,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_review_id" : 58916654,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11177",
      "updated_at" : "2017-09-01T07:01:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135500505",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11177#discussion_r135500859"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11177"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135500859"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "This call is deprecated. Don't change it.",
      "commit_id" : "4aa503d55210a751018d6a2b856f382241dac8f5",
      "created_at" : "2017-08-28T11:27:29Z",
      "diff_hunk" : "@@ -120,6 +120,8 @@ static const CRPCConvertParam vRPCConvertParams[] =\n     { \"estimaterawfee\", 1, \"threshold\" },\n     { \"prioritisetransaction\", 1, \"dummy\" },\n     { \"prioritisetransaction\", 2, \"fee_delta\" },\n+    { \"getaccountaddress\", 1, \"witness\" },",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11177#discussion_r135500859",
      "id" : 135500859,
      "original_commit_id" : "d9489cf3a12555b0f8c7701ac940e64b38df42b8",
      "original_position" : 4,
      "path" : "src/rpc/client.cpp",
      "position" : 4,
      "pull_request_review_id" : 58916654,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11177",
      "updated_at" : "2017-09-01T07:01:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135500859",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11177#discussion_r135501807"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11177"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135501807"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Remove this test, `isNull()` below is enough because `request.params[]` returns null `UniValue` for out of bounds elements. ",
      "commit_id" : "4aa503d55210a751018d6a2b856f382241dac8f5",
      "created_at" : "2017-08-28T11:33:06Z",
      "diff_hunk" : "@@ -221,10 +224,25 @@ UniValue getnewaddress(const JSONRPCRequest& request)\n         throw JSONRPCError(RPC_WALLET_KEYPOOL_RAN_OUT, \"Error: Keypool ran out, please call keypoolrefill first\");\n     }\n     CKeyID keyID = newKey.GetID();\n+    CBitcoinAddress addr = CBitcoinAddress(keyID);\n \n     pwallet->SetAddressBook(keyID, strAccount, \"receive\");\n+    bool witnessify = gArgs.GetBoolArg(\"-defaultwitnessaddress\", false);\n+    if (request.params.size() >= 2) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11177#discussion_r135501807",
      "id" : 135501807,
      "original_commit_id" : "1e82c8aef48090d4beaeb4d80ee1ceaad6d8d51b",
      "original_position" : 33,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 58916654,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11177",
      "updated_at" : "2017-09-01T07:01:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135501807",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11177#discussion_r135501862"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11177"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135501862"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Wrong indentation.",
      "commit_id" : "4aa503d55210a751018d6a2b856f382241dac8f5",
      "created_at" : "2017-08-28T11:33:31Z",
      "diff_hunk" : "@@ -221,10 +224,25 @@ UniValue getnewaddress(const JSONRPCRequest& request)\n         throw JSONRPCError(RPC_WALLET_KEYPOOL_RAN_OUT, \"Error: Keypool ran out, please call keypoolrefill first\");\n     }\n     CKeyID keyID = newKey.GetID();\n+    CBitcoinAddress addr = CBitcoinAddress(keyID);\n \n     pwallet->SetAddressBook(keyID, strAccount, \"receive\");\n+    bool witnessify = gArgs.GetBoolArg(\"-defaultwitnessaddress\", false);\n+    if (request.params.size() >= 2) {\n+        if (!request.params[1].isNull()) {\n+            witnessify = request.params[1].get_bool();\n+        }\n+    }\n \n-    return CBitcoinAddress(keyID).ToString();\n+    if (witnessify) {\n+\t\tWitnessifier w(pwallet);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11177#discussion_r135501862",
      "id" : 135501862,
      "original_commit_id" : "1e82c8aef48090d4beaeb4d80ee1ceaad6d8d51b",
      "original_position" : 41,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 58916654,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11177",
      "updated_at" : "2017-09-01T07:01:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135501862",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11177#discussion_r135502061"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11177"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135502061"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "`if (!request.params[1].isNull())` instead. See developer notes.",
      "commit_id" : "4aa503d55210a751018d6a2b856f382241dac8f5",
      "created_at" : "2017-08-28T11:34:56Z",
      "diff_hunk" : "@@ -1265,7 +1266,11 @@ UniValue addwitnessaddress(const JSONRPCRequest& request)\n         throw JSONRPCError(RPC_WALLET_ERROR, \"Public key or redeemscript not known to wallet, or the key is uncompressed\");\n     }\n \n-    pwallet->SetAddressBook(w.result, \"\", \"receive\");\n+    std::string strLabel = \"\";\n+    if (request.params.size() >= 2) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11177#discussion_r135502061",
      "id" : 135502061,
      "original_commit_id" : "1498c55dd3c856c92a882c773b0206bc3b31d3e3",
      "original_position" : 24,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 58916654,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11177",
      "updated_at" : "2017-09-01T07:01:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135502061",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11177#discussion_r135502370"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11177"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135502370"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Just `std::string label;`",
      "commit_id" : "4aa503d55210a751018d6a2b856f382241dac8f5",
      "created_at" : "2017-08-28T11:36:40Z",
      "diff_hunk" : "@@ -1265,7 +1266,11 @@ UniValue addwitnessaddress(const JSONRPCRequest& request)\n         throw JSONRPCError(RPC_WALLET_ERROR, \"Public key or redeemscript not known to wallet, or the key is uncompressed\");\n     }\n \n-    pwallet->SetAddressBook(w.result, \"\", \"receive\");\n+    std::string strLabel = \"\";",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11177#discussion_r135502370",
      "id" : 135502370,
      "original_commit_id" : "1498c55dd3c856c92a882c773b0206bc3b31d3e3",
      "original_position" : 23,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 58916654,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11177",
      "updated_at" : "2017-09-01T07:01:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135502370",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "body" : "Please don't mention users in commit messages. You also have to fixup some commits, for instance,  you should add `-defaultwitnessaddress` help message in the first commit you use the argument.",
      "created_at" : "2017-08-28T14:19:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11177#issuecomment-325366665",
      "id" : 325366665,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11177",
      "updated_at" : "2017-08-28T14:19:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/325366665",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "body" : "I don't think we should be making witness addresses configurable on a per-address basis. Because of automatic keypool topic during rescan in HD mode, we need to automatically witnessify newly created keys anyway, as soon as there is a possibility of a single witness address been given out.\r\n\r\nI'd prefer a wallet-wide setting that turns all addresses (including change) into witnesses (which will require a new backup of the wallet file, so it can't be done automatically).",
      "created_at" : "2017-08-28T17:51:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11177#issuecomment-325426131",
      "id" : 325426131,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11177",
      "updated_at" : "2017-08-28T17:57:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/325426131",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Rebased off master, added support for P2SH wrapped change addresses when using -defaultwitnessaddress",
      "created_at" : "2017-09-01T07:02:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11177#issuecomment-326506138",
      "id" : 326506138,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11177",
      "updated_at" : "2017-09-01T07:02:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/326506138",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/20778324?v=4",
         "events_url" : "https://api.github.com/users/rawodb/events{/privacy}",
         "followers_url" : "https://api.github.com/users/rawodb/followers",
         "following_url" : "https://api.github.com/users/rawodb/following{/other_user}",
         "gists_url" : "https://api.github.com/users/rawodb/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/rawodb",
         "id" : 20778324,
         "login" : "rawodb",
         "organizations_url" : "https://api.github.com/users/rawodb/orgs",
         "received_events_url" : "https://api.github.com/users/rawodb/received_events",
         "repos_url" : "https://api.github.com/users/rawodb/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/rawodb/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/rawodb/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/rawodb"
      }
   }
]
