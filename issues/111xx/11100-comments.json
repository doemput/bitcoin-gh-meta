[
   {
      "body" : "NACK, these are not sensible. If anything, they should be reduced.",
      "created_at" : "2017-08-20T21:59:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11100#issuecomment-323614718",
      "id" : 323614718,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11100",
      "updated_at" : "2017-08-20T21:59:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/323614718",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "Please, not again, no more defaults fighting...\r\n",
      "created_at" : "2017-08-21T07:59:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11100#issuecomment-323673693",
      "id" : 323673693,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11100",
      "updated_at" : "2017-08-21T07:59:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/323673693",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "ACK. The current settings are reprehensible: They result in _guaranteed_ income reduction for anyone who follows them for almost no measurable benefit-- because as we see almost everyone maxes them out regardless.   The losses are also not trivial, but are often about 5% of mining income-- which wasn't the case when they were last discussed but is now.\r\n\r\nLuke's argument rests on an unlikely and now conclusively disproven theory that miners will individually act against their own short term economic best interests to preserve the usability of the network. This is demonstratively false and even if it were true, setting an economically rational default wouldn't change it. (these hypothetical altruistic miners would simply lower their defaults, if they existed)\r\n\r\nTo the limited extent that anyone does mine with these defaults (not much) they also make fee estimates less reliable by adding additional variance to the capacity of the network.  A few blocks showing up underfilled is doing no one any favors-- it doesn't meaningfully reduce the initial synchronization time. All it does is lower the revenue of those who do it.  To the extent that any of that is driven by a genuine desire to aid the network (rather than just misconfiguration)-- do we really want people who want to help to be less successful (and thus less able to add hashpower and increase their influence)\r\n\r\nSetting the defaults in a way which virtually no one will use also has the problem of causing people to change the default and then when the way the options works needs to change their outdated settings can cause unexpected behavior. For example, there are many miners who have set the max size to a million bytes to override these broken defaults. And then with segwit they'll be producing undersized blocks unintentionally.  They may even be paying enough attention to realize they need to change them, only to set them to 2 million bytes and _still_ produce undefilled blocks.\r\n\r\nSetting a reduced default against the traffic in the network today violates the principle the software should act in the interest of the people using it and in doing so shows disrespect where none is intended, it violates the principle that absent significant harm to it users it should act in the public interest (by making fee estimation less reliable). \r\n\r\nIMO if it isn't reduced it should be removed completely. At least there is a strong argument that miners producing blocks which fail to confirm all transactions is harmful to the public interest, and improvements in block propagation have largely eliminated size based considerations as legitimate reasons to choose to produce a smaller block.  (Moreover if one was for some reason still concerned about size impacts on propagation the received time sensitive framework from Suhas would be the right way to go about it, not simply reducing the maximum size.)",
      "created_at" : "2017-08-23T00:17:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11100#issuecomment-324185973",
      "id" : 324185973,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11100",
      "updated_at" : "2017-08-23T00:22:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/324185973",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/858454?v=4",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "Previous discussion was here (possibly more, but these I could find in a quick search):\r\n\r\n- Increase DEFAULT_BLOCK_MAX_SIZE to 1MB #6231\r\n- Increase DEFAULT_BLOCK_MAX_SIZE to 1MB #7622\r\n- Updating default max block size #8268\r\n\r\nAs we know all miners will override the defaults, and for other users the value doesn't matter, I think this is a pointless waste of energy, creating angry discussions unnecessarily.\r\n\r\nI'm unsubscribing from this thread.",
      "created_at" : "2017-08-23T10:31:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11100#issuecomment-324289110",
      "id" : 324289110,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11100",
      "updated_at" : "2017-08-23T10:31:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/324289110",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Hi,\r\nthis make sense to me. From pool operator's prospective, we set this to max for the reasons stated by Greg. What is confusing is that without researching the code, it is not quite clear how each of the limits influence each other. A sane default for us was just to set blockmaxweight, having the core derive the blockmaxsize.\r\nJan ",
      "created_at" : "2017-08-24T06:10:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11100#issuecomment-324542738",
      "id" : 324542738,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11100",
      "updated_at" : "2017-08-24T06:10:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/324542738",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/8446970?v=4",
         "events_url" : "https://api.github.com/users/honzik666/events{/privacy}",
         "followers_url" : "https://api.github.com/users/honzik666/followers",
         "following_url" : "https://api.github.com/users/honzik666/following{/other_user}",
         "gists_url" : "https://api.github.com/users/honzik666/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/honzik666",
         "id" : 8446970,
         "login" : "honzik666",
         "organizations_url" : "https://api.github.com/users/honzik666/orgs",
         "received_events_url" : "https://api.github.com/users/honzik666/received_events",
         "repos_url" : "https://api.github.com/users/honzik666/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/honzik666/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/honzik666/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/honzik666"
      }
   },
   {
      "body" : "@honzik666 Right, the correct settings are to remove any mention of blockmaxsize from your configuration and set only blockmaxweight=4000000.\r\n\r\nBlockmaxsize is a legacy option that wasn't even existent at first in the segwit settings. It doesn't make sense to use it, setting it (at least to anything other than the maximum of 4 million) will just lower your income.\r\n",
      "created_at" : "2017-08-24T08:53:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11100#issuecomment-324575290",
      "id" : 324575290,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11100",
      "updated_at" : "2017-08-24T08:54:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/324575290",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/858454?v=4",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "Pushed a new commit to hopefully help address the confusion that a few people have had on these options, which also fixes a bug or two in the process.",
      "created_at" : "2017-08-24T15:42:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11100#issuecomment-324674358",
      "id" : 324674358,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11100",
      "updated_at" : "2017-08-24T15:42:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/324674358",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/649246?v=4",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11100#discussion_r135061868"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11100"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135061868"
         }
      },
      "author_association" : "OWNER",
      "body" : "delete instead?",
      "commit_id" : "6f703e9bf11c5f2fcb0fca0e4243fce6b4b9d35a",
      "created_at" : "2017-08-24T16:16:24Z",
      "diff_hunk" : "@@ -17,9 +17,9 @@ class CCoinsViewCache;\n class CTxOut;\n \n /** Default for -blockmaxsize, which controls the maximum size of block the mining code will create **/\n-static const unsigned int DEFAULT_BLOCK_MAX_SIZE = 750000;\n+static const unsigned int DEFAULT_BLOCK_MAX_SIZE = MAX_BLOCK_SERIALIZED_SIZE - 1000;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11100#discussion_r135061868",
      "id" : 135061868,
      "original_commit_id" : "8893ed778686d3dc64042997aaf6f1df4dc31ad1",
      "original_position" : 5,
      "path" : "src/policy/policy.h",
      "position" : null,
      "pull_request_review_id" : 58431221,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11100",
      "updated_at" : "2017-09-11T19:51:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135061868",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11100#discussion_r135098224"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11100"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135098224"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Done.",
      "commit_id" : "6f703e9bf11c5f2fcb0fca0e4243fce6b4b9d35a",
      "created_at" : "2017-08-24T18:43:57Z",
      "diff_hunk" : "@@ -17,9 +17,9 @@ class CCoinsViewCache;\n class CTxOut;\n \n /** Default for -blockmaxsize, which controls the maximum size of block the mining code will create **/\n-static const unsigned int DEFAULT_BLOCK_MAX_SIZE = 750000;\n+static const unsigned int DEFAULT_BLOCK_MAX_SIZE = MAX_BLOCK_SERIALIZED_SIZE - 1000;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11100#discussion_r135098224",
      "id" : 135098224,
      "in_reply_to_id" : 135061868,
      "original_commit_id" : "8893ed778686d3dc64042997aaf6f1df4dc31ad1",
      "original_position" : 5,
      "path" : "src/policy/policy.h",
      "position" : null,
      "pull_request_review_id" : 58472617,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11100",
      "updated_at" : "2017-09-11T19:51:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135098224",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/649246?v=4",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "Concept ACK as discussed in meeting",
      "created_at" : "2017-08-24T19:25:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11100#issuecomment-324732731",
      "id" : 324732731,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11100",
      "updated_at" : "2017-08-24T19:25:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/324732731",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/3211283?v=4",
         "events_url" : "https://api.github.com/users/MeshCollider/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MeshCollider/followers",
         "following_url" : "https://api.github.com/users/MeshCollider/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MeshCollider/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MeshCollider",
         "id" : 3211283,
         "login" : "MeshCollider",
         "organizations_url" : "https://api.github.com/users/MeshCollider/orgs",
         "received_events_url" : "https://api.github.com/users/MeshCollider/received_events",
         "repos_url" : "https://api.github.com/users/MeshCollider/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MeshCollider/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MeshCollider/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MeshCollider"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11100#discussion_r135108409"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11100"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135108409"
         }
      },
      "author_association" : "OWNER",
      "body" : "Add an `else` branch here that gives an error \"-blockmaxsize and -blockmaxweight cannot be set simultaneously\".",
      "commit_id" : "6f703e9bf11c5f2fcb0fca0e4243fce6b4b9d35a",
      "created_at" : "2017-08-24T19:27:21Z",
      "diff_hunk" : "@@ -86,17 +80,14 @@ static BlockAssembler::Options DefaultOptions(const CChainParams& params)\n     // If both are given, restrict both.\n     BlockAssembler::Options options;\n     options.nBlockMaxWeight = DEFAULT_BLOCK_MAX_WEIGHT;\n-    options.nBlockMaxSize = DEFAULT_BLOCK_MAX_SIZE;\n     bool fWeightSet = false;\n     if (gArgs.IsArgSet(\"-blockmaxweight\")) {\n         options.nBlockMaxWeight = gArgs.GetArg(\"-blockmaxweight\", DEFAULT_BLOCK_MAX_WEIGHT);\n-        options.nBlockMaxSize = MAX_BLOCK_SERIALIZED_SIZE;\n         fWeightSet = true;\n     }\n     if (gArgs.IsArgSet(\"-blockmaxsize\")) {\n-        options.nBlockMaxSize = gArgs.GetArg(\"-blockmaxsize\", DEFAULT_BLOCK_MAX_SIZE);\n         if (!fWeightSet) {\n-            options.nBlockMaxWeight = options.nBlockMaxSize * WITNESS_SCALE_FACTOR;\n+            options.nBlockMaxWeight = gArgs.GetArg(\"-blockmaxsize\", DEFAULT_BLOCK_MAX_WEIGHT / WITNESS_SCALE_FACTOR) * WITNESS_SCALE_FACTOR;\n         }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11100#discussion_r135108409",
      "id" : 135108409,
      "original_commit_id" : "10d21dce79bebdad33d2a68a29664aea7959ed3e",
      "original_position" : 43,
      "path" : "src/miner.cpp",
      "position" : null,
      "pull_request_review_id" : 58484216,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11100",
      "updated_at" : "2017-09-11T19:51:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135108409",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Concept ACK",
      "created_at" : "2017-08-24T19:33:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11100#issuecomment-324734714",
      "id" : 324734714,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11100",
      "updated_at" : "2017-08-24T19:33:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/324734714",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/4360349?v=4",
         "events_url" : "https://api.github.com/users/morcos/events{/privacy}",
         "followers_url" : "https://api.github.com/users/morcos/followers",
         "following_url" : "https://api.github.com/users/morcos/following{/other_user}",
         "gists_url" : "https://api.github.com/users/morcos/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/morcos",
         "id" : 4360349,
         "login" : "morcos",
         "organizations_url" : "https://api.github.com/users/morcos/orgs",
         "received_events_url" : "https://api.github.com/users/morcos/received_events",
         "repos_url" : "https://api.github.com/users/morcos/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/morcos/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/morcos/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/morcos"
      }
   },
   {
      "body" : "Miners have in recent years maxed out 1 MB. That is completely different from 4 MB, and does not prove they will increase to 4 MB immediately in any sense.\r\n\r\n> Luke's argument rests on an unlikely and now conclusively disproven theory that miners will individually act against their own short term economic best interests to preserve the usability of the network. \r\n\r\nIt has not been disproven. Miners have been given bad advice.\r\n\r\n> setting an economically rational default wouldn't change it.\r\n\r\nOnly in the case that the default doesn't matter. In which case, the argument to change the default falls apart completely.\r\n\r\n> For example, there are many miners who have set the max size to a million bytes to override these broken defaults. And then with segwit they'll be producing undersized blocks unintentionally. \r\n\r\nIf they want 1 MB, then their configuration of 1 MB should get them 1 MB. *There is no such thing as undersized blocks.*\r\n\r\n> Setting a reduced default against the traffic in the network today violates the principle the software should act in the interest of the people using it and in doing so shows disrespect where none is intended,\r\n\r\nNo such principle has been established. Defaults should within reason be what is best for Bitcoin as a whole.\r\n\r\n> it violates the principle that absent significant harm to it users it should act in the public interest (by making fee estimation less reliable).\r\n\r\nFee estimation is an unrelated matter. If it can't handle a variety of block sizes, that's a bug in the estimation logic.\r\n\r\n> improvements in block propagation have largely eliminated size based considerations as legitimate reasons to choose to produce a smaller block.\r\n\r\nNo, they haven't. Block propagation has been \"solved\" by centralised relay networks (FIBRE) and SPV mining, both of which are harmful to the network and not real solutions. Additionally, the most bandwidth-contrained users run in `blocksonly` mode, which doesn't benefit from compact blocks or other such improvements. Furthermore, none of this addresses the issue of block*chain* size and IBD, at all.\r\n\r\nAgain, NACK.\r\n\r\n(Maybe #3229 can be reopened?)",
      "created_at" : "2017-08-24T19:37:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11100#issuecomment-324735610",
      "id" : 324735610,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11100",
      "updated_at" : "2017-08-24T19:37:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/324735610",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "ACK\r\n\r\n> Block propagation has been \"solved\" by centralised relay networks (FIBRE) and SPV mining, both of which are harmful to the network and not real solutions.\r\n\r\nEven without FIBRE or SPV mining it makes individual economic sense for miners to mine max weight blocks due to relatively high transaction fees and compact blocks having a significant improvement on propagation.",
      "created_at" : "2017-08-24T20:22:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11100#issuecomment-324746479",
      "id" : 324746479,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11100",
      "updated_at" : "2017-08-24T20:22:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/324746479",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3298484?v=4",
         "events_url" : "https://api.github.com/users/jameshilliard/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jameshilliard/followers",
         "following_url" : "https://api.github.com/users/jameshilliard/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jameshilliard/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jameshilliard",
         "id" : 3298484,
         "login" : "jameshilliard",
         "organizations_url" : "https://api.github.com/users/jameshilliard/orgs",
         "received_events_url" : "https://api.github.com/users/jameshilliard/received_events",
         "repos_url" : "https://api.github.com/users/jameshilliard/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jameshilliard/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jameshilliard/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jameshilliard"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11100#discussion_r135122709"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11100"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135122709"
         }
      },
      "author_association" : "MEMBER",
      "body" : "The comment above needs to be updated to remove reference to serialized size.",
      "commit_id" : "6f703e9bf11c5f2fcb0fca0e4243fce6b4b9d35a",
      "created_at" : "2017-08-24T20:32:04Z",
      "diff_hunk" : "@@ -241,19 +230,11 @@ bool BlockAssembler::TestPackage(uint64_t packageSize, int64_t packageSigOpsCost\n // - serialized size (in case -blockmaxsize is in use)\n bool BlockAssembler::TestPackageTransactions(const CTxMemPool::setEntries& package)\n {\n-    uint64_t nPotentialBlockSize = nBlockSize; // only used with fNeedSizeAccounting",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11100#discussion_r135122709",
      "id" : 135122709,
      "original_commit_id" : "44dfcd23ac58051068e4b8a904e0e3e66245e098",
      "original_position" : 66,
      "path" : "src/miner.cpp",
      "position" : null,
      "pull_request_review_id" : 58501092,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11100",
      "updated_at" : "2017-09-11T19:51:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135122709",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/7463573?v=4",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11100#discussion_r135124178"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11100"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135124178"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Isn't the `- 4000` unnecessary here?  We already separately reserve space for the coinbase in CreateNewBlock.",
      "commit_id" : "6f703e9bf11c5f2fcb0fca0e4243fce6b4b9d35a",
      "created_at" : "2017-08-24T20:37:48Z",
      "diff_hunk" : "@@ -16,10 +16,8 @@\n class CCoinsViewCache;\n class CTxOut;\n \n-/** Default for -blockmaxsize, which controls the maximum size of block the mining code will create **/\n-static const unsigned int DEFAULT_BLOCK_MAX_SIZE = 750000;\n /** Default for -blockmaxweight, which controls the range of block weights the mining code will create **/\n-static const unsigned int DEFAULT_BLOCK_MAX_WEIGHT = 3000000;\n+static const unsigned int DEFAULT_BLOCK_MAX_WEIGHT = MAX_BLOCK_WEIGHT - 4000;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11100#discussion_r135124178",
      "id" : 135124178,
      "original_commit_id" : "10d21dce79bebdad33d2a68a29664aea7959ed3e",
      "original_position" : 8,
      "path" : "src/policy/policy.h",
      "position" : 8,
      "pull_request_review_id" : 58501092,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11100",
      "updated_at" : "2017-09-11T19:51:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135124178",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/7463573?v=4",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "body" : "There are real use-cases to set both blockmaxsize and blockmaxweight: one might want to mine a block that has at most a weight of 3M, but never more than 1 MB for example.",
      "created_at" : "2017-08-24T20:49:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11100#issuecomment-324753458",
      "id" : 324753458,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11100",
      "updated_at" : "2017-08-24T20:49:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/324753458",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11100#discussion_r135136034"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11100"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135136034"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "We've always had it and I'm skeptical of just removing it...I could absolutely see people accidentally building invalid blocks if we just remove it and they dont notice (which, given how much people appear to read release notes.......)",
      "commit_id" : "6f703e9bf11c5f2fcb0fca0e4243fce6b4b9d35a",
      "created_at" : "2017-08-24T21:30:51Z",
      "diff_hunk" : "@@ -16,10 +16,8 @@\n class CCoinsViewCache;\n class CTxOut;\n \n-/** Default for -blockmaxsize, which controls the maximum size of block the mining code will create **/\n-static const unsigned int DEFAULT_BLOCK_MAX_SIZE = 750000;\n /** Default for -blockmaxweight, which controls the range of block weights the mining code will create **/\n-static const unsigned int DEFAULT_BLOCK_MAX_WEIGHT = 3000000;\n+static const unsigned int DEFAULT_BLOCK_MAX_WEIGHT = MAX_BLOCK_WEIGHT - 4000;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11100#discussion_r135136034",
      "id" : 135136034,
      "in_reply_to_id" : 135124178,
      "original_commit_id" : "10d21dce79bebdad33d2a68a29664aea7959ed3e",
      "original_position" : 8,
      "path" : "src/policy/policy.h",
      "position" : 8,
      "pull_request_review_id" : 58516508,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11100",
      "updated_at" : "2017-09-11T19:51:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135136034",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/649246?v=4",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11100#discussion_r135136915"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11100"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135136915"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Fixed.",
      "commit_id" : "6f703e9bf11c5f2fcb0fca0e4243fce6b4b9d35a",
      "created_at" : "2017-08-24T21:35:18Z",
      "diff_hunk" : "@@ -241,19 +230,11 @@ bool BlockAssembler::TestPackage(uint64_t packageSize, int64_t packageSigOpsCost\n // - serialized size (in case -blockmaxsize is in use)\n bool BlockAssembler::TestPackageTransactions(const CTxMemPool::setEntries& package)\n {\n-    uint64_t nPotentialBlockSize = nBlockSize; // only used with fNeedSizeAccounting",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11100#discussion_r135136915",
      "id" : 135136915,
      "in_reply_to_id" : 135122709,
      "original_commit_id" : "44dfcd23ac58051068e4b8a904e0e3e66245e098",
      "original_position" : 66,
      "path" : "src/miner.cpp",
      "position" : null,
      "pull_request_review_id" : 58517498,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11100",
      "updated_at" : "2017-09-11T19:51:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135136915",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/649246?v=4",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11100#discussion_r135136917"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11100"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135136917"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Done.",
      "commit_id" : "6f703e9bf11c5f2fcb0fca0e4243fce6b4b9d35a",
      "created_at" : "2017-08-24T21:35:19Z",
      "diff_hunk" : "@@ -86,17 +80,14 @@ static BlockAssembler::Options DefaultOptions(const CChainParams& params)\n     // If both are given, restrict both.\n     BlockAssembler::Options options;\n     options.nBlockMaxWeight = DEFAULT_BLOCK_MAX_WEIGHT;\n-    options.nBlockMaxSize = DEFAULT_BLOCK_MAX_SIZE;\n     bool fWeightSet = false;\n     if (gArgs.IsArgSet(\"-blockmaxweight\")) {\n         options.nBlockMaxWeight = gArgs.GetArg(\"-blockmaxweight\", DEFAULT_BLOCK_MAX_WEIGHT);\n-        options.nBlockMaxSize = MAX_BLOCK_SERIALIZED_SIZE;\n         fWeightSet = true;\n     }\n     if (gArgs.IsArgSet(\"-blockmaxsize\")) {\n-        options.nBlockMaxSize = gArgs.GetArg(\"-blockmaxsize\", DEFAULT_BLOCK_MAX_SIZE);\n         if (!fWeightSet) {\n-            options.nBlockMaxWeight = options.nBlockMaxSize * WITNESS_SCALE_FACTOR;\n+            options.nBlockMaxWeight = gArgs.GetArg(\"-blockmaxsize\", DEFAULT_BLOCK_MAX_WEIGHT / WITNESS_SCALE_FACTOR) * WITNESS_SCALE_FACTOR;\n         }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11100#discussion_r135136917",
      "id" : 135136917,
      "in_reply_to_id" : 135108409,
      "original_commit_id" : "10d21dce79bebdad33d2a68a29664aea7959ed3e",
      "original_position" : 43,
      "path" : "src/miner.cpp",
      "position" : null,
      "pull_request_review_id" : 58517500,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11100",
      "updated_at" : "2017-09-11T19:51:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135136917",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/649246?v=4",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "As commented on IRC blockmaxsize doesn't make sense after segwit activation. I wouldn't even bother with the deprecation step, I would go straight to removal and just document it in the release notes once.\r\nBut if we're going to maintain both simultaneously for any longer I agree the 2 constants for the defaults and forbidding using both at the same time (ie like you can't use -testnet and -regtest at once) is the less insane option.\r\nDo we have more examples of defaults depending on selections of other options?\r\nIf so, I think we should get rid of all of them independently of this PR.  \r\n\r\n> Miners have in recent years maxed out 1 MB. That is completely different from 4 MB, and does not prove they will increase to 4 MB immediately in any sense.\r\n\r\nI will treat any arguments regarding defaults as if they were arguments for a lower value for DEFAULT_BLOCK_MAX_WEIGHT, not as arguments for the removal/deprecation of blockmaxsize in itself.\r\nRegarding all those arguments, here's all I have to say: I trust miners to end up doing what's economically better for them, but I'm not opposed to a very low default for DEFAULT_BLOCK_MAX_WEIGHT. I think that will only prove that the default won't matter at all unless it's economically optimal or close: otherwise it'll be a few accidental bad blocks, perhaps the lower the default the faster they will read about the option. \r\nI'm also not opposed to saving the unnecessary disruption, since as others have argued that would only change their default to something unexpected.\r\n\r\nConcept ACK\r\n ",
      "created_at" : "2017-08-24T23:30:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11100#issuecomment-324784694",
      "id" : 324784694,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11100",
      "updated_at" : "2017-08-24T23:30:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/324784694",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1008458?v=4",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "body" : "Concept ACK. Will review soon.",
      "created_at" : "2017-08-25T02:18:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11100#issuecomment-324806291",
      "id" : 324806291,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11100",
      "updated_at" : "2017-08-25T02:18:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/324806291",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11100#discussion_r135177330"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11100"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135177330"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Add warn about deprecation?",
      "commit_id" : "6f703e9bf11c5f2fcb0fca0e4243fce6b4b9d35a",
      "created_at" : "2017-08-25T03:21:58Z",
      "diff_hunk" : "@@ -86,17 +80,16 @@ static BlockAssembler::Options DefaultOptions(const CChainParams& params)\n     // If both are given, restrict both.\n     BlockAssembler::Options options;\n     options.nBlockMaxWeight = DEFAULT_BLOCK_MAX_WEIGHT;\n-    options.nBlockMaxSize = DEFAULT_BLOCK_MAX_SIZE;\n     bool fWeightSet = false;\n     if (gArgs.IsArgSet(\"-blockmaxweight\")) {\n         options.nBlockMaxWeight = gArgs.GetArg(\"-blockmaxweight\", DEFAULT_BLOCK_MAX_WEIGHT);\n-        options.nBlockMaxSize = MAX_BLOCK_SERIALIZED_SIZE;\n         fWeightSet = true;\n     }\n     if (gArgs.IsArgSet(\"-blockmaxsize\")) {\n-        options.nBlockMaxSize = gArgs.GetArg(\"-blockmaxsize\", DEFAULT_BLOCK_MAX_SIZE);\n         if (!fWeightSet) {\n-            options.nBlockMaxWeight = options.nBlockMaxSize * WITNESS_SCALE_FACTOR;\n+            options.nBlockMaxWeight = gArgs.GetArg(\"-blockmaxsize\", DEFAULT_BLOCK_MAX_WEIGHT / WITNESS_SCALE_FACTOR) * WITNESS_SCALE_FACTOR;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11100#discussion_r135177330",
      "id" : 135177330,
      "original_commit_id" : "21e1f070ee51c796d0dc23c073fde51364ab8d0f",
      "original_position" : 42,
      "path" : "src/miner.cpp",
      "position" : null,
      "pull_request_review_id" : 58561736,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11100",
      "updated_at" : "2017-09-11T19:51:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135177330",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11100#discussion_r135177542"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11100"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135177542"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Breaking change, needs release note.",
      "commit_id" : "6f703e9bf11c5f2fcb0fca0e4243fce6b4b9d35a",
      "created_at" : "2017-08-25T03:25:06Z",
      "diff_hunk" : "@@ -214,7 +214,6 @@ UniValue getmininginfo(const JSONRPCRequest& request)\n \n     UniValue obj(UniValue::VOBJ);\n     obj.push_back(Pair(\"blocks\",           (int)chainActive.Height()));\n-    obj.push_back(Pair(\"currentblocksize\", (uint64_t)nLastBlockSize));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11100#discussion_r135177542",
      "id" : 135177542,
      "original_commit_id" : "21e1f070ee51c796d0dc23c073fde51364ab8d0f",
      "original_position" : 4,
      "path" : "src/rpc/mining.cpp",
      "position" : 12,
      "pull_request_review_id" : 58561736,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11100",
      "updated_at" : "2017-09-11T19:51:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135177542",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11100#discussion_r135274083"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11100"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135274083"
         }
      },
      "author_association" : "MEMBER",
      "body" : "yes, this should be included in release notes.\r\n\r\nAlso, please remove `currentblocksize` from help text (currently L198)",
      "commit_id" : "6f703e9bf11c5f2fcb0fca0e4243fce6b4b9d35a",
      "created_at" : "2017-08-25T14:37:00Z",
      "diff_hunk" : "@@ -214,7 +214,6 @@ UniValue getmininginfo(const JSONRPCRequest& request)\n \n     UniValue obj(UniValue::VOBJ);\n     obj.push_back(Pair(\"blocks\",           (int)chainActive.Height()));\n-    obj.push_back(Pair(\"currentblocksize\", (uint64_t)nLastBlockSize));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11100#discussion_r135274083",
      "id" : 135274083,
      "in_reply_to_id" : 135177542,
      "original_commit_id" : "21e1f070ee51c796d0dc23c073fde51364ab8d0f",
      "original_position" : 4,
      "path" : "src/rpc/mining.cpp",
      "position" : 12,
      "pull_request_review_id" : 58671485,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11100",
      "updated_at" : "2017-09-11T19:51:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135274083",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11100#discussion_r135278958"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11100"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135278958"
         }
      },
      "author_association" : "MEMBER",
      "body" : "There's a call below to `GetSerializeSize()` for logging the block size. We should remove that potentially expensive call and update the log to not print size as part of this PR.",
      "commit_id" : "6f703e9bf11c5f2fcb0fca0e4243fce6b4b9d35a",
      "created_at" : "2017-08-25T14:56:42Z",
      "diff_hunk" : "@@ -175,7 +167,6 @@ std::unique_ptr<CBlockTemplate> BlockAssembler::CreateNewBlock(const CScript& sc\n     int64_t nTime1 = GetTimeMicros();\n \n     nLastBlockTx = nBlockTx;\n-    nLastBlockSize = nBlockSize;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11100#discussion_r135278958",
      "id" : 135278958,
      "original_commit_id" : "21e1f070ee51c796d0dc23c073fde51364ab8d0f",
      "original_position" : 60,
      "path" : "src/miner.cpp",
      "position" : 61,
      "pull_request_review_id" : 58671485,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11100",
      "updated_at" : "2017-09-11T19:51:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135278958",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11100#discussion_r135279942"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11100"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135279942"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Agree. A deprecation warning here would be helpful.",
      "commit_id" : "6f703e9bf11c5f2fcb0fca0e4243fce6b4b9d35a",
      "created_at" : "2017-08-25T15:00:22Z",
      "diff_hunk" : "@@ -86,17 +80,16 @@ static BlockAssembler::Options DefaultOptions(const CChainParams& params)\n     // If both are given, restrict both.\n     BlockAssembler::Options options;\n     options.nBlockMaxWeight = DEFAULT_BLOCK_MAX_WEIGHT;\n-    options.nBlockMaxSize = DEFAULT_BLOCK_MAX_SIZE;\n     bool fWeightSet = false;\n     if (gArgs.IsArgSet(\"-blockmaxweight\")) {\n         options.nBlockMaxWeight = gArgs.GetArg(\"-blockmaxweight\", DEFAULT_BLOCK_MAX_WEIGHT);\n-        options.nBlockMaxSize = MAX_BLOCK_SERIALIZED_SIZE;\n         fWeightSet = true;\n     }\n     if (gArgs.IsArgSet(\"-blockmaxsize\")) {\n-        options.nBlockMaxSize = gArgs.GetArg(\"-blockmaxsize\", DEFAULT_BLOCK_MAX_SIZE);\n         if (!fWeightSet) {\n-            options.nBlockMaxWeight = options.nBlockMaxSize * WITNESS_SCALE_FACTOR;\n+            options.nBlockMaxWeight = gArgs.GetArg(\"-blockmaxsize\", DEFAULT_BLOCK_MAX_WEIGHT / WITNESS_SCALE_FACTOR) * WITNESS_SCALE_FACTOR;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11100#discussion_r135279942",
      "id" : 135279942,
      "in_reply_to_id" : 135177330,
      "original_commit_id" : "21e1f070ee51c796d0dc23c073fde51364ab8d0f",
      "original_position" : 42,
      "path" : "src/miner.cpp",
      "position" : null,
      "pull_request_review_id" : 58671485,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11100",
      "updated_at" : "2017-09-11T19:51:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135279942",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11100#discussion_r135280214"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11100"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135280214"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I'd prefer to not add more garbage to init, if possible (and printing every time a BlockAssembler is created also sucks, though it will do that now if you set both :( ). I think its fine, and since we're changing the defaults to something reasonable, removing the option a release later likely won't break anything.",
      "commit_id" : "6f703e9bf11c5f2fcb0fca0e4243fce6b4b9d35a",
      "created_at" : "2017-08-25T15:01:35Z",
      "diff_hunk" : "@@ -86,17 +80,16 @@ static BlockAssembler::Options DefaultOptions(const CChainParams& params)\n     // If both are given, restrict both.\n     BlockAssembler::Options options;\n     options.nBlockMaxWeight = DEFAULT_BLOCK_MAX_WEIGHT;\n-    options.nBlockMaxSize = DEFAULT_BLOCK_MAX_SIZE;\n     bool fWeightSet = false;\n     if (gArgs.IsArgSet(\"-blockmaxweight\")) {\n         options.nBlockMaxWeight = gArgs.GetArg(\"-blockmaxweight\", DEFAULT_BLOCK_MAX_WEIGHT);\n-        options.nBlockMaxSize = MAX_BLOCK_SERIALIZED_SIZE;\n         fWeightSet = true;\n     }\n     if (gArgs.IsArgSet(\"-blockmaxsize\")) {\n-        options.nBlockMaxSize = gArgs.GetArg(\"-blockmaxsize\", DEFAULT_BLOCK_MAX_SIZE);\n         if (!fWeightSet) {\n-            options.nBlockMaxWeight = options.nBlockMaxSize * WITNESS_SCALE_FACTOR;\n+            options.nBlockMaxWeight = gArgs.GetArg(\"-blockmaxsize\", DEFAULT_BLOCK_MAX_WEIGHT / WITNESS_SCALE_FACTOR) * WITNESS_SCALE_FACTOR;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11100#discussion_r135280214",
      "id" : 135280214,
      "in_reply_to_id" : 135177330,
      "original_commit_id" : "21e1f070ee51c796d0dc23c073fde51364ab8d0f",
      "original_position" : 42,
      "path" : "src/miner.cpp",
      "position" : null,
      "pull_request_review_id" : 58678666,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11100",
      "updated_at" : "2017-09-11T19:51:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135280214",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/649246?v=4",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11100#discussion_r135287748"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11100"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135287748"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Done and done.",
      "commit_id" : "6f703e9bf11c5f2fcb0fca0e4243fce6b4b9d35a",
      "created_at" : "2017-08-25T15:31:26Z",
      "diff_hunk" : "@@ -214,7 +214,6 @@ UniValue getmininginfo(const JSONRPCRequest& request)\n \n     UniValue obj(UniValue::VOBJ);\n     obj.push_back(Pair(\"blocks\",           (int)chainActive.Height()));\n-    obj.push_back(Pair(\"currentblocksize\", (uint64_t)nLastBlockSize));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11100#discussion_r135287748",
      "id" : 135287748,
      "in_reply_to_id" : 135177542,
      "original_commit_id" : "21e1f070ee51c796d0dc23c073fde51364ab8d0f",
      "original_position" : 4,
      "path" : "src/rpc/mining.cpp",
      "position" : 12,
      "pull_request_review_id" : 58687114,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11100",
      "updated_at" : "2017-09-11T19:51:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135287748",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/649246?v=4",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11100#discussion_r135287790"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11100"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135287790"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Removed.",
      "commit_id" : "6f703e9bf11c5f2fcb0fca0e4243fce6b4b9d35a",
      "created_at" : "2017-08-25T15:31:33Z",
      "diff_hunk" : "@@ -175,7 +167,6 @@ std::unique_ptr<CBlockTemplate> BlockAssembler::CreateNewBlock(const CScript& sc\n     int64_t nTime1 = GetTimeMicros();\n \n     nLastBlockTx = nBlockTx;\n-    nLastBlockSize = nBlockSize;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11100#discussion_r135287790",
      "id" : 135287790,
      "in_reply_to_id" : 135278958,
      "original_commit_id" : "21e1f070ee51c796d0dc23c073fde51364ab8d0f",
      "original_position" : 60,
      "path" : "src/miner.cpp",
      "position" : 61,
      "pull_request_review_id" : 58687153,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11100",
      "updated_at" : "2017-09-11T19:51:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135287790",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/649246?v=4",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11100#discussion_r135291173"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11100"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135291173"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Then add the `LogPrintf()`s to `InitParameterInteraction()` in init.cpp instead.",
      "commit_id" : "6f703e9bf11c5f2fcb0fca0e4243fce6b4b9d35a",
      "created_at" : "2017-08-25T15:45:32Z",
      "diff_hunk" : "@@ -86,17 +80,16 @@ static BlockAssembler::Options DefaultOptions(const CChainParams& params)\n     // If both are given, restrict both.\n     BlockAssembler::Options options;\n     options.nBlockMaxWeight = DEFAULT_BLOCK_MAX_WEIGHT;\n-    options.nBlockMaxSize = DEFAULT_BLOCK_MAX_SIZE;\n     bool fWeightSet = false;\n     if (gArgs.IsArgSet(\"-blockmaxweight\")) {\n         options.nBlockMaxWeight = gArgs.GetArg(\"-blockmaxweight\", DEFAULT_BLOCK_MAX_WEIGHT);\n-        options.nBlockMaxSize = MAX_BLOCK_SERIALIZED_SIZE;\n         fWeightSet = true;\n     }\n     if (gArgs.IsArgSet(\"-blockmaxsize\")) {\n-        options.nBlockMaxSize = gArgs.GetArg(\"-blockmaxsize\", DEFAULT_BLOCK_MAX_SIZE);\n         if (!fWeightSet) {\n-            options.nBlockMaxWeight = options.nBlockMaxSize * WITNESS_SCALE_FACTOR;\n+            options.nBlockMaxWeight = gArgs.GetArg(\"-blockmaxsize\", DEFAULT_BLOCK_MAX_WEIGHT / WITNESS_SCALE_FACTOR) * WITNESS_SCALE_FACTOR;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11100#discussion_r135291173",
      "id" : 135291173,
      "in_reply_to_id" : 135177330,
      "original_commit_id" : "21e1f070ee51c796d0dc23c073fde51364ab8d0f",
      "original_position" : 42,
      "path" : "src/miner.cpp",
      "position" : null,
      "pull_request_review_id" : 58690992,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11100",
      "updated_at" : "2017-09-11T19:51:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135291173",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11100#discussion_r135291757"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11100"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135291757"
         }
      },
      "author_association" : "MEMBER",
      "body" : "This is good, but I think the removal of `currentblocksize` in `getmininginfo` should [also?] go in a **Low-level RPC changes** section.",
      "commit_id" : "6f703e9bf11c5f2fcb0fca0e4243fce6b4b9d35a",
      "created_at" : "2017-08-25T15:48:04Z",
      "diff_hunk" : "@@ -56,6 +56,19 @@ frequently tested on them.\n Notable changes\n ===============\n \n+Miner block size limiting deprecated\n+------------------------------------\n+\n+Though blockmaxweight has been preferred for limiting the size of blocks returned by\n+getblocktemplate since 0.13.0, blockmaxsize remained as an option for those who wished\n+to limit their block size directly. Using this option resulted in a few UI issues as\n+well as non-optimal fee selection and ever-so-slightly worse performance, and has thus\n+now been deprecated. Further, the blockmaxsize option is now used only to calculate an\n+implied blockmaxweight, instead of limiting block size directly. Any miners who wish\n+to limit their blocks by size, instead of by weight, will have to do so manually by\n+removing transactions from their block template directly. The \"currentblocksize\" value\n+in getmininginfo has been removed.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11100#discussion_r135291757",
      "id" : 135291757,
      "original_commit_id" : "2fada8c7121d3b71781ddeeddb97490c9f98f64c",
      "original_position" : 15,
      "path" : "doc/release-notes.md",
      "position" : null,
      "pull_request_review_id" : 58691657,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11100",
      "updated_at" : "2017-09-11T19:51:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135291757",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11100#discussion_r135291828"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11100"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135291828"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "DEFAULT_BLOCK_MAX_WEIGHT is used to initialise the nBlockMaxWeight field in BlockAssembler::Options, but that's then used as BlockAssembler::nBlockMaxWeight = max(4000, min(MAX_BLOCK_WEIGHT-4000, options.nBlockMaxWeight)) in the BlockAssembler constructor, so it will already be trimmed.\r\n\r\nSo I think the \"- 4000\" here is a no op since min(MBW-4000,MBW) = min(MBW-4000,MBW-4000) = MBW-4000...",
      "commit_id" : "6f703e9bf11c5f2fcb0fca0e4243fce6b4b9d35a",
      "created_at" : "2017-08-25T15:48:25Z",
      "diff_hunk" : "@@ -16,10 +16,8 @@\n class CCoinsViewCache;\n class CTxOut;\n \n-/** Default for -blockmaxsize, which controls the maximum size of block the mining code will create **/\n-static const unsigned int DEFAULT_BLOCK_MAX_SIZE = 750000;\n /** Default for -blockmaxweight, which controls the range of block weights the mining code will create **/\n-static const unsigned int DEFAULT_BLOCK_MAX_WEIGHT = 3000000;\n+static const unsigned int DEFAULT_BLOCK_MAX_WEIGHT = MAX_BLOCK_WEIGHT - 4000;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11100#discussion_r135291828",
      "id" : 135291828,
      "in_reply_to_id" : 135124178,
      "original_commit_id" : "10d21dce79bebdad33d2a68a29664aea7959ed3e",
      "original_position" : 8,
      "path" : "src/policy/policy.h",
      "position" : 8,
      "pull_request_review_id" : 58691741,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11100",
      "updated_at" : "2017-09-11T19:51:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135291828",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11100#discussion_r135295860"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11100"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135295860"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Ugh, fine.",
      "commit_id" : "6f703e9bf11c5f2fcb0fca0e4243fce6b4b9d35a",
      "created_at" : "2017-08-25T16:07:16Z",
      "diff_hunk" : "@@ -86,17 +80,16 @@ static BlockAssembler::Options DefaultOptions(const CChainParams& params)\n     // If both are given, restrict both.\n     BlockAssembler::Options options;\n     options.nBlockMaxWeight = DEFAULT_BLOCK_MAX_WEIGHT;\n-    options.nBlockMaxSize = DEFAULT_BLOCK_MAX_SIZE;\n     bool fWeightSet = false;\n     if (gArgs.IsArgSet(\"-blockmaxweight\")) {\n         options.nBlockMaxWeight = gArgs.GetArg(\"-blockmaxweight\", DEFAULT_BLOCK_MAX_WEIGHT);\n-        options.nBlockMaxSize = MAX_BLOCK_SERIALIZED_SIZE;\n         fWeightSet = true;\n     }\n     if (gArgs.IsArgSet(\"-blockmaxsize\")) {\n-        options.nBlockMaxSize = gArgs.GetArg(\"-blockmaxsize\", DEFAULT_BLOCK_MAX_SIZE);\n         if (!fWeightSet) {\n-            options.nBlockMaxWeight = options.nBlockMaxSize * WITNESS_SCALE_FACTOR;\n+            options.nBlockMaxWeight = gArgs.GetArg(\"-blockmaxsize\", DEFAULT_BLOCK_MAX_WEIGHT / WITNESS_SCALE_FACTOR) * WITNESS_SCALE_FACTOR;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11100#discussion_r135295860",
      "id" : 135295860,
      "in_reply_to_id" : 135177330,
      "original_commit_id" : "21e1f070ee51c796d0dc23c073fde51364ab8d0f",
      "original_position" : 42,
      "path" : "src/miner.cpp",
      "position" : null,
      "pull_request_review_id" : 58696612,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11100",
      "updated_at" : "2017-09-11T19:51:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135295860",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/649246?v=4",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11100#discussion_r135295878"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11100"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135295878"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Done.",
      "commit_id" : "6f703e9bf11c5f2fcb0fca0e4243fce6b4b9d35a",
      "created_at" : "2017-08-25T16:07:23Z",
      "diff_hunk" : "@@ -56,6 +56,19 @@ frequently tested on them.\n Notable changes\n ===============\n \n+Miner block size limiting deprecated\n+------------------------------------\n+\n+Though blockmaxweight has been preferred for limiting the size of blocks returned by\n+getblocktemplate since 0.13.0, blockmaxsize remained as an option for those who wished\n+to limit their block size directly. Using this option resulted in a few UI issues as\n+well as non-optimal fee selection and ever-so-slightly worse performance, and has thus\n+now been deprecated. Further, the blockmaxsize option is now used only to calculate an\n+implied blockmaxweight, instead of limiting block size directly. Any miners who wish\n+to limit their blocks by size, instead of by weight, will have to do so manually by\n+removing transactions from their block template directly. The \"currentblocksize\" value\n+in getmininginfo has been removed.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11100#discussion_r135295878",
      "id" : 135295878,
      "in_reply_to_id" : 135291757,
      "original_commit_id" : "2fada8c7121d3b71781ddeeddb97490c9f98f64c",
      "original_position" : 15,
      "path" : "doc/release-notes.md",
      "position" : null,
      "pull_request_review_id" : 58696639,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11100",
      "updated_at" : "2017-09-11T19:51:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135295878",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/649246?v=4",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11100#discussion_r135295969"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11100"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135295969"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Ah, I see your point. Still, it feels misleading to print in the help text that the default value is 4000000 if thats outside the acceptable range.",
      "commit_id" : "6f703e9bf11c5f2fcb0fca0e4243fce6b4b9d35a",
      "created_at" : "2017-08-25T16:07:54Z",
      "diff_hunk" : "@@ -16,10 +16,8 @@\n class CCoinsViewCache;\n class CTxOut;\n \n-/** Default for -blockmaxsize, which controls the maximum size of block the mining code will create **/\n-static const unsigned int DEFAULT_BLOCK_MAX_SIZE = 750000;\n /** Default for -blockmaxweight, which controls the range of block weights the mining code will create **/\n-static const unsigned int DEFAULT_BLOCK_MAX_WEIGHT = 3000000;\n+static const unsigned int DEFAULT_BLOCK_MAX_WEIGHT = MAX_BLOCK_WEIGHT - 4000;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11100#discussion_r135295969",
      "id" : 135295969,
      "in_reply_to_id" : 135124178,
      "original_commit_id" : "10d21dce79bebdad33d2a68a29664aea7959ed3e",
      "original_position" : 8,
      "path" : "src/policy/policy.h",
      "position" : 8,
      "pull_request_review_id" : 58696760,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11100",
      "updated_at" : "2017-09-11T19:51:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135295969",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/649246?v=4",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "utACK faeafe2f20fa046f8a974940b42968dff05cd89c. Looks great.",
      "created_at" : "2017-08-25T16:35:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11100#issuecomment-324972346",
      "id" : 324972346,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11100",
      "updated_at" : "2017-08-25T16:35:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/324972346",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "body" : "utACK faeafe2f20fa046f8a974940b42968dff05cd89c",
      "created_at" : "2017-08-25T16:39:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11100#issuecomment-324973438",
      "id" : 324973438,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11100",
      "updated_at" : "2017-08-25T16:39:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/324973438",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Again, hard **NACK** for all the unrefuted reasons already given.",
      "created_at" : "2017-08-25T17:52:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11100#issuecomment-324992563",
      "id" : 324992563,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11100",
      "updated_at" : "2017-08-25T17:52:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/324992563",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> There are real use-cases to set both blockmaxsize and blockmaxweight: one might want to mine a block that has at most a weight of 3M, but never more than 1 MB for example.\r\n\r\n@luke-jr I am doubtful that what you describe is a \"real\" use case, but even if we accept that assumption -- you haven't responded to @TheBlueMatt's observation that this can be done by gbt callers simply by truncating the transaction list to the desired serialized size.\r\n\r\nMore broadly, the `-blockmaxsize` option is deceptive and confusing to users, since the code doesn't try to optimize for fee-per-serialized-byte.  If someone really wants to mine based on number of serialized bytes (which I doubt), they should use different software; this software is optimized for fee-per-weight.  \r\n\r\nAnyone is free to work on software that optimizes for other properties, but not in this project please; we've gone to considerable effort to optimize for miner income given the consensus rules.  This helps level the playing field amongst miners, so that one needn't be a software engineer in order to be competitive.  I think this is obviously good for the network.\r\n\r\nACK faeafe2.  \r\n\r\nnit: Perhaps edit the commit message on that last commit to say `Add release notes describing blockmaxsize deprecation` rather than `...blockmaxweight deprecation...`.\r\n\r\n\r\n",
      "created_at" : "2017-08-30T18:46:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11100#issuecomment-326083348",
      "id" : 326083348,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11100",
      "updated_at" : "2017-08-30T18:46:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/326083348",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/7463573?v=4",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11100#discussion_r136157411"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11100"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/136157411"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Yeah actually what I meant was that we also start off our block counter at a weight of 4000, so limiting to MAX_BLOCK_WEIGHT-4000 (both here and in `BlockAssembler::BlockAssembler()`) causes us to limit block sizes more than we probably intend.  But not necessary to change here.",
      "commit_id" : "6f703e9bf11c5f2fcb0fca0e4243fce6b4b9d35a",
      "created_at" : "2017-08-30T18:47:07Z",
      "diff_hunk" : "@@ -16,10 +16,8 @@\n class CCoinsViewCache;\n class CTxOut;\n \n-/** Default for -blockmaxsize, which controls the maximum size of block the mining code will create **/\n-static const unsigned int DEFAULT_BLOCK_MAX_SIZE = 750000;\n /** Default for -blockmaxweight, which controls the range of block weights the mining code will create **/\n-static const unsigned int DEFAULT_BLOCK_MAX_WEIGHT = 3000000;\n+static const unsigned int DEFAULT_BLOCK_MAX_WEIGHT = MAX_BLOCK_WEIGHT - 4000;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11100#discussion_r136157411",
      "id" : 136157411,
      "in_reply_to_id" : 135124178,
      "original_commit_id" : "10d21dce79bebdad33d2a68a29664aea7959ed3e",
      "original_position" : 8,
      "path" : "src/policy/policy.h",
      "position" : 8,
      "pull_request_review_id" : 59657050,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11100",
      "updated_at" : "2017-09-11T19:51:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/136157411",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/7463573?v=4",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Outsourcing this to callers is obviously unreasonable.\r\n\r\n> More broadly, the `-blockmaxsize` option is deceptive and confusing to users, since the code doesn't try to optimize for fee-per-serialized-byte. If someone really wants to mine based on number of serialized bytes (which I doubt), they should use different software; this software is optimized for fee-per-weight.\r\n\r\nIt's not deceptive at all. It limits the max size of blocks produced. It makes no statement on what policy is used to select transactions, at all.\r\n\r\n> Anyone is free to work on software that optimizes for other properties, but not in this project please; we've gone to considerable effort to optimize for miner income given the consensus rules. \r\n\r\nThere is no project policy to only optimise for miner income, nor should there be. The incentives on Bitcoin mining are clearly broken, and we should encourage behaviour beneficial to the network at least until such a time as those incentives are no longer broken. To do otherwise is suicide.",
      "created_at" : "2017-09-02T06:55:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11100#issuecomment-326726852",
      "id" : 326726852,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11100",
      "updated_at" : "2017-09-02T06:55:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/326726852",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "author_association" : "OWNER",
      "body" : "> It's not deceptive at all. It limits the max size of blocks produced.\r\n\r\nAt the very least, 'size' is ambiguous. At least some people believed it refers to stripped size, and feared setting it higher than 1M.\r\n\r\nAnd there is no need for that extra complication. We don't have options to limit the number of sigops, the maximum number of inputs, or the maximum change in UTXO set size. I believe all of these are more relevant to network health than serialized size of blocks. But I don't see anyone arguing that functionality should be built in to let GBT restrict by those. Why? Because nobody will use an option that makes them actively lose money, and we shouldn't expect them to.\r\n\r\nThe same is true for size now. With SegWit, the constrained resource is weight.\r\n\r\n> There is no project policy to only optimise for miner income, nor should there be.\r\n\r\nI do think it should be project policy to focus on features that matter. And an option that everyone overrides serves nobody.\r\n\r\n",
      "created_at" : "2017-09-11T18:00:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11100#issuecomment-328609135",
      "id" : 328609135,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11100",
      "updated_at" : "2017-09-11T18:00:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/328609135",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "OWNER",
      "body" : "@TheBlueMatt `mining.py` fails (conflict introduced by #11150).",
      "created_at" : "2017-09-11T18:11:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11100#issuecomment-328612083",
      "id" : 328612083,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11100",
      "updated_at" : "2017-09-11T18:12:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/328612083",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Rebased and fixed conflict.",
      "created_at" : "2017-09-11T19:52:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11100#issuecomment-328639775",
      "id" : 328639775,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11100",
      "updated_at" : "2017-09-11T19:52:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/328639775",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/649246?v=4",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> I do think it should be project policy to focus on features that matter. And an option that everyone overrides serves nobody.\r\n\r\nThat assumes everyone sets it to the absolute no-op maximum. There is no evidence of this.\r\n\r\nThis PR is contentious, should not have been merged, and should be reverted.",
      "created_at" : "2017-09-19T03:13:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11100#issuecomment-330416103",
      "id" : 330416103,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11100",
      "updated_at" : "2017-09-19T03:13:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/330416103",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   }
]
