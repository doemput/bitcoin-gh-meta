{
   "assignee" : null,
   "assignees" : [],
   "body" : "In spite of the name FindLatestBefore used std::lower_bound to try\r\n to find the earliest block with a nTime greater or equal to the\r\n the requested value.  But lower_bound uses bisection and requires\r\n the input to be ordered with respect to the comparison operation.\r\n Block times are not well ordered.\r\n\r\nI don't know what lower_bound is permitted to do when the data\r\n is not sufficiently ordered, but it's probably not good.\r\n (I could construct an implementation which would infinite loop...)\r\n\r\nTo resolve the issue this commit introduces a maximum-so-far to the\r\n block indexes and searches that.\r\n\r\nFor clarity the function is renamed to reflect what it actually does.\r\n\r\nAn issue that remains is that there is no grace period in importmulti:\r\n If a address is created at time T and a send is immediately broadcast\r\n and included by a miner with a slow clock there may not yet have been\r\n any block with at least time T.\r\n\r\nThe normal rescan has a grace period of 7200 seconds, but importmulti\r\n does not.",
   "closed_at" : "2017-01-14T00:06:27Z",
   "closed_by" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
      "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
      "followers_url" : "https://api.github.com/users/sipa/followers",
      "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/sipa",
      "id" : 548488,
      "login" : "sipa",
      "organizations_url" : "https://api.github.com/users/sipa/orgs",
      "received_events_url" : "https://api.github.com/users/sipa/received_events",
      "repos_url" : "https://api.github.com/users/sipa/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/sipa"
   },
   "comments" : 14,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9490/comments",
   "created_at" : "2017-01-08T07:23:30Z",
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9490/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/pull/9490",
   "id" : 199407998,
   "labels" : [
      {
         "color" : "6060aa",
         "default" : false,
         "id" : 118379652,
         "name" : "Validation",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/Validation"
      },
      {
         "color" : "02d7e1",
         "default" : false,
         "id" : 149424,
         "name" : "Wallet",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/Wallet"
      }
   ],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9490/labels{/name}",
   "locked" : false,
   "milestone" : {
      "closed_at" : null,
      "closed_issues" : 118,
      "created_at" : "2016-06-13T14:18:51Z",
      "creator" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=3",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      },
      "description" : "",
      "due_on" : null,
      "html_url" : "https://github.com/bitcoin/bitcoin/milestone/21",
      "id" : 1823680,
      "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/milestones/21/labels",
      "number" : 21,
      "open_issues" : 5,
      "state" : "open",
      "title" : "0.14.0",
      "updated_at" : "2017-02-14T14:57:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/milestones/21"
   },
   "number" : 9490,
   "pull_request" : {
      "diff_url" : "https://github.com/bitcoin/bitcoin/pull/9490.diff",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9490",
      "patch_url" : "https://github.com/bitcoin/bitcoin/pull/9490.patch",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9490"
   },
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "closed",
   "title" : "Replace FindLatestBefore used by importmuti with FindEarliestAtLeast.",
   "updated_at" : "2017-02-14T23:07:52Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9490",
   "user" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
      "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
      "followers_url" : "https://api.github.com/users/gmaxwell/followers",
      "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
      "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/gmaxwell",
      "id" : 858454,
      "login" : "gmaxwell",
      "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
      "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
      "repos_url" : "https://api.github.com/users/gmaxwell/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/gmaxwell"
   }
}
