[
   {
      "body" : "@gmaxwell I also found this surprising.  My first inclination was that we should change it, but then it means if you ever leave off a timestamp, you're stuck rescanning the whole chain.\r\n\r\nPerhaps with proper documentation we could have 3 states.\r\nrescan: false - no rescan\r\nno rescan option set - rescan starts at the minimum of only the provided timestamps (current behavior)\r\nrescan: true - rescan starts at genesis unless all timestamps are provided and then starts at the minimum of the timestamps.\r\n\r\n\r\nI only wish it could tell you what it was planning to rescan before it did it, so you could pull the plug on your computer if you got it wrong.",
      "created_at" : "2017-01-12T22:12:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/9491#issuecomment-272300513",
      "id" : 272300513,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9491",
      "updated_at" : "2017-01-12T22:12:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/272300513",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4360349?v=3",
         "events_url" : "https://api.github.com/users/morcos/events{/privacy}",
         "followers_url" : "https://api.github.com/users/morcos/followers",
         "following_url" : "https://api.github.com/users/morcos/following{/other_user}",
         "gists_url" : "https://api.github.com/users/morcos/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/morcos",
         "id" : 4360349,
         "login" : "morcos",
         "organizations_url" : "https://api.github.com/users/morcos/orgs",
         "received_events_url" : "https://api.github.com/users/morcos/received_events",
         "repos_url" : "https://api.github.com/users/morcos/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/morcos/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/morcos/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/morcos"
      }
   },
   {
      "body" : "One option is that if it concludes it should rescan everything, it could fail and force you to run with the rescan option set to true.",
      "created_at" : "2017-01-19T19:05:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/9491#issuecomment-273867521",
      "id" : 273867521,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9491",
      "updated_at" : "2017-01-19T19:05:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/273867521",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "So you must either provide all timestamps or provide rescan = true.   And a left off timestamp = genesis.   The sounds reasonable to me ,  but then I think we need the shorthand for now?",
      "created_at" : "2017-01-24T11:22:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/9491#issuecomment-274777711",
      "id" : 274777711,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9491",
      "updated_at" : "2017-01-24T11:22:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/274777711",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4360349?v=3",
         "events_url" : "https://api.github.com/users/morcos/events{/privacy}",
         "followers_url" : "https://api.github.com/users/morcos/followers",
         "following_url" : "https://api.github.com/users/morcos/following{/other_user}",
         "gists_url" : "https://api.github.com/users/morcos/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/morcos",
         "id" : 4360349,
         "login" : "morcos",
         "organizations_url" : "https://api.github.com/users/morcos/orgs",
         "received_events_url" : "https://api.github.com/users/morcos/received_events",
         "repos_url" : "https://api.github.com/users/morcos/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/morcos/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/morcos/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/morcos"
      }
   },
   {
      "body" : "I think it would be safer if the timestamp defaults to the beginning of time. I think it's a better situation to encourage people to use correct timestamps (and rescan=true), rather than have all keys default to 'now'.",
      "created_at" : "2017-01-24T20:40:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/9491#issuecomment-274931851",
      "id" : 274931851,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9491",
      "updated_at" : "2017-01-24T20:40:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/274931851",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "@gmaxwell that sounds good.\r\nSo...\r\n\r\nrescan: false - no rescan\r\nno rescan option set - rescan starts at the minimum of the provided timestamps, but if one is missing throw an exception\r\nrescan: true - rescan starts at the minimum of the provided timestamps, or genesis if one or more is missing.",
      "created_at" : "2017-01-24T22:34:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/9491#issuecomment-274961263",
      "id" : 274961263,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9491",
      "updated_at" : "2017-01-24T22:34:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/274961263",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "@TheBlueMatt I believe the default for `rescan` should be true, and there should be no difference between not setting it and passing true.\r\n\r\nRationale: rescanning using `-rescan` on the command line would result in unexpected behaviour otherwise. The only reasonable condition under which `-rescan` should skip a block is when all key birthdates are known to be later in time.",
      "created_at" : "2017-01-24T22:45:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/9491#issuecomment-274963835",
      "id" : 274963835,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9491",
      "updated_at" : "2017-01-24T22:45:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/274963835",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Perhaps introducing a special value for 'timestamp' to explicitly indicate a key is new is a possibility (perhaps \"now\" or -1)?",
      "created_at" : "2017-01-24T22:46:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/9491#issuecomment-274964216",
      "id" : 274964216,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9491",
      "updated_at" : "2017-01-24T22:46:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/274964216",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "@sipa hmm? How would `-rescan` result in strange behavior if you threw, instead of doing any importing? Because it failed to do anything `-rescan` will only look at the things that were previously there, which is unchanged behavior.",
      "created_at" : "2017-01-24T23:26:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/9491#issuecomment-274972539",
      "id" : 274972539,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9491",
      "updated_at" : "2017-01-24T23:26:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/274972539",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "I think the simplest change for now is just making the timestamp mandatory. That requirement can later be relaxed in future versions if we agree on sensible defaults.",
      "created_at" : "2017-02-02T19:12:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/9491#issuecomment-277052835",
      "id" : 277052835,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9491",
      "updated_at" : "2017-02-02T19:12:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/277052835",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "`importmulti` can import private keys, which is itself a risk to funds loss for end users who don't know what they're doing. So IMO this isn't a blocker.\r\n\r\nBut not having a default allows for setting a default later, so if we're unsure of what defaults ought to be, simply requiring the user to specify it seems like a good alternative.",
      "created_at" : "2017-02-02T19:12:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/9491#issuecomment-277052843",
      "id" : 277052843,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9491",
      "updated_at" : "2017-02-02T19:12:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/277052843",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "Maybe it should be \"unused\" instead of \"now\". From the point of the wallet, they should be treated identically. Jonas is right that \"now\" is very unlikely, but I think it is very likely that you're importing keys that are known to be unused.",
      "created_at" : "2017-02-02T19:18:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/9491#issuecomment-277054374",
      "id" : 277054374,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9491",
      "updated_at" : "2017-02-02T19:18:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/277054374",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "right.  Now means so far unused as far as I'm concerned.",
      "created_at" : "2017-02-02T19:19:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/9491#issuecomment-277054805",
      "id" : 277054805,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9491",
      "updated_at" : "2017-02-02T19:19:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/277054805",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "#9682 has an implementation of the suggested importmulti changes.",
      "created_at" : "2017-02-03T21:43:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/9491#issuecomment-277370282",
      "id" : 277370282,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9491",
      "updated_at" : "2017-02-03T21:43:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/277370282",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=3",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   }
]
