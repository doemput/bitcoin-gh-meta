[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11021#discussion_r132804721"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11021"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/132804721"
         }
      },
      "body" : "Edge case: chain has 1 block only - `blockcount` will be 0 - should be a different error?",
      "commit_id" : "07704c1b3768d6c290046c783063644fc7b7d1da",
      "created_at" : "2017-08-12T00:31:40Z",
      "diff_hunk" : "@@ -1516,8 +1512,14 @@ UniValue getchaintxstats(const JSONRPCRequest& request)\n         }\n     }\n \n+    blockcount = std::min(blockcount, pindex->nHeight - 1);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11021#discussion_r132804721",
      "id" : 132804721,
      "original_commit_id" : "e73f8bc37b1a20f6eb3aaf920b8a41905af7ee1d",
      "original_position" : 15,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 55930546,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11021",
      "updated_at" : "2017-08-25T09:33:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/132804721",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11021#discussion_r132810361"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11021"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/132810361"
         }
      },
      "body" : "@promag Thank you for you review.\r\nI added a commit that throws a new RPC_INVALID_PARAMETER if block's height below 2.",
      "commit_id" : "07704c1b3768d6c290046c783063644fc7b7d1da",
      "created_at" : "2017-08-12T05:40:39Z",
      "diff_hunk" : "@@ -1516,8 +1512,14 @@ UniValue getchaintxstats(const JSONRPCRequest& request)\n         }\n     }\n \n+    blockcount = std::min(blockcount, pindex->nHeight - 1);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11021#discussion_r132810361",
      "id" : 132810361,
      "in_reply_to_id" : 132804721,
      "original_commit_id" : "e73f8bc37b1a20f6eb3aaf920b8a41905af7ee1d",
      "original_position" : 15,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 55936458,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11021",
      "updated_at" : "2017-08-25T09:33:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/132810361",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/24285095?v=4",
         "events_url" : "https://api.github.com/users/AkioNak/events{/privacy}",
         "followers_url" : "https://api.github.com/users/AkioNak/followers",
         "following_url" : "https://api.github.com/users/AkioNak/following{/other_user}",
         "gists_url" : "https://api.github.com/users/AkioNak/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/AkioNak",
         "id" : 24285095,
         "login" : "AkioNak",
         "organizations_url" : "https://api.github.com/users/AkioNak/orgs",
         "received_events_url" : "https://api.github.com/users/AkioNak/received_events",
         "repos_url" : "https://api.github.com/users/AkioNak/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/AkioNak/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/AkioNak/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/AkioNak"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11021#discussion_r132813889"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11021"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/132813889"
         }
      },
      "body" : "IMO the error should be `RPC_MISC_ERROR` since it's not a parameter. The message should be something like `Chain height should be greater than 1`.",
      "commit_id" : "07704c1b3768d6c290046c783063644fc7b7d1da",
      "created_at" : "2017-08-12T08:47:29Z",
      "diff_hunk" : "@@ -1512,6 +1512,9 @@ UniValue getchaintxstats(const JSONRPCRequest& request)\n         }\n     }\n \n+    if (pindex->nHeight < 2) {\n+        throw JSONRPCError(RPC_INVALID_PARAMETER, \"Block's height should be 2 or more.\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11021#discussion_r132813889",
      "id" : 132813889,
      "original_commit_id" : "87815f29032f9a8b060531e4f951c237011d66ee",
      "original_position" : 5,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 55939822,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11021",
      "updated_at" : "2017-08-25T09:33:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/132813889",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11021#discussion_r132813900"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11021"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/132813900"
         }
      },
      "body" : "I wonder if the error could be avoided by making the algorithm compatible with 1 block chain.",
      "commit_id" : "07704c1b3768d6c290046c783063644fc7b7d1da",
      "created_at" : "2017-08-12T08:47:58Z",
      "diff_hunk" : "@@ -1512,6 +1512,9 @@ UniValue getchaintxstats(const JSONRPCRequest& request)\n         }\n     }\n \n+    if (pindex->nHeight < 2) {\n+        throw JSONRPCError(RPC_INVALID_PARAMETER, \"Block's height should be 2 or more.\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11021#discussion_r132813900",
      "id" : 132813900,
      "in_reply_to_id" : 132813889,
      "original_commit_id" : "87815f29032f9a8b060531e4f951c237011d66ee",
      "original_position" : 5,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 55939830,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11021",
      "updated_at" : "2017-08-25T09:33:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/132813900",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "body" : "Can you improve the test in `bitcoin/test/functional/blockchain.py`?",
      "created_at" : "2017-08-12T08:49:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11021#issuecomment-321967117",
      "id" : 321967117,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11021",
      "updated_at" : "2017-08-12T08:49:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/321967117",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11021#discussion_r132832974"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11021"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/132832974"
         }
      },
      "body" : "I think tx-rate for 1st block (and genesis block) can not calculate (or meaningless).\r\n\r\n> be avoided by making the algorithm compatible with 1 block chain.\r\n\r\nSo, I think we can treat this situation equal to nTimeDiff = 0.\r\n",
      "commit_id" : "07704c1b3768d6c290046c783063644fc7b7d1da",
      "created_at" : "2017-08-13T05:59:28Z",
      "diff_hunk" : "@@ -1512,6 +1512,9 @@ UniValue getchaintxstats(const JSONRPCRequest& request)\n         }\n     }\n \n+    if (pindex->nHeight < 2) {\n+        throw JSONRPCError(RPC_INVALID_PARAMETER, \"Block's height should be 2 or more.\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11021#discussion_r132832974",
      "id" : 132832974,
      "in_reply_to_id" : 132813889,
      "original_commit_id" : "87815f29032f9a8b060531e4f951c237011d66ee",
      "original_position" : 5,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 55957404,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11021",
      "updated_at" : "2017-08-25T09:33:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/132832974",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/24285095?v=4",
         "events_url" : "https://api.github.com/users/AkioNak/events{/privacy}",
         "followers_url" : "https://api.github.com/users/AkioNak/followers",
         "following_url" : "https://api.github.com/users/AkioNak/following{/other_user}",
         "gists_url" : "https://api.github.com/users/AkioNak/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/AkioNak",
         "id" : 24285095,
         "login" : "AkioNak",
         "organizations_url" : "https://api.github.com/users/AkioNak/orgs",
         "received_events_url" : "https://api.github.com/users/AkioNak/received_events",
         "repos_url" : "https://api.github.com/users/AkioNak/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/AkioNak/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/AkioNak/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/AkioNak"
      }
   },
   {
      "body" : "Yes, I will add some tests in `bitcoin/test/functional/blockchain.py`.",
      "created_at" : "2017-08-13T14:56:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11021#issuecomment-322046974",
      "id" : 322046974,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11021",
      "updated_at" : "2017-08-13T14:56:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/322046974",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/24285095?v=4",
         "events_url" : "https://api.github.com/users/AkioNak/events{/privacy}",
         "followers_url" : "https://api.github.com/users/AkioNak/followers",
         "following_url" : "https://api.github.com/users/AkioNak/following{/other_user}",
         "gists_url" : "https://api.github.com/users/AkioNak/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/AkioNak",
         "id" : 24285095,
         "login" : "AkioNak",
         "organizations_url" : "https://api.github.com/users/AkioNak/orgs",
         "received_events_url" : "https://api.github.com/users/AkioNak/received_events",
         "repos_url" : "https://api.github.com/users/AkioNak/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/AkioNak/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/AkioNak/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/AkioNak"
      }
   },
   {
      "body" : "@promag I avoided the error about low blockheight and added some tests.",
      "created_at" : "2017-08-14T07:56:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11021#issuecomment-322123577",
      "id" : 322123577,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11021",
      "updated_at" : "2017-08-14T07:56:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/322123577",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/24285095?v=4",
         "events_url" : "https://api.github.com/users/AkioNak/events{/privacy}",
         "followers_url" : "https://api.github.com/users/AkioNak/followers",
         "following_url" : "https://api.github.com/users/AkioNak/following{/other_user}",
         "gists_url" : "https://api.github.com/users/AkioNak/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/AkioNak",
         "id" : 24285095,
         "login" : "AkioNak",
         "organizations_url" : "https://api.github.com/users/AkioNak/orgs",
         "received_events_url" : "https://api.github.com/users/AkioNak/received_events",
         "repos_url" : "https://api.github.com/users/AkioNak/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/AkioNak/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/AkioNak/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/AkioNak"
      }
   },
   {
      "body" : "@promag \r\nI think these convenient commands is more useful that if they avoid errors. \r\n\r\n> IMO throw `JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid block count: should be between 1 and the block's height - 1\")` should be only for < 1case. \r\n\r\nWhen blockheight = 1, nblocks = 1 does not satisfy this condition. (blockheight> = 2 is required)\r\nSo, if we need throw JSONRPCError, I think it would be better to throw different error depending on whether the block(hash) is specified by the parameter or not.(same as your previous  suggestion)\r\n\r\n>Also, `CBlockIndex::GetAncestor` return `nullptr` for out of bounds, just check that result.\r\n\r\nOf course I can add to check it , but I think that the value of the parameter is always within the range. Am I missing something?\r\n\r\n\r\n",
      "created_at" : "2017-08-15T01:43:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11021#issuecomment-322354632",
      "id" : 322354632,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11021",
      "updated_at" : "2017-08-15T06:57:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/322354632",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/24285095?v=4",
         "events_url" : "https://api.github.com/users/AkioNak/events{/privacy}",
         "followers_url" : "https://api.github.com/users/AkioNak/followers",
         "following_url" : "https://api.github.com/users/AkioNak/following{/other_user}",
         "gists_url" : "https://api.github.com/users/AkioNak/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/AkioNak",
         "id" : 24285095,
         "login" : "AkioNak",
         "organizations_url" : "https://api.github.com/users/AkioNak/orgs",
         "received_events_url" : "https://api.github.com/users/AkioNak/received_events",
         "repos_url" : "https://api.github.com/users/AkioNak/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/AkioNak/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/AkioNak/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/AkioNak"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11021#discussion_r133294640"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11021"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/133294640"
         }
      },
      "body" : "nit: name the variable `time_diff`. (the `n` prefix in the C++ code is no longer the style we use, and shouldn't be carried over to the python code)",
      "commit_id" : "07704c1b3768d6c290046c783063644fc7b7d1da",
      "created_at" : "2017-08-15T20:28:32Z",
      "diff_hunk" : "@@ -56,6 +56,22 @@ def _test_getchaintxstats(self):\n         # we have to round because of binary math\n         assert_equal(round(chaintxstats['txrate'] * 600, 10), Decimal(1))\n \n+        b1 = self.nodes[0].getblock(self.nodes[0].getblockhash(1))\n+        b200 = self.nodes[0].getblock(self.nodes[0].getblockhash(200))\n+        ntimediff = b200['mediantime'] - b1['mediantime']",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11021#discussion_r133294640",
      "id" : 133294640,
      "original_commit_id" : "783d353d7fde33d717689256231a858fdd490334",
      "original_position" : 6,
      "path" : "test/functional/blockchain.py",
      "position" : null,
      "pull_request_review_id" : 56459755,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11021",
      "updated_at" : "2017-08-25T09:33:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/133294640",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "body" : "I also recommend that you update the commit messages to be a bit more meaningful. I don't think this project has commit message style rules, but there are some general tips here: https://chris.beams.io/posts/git-commit/",
      "created_at" : "2017-08-16T13:28:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11021#issuecomment-322770802",
      "id" : 322770802,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11021",
      "updated_at" : "2017-08-16T13:28:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/322770802",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "body" : "@jnewbery Thank you for your suggestion. I agree with them.",
      "created_at" : "2017-08-16T14:25:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11021#issuecomment-322788583",
      "id" : 322788583,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11021",
      "updated_at" : "2017-08-16T14:25:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/322788583",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/24285095?v=4",
         "events_url" : "https://api.github.com/users/AkioNak/events{/privacy}",
         "followers_url" : "https://api.github.com/users/AkioNak/followers",
         "following_url" : "https://api.github.com/users/AkioNak/following{/other_user}",
         "gists_url" : "https://api.github.com/users/AkioNak/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/AkioNak",
         "id" : 24285095,
         "login" : "AkioNak",
         "organizations_url" : "https://api.github.com/users/AkioNak/orgs",
         "received_events_url" : "https://api.github.com/users/AkioNak/received_events",
         "repos_url" : "https://api.github.com/users/AkioNak/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/AkioNak/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/AkioNak/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/AkioNak"
      }
   },
   {
      "body" : "BTW, if `nTimeDiff` is zero then `pindexPast` and `pindex` are the same? If so `nTxDiff` is also zero then `txrate` should be zero too?",
      "created_at" : "2017-08-16T15:15:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11021#issuecomment-322805330",
      "id" : 322805330,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11021",
      "updated_at" : "2017-08-16T15:23:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/322805330",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "body" : "@promag No. Even if `time_diff` is zero, `pindexPast` and `pindex` may be different.\r\n(For example, `generates 100` on regtest)\r\nBecause `GetMedianTimePast()` returns mediantime of last 11 block's time (except the block itself),\r\n",
      "created_at" : "2017-08-16T15:32:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11021#issuecomment-322810311",
      "id" : 322810311,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11021",
      "updated_at" : "2017-08-16T15:32:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/322810311",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/24285095?v=4",
         "events_url" : "https://api.github.com/users/AkioNak/events{/privacy}",
         "followers_url" : "https://api.github.com/users/AkioNak/followers",
         "following_url" : "https://api.github.com/users/AkioNak/following{/other_user}",
         "gists_url" : "https://api.github.com/users/AkioNak/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/AkioNak",
         "id" : 24285095,
         "login" : "AkioNak",
         "organizations_url" : "https://api.github.com/users/AkioNak/orgs",
         "received_events_url" : "https://api.github.com/users/AkioNak/received_events",
         "repos_url" : "https://api.github.com/users/AkioNak/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/AkioNak/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/AkioNak/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/AkioNak"
      }
   },
   {
      "body" : "IMO the response could have both values `txratecount` and `txrateinterval`.\r\n  ",
      "created_at" : "2017-08-16T15:46:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11021#issuecomment-322814456",
      "id" : 322814456,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11021",
      "updated_at" : "2017-08-16T15:46:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/322814456",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "body" : "@promag  In the edge case (block height <2), since there is no comparison target, its values are both zero. If that is OK then I will add it.",
      "created_at" : "2017-08-16T16:19:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11021#issuecomment-322824251",
      "id" : 322824251,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11021",
      "updated_at" : "2017-08-16T16:19:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/322824251",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/24285095?v=4",
         "events_url" : "https://api.github.com/users/AkioNak/events{/privacy}",
         "followers_url" : "https://api.github.com/users/AkioNak/followers",
         "following_url" : "https://api.github.com/users/AkioNak/following{/other_user}",
         "gists_url" : "https://api.github.com/users/AkioNak/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/AkioNak",
         "id" : 24285095,
         "login" : "AkioNak",
         "organizations_url" : "https://api.github.com/users/AkioNak/orgs",
         "received_events_url" : "https://api.github.com/users/AkioNak/received_events",
         "repos_url" : "https://api.github.com/users/AkioNak/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/AkioNak/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/AkioNak/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/AkioNak"
      }
   },
   {
      "body" : "@jnewbery I have just done followings.\r\n\r\n- Add `\"block_count\"` element to return object.\r\n- Not to return `\"txrate\"` if `nTimeDiff` is zero.\r\n- Rename variable `time_diff`.\r\n- Fix commit comment.",
      "created_at" : "2017-08-16T17:24:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11021#issuecomment-322841894",
      "id" : 322841894,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11021",
      "updated_at" : "2017-08-16T17:24:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/322841894",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/24285095?v=4",
         "events_url" : "https://api.github.com/users/AkioNak/events{/privacy}",
         "followers_url" : "https://api.github.com/users/AkioNak/followers",
         "following_url" : "https://api.github.com/users/AkioNak/following{/other_user}",
         "gists_url" : "https://api.github.com/users/AkioNak/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/AkioNak",
         "id" : 24285095,
         "login" : "AkioNak",
         "organizations_url" : "https://api.github.com/users/AkioNak/orgs",
         "received_events_url" : "https://api.github.com/users/AkioNak/received_events",
         "repos_url" : "https://api.github.com/users/AkioNak/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/AkioNak/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/AkioNak/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/AkioNak"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11021#discussion_r133526569"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11021"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/133526569"
         }
      },
      "body" : "This seems to be a confusing name; I would associate `block_count` with the size of the window over which `txrate` is computed. To denote the block height that ends the window, I would use `height`.",
      "commit_id" : "07704c1b3768d6c290046c783063644fc7b7d1da",
      "created_at" : "2017-08-16T18:16:09Z",
      "diff_hunk" : "@@ -1480,6 +1480,7 @@ UniValue getchaintxstats(const JSONRPCRequest& request)\n             \"{\\n\"\n             \"  \\\"time\\\": xxxxx,        (numeric) The timestamp for the statistics in UNIX format.\\n\"\n             \"  \\\"txcount\\\": xxxxx,     (numeric) The total number of transactions in the chain up to that point.\\n\"\n+            \"  \\\"block_count\\\": xxxxx, (numeric) The block height that ends the window.\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11021#discussion_r133526569",
      "id" : 133526569,
      "original_commit_id" : "5eb13099ecbf016b5a5bc6c82e6cb138d2b9394b",
      "original_position" : 4,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 56718530,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11021",
      "updated_at" : "2017-08-25T09:33:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/133526569",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11021#discussion_r133571068"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11021"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/133571068"
         }
      },
      "body" : "I agree. My earlier suggestion was for `block_count` to be the size of the window.",
      "commit_id" : "07704c1b3768d6c290046c783063644fc7b7d1da",
      "created_at" : "2017-08-16T21:25:22Z",
      "diff_hunk" : "@@ -1480,6 +1480,7 @@ UniValue getchaintxstats(const JSONRPCRequest& request)\n             \"{\\n\"\n             \"  \\\"time\\\": xxxxx,        (numeric) The timestamp for the statistics in UNIX format.\\n\"\n             \"  \\\"txcount\\\": xxxxx,     (numeric) The total number of transactions in the chain up to that point.\\n\"\n+            \"  \\\"block_count\\\": xxxxx, (numeric) The block height that ends the window.\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11021#discussion_r133571068",
      "id" : 133571068,
      "in_reply_to_id" : 133526569,
      "original_commit_id" : "5eb13099ecbf016b5a5bc6c82e6cb138d2b9394b",
      "original_position" : 4,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 56769198,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11021",
      "updated_at" : "2017-08-25T09:33:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/133571068",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11021#discussion_r133599024"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11021"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/133599024"
         }
      },
      "body" : "@sipa Thank you for your review. I made a mistake.\r\n@jnewbery I misunderstood. Same as your suggestion, I think the size of the window is better than block height as result of this command.",
      "commit_id" : "07704c1b3768d6c290046c783063644fc7b7d1da",
      "created_at" : "2017-08-17T00:25:56Z",
      "diff_hunk" : "@@ -1480,6 +1480,7 @@ UniValue getchaintxstats(const JSONRPCRequest& request)\n             \"{\\n\"\n             \"  \\\"time\\\": xxxxx,        (numeric) The timestamp for the statistics in UNIX format.\\n\"\n             \"  \\\"txcount\\\": xxxxx,     (numeric) The total number of transactions in the chain up to that point.\\n\"\n+            \"  \\\"block_count\\\": xxxxx, (numeric) The block height that ends the window.\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11021#discussion_r133599024",
      "id" : 133599024,
      "in_reply_to_id" : 133526569,
      "original_commit_id" : "5eb13099ecbf016b5a5bc6c82e6cb138d2b9394b",
      "original_position" : 4,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 56799744,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11021",
      "updated_at" : "2017-08-25T09:33:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/133599024",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/24285095?v=4",
         "events_url" : "https://api.github.com/users/AkioNak/events{/privacy}",
         "followers_url" : "https://api.github.com/users/AkioNak/followers",
         "following_url" : "https://api.github.com/users/AkioNak/following{/other_user}",
         "gists_url" : "https://api.github.com/users/AkioNak/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/AkioNak",
         "id" : 24285095,
         "login" : "AkioNak",
         "organizations_url" : "https://api.github.com/users/AkioNak/orgs",
         "received_events_url" : "https://api.github.com/users/AkioNak/received_events",
         "repos_url" : "https://api.github.com/users/AkioNak/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/AkioNak/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/AkioNak/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/AkioNak"
      }
   },
   {
      "body" : "@sipa @jnewbery I fixed what `\"block_count\"` indicates and its description.",
      "created_at" : "2017-08-18T16:48:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11021#issuecomment-323404408",
      "id" : 323404408,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11021",
      "updated_at" : "2017-08-18T16:48:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/323404408",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/24285095?v=4",
         "events_url" : "https://api.github.com/users/AkioNak/events{/privacy}",
         "followers_url" : "https://api.github.com/users/AkioNak/followers",
         "following_url" : "https://api.github.com/users/AkioNak/following{/other_user}",
         "gists_url" : "https://api.github.com/users/AkioNak/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/AkioNak",
         "id" : 24285095,
         "login" : "AkioNak",
         "organizations_url" : "https://api.github.com/users/AkioNak/orgs",
         "received_events_url" : "https://api.github.com/users/AkioNak/received_events",
         "repos_url" : "https://api.github.com/users/AkioNak/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/AkioNak/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/AkioNak/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/AkioNak"
      }
   },
   {
      "body" : "@promag I added  both `txratecount` and `txrateinterval` to the return object.",
      "created_at" : "2017-08-22T02:00:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11021#issuecomment-323898182",
      "id" : 323898182,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11021",
      "updated_at" : "2017-08-22T02:00:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/323898182",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/24285095?v=4",
         "events_url" : "https://api.github.com/users/AkioNak/events{/privacy}",
         "followers_url" : "https://api.github.com/users/AkioNak/followers",
         "following_url" : "https://api.github.com/users/AkioNak/following{/other_user}",
         "gists_url" : "https://api.github.com/users/AkioNak/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/AkioNak",
         "id" : 24285095,
         "login" : "AkioNak",
         "organizations_url" : "https://api.github.com/users/AkioNak/orgs",
         "received_events_url" : "https://api.github.com/users/AkioNak/received_events",
         "repos_url" : "https://api.github.com/users/AkioNak/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/AkioNak/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/AkioNak/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/AkioNak"
      }
   },
   {
      "body" : "I resolved the conflicts.",
      "created_at" : "2017-08-23T11:10:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11021#issuecomment-324297284",
      "id" : 324297284,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11021",
      "updated_at" : "2017-08-23T11:10:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/324297284",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/24285095?v=4",
         "events_url" : "https://api.github.com/users/AkioNak/events{/privacy}",
         "followers_url" : "https://api.github.com/users/AkioNak/followers",
         "following_url" : "https://api.github.com/users/AkioNak/following{/other_user}",
         "gists_url" : "https://api.github.com/users/AkioNak/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/AkioNak",
         "id" : 24285095,
         "login" : "AkioNak",
         "organizations_url" : "https://api.github.com/users/AkioNak/orgs",
         "received_events_url" : "https://api.github.com/users/AkioNak/received_events",
         "repos_url" : "https://api.github.com/users/AkioNak/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/AkioNak/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/AkioNak/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/AkioNak"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11021#discussion_r134767543"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11021"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/134767543"
         }
      },
      "body" : "I don't love the `txratecount` and `txrateinterval` names (rate and count are fundamentally different things, and `txrateinterval` mentions tx but not time, but the value returned is time).\r\n\r\nI suggest:\r\n- `window_block_count`\r\n- `window_tx_count`\r\n- `window_interval`\r\n\r\nNote that new RPC arguments and return values should be snake case.",
      "commit_id" : "07704c1b3768d6c290046c783063644fc7b7d1da",
      "created_at" : "2017-08-23T14:27:48Z",
      "diff_hunk" : "@@ -1479,6 +1479,9 @@ UniValue getchaintxstats(const JSONRPCRequest& request)\n             \"{\\n\"\n             \"  \\\"time\\\": xxxxx,        (numeric) The timestamp for the statistics in UNIX format.\\n\"\n             \"  \\\"txcount\\\": xxxxx,     (numeric) The total number of transactions in the chain up to that point.\\n\"\n+            \"  \\\"block_count\\\": xxxxx, (numeric) Size of the window in number of blocks.\\n\"\n+            \"  \\\"txratecount\\\": xxxxx, (numeric) The number of transactions in the window.\\n\"\n+            \"  \\\"txrateinterval\\\": xxxxx, (numeric) The elapsed time in the window.\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11021#discussion_r134767543",
      "id" : 134767543,
      "original_commit_id" : "02755d0dc2acf0914a1af1cc1c583e48a26aaf76",
      "original_position" : 6,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 58097973,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11021",
      "updated_at" : "2017-08-25T09:33:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/134767543",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11021#discussion_r134770582"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11021"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/134770582"
         }
      },
      "body" : "Any reason to disallow 0? `blockcount` can be 0 if we run this on a node with just the genesis block, so why not allow it to be set to 0 when running with a longer chain?",
      "commit_id" : "07704c1b3768d6c290046c783063644fc7b7d1da",
      "created_at" : "2017-08-23T14:37:44Z",
      "diff_hunk" : "@@ -1515,8 +1514,18 @@ UniValue getchaintxstats(const JSONRPCRequest& request)\n         }\n     }\n \n-    if (blockcount < 1 || blockcount >= pindex->nHeight) {\n-        throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid block count: should be between 1 and the block's height\");\n+    if (pindex->nHeight < 2) {\n+        blockcount = 0;\n+    } else {\n+        blockcount = std::min(blockcount, pindex->nHeight - 1);\n+    }\n+\n+    if (!request.params[0].isNull()) {\n+        blockcount = request.params[0].get_int();\n+\n+        if (blockcount < 1 || blockcount >= pindex->nHeight) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11021#discussion_r134770582",
      "id" : 134770582,
      "original_commit_id" : "02755d0dc2acf0914a1af1cc1c583e48a26aaf76",
      "original_position" : 36,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 58097973,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11021",
      "updated_at" : "2017-08-25T09:33:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/134770582",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11021#discussion_r134771643"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11021"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/134771643"
         }
      },
      "body" : "Perhaps move this up into the `if (blockcount > 0)` code block (since `nTimeDiff` can only be non-zero when `blockcount` > 0)? Up to you.",
      "commit_id" : "07704c1b3768d6c290046c783063644fc7b7d1da",
      "created_at" : "2017-08-23T14:41:13Z",
      "diff_hunk" : "@@ -1526,7 +1535,14 @@ UniValue getchaintxstats(const JSONRPCRequest& request)\n     UniValue ret(UniValue::VOBJ);\n     ret.push_back(Pair(\"time\", (int64_t)pindex->nTime));\n     ret.push_back(Pair(\"txcount\", (int64_t)pindex->nChainTx));\n-    ret.push_back(Pair(\"txrate\", ((double)nTxDiff) / nTimeDiff));\n+    if (blockcount > 0) {\n+        ret.push_back(Pair(\"block_count\", blockcount));\n+        ret.push_back(Pair(\"txratecount\", nTxDiff));\n+        ret.push_back(Pair(\"txrateinterval\", nTimeDiff));\n+    }\n+    if (nTimeDiff > 0) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11021#discussion_r134771643",
      "id" : 134771643,
      "original_commit_id" : "02755d0dc2acf0914a1af1cc1c583e48a26aaf76",
      "original_position" : 52,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 58097973,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11021",
      "updated_at" : "2017-08-25T09:33:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/134771643",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11021#discussion_r134771701"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11021"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/134771701"
         }
      },
      "body" : "Suggestion: improve this help message as part of this PR. Perhaps:\r\n\r\n`The timestamp for the final block in the window in UNIX format.`",
      "commit_id" : "07704c1b3768d6c290046c783063644fc7b7d1da",
      "created_at" : "2017-08-23T14:41:24Z",
      "diff_hunk" : "@@ -1479,6 +1479,9 @@ UniValue getchaintxstats(const JSONRPCRequest& request)\n             \"{\\n\"\n             \"  \\\"time\\\": xxxxx,        (numeric) The timestamp for the statistics in UNIX format.\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11021#discussion_r134771701",
      "id" : 134771701,
      "original_commit_id" : "02755d0dc2acf0914a1af1cc1c583e48a26aaf76",
      "original_position" : 2,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 58097973,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11021",
      "updated_at" : "2017-08-25T09:33:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/134771701",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11021#discussion_r134772248"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11021"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/134772248"
         }
      },
      "body" : "Also perhaps add a comment to the help text that these values are only returned if `block_count` is > 0",
      "commit_id" : "07704c1b3768d6c290046c783063644fc7b7d1da",
      "created_at" : "2017-08-23T14:43:01Z",
      "diff_hunk" : "@@ -1479,6 +1479,9 @@ UniValue getchaintxstats(const JSONRPCRequest& request)\n             \"{\\n\"\n             \"  \\\"time\\\": xxxxx,        (numeric) The timestamp for the statistics in UNIX format.\\n\"\n             \"  \\\"txcount\\\": xxxxx,     (numeric) The total number of transactions in the chain up to that point.\\n\"\n+            \"  \\\"block_count\\\": xxxxx, (numeric) Size of the window in number of blocks.\\n\"\n+            \"  \\\"txratecount\\\": xxxxx, (numeric) The number of transactions in the window.\\n\"\n+            \"  \\\"txrateinterval\\\": xxxxx, (numeric) The elapsed time in the window.\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11021#discussion_r134772248",
      "id" : 134772248,
      "in_reply_to_id" : 134767543,
      "original_commit_id" : "02755d0dc2acf0914a1af1cc1c583e48a26aaf76",
      "original_position" : 6,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 58097973,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11021",
      "updated_at" : "2017-08-25T09:33:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/134772248",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11021#discussion_r134772567"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11021"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/134772567"
         }
      },
      "body" : "Perhaps display `block_count` if it is equal to zero? (but not the other two values since they're meaningless if block_count == 0",
      "commit_id" : "07704c1b3768d6c290046c783063644fc7b7d1da",
      "created_at" : "2017-08-23T14:44:00Z",
      "diff_hunk" : "@@ -1526,7 +1535,14 @@ UniValue getchaintxstats(const JSONRPCRequest& request)\n     UniValue ret(UniValue::VOBJ);\n     ret.push_back(Pair(\"time\", (int64_t)pindex->nTime));\n     ret.push_back(Pair(\"txcount\", (int64_t)pindex->nChainTx));\n-    ret.push_back(Pair(\"txrate\", ((double)nTxDiff) / nTimeDiff));\n+    if (blockcount > 0) {\n+        ret.push_back(Pair(\"block_count\", blockcount));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11021#discussion_r134772567",
      "id" : 134772567,
      "original_commit_id" : "02755d0dc2acf0914a1af1cc1c583e48a26aaf76",
      "original_position" : 48,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 58097973,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11021",
      "updated_at" : "2017-08-25T09:33:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/134772567",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11021#discussion_r134912616"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11021"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/134912616"
         }
      },
      "body" : "I agree to improve that help message.",
      "commit_id" : "07704c1b3768d6c290046c783063644fc7b7d1da",
      "created_at" : "2017-08-24T02:08:16Z",
      "diff_hunk" : "@@ -1479,6 +1479,9 @@ UniValue getchaintxstats(const JSONRPCRequest& request)\n             \"{\\n\"\n             \"  \\\"time\\\": xxxxx,        (numeric) The timestamp for the statistics in UNIX format.\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11021#discussion_r134912616",
      "id" : 134912616,
      "in_reply_to_id" : 134771701,
      "original_commit_id" : "02755d0dc2acf0914a1af1cc1c583e48a26aaf76",
      "original_position" : 2,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 58261134,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11021",
      "updated_at" : "2017-08-25T09:33:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/134912616",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/24285095?v=4",
         "events_url" : "https://api.github.com/users/AkioNak/events{/privacy}",
         "followers_url" : "https://api.github.com/users/AkioNak/followers",
         "following_url" : "https://api.github.com/users/AkioNak/following{/other_user}",
         "gists_url" : "https://api.github.com/users/AkioNak/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/AkioNak",
         "id" : 24285095,
         "login" : "AkioNak",
         "organizations_url" : "https://api.github.com/users/AkioNak/orgs",
         "received_events_url" : "https://api.github.com/users/AkioNak/received_events",
         "repos_url" : "https://api.github.com/users/AkioNak/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/AkioNak/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/AkioNak/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/AkioNak"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11021#discussion_r134914950"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11021"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/134914950"
         }
      },
      "body" : "I agree to rename those names and to add condition to the help text.",
      "commit_id" : "07704c1b3768d6c290046c783063644fc7b7d1da",
      "created_at" : "2017-08-24T02:34:23Z",
      "diff_hunk" : "@@ -1479,6 +1479,9 @@ UniValue getchaintxstats(const JSONRPCRequest& request)\n             \"{\\n\"\n             \"  \\\"time\\\": xxxxx,        (numeric) The timestamp for the statistics in UNIX format.\\n\"\n             \"  \\\"txcount\\\": xxxxx,     (numeric) The total number of transactions in the chain up to that point.\\n\"\n+            \"  \\\"block_count\\\": xxxxx, (numeric) Size of the window in number of blocks.\\n\"\n+            \"  \\\"txratecount\\\": xxxxx, (numeric) The number of transactions in the window.\\n\"\n+            \"  \\\"txrateinterval\\\": xxxxx, (numeric) The elapsed time in the window.\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11021#discussion_r134914950",
      "id" : 134914950,
      "in_reply_to_id" : 134767543,
      "original_commit_id" : "02755d0dc2acf0914a1af1cc1c583e48a26aaf76",
      "original_position" : 6,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 58263666,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11021",
      "updated_at" : "2017-08-25T09:33:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/134914950",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/24285095?v=4",
         "events_url" : "https://api.github.com/users/AkioNak/events{/privacy}",
         "followers_url" : "https://api.github.com/users/AkioNak/followers",
         "following_url" : "https://api.github.com/users/AkioNak/following{/other_user}",
         "gists_url" : "https://api.github.com/users/AkioNak/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/AkioNak",
         "id" : 24285095,
         "login" : "AkioNak",
         "organizations_url" : "https://api.github.com/users/AkioNak/orgs",
         "received_events_url" : "https://api.github.com/users/AkioNak/received_events",
         "repos_url" : "https://api.github.com/users/AkioNak/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/AkioNak/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/AkioNak/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/AkioNak"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11021#discussion_r134932383"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11021"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/134932383"
         }
      },
      "body" : "I think the reason to disallow 0 is that this RPC was originally intended to be able to calculate `txrate`.\r\nTherefore if user specifies 0 by parameter, PRC should returns illegal parameter error.\r\nSo, for only genesis block and 1st block, I think it can allow 0 internally when user is not specify block count in 1st parameter, and can avoid error to be occured.\r\n\r\nBut now, it is easier to understand if we allow 0.",
      "commit_id" : "07704c1b3768d6c290046c783063644fc7b7d1da",
      "created_at" : "2017-08-24T05:58:42Z",
      "diff_hunk" : "@@ -1515,8 +1514,18 @@ UniValue getchaintxstats(const JSONRPCRequest& request)\n         }\n     }\n \n-    if (blockcount < 1 || blockcount >= pindex->nHeight) {\n-        throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid block count: should be between 1 and the block's height\");\n+    if (pindex->nHeight < 2) {\n+        blockcount = 0;\n+    } else {\n+        blockcount = std::min(blockcount, pindex->nHeight - 1);\n+    }\n+\n+    if (!request.params[0].isNull()) {\n+        blockcount = request.params[0].get_int();\n+\n+        if (blockcount < 1 || blockcount >= pindex->nHeight) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11021#discussion_r134932383",
      "id" : 134932383,
      "in_reply_to_id" : 134770582,
      "original_commit_id" : "02755d0dc2acf0914a1af1cc1c583e48a26aaf76",
      "original_position" : 36,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 58282357,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11021",
      "updated_at" : "2017-08-25T09:33:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/134932383",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/24285095?v=4",
         "events_url" : "https://api.github.com/users/AkioNak/events{/privacy}",
         "followers_url" : "https://api.github.com/users/AkioNak/followers",
         "following_url" : "https://api.github.com/users/AkioNak/following{/other_user}",
         "gists_url" : "https://api.github.com/users/AkioNak/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/AkioNak",
         "id" : 24285095,
         "login" : "AkioNak",
         "organizations_url" : "https://api.github.com/users/AkioNak/orgs",
         "received_events_url" : "https://api.github.com/users/AkioNak/received_events",
         "repos_url" : "https://api.github.com/users/AkioNak/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/AkioNak/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/AkioNak/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/AkioNak"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11021#discussion_r134932691"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11021"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/134932691"
         }
      },
      "body" : "I agree to display `block_count` even if it is equal to zero.",
      "commit_id" : "07704c1b3768d6c290046c783063644fc7b7d1da",
      "created_at" : "2017-08-24T06:01:40Z",
      "diff_hunk" : "@@ -1526,7 +1535,14 @@ UniValue getchaintxstats(const JSONRPCRequest& request)\n     UniValue ret(UniValue::VOBJ);\n     ret.push_back(Pair(\"time\", (int64_t)pindex->nTime));\n     ret.push_back(Pair(\"txcount\", (int64_t)pindex->nChainTx));\n-    ret.push_back(Pair(\"txrate\", ((double)nTxDiff) / nTimeDiff));\n+    if (blockcount > 0) {\n+        ret.push_back(Pair(\"block_count\", blockcount));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11021#discussion_r134932691",
      "id" : 134932691,
      "in_reply_to_id" : 134772567,
      "original_commit_id" : "02755d0dc2acf0914a1af1cc1c583e48a26aaf76",
      "original_position" : 48,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 58282705,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11021",
      "updated_at" : "2017-08-25T09:33:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/134932691",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/24285095?v=4",
         "events_url" : "https://api.github.com/users/AkioNak/events{/privacy}",
         "followers_url" : "https://api.github.com/users/AkioNak/followers",
         "following_url" : "https://api.github.com/users/AkioNak/following{/other_user}",
         "gists_url" : "https://api.github.com/users/AkioNak/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/AkioNak",
         "id" : 24285095,
         "login" : "AkioNak",
         "organizations_url" : "https://api.github.com/users/AkioNak/orgs",
         "received_events_url" : "https://api.github.com/users/AkioNak/received_events",
         "repos_url" : "https://api.github.com/users/AkioNak/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/AkioNak/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/AkioNak/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/AkioNak"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11021#discussion_r134961864"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11021"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/134961864"
         }
      },
      "body" : "I agree to move it.",
      "commit_id" : "07704c1b3768d6c290046c783063644fc7b7d1da",
      "created_at" : "2017-08-24T08:57:31Z",
      "diff_hunk" : "@@ -1526,7 +1535,14 @@ UniValue getchaintxstats(const JSONRPCRequest& request)\n     UniValue ret(UniValue::VOBJ);\n     ret.push_back(Pair(\"time\", (int64_t)pindex->nTime));\n     ret.push_back(Pair(\"txcount\", (int64_t)pindex->nChainTx));\n-    ret.push_back(Pair(\"txrate\", ((double)nTxDiff) / nTimeDiff));\n+    if (blockcount > 0) {\n+        ret.push_back(Pair(\"block_count\", blockcount));\n+        ret.push_back(Pair(\"txratecount\", nTxDiff));\n+        ret.push_back(Pair(\"txrateinterval\", nTimeDiff));\n+    }\n+    if (nTimeDiff > 0) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11021#discussion_r134961864",
      "id" : 134961864,
      "in_reply_to_id" : 134771643,
      "original_commit_id" : "02755d0dc2acf0914a1af1cc1c583e48a26aaf76",
      "original_position" : 52,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 58315374,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11021",
      "updated_at" : "2017-08-25T09:33:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/134961864",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/24285095?v=4",
         "events_url" : "https://api.github.com/users/AkioNak/events{/privacy}",
         "followers_url" : "https://api.github.com/users/AkioNak/followers",
         "following_url" : "https://api.github.com/users/AkioNak/following{/other_user}",
         "gists_url" : "https://api.github.com/users/AkioNak/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/AkioNak",
         "id" : 24285095,
         "login" : "AkioNak",
         "organizations_url" : "https://api.github.com/users/AkioNak/orgs",
         "received_events_url" : "https://api.github.com/users/AkioNak/received_events",
         "repos_url" : "https://api.github.com/users/AkioNak/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/AkioNak/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/AkioNak/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/AkioNak"
      }
   },
   {
      "body" : "@jnewbery Thank you for your various suggestion. I accepted with them and squashed commits for file by file.",
      "created_at" : "2017-08-24T12:03:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11021#issuecomment-324615808",
      "id" : 324615808,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11021",
      "updated_at" : "2017-08-24T12:03:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/324615808",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/24285095?v=4",
         "events_url" : "https://api.github.com/users/AkioNak/events{/privacy}",
         "followers_url" : "https://api.github.com/users/AkioNak/followers",
         "following_url" : "https://api.github.com/users/AkioNak/following{/other_user}",
         "gists_url" : "https://api.github.com/users/AkioNak/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/AkioNak",
         "id" : 24285095,
         "login" : "AkioNak",
         "organizations_url" : "https://api.github.com/users/AkioNak/orgs",
         "received_events_url" : "https://api.github.com/users/AkioNak/received_events",
         "repos_url" : "https://api.github.com/users/AkioNak/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/AkioNak/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/AkioNak/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/AkioNak"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11021#discussion_r135005257"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11021"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135005257"
         }
      },
      "body" : "Nit, above it's `txcount` so here should be `window_txcount`?",
      "commit_id" : "07704c1b3768d6c290046c783063644fc7b7d1da",
      "created_at" : "2017-08-24T12:49:24Z",
      "diff_hunk" : "@@ -1477,9 +1477,12 @@ UniValue getchaintxstats(const JSONRPCRequest& request)\n             \"2. \\\"blockhash\\\"  (string, optional) The hash of the block that ends the window.\\n\"\n             \"\\nResult:\\n\"\n             \"{\\n\"\n-            \"  \\\"time\\\": xxxxx,        (numeric) The timestamp for the statistics in UNIX format.\\n\"\n-            \"  \\\"txcount\\\": xxxxx,     (numeric) The total number of transactions in the chain up to that point.\\n\"\n-            \"  \\\"txrate\\\": x.xx,       (numeric) The average rate of transactions per second in the window.\\n\"\n+            \"  \\\"time\\\": xxxxx,                (numeric) The timestamp for the final block in the window in UNIX format.\\n\"\n+            \"  \\\"txcount\\\": xxxxx,             (numeric) The total number of transactions in the chain up to that point.\\n\"\n+            \"  \\\"window_block_count\\\": xxxxx,  (numeric) Size of the window in number of blocks.\\n\"\n+            \"  \\\"window_tx_count\\\": xxxxx,     (numeric) The number of transactions in the window. Only returned if \\\"window_block_count\\\" is > 0.\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11021#discussion_r135005257",
      "id" : 135005257,
      "original_commit_id" : "0e30d6231a7e730c19c1c09f91b84a4cce98e55d",
      "original_position" : 10,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 10,
      "pull_request_review_id" : 58365675,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11021",
      "updated_at" : "2017-08-25T09:33:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135005257",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11021#discussion_r135005736"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11021"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135005736"
         }
      },
      "body" : "Include unit (seconds)?",
      "commit_id" : "07704c1b3768d6c290046c783063644fc7b7d1da",
      "created_at" : "2017-08-24T12:51:44Z",
      "diff_hunk" : "@@ -1477,9 +1477,12 @@ UniValue getchaintxstats(const JSONRPCRequest& request)\n             \"2. \\\"blockhash\\\"  (string, optional) The hash of the block that ends the window.\\n\"\n             \"\\nResult:\\n\"\n             \"{\\n\"\n-            \"  \\\"time\\\": xxxxx,        (numeric) The timestamp for the statistics in UNIX format.\\n\"\n-            \"  \\\"txcount\\\": xxxxx,     (numeric) The total number of transactions in the chain up to that point.\\n\"\n-            \"  \\\"txrate\\\": x.xx,       (numeric) The average rate of transactions per second in the window.\\n\"\n+            \"  \\\"time\\\": xxxxx,                (numeric) The timestamp for the final block in the window in UNIX format.\\n\"\n+            \"  \\\"txcount\\\": xxxxx,             (numeric) The total number of transactions in the chain up to that point.\\n\"\n+            \"  \\\"window_block_count\\\": xxxxx,  (numeric) Size of the window in number of blocks.\\n\"\n+            \"  \\\"window_tx_count\\\": xxxxx,     (numeric) The number of transactions in the window. Only returned if \\\"window_block_count\\\" is > 0.\\n\"\n+            \"  \\\"window_interval\\\": xxxxx,     (numeric) The elapsed time in the window. Only returned if \\\"window_block_count\\\" is > 0.\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11021#discussion_r135005736",
      "id" : 135005736,
      "original_commit_id" : "0e30d6231a7e730c19c1c09f91b84a4cce98e55d",
      "original_position" : 11,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 58365675,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11021",
      "updated_at" : "2017-08-25T09:33:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135005736",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11021#discussion_r135005875"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11021"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135005875"
         }
      },
      "body" : "Remove `blockcount > 0`?",
      "commit_id" : "07704c1b3768d6c290046c783063644fc7b7d1da",
      "created_at" : "2017-08-24T12:52:32Z",
      "diff_hunk" : "@@ -1515,8 +1514,18 @@ UniValue getchaintxstats(const JSONRPCRequest& request)\n         }\n     }\n \n-    if (blockcount < 1 || blockcount >= pindex->nHeight) {\n-        throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid block count: should be between 1 and the block's height\");\n+    if (pindex->nHeight < 1) {\n+        blockcount = 0;\n+    } else {\n+        blockcount = std::min(blockcount, pindex->nHeight - 1);\n+    }\n+\n+    if (!request.params[0].isNull()) {\n+        blockcount = request.params[0].get_int();\n+\n+        if (blockcount < 0 || (blockcount > 0 && blockcount >= pindex->nHeight)) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11021#discussion_r135005875",
      "id" : 135005875,
      "original_commit_id" : "0e30d6231a7e730c19c1c09f91b84a4cce98e55d",
      "original_position" : 42,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 58365675,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11021",
      "updated_at" : "2017-08-25T09:33:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135005875",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11021#discussion_r135007133"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11021"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135007133"
         }
      },
      "body" : "Move to `else` like:\r\n```cpp\r\nif (!request.params[0].isNull()) {\r\n    ...\r\n} else {\r\n    blockcount = std::max(0, std::min(blockcount, pindex->nHeight - 1));\r\n}\r\n```",
      "commit_id" : "07704c1b3768d6c290046c783063644fc7b7d1da",
      "created_at" : "2017-08-24T12:58:40Z",
      "diff_hunk" : "@@ -1515,8 +1514,18 @@ UniValue getchaintxstats(const JSONRPCRequest& request)\n         }\n     }\n \n-    if (blockcount < 1 || blockcount >= pindex->nHeight) {\n-        throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid block count: should be between 1 and the block's height\");\n+    if (pindex->nHeight < 1) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11021#discussion_r135007133",
      "id" : 135007133,
      "original_commit_id" : "0e30d6231a7e730c19c1c09f91b84a4cce98e55d",
      "original_position" : 33,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 58365675,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11021",
      "updated_at" : "2017-08-25T09:33:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135007133",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11021#discussion_r135014952"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11021"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135014952"
         }
      },
      "body" : "I think this is fine. New arguments and return values should use snake_case.",
      "commit_id" : "07704c1b3768d6c290046c783063644fc7b7d1da",
      "created_at" : "2017-08-24T13:32:26Z",
      "diff_hunk" : "@@ -1477,9 +1477,12 @@ UniValue getchaintxstats(const JSONRPCRequest& request)\n             \"2. \\\"blockhash\\\"  (string, optional) The hash of the block that ends the window.\\n\"\n             \"\\nResult:\\n\"\n             \"{\\n\"\n-            \"  \\\"time\\\": xxxxx,        (numeric) The timestamp for the statistics in UNIX format.\\n\"\n-            \"  \\\"txcount\\\": xxxxx,     (numeric) The total number of transactions in the chain up to that point.\\n\"\n-            \"  \\\"txrate\\\": x.xx,       (numeric) The average rate of transactions per second in the window.\\n\"\n+            \"  \\\"time\\\": xxxxx,                (numeric) The timestamp for the final block in the window in UNIX format.\\n\"\n+            \"  \\\"txcount\\\": xxxxx,             (numeric) The total number of transactions in the chain up to that point.\\n\"\n+            \"  \\\"window_block_count\\\": xxxxx,  (numeric) Size of the window in number of blocks.\\n\"\n+            \"  \\\"window_tx_count\\\": xxxxx,     (numeric) The number of transactions in the window. Only returned if \\\"window_block_count\\\" is > 0.\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11021#discussion_r135014952",
      "id" : 135014952,
      "in_reply_to_id" : 135005257,
      "original_commit_id" : "0e30d6231a7e730c19c1c09f91b84a4cce98e55d",
      "original_position" : 10,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 10,
      "pull_request_review_id" : 58377296,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11021",
      "updated_at" : "2017-08-25T09:33:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135014952",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11021#discussion_r135023199"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11021"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135023199"
         }
      },
      "body" : "I agree that this is clearer",
      "commit_id" : "07704c1b3768d6c290046c783063644fc7b7d1da",
      "created_at" : "2017-08-24T14:04:12Z",
      "diff_hunk" : "@@ -1515,8 +1514,18 @@ UniValue getchaintxstats(const JSONRPCRequest& request)\n         }\n     }\n \n-    if (blockcount < 1 || blockcount >= pindex->nHeight) {\n-        throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid block count: should be between 1 and the block's height\");\n+    if (pindex->nHeight < 1) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11021#discussion_r135023199",
      "id" : 135023199,
      "in_reply_to_id" : 135007133,
      "original_commit_id" : "0e30d6231a7e730c19c1c09f91b84a4cce98e55d",
      "original_position" : 33,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 58387229,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11021",
      "updated_at" : "2017-08-25T09:33:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135023199",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11021#discussion_r135023224"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11021"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135023224"
         }
      },
      "body" : "Agree",
      "commit_id" : "07704c1b3768d6c290046c783063644fc7b7d1da",
      "created_at" : "2017-08-24T14:04:17Z",
      "diff_hunk" : "@@ -1515,8 +1514,18 @@ UniValue getchaintxstats(const JSONRPCRequest& request)\n         }\n     }\n \n-    if (blockcount < 1 || blockcount >= pindex->nHeight) {\n-        throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid block count: should be between 1 and the block's height\");\n+    if (pindex->nHeight < 1) {\n+        blockcount = 0;\n+    } else {\n+        blockcount = std::min(blockcount, pindex->nHeight - 1);\n+    }\n+\n+    if (!request.params[0].isNull()) {\n+        blockcount = request.params[0].get_int();\n+\n+        if (blockcount < 0 || (blockcount > 0 && blockcount >= pindex->nHeight)) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11021#discussion_r135023224",
      "id" : 135023224,
      "in_reply_to_id" : 135005875,
      "original_commit_id" : "0e30d6231a7e730c19c1c09f91b84a4cce98e55d",
      "original_position" : 42,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 58387259,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11021",
      "updated_at" : "2017-08-25T09:33:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135023224",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "body" : "@AkioNak thanks for sticking with this. Looks really good now. Just a few more nits.",
      "created_at" : "2017-08-24T14:05:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11021#issuecomment-324645145",
      "id" : 324645145,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11021",
      "updated_at" : "2017-08-24T14:05:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/324645145",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11021#discussion_r135036620"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11021"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135036620"
         }
      },
      "body" : "I agree to @jnewbery ,too.",
      "commit_id" : "07704c1b3768d6c290046c783063644fc7b7d1da",
      "created_at" : "2017-08-24T14:48:59Z",
      "diff_hunk" : "@@ -1477,9 +1477,12 @@ UniValue getchaintxstats(const JSONRPCRequest& request)\n             \"2. \\\"blockhash\\\"  (string, optional) The hash of the block that ends the window.\\n\"\n             \"\\nResult:\\n\"\n             \"{\\n\"\n-            \"  \\\"time\\\": xxxxx,        (numeric) The timestamp for the statistics in UNIX format.\\n\"\n-            \"  \\\"txcount\\\": xxxxx,     (numeric) The total number of transactions in the chain up to that point.\\n\"\n-            \"  \\\"txrate\\\": x.xx,       (numeric) The average rate of transactions per second in the window.\\n\"\n+            \"  \\\"time\\\": xxxxx,                (numeric) The timestamp for the final block in the window in UNIX format.\\n\"\n+            \"  \\\"txcount\\\": xxxxx,             (numeric) The total number of transactions in the chain up to that point.\\n\"\n+            \"  \\\"window_block_count\\\": xxxxx,  (numeric) Size of the window in number of blocks.\\n\"\n+            \"  \\\"window_tx_count\\\": xxxxx,     (numeric) The number of transactions in the window. Only returned if \\\"window_block_count\\\" is > 0.\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11021#discussion_r135036620",
      "id" : 135036620,
      "in_reply_to_id" : 135005257,
      "original_commit_id" : "0e30d6231a7e730c19c1c09f91b84a4cce98e55d",
      "original_position" : 10,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 10,
      "pull_request_review_id" : 58402654,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11021",
      "updated_at" : "2017-08-25T09:33:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135036620",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/24285095?v=4",
         "events_url" : "https://api.github.com/users/AkioNak/events{/privacy}",
         "followers_url" : "https://api.github.com/users/AkioNak/followers",
         "following_url" : "https://api.github.com/users/AkioNak/following{/other_user}",
         "gists_url" : "https://api.github.com/users/AkioNak/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/AkioNak",
         "id" : 24285095,
         "login" : "AkioNak",
         "organizations_url" : "https://api.github.com/users/AkioNak/orgs",
         "received_events_url" : "https://api.github.com/users/AkioNak/received_events",
         "repos_url" : "https://api.github.com/users/AkioNak/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/AkioNak/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/AkioNak/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/AkioNak"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11021#discussion_r135039499"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11021"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135039499"
         }
      },
      "body" : "@promag Thanks for a good suggestion.\r\n@promag @jnewbery Is it better to reverse the conditions?\r\n```c++\r\nif (request.params[0].isNull()) {\r\n    blockcount = std::max(0, std::min(blockcount, pindex->nHeight - 1));\r\n} else {\r\n    ...\r\n}\r\n```",
      "commit_id" : "07704c1b3768d6c290046c783063644fc7b7d1da",
      "created_at" : "2017-08-24T14:58:30Z",
      "diff_hunk" : "@@ -1515,8 +1514,18 @@ UniValue getchaintxstats(const JSONRPCRequest& request)\n         }\n     }\n \n-    if (blockcount < 1 || blockcount >= pindex->nHeight) {\n-        throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid block count: should be between 1 and the block's height\");\n+    if (pindex->nHeight < 1) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11021#discussion_r135039499",
      "id" : 135039499,
      "in_reply_to_id" : 135007133,
      "original_commit_id" : "0e30d6231a7e730c19c1c09f91b84a4cce98e55d",
      "original_position" : 33,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 58405947,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11021",
      "updated_at" : "2017-08-25T09:33:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135039499",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/24285095?v=4",
         "events_url" : "https://api.github.com/users/AkioNak/events{/privacy}",
         "followers_url" : "https://api.github.com/users/AkioNak/followers",
         "following_url" : "https://api.github.com/users/AkioNak/following{/other_user}",
         "gists_url" : "https://api.github.com/users/AkioNak/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/AkioNak",
         "id" : 24285095,
         "login" : "AkioNak",
         "organizations_url" : "https://api.github.com/users/AkioNak/orgs",
         "received_events_url" : "https://api.github.com/users/AkioNak/received_events",
         "repos_url" : "https://api.github.com/users/AkioNak/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/AkioNak/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/AkioNak/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/AkioNak"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11021#discussion_r135041278"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11021"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135041278"
         }
      },
      "body" : "@promag @jnewbery I think that this condition is necessary if pindex points to `genesis block`.",
      "commit_id" : "07704c1b3768d6c290046c783063644fc7b7d1da",
      "created_at" : "2017-08-24T15:04:40Z",
      "diff_hunk" : "@@ -1515,8 +1514,18 @@ UniValue getchaintxstats(const JSONRPCRequest& request)\n         }\n     }\n \n-    if (blockcount < 1 || blockcount >= pindex->nHeight) {\n-        throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid block count: should be between 1 and the block's height\");\n+    if (pindex->nHeight < 1) {\n+        blockcount = 0;\n+    } else {\n+        blockcount = std::min(blockcount, pindex->nHeight - 1);\n+    }\n+\n+    if (!request.params[0].isNull()) {\n+        blockcount = request.params[0].get_int();\n+\n+        if (blockcount < 0 || (blockcount > 0 && blockcount >= pindex->nHeight)) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11021#discussion_r135041278",
      "id" : 135041278,
      "in_reply_to_id" : 135005875,
      "original_commit_id" : "0e30d6231a7e730c19c1c09f91b84a4cce98e55d",
      "original_position" : 42,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 58407966,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11021",
      "updated_at" : "2017-08-25T09:33:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135041278",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/24285095?v=4",
         "events_url" : "https://api.github.com/users/AkioNak/events{/privacy}",
         "followers_url" : "https://api.github.com/users/AkioNak/followers",
         "following_url" : "https://api.github.com/users/AkioNak/following{/other_user}",
         "gists_url" : "https://api.github.com/users/AkioNak/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/AkioNak",
         "id" : 24285095,
         "login" : "AkioNak",
         "organizations_url" : "https://api.github.com/users/AkioNak/orgs",
         "received_events_url" : "https://api.github.com/users/AkioNak/received_events",
         "repos_url" : "https://api.github.com/users/AkioNak/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/AkioNak/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/AkioNak/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/AkioNak"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11021#discussion_r135050741"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11021"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135050741"
         }
      },
      "body" : "I agree to append time unit(seconds)",
      "commit_id" : "07704c1b3768d6c290046c783063644fc7b7d1da",
      "created_at" : "2017-08-24T15:36:02Z",
      "diff_hunk" : "@@ -1477,9 +1477,12 @@ UniValue getchaintxstats(const JSONRPCRequest& request)\n             \"2. \\\"blockhash\\\"  (string, optional) The hash of the block that ends the window.\\n\"\n             \"\\nResult:\\n\"\n             \"{\\n\"\n-            \"  \\\"time\\\": xxxxx,        (numeric) The timestamp for the statistics in UNIX format.\\n\"\n-            \"  \\\"txcount\\\": xxxxx,     (numeric) The total number of transactions in the chain up to that point.\\n\"\n-            \"  \\\"txrate\\\": x.xx,       (numeric) The average rate of transactions per second in the window.\\n\"\n+            \"  \\\"time\\\": xxxxx,                (numeric) The timestamp for the final block in the window in UNIX format.\\n\"\n+            \"  \\\"txcount\\\": xxxxx,             (numeric) The total number of transactions in the chain up to that point.\\n\"\n+            \"  \\\"window_block_count\\\": xxxxx,  (numeric) Size of the window in number of blocks.\\n\"\n+            \"  \\\"window_tx_count\\\": xxxxx,     (numeric) The number of transactions in the window. Only returned if \\\"window_block_count\\\" is > 0.\\n\"\n+            \"  \\\"window_interval\\\": xxxxx,     (numeric) The elapsed time in the window. Only returned if \\\"window_block_count\\\" is > 0.\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11021#discussion_r135050741",
      "id" : 135050741,
      "in_reply_to_id" : 135005736,
      "original_commit_id" : "0e30d6231a7e730c19c1c09f91b84a4cce98e55d",
      "original_position" : 11,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 58418651,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11021",
      "updated_at" : "2017-08-25T09:33:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135050741",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/24285095?v=4",
         "events_url" : "https://api.github.com/users/AkioNak/events{/privacy}",
         "followers_url" : "https://api.github.com/users/AkioNak/followers",
         "following_url" : "https://api.github.com/users/AkioNak/following{/other_user}",
         "gists_url" : "https://api.github.com/users/AkioNak/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/AkioNak",
         "id" : 24285095,
         "login" : "AkioNak",
         "organizations_url" : "https://api.github.com/users/AkioNak/orgs",
         "received_events_url" : "https://api.github.com/users/AkioNak/received_events",
         "repos_url" : "https://api.github.com/users/AkioNak/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/AkioNak/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/AkioNak/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/AkioNak"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11021#discussion_r135064670"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11021"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135064670"
         }
      },
      "body" : "No preference either way!",
      "commit_id" : "07704c1b3768d6c290046c783063644fc7b7d1da",
      "created_at" : "2017-08-24T16:26:58Z",
      "diff_hunk" : "@@ -1515,8 +1514,18 @@ UniValue getchaintxstats(const JSONRPCRequest& request)\n         }\n     }\n \n-    if (blockcount < 1 || blockcount >= pindex->nHeight) {\n-        throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid block count: should be between 1 and the block's height\");\n+    if (pindex->nHeight < 1) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11021#discussion_r135064670",
      "id" : 135064670,
      "in_reply_to_id" : 135007133,
      "original_commit_id" : "0e30d6231a7e730c19c1c09f91b84a4cce98e55d",
      "original_position" : 33,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 58434319,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11021",
      "updated_at" : "2017-08-25T09:33:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135064670",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11021#discussion_r135209573"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11021"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135209573"
         }
      },
      "body" : "`blockcount == 0` is not an error so `blockcount > 0` has to remain, I believe, for the case where `pindex` points at genesis block which means `pindex->nHeight == 0`.",
      "commit_id" : "07704c1b3768d6c290046c783063644fc7b7d1da",
      "created_at" : "2017-08-25T08:37:13Z",
      "diff_hunk" : "@@ -1515,8 +1514,18 @@ UniValue getchaintxstats(const JSONRPCRequest& request)\n         }\n     }\n \n-    if (blockcount < 1 || blockcount >= pindex->nHeight) {\n-        throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid block count: should be between 1 and the block's height\");\n+    if (pindex->nHeight < 1) {\n+        blockcount = 0;\n+    } else {\n+        blockcount = std::min(blockcount, pindex->nHeight - 1);\n+    }\n+\n+    if (!request.params[0].isNull()) {\n+        blockcount = request.params[0].get_int();\n+\n+        if (blockcount < 0 || (blockcount > 0 && blockcount >= pindex->nHeight)) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11021#discussion_r135209573",
      "id" : 135209573,
      "in_reply_to_id" : 135005875,
      "original_commit_id" : "0e30d6231a7e730c19c1c09f91b84a4cce98e55d",
      "original_position" : 42,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 58597122,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11021",
      "updated_at" : "2017-08-25T09:33:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135209573",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "body" : "@promag @jnewbery @kallewoof I fixed followings.\r\n1. add unit(seconds) to the help text of `window_interval`.\r\n2. calculate `blockcount` using `std::max()` rather than if-clause.  ",
      "created_at" : "2017-08-25T10:32:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11021#issuecomment-324881979",
      "id" : 324881979,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11021",
      "updated_at" : "2017-08-25T10:32:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/324881979",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/24285095?v=4",
         "events_url" : "https://api.github.com/users/AkioNak/events{/privacy}",
         "followers_url" : "https://api.github.com/users/AkioNak/followers",
         "following_url" : "https://api.github.com/users/AkioNak/following{/other_user}",
         "gists_url" : "https://api.github.com/users/AkioNak/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/AkioNak",
         "id" : 24285095,
         "login" : "AkioNak",
         "organizations_url" : "https://api.github.com/users/AkioNak/orgs",
         "received_events_url" : "https://api.github.com/users/AkioNak/received_events",
         "repos_url" : "https://api.github.com/users/AkioNak/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/AkioNak/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/AkioNak/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/AkioNak"
      }
   },
   {
      "body" : "Looks good to me! tested ACK 07704c1b3768d6c290046c783063644fc7b7d1da.",
      "created_at" : "2017-08-25T18:11:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11021#issuecomment-324997790",
      "id" : 324997790,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11021",
      "updated_at" : "2017-08-25T18:11:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/324997790",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Postumous utACK non-test parts of 07704c1b3768d6c290046c783063644fc7b7d1da",
      "created_at" : "2017-10-03T22:48:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11021#issuecomment-334001376",
      "id" : 334001376,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11021",
      "updated_at" : "2017-10-03T22:48:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/334001376",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/649246?v=4",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   }
]
