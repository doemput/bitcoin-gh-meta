[
   {
      "body" : "ACK",
      "created_at" : "2017-08-11T12:21:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11027#issuecomment-321798704",
      "id" : 321798704,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11027",
      "updated_at" : "2017-08-11T12:21:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/321798704",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/7463573?v=4",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "body" : "utACK e029c6e, as this is a bug fix. Though, could this potentially break client when `-rpcserialversion=0`? I am thinking about how different json implementations handle duplicate keys in a dict, where each key points to a different value.",
      "created_at" : "2017-08-11T13:21:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11027#issuecomment-321810304",
      "id" : 321810304,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11027",
      "updated_at" : "2017-08-11T13:21:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/321810304",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "body" : "@MarcoFalke Hmm. That might be a problem since `RPCSerializationFlags` are not passed to `EncodeHexTx` in `TxToUniv`.",
      "created_at" : "2017-08-11T18:54:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11027#issuecomment-321892253",
      "id" : 321892253,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11027",
      "updated_at" : "2017-08-11T18:54:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/321892253",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "body" : "> That might be a problem since `RPCSerializationFlags` are not passed to `EncodeHexTx` in `TxToUniv`.\r\n\r\nThat seems to be a bug on its own.",
      "created_at" : "2017-08-11T19:00:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11027#issuecomment-321893521",
      "id" : 321893521,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11027",
      "updated_at" : "2017-08-11T19:00:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/321893521",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Another thing is that not everything that uses `TxToUniv` needs to have hex output, e.g. `decoderawtransaction`",
      "created_at" : "2017-08-11T19:05:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11027#issuecomment-321894569",
      "id" : 321894569,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11027",
      "updated_at" : "2017-08-11T19:05:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/321894569",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "body" : "I added a commit which passes the `RPCSerializationFlags` to `TxToUniv` and a boolean for whether to give `hex` output or not.",
      "created_at" : "2017-08-11T19:22:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11027#issuecomment-321897893",
      "id" : 321897893,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11027",
      "updated_at" : "2017-08-11T19:22:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/321897893",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11027#discussion_r132772723"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11027"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/132772723"
         }
      },
      "body" : "Marking a by-value parameter as `const` is redundant. Also, style nit on `serializeFlags`.",
      "commit_id" : "9381d8625b8319f4b6c1042953d81eef577074f2",
      "created_at" : "2017-08-11T20:01:12Z",
      "diff_hunk" : "@@ -31,6 +31,6 @@ UniValue ValueFromAmount(const CAmount& amount);\n std::string FormatScript(const CScript& script);\n std::string EncodeHexTx(const CTransaction& tx, const int serializeFlags = 0);\n void ScriptPubKeyToUniv(const CScript& scriptPubKey, UniValue& out, bool fIncludeHex);\n-void TxToUniv(const CTransaction& tx, const uint256& hashBlock, UniValue& entry);\n+void TxToUniv(const CTransaction& tx, const uint256& hashBlock, UniValue& entry, const int serializeFlags = 0, bool include_hex = true);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11027#discussion_r132772723",
      "id" : 132772723,
      "original_commit_id" : "eb1dcaa52abd10cb787e8800edb50d542bde111a",
      "original_position" : 5,
      "path" : "src/core_io.h",
      "position" : null,
      "pull_request_review_id" : 55894083,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11027",
      "updated_at" : "2017-08-11T20:11:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/132772723",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11027#discussion_r132774417"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11027"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/132774417"
         }
      },
      "body" : "Fixed. It was copy and pasted from two lines above in `EncodeHexTx` :)",
      "commit_id" : "9381d8625b8319f4b6c1042953d81eef577074f2",
      "created_at" : "2017-08-11T20:11:49Z",
      "diff_hunk" : "@@ -31,6 +31,6 @@ UniValue ValueFromAmount(const CAmount& amount);\n std::string FormatScript(const CScript& script);\n std::string EncodeHexTx(const CTransaction& tx, const int serializeFlags = 0);\n void ScriptPubKeyToUniv(const CScript& scriptPubKey, UniValue& out, bool fIncludeHex);\n-void TxToUniv(const CTransaction& tx, const uint256& hashBlock, UniValue& entry);\n+void TxToUniv(const CTransaction& tx, const uint256& hashBlock, UniValue& entry, const int serializeFlags = 0, bool include_hex = true);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11027#discussion_r132774417",
      "id" : 132774417,
      "original_commit_id" : "eb1dcaa52abd10cb787e8800edb50d542bde111a",
      "original_position" : 5,
      "path" : "src/core_io.h",
      "position" : null,
      "pull_request_review_id" : 55896162,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11027",
      "updated_at" : "2017-08-11T20:11:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/132774417",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11027#discussion_r132803017"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11027"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/132803017"
         }
      },
      "body" : "I think the order should be inverted. There is no need to pass `serialize_flags` if one wants to `include_hex=false`.",
      "commit_id" : "9381d8625b8319f4b6c1042953d81eef577074f2",
      "created_at" : "2017-08-11T23:59:59Z",
      "diff_hunk" : "@@ -31,6 +31,6 @@ UniValue ValueFromAmount(const CAmount& amount);\n std::string FormatScript(const CScript& script);\n std::string EncodeHexTx(const CTransaction& tx, const int serializeFlags = 0);\n void ScriptPubKeyToUniv(const CScript& scriptPubKey, UniValue& out, bool fIncludeHex);\n-void TxToUniv(const CTransaction& tx, const uint256& hashBlock, UniValue& entry);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11027#discussion_r132803017",
      "id" : 132803017,
      "original_commit_id" : "9381d8625b8319f4b6c1042953d81eef577074f2",
      "original_position" : 4,
      "path" : "src/core_io.h",
      "position" : 4,
      "pull_request_review_id" : 55928690,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11027",
      "updated_at" : "2017-08-12T00:19:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/132803017",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "body" : "> That seems to be a bug on its own.\r\n\r\nI don't think so?\r\n\r\nAccording to the doc, `-rpcserialversion` sets the serialization of raw transaction or block hex returned in        **non-verbose** mode.",
      "created_at" : "2017-08-12T00:18:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11027#issuecomment-321944342",
      "id" : 321944342,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11027",
      "updated_at" : "2017-08-12T00:18:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/321944342",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "body" : "@MarcoFalke I interpret that as talking about when verbose mode means that you wouldn't get the hex back, e.g. in `getblock`. If we are returning hex, then I think we should be consistent and all hex should follow whatever the `RPCSerializationFlags` are.",
      "created_at" : "2017-08-12T00:28:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11027#issuecomment-321945098",
      "id" : 321945098,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11027",
      "updated_at" : "2017-08-12T00:28:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/321945098",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11027#discussion_r133764507"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11027"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/133764507"
         }
      },
      "body" : "~~Don't care about the order, though I'd prefer not using default arguments. Easy enough to just add these on all call sites, there aren't many.~~\r\n\r\nEdit: never mind, I think this is a good use of default arguments, just swap them as @promag says.",
      "commit_id" : "9381d8625b8319f4b6c1042953d81eef577074f2",
      "created_at" : "2017-08-17T16:33:08Z",
      "diff_hunk" : "@@ -31,6 +31,6 @@ UniValue ValueFromAmount(const CAmount& amount);\n std::string FormatScript(const CScript& script);\n std::string EncodeHexTx(const CTransaction& tx, const int serializeFlags = 0);\n void ScriptPubKeyToUniv(const CScript& scriptPubKey, UniValue& out, bool fIncludeHex);\n-void TxToUniv(const CTransaction& tx, const uint256& hashBlock, UniValue& entry);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11027#discussion_r133764507",
      "id" : 133764507,
      "original_commit_id" : "9381d8625b8319f4b6c1042953d81eef577074f2",
      "original_position" : 4,
      "path" : "src/core_io.h",
      "position" : 4,
      "pull_request_review_id" : 56983049,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11027",
      "updated_at" : "2017-08-17T17:10:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/133764507",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Strictly speaking, I don't think this is invalid JSON, although client behaviour is undefined if object names are not unique (https://tools.ietf.org/html/rfc7159#section-4). But yes, this is a regression in 0.15 and should be treated as a bug fix.\r\n\r\nPerhaps we should add JSON object checking to rpcserver.cpp (in `JSONRPCExecOne()`) and/or authproxy.py (in `__call__()`) to verify the validity of our returned JSON.",
      "created_at" : "2017-08-17T17:19:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11027#issuecomment-323138033",
      "id" : 323138033,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11027",
      "updated_at" : "2017-08-17T17:19:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/323138033",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "body" : "Concept ACK\r\n\r\n> Another thing is that not everything that uses TxToUniv needs to have hex output, e.g. decoderawtransaction\r\nI added a commit which passes ... a boolean for whether to give hex output or not.\r\n\r\nI don't think you should complicate the interface to `TxToUniv` to specify which fields to return. Either filter them out at the caller, or just return the hex in `decoderawtransaction`. Is there any harm in returning the hex in that RPC?",
      "created_at" : "2017-08-17T17:33:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11027#issuecomment-323141796",
      "id" : 323141796,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11027",
      "updated_at" : "2017-08-17T17:33:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/323141796",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "body" : "Swapped the arguments.\r\n\r\n>  Either filter them out at the caller\r\n\r\nI looked at that but I couldn't find anything in Univalue for removing things from it.\r\n\r\n> or just return the hex in `decoderawtransaction`. Is there any harm in returning the hex in that RPC?\r\n\r\nSince you are already providing it the hex, it's not useful to be giving the hex back out to the user.",
      "created_at" : "2017-08-17T17:52:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11027#issuecomment-323146751",
      "id" : 323146751,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11027",
      "updated_at" : "2017-08-17T17:52:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/323146751",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "body" : "utACK e029c6e\r\n\r\n> There are only 2 more calls to TxToUniv so I wonder if it pays to have default arguments.\r\n\r\n+1\r\n",
      "created_at" : "2017-08-17T20:41:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11027#issuecomment-323188236",
      "id" : 323188236,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11027",
      "updated_at" : "2017-08-17T20:41:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/323188236",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1008458?v=4",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "body" : "Wild option Ã°ÂÂÂ:\r\n```\r\nvoid TxToUniv(const CTransaction& tx, const uint256& hashBlock, UniValue& entry);\r\nvoid TxToUnivWithHex(const CTransaction& tx, const uint256& hashBlock, int serialize_flags, UniValue& entry);\r\n```",
      "created_at" : "2017-08-17T22:54:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11027#issuecomment-323215814",
      "id" : 323215814,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11027",
      "updated_at" : "2017-08-17T22:54:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/323215814",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "body" : "> Since you are already providing it the hex, it's not useful to be giving the hex back out to the user.\r\n\r\nI was also really surprised to see the hex being echoed back in `decoderawtransaction` output. That's just a waste of bandwidth especially for large transactions.\r\n\r\n>  Either filter them out at the caller\r\n\r\nNo, don't do this. univalue objects aren't meant to be written to/processed after initial generation. The library is not optimized for that. If you need any kind of editing use an intermedaite data structure (which makes no sense from 'XXXToJSON` functions). Specifying which fields to include looks like exactly the right way here.",
      "created_at" : "2017-08-21T06:41:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11027#issuecomment-323659189",
      "id" : 323659189,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11027",
      "updated_at" : "2017-08-21T06:43:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/323659189",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   }
]
