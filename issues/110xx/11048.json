{
   "assignee" : null,
   "assignees" : [],
   "body" : "This is on testnet:\r\n```\r\n$ bitcoin-cli getnewaddress\r\nmtDEt17M5zmYKpnw6jySu5yKQzSEUDkgAR\r\n\r\n$ bitcoin-cli addwitnessaddress mtDEt17M5zmYKpnw6jySu5yKQzSEUDkgAR\r\n2MzysLfegPX9ZFDS9W2Bv9jh5MgmvTE5VUC\r\n\r\n```\r\n\r\nThen got some money sent to that address, and then sent it to myself using the gui with a custom change address of the same address:\r\n\r\nhttps://testnet.smartbit.com.au/tx/0523ca1832220dee772216f4d3ba429df66963eb770829b146059fbea1a24da4\r\n\r\n(Which gives an incorrect error in the gui: \r\n<img width=\"1115\" alt=\"screen shot 2017-08-14 at 3 38 27 pm\" src=\"https://user-images.githubusercontent.com/9326759/29291423-2a299436-8109-11e7-979e-b5f82cce9b22.png\"> but that's a minor issue)\r\n\r\n\r\n\r\nNow:\r\n```\r\n$ bitcoin-cli gettransaction 0523ca1832220dee772216f4d3ba429df66963eb770829b146059fbea1a24da4\r\n\r\n{\r\n  \"amount\": 0.00000000,\r\n  \"fee\": -0.00073595,\r\n  \"confirmations\": 3,\r\n  \"blockhash\": \"00000000000003b2aecdcc2f7fd00399399b48790625b8c2fd61fc4431e49302\",\r\n  \"blockindex\": 10,\r\n  \"blocktime\": 1502743284,\r\n  \"txid\": \"0523ca1832220dee772216f4d3ba429df66963eb770829b146059fbea1a24da4\",\r\n  \"walletconflicts\": [\r\n  ],\r\n  \"time\": 1502743130,\r\n  \"timereceived\": 1502743130,\r\n  \"bip125-replaceable\": \"no\",\r\n  \"details\": [\r\n    {\r\n      \"account\": \"\",\r\n      \"address\": \"2MzysLfegPX9ZFDS9W2Bv9jh5MgmvTE5VUC\",\r\n      \"category\": \"send\",\r\n      \"amount\": -0.04981599,\r\n      \"label\": \"\",\r\n      \"vout\": 0,\r\n      \"fee\": -0.00073595,\r\n      \"abandoned\": false\r\n    }, \r\n    {\r\n      \"account\": \"\",\r\n      \"address\": \"2MzysLfegPX9ZFDS9W2Bv9jh5MgmvTE5VUC\",\r\n      \"category\": \"send\",\r\n      \"amount\": -0.00500000,\r\n      \"label\": \"\",\r\n      \"vout\": 1,\r\n      \"fee\": -0.00073595,\r\n      \"abandoned\": false\r\n    }, \r\n    {\r\n      \"account\": \"\",\r\n      \"address\": \"2MzysLfegPX9ZFDS9W2Bv9jh5MgmvTE5VUC\",\r\n      \"category\": \"receive\",\r\n      \"amount\": 0.04981599,\r\n      \"label\": \"\",\r\n      \"vout\": 0\r\n    }, \r\n    {\r\n      \"account\": \"\",\r\n      \"address\": \"2MzysLfegPX9ZFDS9W2Bv9jh5MgmvTE5VUC\",\r\n      \"category\": \"receive\",\r\n      \"amount\": 0.00500000,\r\n      \"label\": \"\",\r\n      \"vout\": 1\r\n    }\r\n  ],\r\n  \"hex\": \"020000000001019babaddea139f754e38cec18c4a83eccda4c288e35958ee1f8532e23a381a7a401000000171600148b3ffe1b7702bd4b683ab5aee9c955f8baa0097dfdffffff025f034c000000000017a91454d987c10cb670b594953f5fcfaa881c0a644bc58720a107000000000017a91454d987c10cb670b594953f5fcfaa881c0a644bc5870248304502210095d3dd05c1f79cf8c9c1d8fbe01e2ccd391a2d74117fa0c3fad4049f1a1aa16602207d39d152197cc95ab910aa09426998f311c6f1e5b53e17b894c55f86f4023be6012103e5a52b4575dbfb507a708e482c3921ebd057944133093c4679ad0e0b29bae894bdf91100\"\r\n}\r\n```\r\n\r\nThere's a couple issues:\r\n\r\n```\r\nbip125-replaceable\": \"no\",\r\n```\r\n\r\nWhile in my `bitcoin.conf` was: `walletrbf=1` but also look at the `details` it shows 2 sends when there should only be 1.\r\n",
   "closed_at" : null,
   "closed_by" : null,
   "comments" : 0,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11048/comments",
   "created_at" : "2017-08-14T20:55:40Z",
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11048/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/issues/11048",
   "id" : 250151629,
   "labels" : [],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11048/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "number" : 11048,
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "open",
   "title" : "Weird gettransaction details on testnet with segwit",
   "updated_at" : "2017-08-14T21:19:11Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11048",
   "user" : {
      "avatar_url" : "https://avatars0.githubusercontent.com/u/9326759?v=4",
      "events_url" : "https://api.github.com/users/RHavar/events{/privacy}",
      "followers_url" : "https://api.github.com/users/RHavar/followers",
      "following_url" : "https://api.github.com/users/RHavar/following{/other_user}",
      "gists_url" : "https://api.github.com/users/RHavar/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/RHavar",
      "id" : 9326759,
      "login" : "RHavar",
      "organizations_url" : "https://api.github.com/users/RHavar/orgs",
      "received_events_url" : "https://api.github.com/users/RHavar/received_events",
      "repos_url" : "https://api.github.com/users/RHavar/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/RHavar/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/RHavar/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/RHavar"
   }
}
