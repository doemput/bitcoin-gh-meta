[
   {
      "body" : "utACK https://github.com/bitcoin/bitcoin/pull/10457/commits/f4823abad5bd2c9a556f3ebf2b87160c94f693ed.\r\n\r\nIf I read correctly this will change the name to `<something>.dat.<timestamp>.bak` but that's okay.",
      "created_at" : "2017-06-01T08:30:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10457#issuecomment-305426494",
      "id" : 305426494,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10457",
      "updated_at" : "2017-06-01T08:30:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/305426494",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Concept ACK. Not having this blocks multi-wallet.\r\n\r\nI'd be a lot happier if the -salvagewallet test was being run. It's currently commented out of wallet.py because of intermittent failure (#7463). I'll spend some time seeing if I can fix those failures.",
      "created_at" : "2017-06-02T18:49:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10457#issuecomment-305879195",
      "id" : 305879195,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10457",
      "updated_at" : "2017-06-02T18:49:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/305879195",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "body" : "Concept ACK",
      "created_at" : "2017-06-03T18:23:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10457#issuecomment-305992707",
      "id" : 305992707,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10457",
      "updated_at" : "2017-06-03T18:23:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/305992707",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "> It's currently commented out of wallet.py because of intermittent failure (#7463)\r\n\r\nYes I narrowed it down to a berkeleydb issue last time, and wasn't sure how to proceed:\r\n\r\nhttps://github.com/bitcoin/bitcoin/issues/7463#issuecomment-201319622",
      "created_at" : "2017-06-05T12:31:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10457#issuecomment-306176251",
      "id" : 306176251,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10457",
      "updated_at" : "2017-06-05T12:31:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/306176251",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "utACK f4823abad5bd2c9a556f3ebf2b87160c94f693ed (uncommented the salvagewallet check and run in a loop without issues)",
      "created_at" : "2017-06-05T16:51:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10457#issuecomment-306240996",
      "id" : 306240996,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10457",
      "updated_at" : "2017-06-05T16:51:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/306240996",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/6399679?v=3",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "body" : "> uncommented the salvagewallet check and run in a loop without issues\r\n\r\nI can reproduce this by running `wallet.py` 50 times through test_runner.py. From debug.log:\r\n\r\n```\r\n2017-06-05 15:46:54.510473 CDBEnv::Salvage: Database salvage found errors, all data may not be recoverable.\r\n2017-06-05 15:46:54.510639 CDBEnv::Salvage: WARNING: Number of keys in data does not match number of values.\r\n2017-06-05 15:46:54.510648 CDBEnv::Salvage: WARNING: Unexpected end of file while reading salvage output.\r\n2017-06-05 15:46:54.510657 Salvage(aggressive) found 102 records\r\n```",
      "created_at" : "2017-06-05T16:57:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10457#issuecomment-306242564",
      "id" : 306242564,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10457",
      "updated_at" : "2017-06-05T16:57:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/306242564",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "body" : "Tested ACK with one small nit:\r\n\r\nPlease update the comment at the top of CDB::Recover() from:\r\n`    // move wallet file to wallet.timestamp.bak`\r\n\r\nto:\r\n`    // move wallet file to <wallet_name>.<timestamp>.bak`\r\n\r\nOtherwise looks good. I've tested f4823abad5bd2c9a556f3ebf2b87160c94f693ed and it renames the wallet backups correctly.",
      "created_at" : "2017-06-06T17:11:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10457#issuecomment-306554226",
      "id" : 306554226,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10457",
      "updated_at" : "2017-06-06T17:11:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/306554226",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "body" : "Needs rebase after #8694",
      "created_at" : "2017-06-12T13:34:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10457#issuecomment-307790800",
      "id" : 307790800,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10457",
      "updated_at" : "2017-06-12T13:34:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/307790800",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "I think this is a much cleaner solution than was implemented in #8694. There's no need to pass around the wallet name just so it can be printed in a warning message. I think it's worth rebasing this on master and reverting the changes in https://github.com/bitcoin/bitcoin/pull/8694/commits/b823a4c9f6836c802803dbd265cb7451fb93b8e7",
      "created_at" : "2017-06-12T13:46:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10457#issuecomment-307794068",
      "id" : 307794068,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10457",
      "updated_at" : "2017-06-12T13:46:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/307794068",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "body" : "Changed:\r\nThis now reverts https://github.com/bitcoin/bitcoin/commit/b823a4c9f6836c802803dbd265cb7451fb93b8e7 and adds the identical simple fix for the static wallet name.",
      "created_at" : "2017-06-12T19:57:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10457#issuecomment-307906379",
      "id" : 307906379,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10457",
      "updated_at" : "2017-06-12T19:57:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/307906379",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "PR title and summary are misleading because now this PR only does code cleanup without actually changing the filename.\r\n\r\nAlso, I prefer b823a4c9f6836c802803dbd265cb7451fb93b8e7 to this PR, because it prints a more meaningful log message, and I don't think it is a big deal that the recover function now takes 2 arguments instead of 1.\r\n\r\nI think if you wanted to clean up this code, you would just call the recover function directly or through std::function instead through a raw function pointer.",
      "created_at" : "2017-06-12T20:24:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10457#issuecomment-307913308",
      "id" : 307913308,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10457",
      "updated_at" : "2017-06-12T20:24:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/307913308",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/7133040?v=3",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "body" : "Tested ACK e9d09f23e3a097605730988f2dcb818a57dee745. I think this is definitely an improvement.",
      "created_at" : "2017-06-14T17:49:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10457#issuecomment-308507768",
      "id" : 308507768,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10457",
      "updated_at" : "2017-06-14T17:49:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/308507768",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10457#discussion_r122034298"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10457"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/122034298"
         }
      },
      "body" : "Why show a filename at all, if it's not even going to tell you which one?",
      "commit_id" : "e9d09f23e3a097605730988f2dcb818a57dee745",
      "created_at" : "2017-06-14T18:51:10Z",
      "diff_hunk" : "@@ -259,19 +259,18 @@ bool CDB::VerifyEnvironment(const std::string& walletFile, const fs::path& dataD\n     return true;\n }\n \n-bool CDB::VerifyDatabaseFile(const std::string& walletFile, const fs::path& dataDir, std::string& warningStr, std::string& errorStr, CDBEnv::recoverFunc_type recoverFunc)\n+bool CDB::VerifyDatabaseFile(const std::string& walletFile, const fs::path& dataDir, std::string& warningStr, std::string& errorStr, bool (*recoverFunc)(const std::string& strFile))\n {\n     if (fs::exists(dataDir / walletFile))\n     {\n-        std::string backup_filename;\n-        CDBEnv::VerifyResult r = bitdb.Verify(walletFile, recoverFunc, backup_filename);\n+        CDBEnv::VerifyResult r = bitdb.Verify(walletFile, recoverFunc);\n         if (r == CDBEnv::RECOVER_OK)\n         {\n             warningStr = strprintf(_(\"Warning: Wallet file corrupt, data salvaged!\"\n                                      \" Original %s saved as %s in %s; if\"\n                                      \" your balance or transactions are incorrect you should\"\n                                      \" restore from a backup.\"),\n-                                   walletFile, backup_filename, dataDir);\n+                                   walletFile, \"{walletfilename}.{timestamp}.bak\", dataDir);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10457#discussion_r122034298",
      "id" : 122034298,
      "original_commit_id" : "e9d09f23e3a097605730988f2dcb818a57dee745",
      "original_position" : 51,
      "path" : "src/wallet/db.cpp",
      "position" : 51,
      "pull_request_review_id" : 44114012,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10457",
      "updated_at" : "2017-06-14T18:51:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/122034298",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10457#discussion_r124987003"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10457"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/124987003"
         }
      },
      "body" : "I think it won't hurt. But no strong opinion.",
      "commit_id" : "e9d09f23e3a097605730988f2dcb818a57dee745",
      "created_at" : "2017-06-30T08:19:43Z",
      "diff_hunk" : "@@ -259,19 +259,18 @@ bool CDB::VerifyEnvironment(const std::string& walletFile, const fs::path& dataD\n     return true;\n }\n \n-bool CDB::VerifyDatabaseFile(const std::string& walletFile, const fs::path& dataDir, std::string& warningStr, std::string& errorStr, CDBEnv::recoverFunc_type recoverFunc)\n+bool CDB::VerifyDatabaseFile(const std::string& walletFile, const fs::path& dataDir, std::string& warningStr, std::string& errorStr, bool (*recoverFunc)(const std::string& strFile))\n {\n     if (fs::exists(dataDir / walletFile))\n     {\n-        std::string backup_filename;\n-        CDBEnv::VerifyResult r = bitdb.Verify(walletFile, recoverFunc, backup_filename);\n+        CDBEnv::VerifyResult r = bitdb.Verify(walletFile, recoverFunc);\n         if (r == CDBEnv::RECOVER_OK)\n         {\n             warningStr = strprintf(_(\"Warning: Wallet file corrupt, data salvaged!\"\n                                      \" Original %s saved as %s in %s; if\"\n                                      \" your balance or transactions are incorrect you should\"\n                                      \" restore from a backup.\"),\n-                                   walletFile, backup_filename, dataDir);\n+                                   walletFile, \"{walletfilename}.{timestamp}.bak\", dataDir);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10457#discussion_r124987003",
      "id" : 124987003,
      "original_commit_id" : "e9d09f23e3a097605730988f2dcb818a57dee745",
      "original_position" : 51,
      "path" : "src/wallet/db.cpp",
      "position" : 51,
      "pull_request_review_id" : 47331517,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10457",
      "updated_at" : "2017-06-30T08:19:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/124987003",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10457#discussion_r129493131"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10457"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/129493131"
         }
      },
      "body" : "Not sure what the state of this PR is, but I just saw this change: isn't it clearer to define a type here, instead of make the function type definition in-line in the parameter definition?",
      "commit_id" : "e9d09f23e3a097605730988f2dcb818a57dee745",
      "created_at" : "2017-07-26T06:52:08Z",
      "diff_hunk" : "@@ -55,8 +55,7 @@ class CDBEnv\n     enum VerifyResult { VERIFY_OK,\n                         RECOVER_OK,\n                         RECOVER_FAIL };\n-    typedef bool (*recoverFunc_type)(const std::string& strFile, std::string& out_backup_filename);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10457#discussion_r129493131",
      "id" : 129493131,
      "original_commit_id" : "e9d09f23e3a097605730988f2dcb818a57dee745",
      "original_position" : 4,
      "path" : "src/wallet/db.h",
      "position" : 4,
      "pull_request_review_id" : 52270582,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10457",
      "updated_at" : "2017-07-26T06:52:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/129493131",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "PR description and title are misleading and need to be updated (especially now that PR description will go into git history) to say this is only changing the `Wallet file corrupt, data salvaged!` error message (by removing the recovered filename), and making a slight code simplification.\r\n\r\nThis PR is **not** fixing any current bug. It's just temporarily reintroducing a bug that was fixed a while ago, and then applying a slightly simpler fix. IMO, squashing commit history in this PR would be a good way to make it less confusing and avoid temporarily reintroducing a bug.",
      "created_at" : "2017-07-26T07:32:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10457#issuecomment-317972915",
      "id" : 317972915,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10457",
      "updated_at" : "2017-07-26T07:32:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/317972915",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10457#discussion_r129509331"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10457"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/129509331"
         }
      },
      "body" : "And maybe use a std::function, that's more c++11 than a function pointer.",
      "commit_id" : "e9d09f23e3a097605730988f2dcb818a57dee745",
      "created_at" : "2017-07-26T08:24:33Z",
      "diff_hunk" : "@@ -55,8 +55,7 @@ class CDBEnv\n     enum VerifyResult { VERIFY_OK,\n                         RECOVER_OK,\n                         RECOVER_FAIL };\n-    typedef bool (*recoverFunc_type)(const std::string& strFile, std::string& out_backup_filename);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10457#discussion_r129509331",
      "id" : 129509331,
      "original_commit_id" : "e9d09f23e3a097605730988f2dcb818a57dee745",
      "original_position" : 4,
      "path" : "src/wallet/db.h",
      "position" : 4,
      "pull_request_review_id" : 52288341,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10457",
      "updated_at" : "2017-07-26T08:24:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/129509331",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "I think it's better to show the actual filename, but so long as this is refactored cleanly (ie, keep the typedef), I don't care to argue against it.",
      "created_at" : "2017-07-26T09:02:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10457#issuecomment-317994128",
      "id" : 317994128,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10457",
      "updated_at" : "2017-07-26T09:02:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/317994128",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "I'm marginally for this change because it's a worthwhile simplification to not pass the wallet name around simply for printing in an error message. I agree with @ryanofsky that PR comment should be changed and commits squashed.",
      "created_at" : "2017-07-26T09:20:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10457#issuecomment-317998410",
      "id" : 317998410,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10457",
      "updated_at" : "2017-07-26T09:20:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/317998410",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   }
]
