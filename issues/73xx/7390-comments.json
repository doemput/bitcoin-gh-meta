[
   {
      "body" : "I may be confusing things, but I think this change is incorrect: \r\nOne would use this functionality to get the hash to pay to a script (to be specified in the input claiming this output), to use in a P2SH output script.\r\nIf something is already a P2SH output script (signified by `script.IsPayToScriptHash`), there's no use to hash it into another one. After all, you can't pay to another output.\r\n",
      "created_at" : "2016-01-22T12:32:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7390#issuecomment-173908829",
      "id" : 173908829,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7390",
      "updated_at" : "2016-01-22T12:40:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/173908829",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "@laanwj No, you're right; the confusion is mine. The p2sh address is the only element in the \"addresses\" array of the json output. With that in mind, I recommend either\r\n\r\n- Using that sole element of the \"addresses\" array for the \"p2sh\" string, or\r\n- Not outputting any \"p2sh\" string.\r\n\r\nI can implement either one.",
      "created_at" : "2016-01-22T13:05:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7390#issuecomment-173915498",
      "id" : 173915498,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7390",
      "updated_at" : "2016-01-22T13:05:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/173915498",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6020810?v=3",
         "events_url" : "https://api.github.com/users/Kefkius/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Kefkius/followers",
         "following_url" : "https://api.github.com/users/Kefkius/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Kefkius/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Kefkius",
         "id" : 6020810,
         "login" : "Kefkius",
         "organizations_url" : "https://api.github.com/users/Kefkius/orgs",
         "received_events_url" : "https://api.github.com/users/Kefkius/received_events",
         "repos_url" : "https://api.github.com/users/Kefkius/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Kefkius/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Kefkius/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Kefkius"
      }
   },
   {
      "body" : "Can you show what is the issue with the current output?\r\n",
      "created_at" : "2016-01-22T13:08:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7390#issuecomment-173915973",
      "id" : 173915973,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7390",
      "updated_at" : "2016-01-22T13:08:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/173915973",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "@laanwj Do you mean the current output as in the output without this patch, or the current output with this patch?",
      "created_at" : "2016-01-22T13:08:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7390#issuecomment-173916116",
      "id" : 173916116,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7390",
      "updated_at" : "2016-01-22T13:08:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/173916116",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6020810?v=3",
         "events_url" : "https://api.github.com/users/Kefkius/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Kefkius/followers",
         "following_url" : "https://api.github.com/users/Kefkius/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Kefkius/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Kefkius",
         "id" : 6020810,
         "login" : "Kefkius",
         "organizations_url" : "https://api.github.com/users/Kefkius/orgs",
         "received_events_url" : "https://api.github.com/users/Kefkius/received_events",
         "repos_url" : "https://api.github.com/users/Kefkius/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Kefkius/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Kefkius/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Kefkius"
      }
   },
   {
      "body" : "In the current software: e.g. show the output how it is, and how it should be according to you. Which problem are you fixing / trying to fix?\r\n",
      "created_at" : "2016-01-22T13:17:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7390#issuecomment-173917715",
      "id" : 173917715,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7390",
      "updated_at" : "2016-01-22T13:17:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/173917715",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "```\r\n$ bitcoin-cli decodescript a914000000000000000000000000000000000000000087\r\n{\r\n    \"asm\" : \"OP_HASH160 0000000000000000000000000000000000000000 OP_EQUAL\",\r\n    \"reqSigs\" : 1,\r\n    \"type\" : \"scripthash\",\r\n    \"addresses\" : [\r\n        \"31h1vYVSYuKP6AhS86fbRdMw9XHieotbST\"\r\n    ],\r\n    \"p2sh\" : \"3JN66NLyYtXh1yQH3BsfsJgh9CQU3xYyWx\"\r\n}\r\n```\r\n\r\nIn the above output, \"3JN66NLyYtXh1yQH3BsfsJgh9CQU3xYyWx\" is shown as the P2SH address, while the actual address is 31h1vYVSYuKP6AhS86fbRdMw9XHieotbST, as shown in the \"addresses\" array. This could cause confusion.\r\n\r\nThe P2SH address for whatever script is input is shown regardless of the script's contents. Here's it generating an address that shouldn't be paid to:\r\n```\r\n$ bitcoin-cli decodescript 6a023905\r\n{\r\n    \"asm\" : \"OP_RETURN 1337\",\r\n    \"type\" : \"nulldata\",\r\n    \"p2sh\" : \"353pyJLTuq9RgFrxC9muEer5CXjKRv8SMJ\"\r\n}\r\n```\r\n\r\n*Edit*\r\nOh, and how it should be according to me: Just omit \"p2sh\" in the output.",
      "created_at" : "2016-01-22T13:27:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7390#issuecomment-173921727",
      "id" : 173921727,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7390",
      "updated_at" : "2016-01-22T13:30:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/173921727",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6020810?v=3",
         "events_url" : "https://api.github.com/users/Kefkius/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Kefkius/followers",
         "following_url" : "https://api.github.com/users/Kefkius/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Kefkius/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Kefkius",
         "id" : 6020810,
         "login" : "Kefkius",
         "organizations_url" : "https://api.github.com/users/Kefkius/orgs",
         "received_events_url" : "https://api.github.com/users/Kefkius/received_events",
         "repos_url" : "https://api.github.com/users/Kefkius/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Kefkius/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Kefkius/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Kefkius"
      }
   },
   {
      "body" : "Just omitting it is not acceptable - people are relying on this functionality. Even moving it to a different place will break software using this.\r\n\r\nIf you are afraid of people getting confused, improving the documentation (`help decodescript`) would be the most effective and realizable solution.",
      "created_at" : "2016-01-22T13:58:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7390#issuecomment-173927546",
      "id" : 173927546,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7390",
      "updated_at" : "2016-01-22T13:58:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/173927546",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "@laanwj Alright, I'll go ahead and close this. Possibly just over-caution on my part.",
      "created_at" : "2016-01-22T14:02:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7390#issuecomment-173928460",
      "id" : 173928460,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7390",
      "updated_at" : "2016-01-22T14:02:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/173928460",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6020810?v=3",
         "events_url" : "https://api.github.com/users/Kefkius/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Kefkius/followers",
         "following_url" : "https://api.github.com/users/Kefkius/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Kefkius/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Kefkius",
         "id" : 6020810,
         "login" : "Kefkius",
         "organizations_url" : "https://api.github.com/users/Kefkius/orgs",
         "received_events_url" : "https://api.github.com/users/Kefkius/received_events",
         "repos_url" : "https://api.github.com/users/Kefkius/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Kefkius/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Kefkius/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Kefkius"
      }
   }
]
