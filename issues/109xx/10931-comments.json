[
   {
      "body" : "Should tag for 0.15 since this fixes a new error and wouldn't be backwards compatible if it was in a later release.",
      "created_at" : "2017-07-26T08:32:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10931#issuecomment-317986572",
      "id" : 317986572,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10931",
      "updated_at" : "2017-07-26T08:32:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/317986572",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "body" : "utACK 5bb4fe6b3f7c8ced61902615edee708667cbae33",
      "created_at" : "2017-07-26T09:17:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10931#issuecomment-317997799",
      "id" : 317997799,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10931",
      "updated_at" : "2017-07-26T09:17:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/317997799",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10931#discussion_r129523302"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10931"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/129523302"
         }
      },
      "body" : "Any chance of changing the error message to `Method not found (wallet disabled)`?",
      "commit_id" : "df389bca2048f5814387987463fe3298766bc6b6",
      "created_at" : "2017-07-26T09:27:24Z",
      "diff_hunk" : "@@ -57,13 +57,15 @@ std::string HelpRequiringPassphrase(CWallet * const pwallet)\n \n bool EnsureWalletIsAvailable(CWallet * const pwallet, bool avoidException)\n {\n-    if (!pwallet) {\n-        if (!avoidException)\n-            throw JSONRPCError(RPC_METHOD_NOT_FOUND, \"Method not found (disabled)\");\n-        else\n-            return false;\n-    }\n-    return true;\n+    if (pwallet) return true;\n+    if (avoidException) return false;\n+    if (::vpwallets.empty()) {\n+        // Wallet RPC methods are disabled if no wallets are loaded.\n+        throw JSONRPCError(RPC_METHOD_NOT_FOUND, \"Method not found (disabled)\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10931#discussion_r129523302",
      "id" : 129523302,
      "original_commit_id" : "5bb4fe6b3f7c8ced61902615edee708667cbae33",
      "original_position" : 24,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 52303502,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10931",
      "updated_at" : "2017-07-27T15:26:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/129523302",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10931#discussion_r129526990"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10931"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/129526990"
         }
      },
      "body" : "Not sure if we should mention a specific RPC client (bitcoin-cli) on the server side.",
      "commit_id" : "df389bca2048f5814387987463fe3298766bc6b6",
      "created_at" : "2017-07-26T09:44:04Z",
      "diff_hunk" : "@@ -57,13 +57,15 @@ std::string HelpRequiringPassphrase(CWallet * const pwallet)\n \n bool EnsureWalletIsAvailable(CWallet * const pwallet, bool avoidException)\n {\n-    if (!pwallet) {\n-        if (!avoidException)\n-            throw JSONRPCError(RPC_METHOD_NOT_FOUND, \"Method not found (disabled)\");\n-        else\n-            return false;\n-    }\n-    return true;\n+    if (pwallet) return true;\n+    if (avoidException) return false;\n+    if (::vpwallets.empty()) {\n+        // Wallet RPC methods are disabled if no wallets are loaded.\n+        throw JSONRPCError(RPC_METHOD_NOT_FOUND, \"Method not found (disabled)\");\n+    }\n+    throw JSONRPCError(RPC_WALLET_NOT_SPECIFIED, \"Wallet file not specified (please provide bitcoin-cli \"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10931#discussion_r129526990",
      "id" : 129526990,
      "original_commit_id" : "5bb4fe6b3f7c8ced61902615edee708667cbae33",
      "original_position" : 26,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 52307544,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10931",
      "updated_at" : "2017-07-27T15:26:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/129526990",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/178464?v=4",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "utACK 5bb4fe6b3f7c8ced61902615edee708667cbae33",
      "created_at" : "2017-07-26T09:44:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10931#issuecomment-318004672",
      "id" : 318004672,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10931",
      "updated_at" : "2017-07-26T09:44:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/318004672",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/178464?v=4",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10931#discussion_r129527864"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10931"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/129527864"
         }
      },
      "body" : "Or \"no wallets loaded\", I think that's more relevant now, especially when runtime loading/unloading is added later",
      "commit_id" : "df389bca2048f5814387987463fe3298766bc6b6",
      "created_at" : "2017-07-26T09:48:20Z",
      "diff_hunk" : "@@ -57,13 +57,15 @@ std::string HelpRequiringPassphrase(CWallet * const pwallet)\n \n bool EnsureWalletIsAvailable(CWallet * const pwallet, bool avoidException)\n {\n-    if (!pwallet) {\n-        if (!avoidException)\n-            throw JSONRPCError(RPC_METHOD_NOT_FOUND, \"Method not found (disabled)\");\n-        else\n-            return false;\n-    }\n-    return true;\n+    if (pwallet) return true;\n+    if (avoidException) return false;\n+    if (::vpwallets.empty()) {\n+        // Wallet RPC methods are disabled if no wallets are loaded.\n+        throw JSONRPCError(RPC_METHOD_NOT_FOUND, \"Method not found (disabled)\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10931#discussion_r129527864",
      "id" : 129527864,
      "original_commit_id" : "5bb4fe6b3f7c8ced61902615edee708667cbae33",
      "original_position" : 24,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 52308538,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10931",
      "updated_at" : "2017-07-27T15:26:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/129527864",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10931#discussion_r129528745"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10931"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/129528745"
         }
      },
      "body" : "Agree with @jonasschnelli, we shouldn't mention bitcoin-cli in server errors.\r\nNothing prevents you from catching this specific error code in the client and giving a specific error though, if you want to be user-friendly.",
      "commit_id" : "df389bca2048f5814387987463fe3298766bc6b6",
      "created_at" : "2017-07-26T09:52:34Z",
      "diff_hunk" : "@@ -57,13 +57,15 @@ std::string HelpRequiringPassphrase(CWallet * const pwallet)\n \n bool EnsureWalletIsAvailable(CWallet * const pwallet, bool avoidException)\n {\n-    if (!pwallet) {\n-        if (!avoidException)\n-            throw JSONRPCError(RPC_METHOD_NOT_FOUND, \"Method not found (disabled)\");\n-        else\n-            return false;\n-    }\n-    return true;\n+    if (pwallet) return true;\n+    if (avoidException) return false;\n+    if (::vpwallets.empty()) {\n+        // Wallet RPC methods are disabled if no wallets are loaded.\n+        throw JSONRPCError(RPC_METHOD_NOT_FOUND, \"Method not found (disabled)\");\n+    }\n+    throw JSONRPCError(RPC_WALLET_NOT_SPECIFIED, \"Wallet file not specified (please provide bitcoin-cli \"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10931#discussion_r129528745",
      "id" : 129528745,
      "original_commit_id" : "5bb4fe6b3f7c8ced61902615edee708667cbae33",
      "original_position" : 26,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 52309566,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10931",
      "updated_at" : "2017-07-27T15:26:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/129528745",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10931#discussion_r129563725"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10931"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/129563725"
         }
      },
      "body" : "Thread https://github.com/bitcoin/bitcoin/pull/10931#discussion_r129526990\r\n\r\nUnclear why this would be an improvement, and how the server mentioning a bitcoin-cli option is different than server providing bitcoin-cli command lines in the help text of all rpc methods (which seems like a good thing to me). Generating the text in one place instead of two places means it can be more coherent. And maybe there is some maintainability argument on the side of having more ambiguous or fragmented text, but in this case adding code to bitcoin-cli to handle wallet not specified doesn't seem like a clear win for maintainability, either.",
      "commit_id" : "df389bca2048f5814387987463fe3298766bc6b6",
      "created_at" : "2017-07-26T12:59:46Z",
      "diff_hunk" : "@@ -57,13 +57,15 @@ std::string HelpRequiringPassphrase(CWallet * const pwallet)\n \n bool EnsureWalletIsAvailable(CWallet * const pwallet, bool avoidException)\n {\n-    if (!pwallet) {\n-        if (!avoidException)\n-            throw JSONRPCError(RPC_METHOD_NOT_FOUND, \"Method not found (disabled)\");\n-        else\n-            return false;\n-    }\n-    return true;\n+    if (pwallet) return true;\n+    if (avoidException) return false;\n+    if (::vpwallets.empty()) {\n+        // Wallet RPC methods are disabled if no wallets are loaded.\n+        throw JSONRPCError(RPC_METHOD_NOT_FOUND, \"Method not found (disabled)\");\n+    }\n+    throw JSONRPCError(RPC_WALLET_NOT_SPECIFIED, \"Wallet file not specified (please provide bitcoin-cli \"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10931#discussion_r129563725",
      "id" : 129563725,
      "original_commit_id" : "5bb4fe6b3f7c8ced61902615edee708667cbae33",
      "original_position" : 26,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 52349144,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10931",
      "updated_at" : "2017-07-27T15:26:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/129563725",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10931#discussion_r129574537"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10931"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/129574537"
         }
      },
      "body" : "Thread https://github.com/bitcoin/bitcoin/pull/10931#discussion_r129523302\r\n\r\nOk, added in 4cfa4442aa53d9c86d1596e05dcd1608d378120f",
      "commit_id" : "df389bca2048f5814387987463fe3298766bc6b6",
      "created_at" : "2017-07-26T13:42:54Z",
      "diff_hunk" : "@@ -57,13 +57,15 @@ std::string HelpRequiringPassphrase(CWallet * const pwallet)\n \n bool EnsureWalletIsAvailable(CWallet * const pwallet, bool avoidException)\n {\n-    if (!pwallet) {\n-        if (!avoidException)\n-            throw JSONRPCError(RPC_METHOD_NOT_FOUND, \"Method not found (disabled)\");\n-        else\n-            return false;\n-    }\n-    return true;\n+    if (pwallet) return true;\n+    if (avoidException) return false;\n+    if (::vpwallets.empty()) {\n+        // Wallet RPC methods are disabled if no wallets are loaded.\n+        throw JSONRPCError(RPC_METHOD_NOT_FOUND, \"Method not found (disabled)\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10931#discussion_r129574537",
      "id" : 129574537,
      "original_commit_id" : "5bb4fe6b3f7c8ced61902615edee708667cbae33",
      "original_position" : 24,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 52349144,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10931",
      "updated_at" : "2017-07-27T15:26:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/129574537",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "body" : "utACK 4cfa4442aa53d9c86d1596e05dcd1608d378120f",
      "created_at" : "2017-07-26T18:46:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10931#issuecomment-318146374",
      "id" : 318146374,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10931",
      "updated_at" : "2017-07-26T18:46:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/318146374",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10931#discussion_r129737315"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10931"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/129737315"
         }
      },
      "body" : "Actually it appears that it's not currently possible to hit this error. If bitcoind is started with `disablewallet` then the wallet RPC commands aren't registered and any call to a wallet RPC will be rejected here: https://github.com/bitcoin/bitcoin/blob/5c8eb7916de7030d6610df53977b3068342c8f24/src/rpc/server.cpp#L495. I don't think there's currently a way to start bitcoind with the wallet component loaded but no wallets loaded.\r\n\r\nCode looks good and will be required when dynamic wallet loading is implemented, but is not currently testable. Suggest you leave the code in, but add a comment.",
      "commit_id" : "df389bca2048f5814387987463fe3298766bc6b6",
      "created_at" : "2017-07-27T01:39:47Z",
      "diff_hunk" : "@@ -57,13 +57,15 @@ std::string HelpRequiringPassphrase(CWallet * const pwallet)\n \n bool EnsureWalletIsAvailable(CWallet * const pwallet, bool avoidException)\n {\n-    if (!pwallet) {\n-        if (!avoidException)\n-            throw JSONRPCError(RPC_METHOD_NOT_FOUND, \"Method not found (disabled)\");\n-        else\n-            return false;\n-    }\n-    return true;\n+    if (pwallet) return true;\n+    if (avoidException) return false;\n+    if (::vpwallets.empty()) {\n+        // Wallet RPC methods are disabled if no wallets are loaded.\n+        throw JSONRPCError(RPC_METHOD_NOT_FOUND, \"Method not found (disabled)\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10931#discussion_r129737315",
      "id" : 129737315,
      "original_commit_id" : "5bb4fe6b3f7c8ced61902615edee708667cbae33",
      "original_position" : 24,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 52540733,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10931",
      "updated_at" : "2017-07-27T15:26:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/129737315",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10931#discussion_r129737973"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10931"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/129737973"
         }
      },
      "body" : "I almost wrote the same comment as Jonas about server not having bitcoin-cli specific messages, but Russ has convinced me. I think it's ok to have a bitcoin-cli message here.",
      "commit_id" : "df389bca2048f5814387987463fe3298766bc6b6",
      "created_at" : "2017-07-27T01:46:30Z",
      "diff_hunk" : "@@ -57,13 +57,15 @@ std::string HelpRequiringPassphrase(CWallet * const pwallet)\n \n bool EnsureWalletIsAvailable(CWallet * const pwallet, bool avoidException)\n {\n-    if (!pwallet) {\n-        if (!avoidException)\n-            throw JSONRPCError(RPC_METHOD_NOT_FOUND, \"Method not found (disabled)\");\n-        else\n-            return false;\n-    }\n-    return true;\n+    if (pwallet) return true;\n+    if (avoidException) return false;\n+    if (::vpwallets.empty()) {\n+        // Wallet RPC methods are disabled if no wallets are loaded.\n+        throw JSONRPCError(RPC_METHOD_NOT_FOUND, \"Method not found (disabled)\");\n+    }\n+    throw JSONRPCError(RPC_WALLET_NOT_SPECIFIED, \"Wallet file not specified (please provide bitcoin-cli \"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10931#discussion_r129737973",
      "id" : 129737973,
      "original_commit_id" : "5bb4fe6b3f7c8ced61902615edee708667cbae33",
      "original_position" : 26,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 52541402,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10931",
      "updated_at" : "2017-07-27T15:26:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/129737973",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "body" : "Tested ACK 4cfa4442aa53d9c86d1596e05dcd1608d378120f",
      "created_at" : "2017-07-27T01:47:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10931#issuecomment-318233952",
      "id" : 318233952,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10931",
      "updated_at" : "2017-07-27T01:47:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/318233952",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10931#discussion_r129795168"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10931"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/129795168"
         }
      },
      "body" : "NACK. I still disagree. People use RPC from many other programs than just bitcoin-cli. Mentioning a -cli argument is just confusing. If you want to add documentation in an error message, you should document how people should change their API usage instead.\r\n\r\n> how the server mentioning a bitcoin-cli option is different than server providing bitcoin-cli command lines in the help text of all rpc methods\r\n\r\nThat's IMO different because it's a clearly isolated context that mentions use of bitcoin-cli, not a random error.",
      "commit_id" : "df389bca2048f5814387987463fe3298766bc6b6",
      "created_at" : "2017-07-27T09:35:54Z",
      "diff_hunk" : "@@ -57,13 +57,15 @@ std::string HelpRequiringPassphrase(CWallet * const pwallet)\n \n bool EnsureWalletIsAvailable(CWallet * const pwallet, bool avoidException)\n {\n-    if (!pwallet) {\n-        if (!avoidException)\n-            throw JSONRPCError(RPC_METHOD_NOT_FOUND, \"Method not found (disabled)\");\n-        else\n-            return false;\n-    }\n-    return true;\n+    if (pwallet) return true;\n+    if (avoidException) return false;\n+    if (::vpwallets.empty()) {\n+        // Wallet RPC methods are disabled if no wallets are loaded.\n+        throw JSONRPCError(RPC_METHOD_NOT_FOUND, \"Method not found (disabled)\");\n+    }\n+    throw JSONRPCError(RPC_WALLET_NOT_SPECIFIED, \"Wallet file not specified (please provide bitcoin-cli \"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10931#discussion_r129795168",
      "id" : 129795168,
      "original_commit_id" : "5bb4fe6b3f7c8ced61902615edee708667cbae33",
      "original_position" : 26,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 52603971,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10931",
      "updated_at" : "2017-07-27T15:26:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/129795168",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10931#discussion_r129795649"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10931"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/129795649"
         }
      },
      "body" : "Somehow this got hidden: https://github.com/bitcoin/bitcoin/pull/10931#discussion_r129526990\r\n\r\nI still disagree with mentioning -cli here. If there is to be extenxsive documentation here, this should mention how to change the API usage, as people will be using this API from many applications and not just bitcoin-cli.\r\n",
      "commit_id" : "df389bca2048f5814387987463fe3298766bc6b6",
      "created_at" : "2017-07-27T09:37:38Z",
      "diff_hunk" : "@@ -57,13 +57,16 @@ std::string HelpRequiringPassphrase(CWallet * const pwallet)\n \n bool EnsureWalletIsAvailable(CWallet * const pwallet, bool avoidException)\n {\n-    if (!pwallet) {\n-        if (!avoidException)\n-            throw JSONRPCError(RPC_METHOD_NOT_FOUND, \"Method not found (disabled)\");\n-        else\n-            return false;\n-    }\n-    return true;\n+    if (pwallet) return true;\n+    if (avoidException) return false;\n+    if (::vpwallets.empty()) {\n+        // Wallet RPC methods are disabled if no wallets are loaded.\n+        throw JSONRPCError(\n+            RPC_METHOD_NOT_FOUND, \"Method not found (wallet method is disabled because no wallet is loaded)\");\n+    }\n+    throw JSONRPCError(RPC_WALLET_NOT_SPECIFIED, \"Wallet file not specified (please provide bitcoin-cli \"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10931#discussion_r129795649",
      "id" : 129795649,
      "original_commit_id" : "4cfa4442aa53d9c86d1596e05dcd1608d378120f",
      "original_position" : 27,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 52604453,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10931",
      "updated_at" : "2017-07-27T15:26:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/129795649",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10931#discussion_r129802729"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10931"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/129802729"
         }
      },
      "body" : "Agree with @laanwj. Please remove the `bitcoin-cli` part.\r\nBy design, it makes no sense to report client specific error message in a pure JSON RPC server implementation.",
      "commit_id" : "df389bca2048f5814387987463fe3298766bc6b6",
      "created_at" : "2017-07-27T10:08:42Z",
      "diff_hunk" : "@@ -57,13 +57,16 @@ std::string HelpRequiringPassphrase(CWallet * const pwallet)\n \n bool EnsureWalletIsAvailable(CWallet * const pwallet, bool avoidException)\n {\n-    if (!pwallet) {\n-        if (!avoidException)\n-            throw JSONRPCError(RPC_METHOD_NOT_FOUND, \"Method not found (disabled)\");\n-        else\n-            return false;\n-    }\n-    return true;\n+    if (pwallet) return true;\n+    if (avoidException) return false;\n+    if (::vpwallets.empty()) {\n+        // Wallet RPC methods are disabled if no wallets are loaded.\n+        throw JSONRPCError(\n+            RPC_METHOD_NOT_FOUND, \"Method not found (wallet method is disabled because no wallet is loaded)\");\n+    }\n+    throw JSONRPCError(RPC_WALLET_NOT_SPECIFIED, \"Wallet file not specified (please provide bitcoin-cli \"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10931#discussion_r129802729",
      "id" : 129802729,
      "original_commit_id" : "4cfa4442aa53d9c86d1596e05dcd1608d378120f",
      "original_position" : 27,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 52611989,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10931",
      "updated_at" : "2017-07-27T15:26:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/129802729",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/178464?v=4",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10931#discussion_r129854511"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10931"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/129854511"
         }
      },
      "body" : "Thread https://github.com/bitcoin/bitcoin/pull/10931#discussion_r129523302\r\n\r\nInteresting, added comment in 0ed0352a643af237a6ce59bf74ca9edfadbb6331.",
      "commit_id" : "df389bca2048f5814387987463fe3298766bc6b6",
      "created_at" : "2017-07-27T14:19:08Z",
      "diff_hunk" : "@@ -57,13 +57,15 @@ std::string HelpRequiringPassphrase(CWallet * const pwallet)\n \n bool EnsureWalletIsAvailable(CWallet * const pwallet, bool avoidException)\n {\n-    if (!pwallet) {\n-        if (!avoidException)\n-            throw JSONRPCError(RPC_METHOD_NOT_FOUND, \"Method not found (disabled)\");\n-        else\n-            return false;\n-    }\n-    return true;\n+    if (pwallet) return true;\n+    if (avoidException) return false;\n+    if (::vpwallets.empty()) {\n+        // Wallet RPC methods are disabled if no wallets are loaded.\n+        throw JSONRPCError(RPC_METHOD_NOT_FOUND, \"Method not found (disabled)\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10931#discussion_r129854511",
      "id" : 129854511,
      "original_commit_id" : "5bb4fe6b3f7c8ced61902615edee708667cbae33",
      "original_position" : 24,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 52670641,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10931",
      "updated_at" : "2017-07-27T15:27:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/129854511",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10931#discussion_r129855572"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10931"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/129855572"
         }
      },
      "body" : "Thread continues here: https://github.com/bitcoin/bitcoin/pull/10931#discussion_r129795649",
      "commit_id" : "df389bca2048f5814387987463fe3298766bc6b6",
      "created_at" : "2017-07-27T14:22:54Z",
      "diff_hunk" : "@@ -57,13 +57,15 @@ std::string HelpRequiringPassphrase(CWallet * const pwallet)\n \n bool EnsureWalletIsAvailable(CWallet * const pwallet, bool avoidException)\n {\n-    if (!pwallet) {\n-        if (!avoidException)\n-            throw JSONRPCError(RPC_METHOD_NOT_FOUND, \"Method not found (disabled)\");\n-        else\n-            return false;\n-    }\n-    return true;\n+    if (pwallet) return true;\n+    if (avoidException) return false;\n+    if (::vpwallets.empty()) {\n+        // Wallet RPC methods are disabled if no wallets are loaded.\n+        throw JSONRPCError(RPC_METHOD_NOT_FOUND, \"Method not found (disabled)\");\n+    }\n+    throw JSONRPCError(RPC_WALLET_NOT_SPECIFIED, \"Wallet file not specified (please provide bitcoin-cli \"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10931#discussion_r129855572",
      "id" : 129855572,
      "original_commit_id" : "5bb4fe6b3f7c8ced61902615edee708667cbae33",
      "original_position" : 26,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 52670641,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10931",
      "updated_at" : "2017-07-27T15:27:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/129855572",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10931#discussion_r129855630"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10931"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/129855630"
         }
      },
      "body" : "Thread https://github.com/bitcoin/bitcoin/pull/10931#discussion_r129795649\r\n\r\nOk @laanwj, thanks for providing an explanation. I implemented your suggestion in 6b5c343a49a25085bf1d6300cea2d40cebc993b6. I think we're basically talking about a tradeoff between more useful vs more maintainable help text, though differences ares very small in this case.",
      "commit_id" : "df389bca2048f5814387987463fe3298766bc6b6",
      "created_at" : "2017-07-27T14:23:06Z",
      "diff_hunk" : "@@ -57,13 +57,16 @@ std::string HelpRequiringPassphrase(CWallet * const pwallet)\n \n bool EnsureWalletIsAvailable(CWallet * const pwallet, bool avoidException)\n {\n-    if (!pwallet) {\n-        if (!avoidException)\n-            throw JSONRPCError(RPC_METHOD_NOT_FOUND, \"Method not found (disabled)\");\n-        else\n-            return false;\n-    }\n-    return true;\n+    if (pwallet) return true;\n+    if (avoidException) return false;\n+    if (::vpwallets.empty()) {\n+        // Wallet RPC methods are disabled if no wallets are loaded.\n+        throw JSONRPCError(\n+            RPC_METHOD_NOT_FOUND, \"Method not found (wallet method is disabled because no wallet is loaded)\");\n+    }\n+    throw JSONRPCError(RPC_WALLET_NOT_SPECIFIED, \"Wallet file not specified (please provide bitcoin-cli \"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10931#discussion_r129855630",
      "id" : 129855630,
      "original_commit_id" : "4cfa4442aa53d9c86d1596e05dcd1608d378120f",
      "original_position" : 27,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 52670641,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10931",
      "updated_at" : "2017-07-27T15:27:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/129855630",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10931#discussion_r129881544"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10931"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/129881544"
         }
      },
      "body" : "In a way, yes, though I don't think this is much less maintainable; we have those error codes for a reason, might as well use them to print custom text at the client side. We could at some point provide a better help text for other codes as well, where it makes sense. Anoher advantage of generating messages at the client side is that they could be translated (though we currently don't support translation in any way in non-qt).\r\nIn any case thanks for implementing this.",
      "commit_id" : "df389bca2048f5814387987463fe3298766bc6b6",
      "created_at" : "2017-07-27T15:50:46Z",
      "diff_hunk" : "@@ -57,13 +57,16 @@ std::string HelpRequiringPassphrase(CWallet * const pwallet)\n \n bool EnsureWalletIsAvailable(CWallet * const pwallet, bool avoidException)\n {\n-    if (!pwallet) {\n-        if (!avoidException)\n-            throw JSONRPCError(RPC_METHOD_NOT_FOUND, \"Method not found (disabled)\");\n-        else\n-            return false;\n-    }\n-    return true;\n+    if (pwallet) return true;\n+    if (avoidException) return false;\n+    if (::vpwallets.empty()) {\n+        // Wallet RPC methods are disabled if no wallets are loaded.\n+        throw JSONRPCError(\n+            RPC_METHOD_NOT_FOUND, \"Method not found (wallet method is disabled because no wallet is loaded)\");\n+    }\n+    throw JSONRPCError(RPC_WALLET_NOT_SPECIFIED, \"Wallet file not specified (please provide bitcoin-cli \"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10931#discussion_r129881544",
      "id" : 129881544,
      "original_commit_id" : "4cfa4442aa53d9c86d1596e05dcd1608d378120f",
      "original_position" : 27,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 52700935,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10931",
      "updated_at" : "2017-07-27T15:53:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/129881544",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : " utACK df389bc",
      "created_at" : "2017-07-27T15:53:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10931#issuecomment-318404794",
      "id" : 318404794,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10931",
      "updated_at" : "2017-07-27T15:53:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/318404794",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   }
]
