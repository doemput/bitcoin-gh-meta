{
   "assignee" : null,
   "body" : "Hi,\r\ni'm  trying to update OpenBSD's WIP port of Bitcoin to the latest 0.10.1rc2 and noticed that libsecp256k1.* is not installed when make install is called.\r\n\r\nAfter reading [Automake/Directories](http://www.gnu.org/software/automake/manual/automake.html#Directories), i think we should use SUBDIRS instead of DIST_SUBDIRS to call recursive targets like install correctly? :confused:\r\n\r\nBelow is the output before/after applying this patch.\r\n\r\nCheers,\r\nFabian\r\n\r\n\r\n#### BEFORE\r\n```\r\nMaking install in src\r\ngmake[1]: Entering directory '/usr/pobj/ports/bitcoin-0.10.1rc2/bitcoin-0.10.1rc2/src'\r\ngmake[2]: Entering directory '/usr/pobj/ports/bitcoin-0.10.1rc2/bitcoin-0.10.1rc2/src'\r\ngmake[3]: Entering directory '/usr/pobj/ports/bitcoin-0.10.1rc2/bitcoin-0.10.1rc2/src'\r\n mkdir -p '/usr/pobj/ports/bitcoin-0.10.1rc2/fake-amd64/usr/local/lib'\r\n /usr/local/bin/libtool   --mode=install /usr/pobj/ports/bitcoin-0.10.1rc2/bin/install -c    libbitcoinconsensus.la '/usr/pobj/ports/bitcoin-0.10.1rc2/fake-amd64/usr/local/lib'\r\nlibtool: install: /usr/pobj/ports/bitcoin-0.10.1rc2/bin/install -c -m 644 .libs/libbitcoinconsensus.so.0.0 /usr/pobj/ports/bitcoin-0.10.1rc2/fake-amd64/usr/local/lib/libbitcoinconsensus.so.0.0\r\nlibtool: install: /usr/pobj/ports/bitcoin-0.10.1rc2/bin/install -c -m 644 .libs/libbitcoinconsensus.lai /usr/pobj/ports/bitcoin-0.10.1rc2/fake-amd64/usr/local/lib/libbitcoinconsensus.la\r\nlibtool: install: /usr/pobj/ports/bitcoin-0.10.1rc2/bin/install -c .libs/libbitcoinconsensus.a /usr/pobj/ports/bitcoin-0.10.1rc2/fake-amd64/usr/local/lib/libbitcoinconsensus.a\r\nlibtool: install: chmod 644 /usr/pobj/ports/bitcoin-0.10.1rc2/fake-amd64/usr/local/lib/libbitcoinconsensus.a\r\nlibtool: install: ranlib -t /usr/pobj/ports/bitcoin-0.10.1rc2/fake-amd64/usr/local/lib/libbitcoinconsensus.a\r\nlibtool: install: warning: remember to run `libtool --finish /usr/local/lib'\r\n mkdir -p '/usr/pobj/ports/bitcoin-0.10.1rc2/fake-amd64/usr/local/bin'\r\n  /usr/local/bin/libtool   --mode=install /usr/pobj/ports/bitcoin-0.10.1rc2/bin/install -c -s  -m 755 bitcoind bitcoin-cli bitcoin-tx qt/bitcoin-qt '/usr/pobj/ports/bitcoin-0.10.1rc2/fake-amd64/usr/local/bin'\r\nlibtool: install: /usr/pobj/ports/bitcoin-0.10.1rc2/bin/install -c -m 755 -s .libs/bitcoind /usr/pobj/ports/bitcoin-0.10.1rc2/fake-amd64/usr/local/bin/bitcoind\r\nlibtool: install: /usr/pobj/ports/bitcoin-0.10.1rc2/bin/install -c -m 755 -s bitcoin-cli /usr/pobj/ports/bitcoin-0.10.1rc2/fake-amd64/usr/local/bin/bitcoin-cli\r\nlibtool: install: /usr/pobj/ports/bitcoin-0.10.1rc2/bin/install -c -m 755 -s .libs/bitcoin-tx /usr/pobj/ports/bitcoin-0.10.1rc2/fake-amd64/usr/local/bin/bitcoin-tx\r\nlibtool: install: /usr/pobj/ports/bitcoin-0.10.1rc2/bin/install -c -m 755 -s qt/.libs/bitcoin-qt /usr/pobj/ports/bitcoin-0.10.1rc2/fake-amd64/usr/local/bin/bitcoin-qt\r\n mkdir -p '/usr/pobj/ports/bitcoin-0.10.1rc2/fake-amd64/usr/local/include'\r\n /usr/pobj/ports/bitcoin-0.10.1rc2/bin/install -c  -m 644 script/bitcoinconsensus.h '/usr/pobj/ports/bitcoin-0.10.1rc2/fake-amd64/usr/local/include'\r\ngmake[3]: Leaving directory '/usr/pobj/ports/bitcoin-0.10.1rc2/bitcoin-0.10.1rc2/src'\r\ngmake[2]: Leaving directory '/usr/pobj/ports/bitcoin-0.10.1rc2/bitcoin-0.10.1rc2/src'\r\ngmake[1]: Leaving directory '/usr/pobj/ports/bitcoin-0.10.1rc2/bitcoin-0.10.1rc2/src'\r\ngmake[1]: Entering directory '/usr/pobj/ports/bitcoin-0.10.1rc2/bitcoin-0.10.1rc2'\r\ngmake[2]: Entering directory '/usr/pobj/ports/bitcoin-0.10.1rc2/bitcoin-0.10.1rc2'\r\ngmake[2]: Nothing to be done for 'install-exec-am'.\r\ngmake[2]: Nothing to be done for 'install-data-am'.\r\ngmake[2]: Leaving directory '/usr/pobj/ports/bitcoin-0.10.1rc2/bitcoin-0.10.1rc2'\r\ngmake[1]: Leaving directory '/usr/pobj/ports/bitcoin-0.10.1rc2/bitcoin-0.10.1rc2'\r\n```\r\n\r\n#### AFTER\r\n```\r\nMaking install in src\r\ngmake[1]: Entering directory '/usr/pobj/ports/bitcoin-0.10.1rc2/bitcoin-0.10.1rc2/src'\r\nMaking install in secp256k1\r\ngmake[2]: Entering directory '/usr/pobj/ports/bitcoin-0.10.1rc2/bitcoin-0.10.1rc2/src/secp256k1'\r\ngmake[3]: Entering directory '/usr/pobj/ports/bitcoin-0.10.1rc2/bitcoin-0.10.1rc2/src/secp256k1'\r\n mkdir -p '/usr/pobj/ports/bitcoin-0.10.1rc2/fake-amd64/usr/local/lib'\r\n /usr/local/bin/libtool   --mode=install /usr/pobj/ports/bitcoin-0.10.1rc2/bin/install -c    libsecp256k1.la '/usr/pobj/ports/bitcoin-0.10.1rc2/fake-amd64/usr/local/lib'\r\nlibtool: install: /usr/pobj/ports/bitcoin-0.10.1rc2/bin/install -c -m 644 .libs/libsecp256k1.so.0.0 /usr/pobj/ports/bitcoin-0.10.1rc2/fake-amd64/usr/local/lib/libsecp256k1.so.0.0\r\nlibtool: install: /usr/pobj/ports/bitcoin-0.10.1rc2/bin/install -c -m 644 .libs/libsecp256k1.lai /usr/pobj/ports/bitcoin-0.10.1rc2/fake-amd64/usr/local/lib/libsecp256k1.la\r\nlibtool: install: /usr/pobj/ports/bitcoin-0.10.1rc2/bin/install -c .libs/libsecp256k1.a /usr/pobj/ports/bitcoin-0.10.1rc2/fake-amd64/usr/local/lib/libsecp256k1.a\r\nlibtool: install: chmod 644 /usr/pobj/ports/bitcoin-0.10.1rc2/fake-amd64/usr/local/lib/libsecp256k1.a\r\nlibtool: install: ranlib -t /usr/pobj/ports/bitcoin-0.10.1rc2/fake-amd64/usr/local/lib/libsecp256k1.a\r\nlibtool: install: warning: remember to run `libtool --finish /usr/local/lib'\r\n mkdir -p '/usr/pobj/ports/bitcoin-0.10.1rc2/fake-amd64/usr/local/include'\r\n /usr/pobj/ports/bitcoin-0.10.1rc2/bin/install -c  -m 644 include/secp256k1.h '/usr/pobj/ports/bitcoin-0.10.1rc2/fake-amd64/usr/local/include'\r\n mkdir -p '/usr/pobj/ports/bitcoin-0.10.1rc2/fake-amd64/usr/local/lib/pkgconfig'\r\n /usr/pobj/ports/bitcoin-0.10.1rc2/bin/install -c  -m 644 libsecp256k1.pc '/usr/pobj/ports/bitcoin-0.10.1rc2/fake-amd64/usr/local/lib/pkgconfig'\r\ngmake[3]: Leaving directory '/usr/pobj/ports/bitcoin-0.10.1rc2/bitcoin-0.10.1rc2/src/secp256k1'\r\ngmake[2]: Leaving directory '/usr/pobj/ports/bitcoin-0.10.1rc2/bitcoin-0.10.1rc2/src/secp256k1'\r\ngmake[2]: Entering directory '/usr/pobj/ports/bitcoin-0.10.1rc2/bitcoin-0.10.1rc2/src'\r\ngmake[3]: Entering directory '/usr/pobj/ports/bitcoin-0.10.1rc2/bitcoin-0.10.1rc2/src'\r\n mkdir -p '/usr/pobj/ports/bitcoin-0.10.1rc2/fake-amd64/usr/local/lib'\r\n /usr/local/bin/libtool   --mode=install /usr/pobj/ports/bitcoin-0.10.1rc2/bin/install -c    libbitcoinconsensus.la '/usr/pobj/ports/bitcoin-0.10.1rc2/fake-amd64/usr/local/lib'\r\nlibtool: install: /usr/pobj/ports/bitcoin-0.10.1rc2/bin/install -c -m 644 .libs/libbitcoinconsensus.so.0.0 /usr/pobj/ports/bitcoin-0.10.1rc2/fake-amd64/usr/local/lib/libbitcoinconsensus.so.0.0\r\nlibtool: install: /usr/pobj/ports/bitcoin-0.10.1rc2/bin/install -c -m 644 .libs/libbitcoinconsensus.lai /usr/pobj/ports/bitcoin-0.10.1rc2/fake-amd64/usr/local/lib/libbitcoinconsensus.la\r\nlibtool: install: /usr/pobj/ports/bitcoin-0.10.1rc2/bin/install -c .libs/libbitcoinconsensus.a /usr/pobj/ports/bitcoin-0.10.1rc2/fake-amd64/usr/local/lib/libbitcoinconsensus.a\r\nlibtool: install: chmod 644 /usr/pobj/ports/bitcoin-0.10.1rc2/fake-amd64/usr/local/lib/libbitcoinconsensus.a\r\nlibtool: install: ranlib -t /usr/pobj/ports/bitcoin-0.10.1rc2/fake-amd64/usr/local/lib/libbitcoinconsensus.a\r\nlibtool: install: warning: remember to run `libtool --finish /usr/local/lib'\r\n mkdir -p '/usr/pobj/ports/bitcoin-0.10.1rc2/fake-amd64/usr/local/bin'\r\n  /usr/local/bin/libtool   --mode=install /usr/pobj/ports/bitcoin-0.10.1rc2/bin/install -c -s  -m 755 bitcoind bitcoin-cli bitcoin-tx qt/bitcoin-qt '/usr/pobj/ports/bitcoin-0.10.1rc2/fake-amd64/usr/local/bin'\r\nlibtool: install: /usr/pobj/ports/bitcoin-0.10.1rc2/bin/install -c -m 755 -s .libs/bitcoind /usr/pobj/ports/bitcoin-0.10.1rc2/fake-amd64/usr/local/bin/bitcoind\r\nlibtool: install: /usr/pobj/ports/bitcoin-0.10.1rc2/bin/install -c -m 755 -s bitcoin-cli /usr/pobj/ports/bitcoin-0.10.1rc2/fake-amd64/usr/local/bin/bitcoin-cli\r\nlibtool: install: /usr/pobj/ports/bitcoin-0.10.1rc2/bin/install -c -m 755 -s .libs/bitcoin-tx /usr/pobj/ports/bitcoin-0.10.1rc2/fake-amd64/usr/local/bin/bitcoin-tx\r\nlibtool: install: /usr/pobj/ports/bitcoin-0.10.1rc2/bin/install -c -m 755 -s qt/.libs/bitcoin-qt /usr/pobj/ports/bitcoin-0.10.1rc2/fake-amd64/usr/local/bin/bitcoin-qt\r\n mkdir -p '/usr/pobj/ports/bitcoin-0.10.1rc2/fake-amd64/usr/local/include'\r\n /usr/pobj/ports/bitcoin-0.10.1rc2/bin/install -c  -m 644 script/bitcoinconsensus.h '/usr/pobj/ports/bitcoin-0.10.1rc2/fake-amd64/usr/local/include'\r\ngmake[3]: Leaving directory '/usr/pobj/ports/bitcoin-0.10.1rc2/bitcoin-0.10.1rc2/src'\r\ngmake[2]: Leaving directory '/usr/pobj/ports/bitcoin-0.10.1rc2/bitcoin-0.10.1rc2/src'\r\ngmake[1]: Leaving directory '/usr/pobj/ports/bitcoin-0.10.1rc2/bitcoin-0.10.1rc2/src'\r\ngmake[1]: Entering directory '/usr/pobj/ports/bitcoin-0.10.1rc2/bitcoin-0.10.1rc2'\r\ngmake[2]: Entering directory '/usr/pobj/ports/bitcoin-0.10.1rc2/bitcoin-0.10.1rc2'\r\ngmake[2]: Nothing to be done for 'install-exec-am'.\r\ngmake[2]: Nothing to be done for 'install-data-am'.\r\ngmake[2]: Leaving directory '/usr/pobj/ports/bitcoin-0.10.1rc2/bitcoin-0.10.1rc2'\r\ngmake[1]: Leaving directory '/usr/pobj/ports/bitcoin-0.10.1rc2/bitcoin-0.10.1rc2'\r\n```\r\n ",
   "closed_at" : "2015-04-21T09:13:37Z",
   "closed_by" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
      "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
      "followers_url" : "https://api.github.com/users/laanwj/followers",
      "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/laanwj",
      "id" : 126646,
      "login" : "laanwj",
      "organizations_url" : "https://api.github.com/users/laanwj/orgs",
      "received_events_url" : "https://api.github.com/users/laanwj/received_events",
      "repos_url" : "https://api.github.com/users/laanwj/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/laanwj"
   },
   "comments" : 3,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6026/comments",
   "created_at" : "2015-04-18T19:12:01Z",
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6026/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/pull/6026",
   "id" : 69338056,
   "labels" : [
      {
         "color" : "5319e7",
         "name" : "Build system",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/Build%20system"
      }
   ],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6026/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "number" : 6026,
   "pull_request" : {
      "diff_url" : "https://github.com/bitcoin/bitcoin/pull/6026.diff",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6026",
      "patch_url" : "https://github.com/bitcoin/bitcoin/pull/6026.patch",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6026"
   },
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "closed",
   "title" : "use SUBDIRS to include libsecp256k1",
   "updated_at" : "2015-04-21T09:13:37Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6026",
   "user" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/365690?v=3",
      "events_url" : "https://api.github.com/users/Mischi/events{/privacy}",
      "followers_url" : "https://api.github.com/users/Mischi/followers",
      "following_url" : "https://api.github.com/users/Mischi/following{/other_user}",
      "gists_url" : "https://api.github.com/users/Mischi/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/Mischi",
      "id" : 365690,
      "login" : "Mischi",
      "organizations_url" : "https://api.github.com/users/Mischi/orgs",
      "received_events_url" : "https://api.github.com/users/Mischi/received_events",
      "repos_url" : "https://api.github.com/users/Mischi/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/Mischi/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/Mischi/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/Mischi"
   }
}
