[
   {
      "body" : "Why bother with the class?\r\nPractically a namespace at this point?",
      "created_at" : "2017-06-16T03:58:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10600#issuecomment-308926888",
      "id" : 308926888,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10600",
      "updated_at" : "2017-06-16T03:58:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/308926888",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/413395?v=3",
         "events_url" : "https://api.github.com/users/dcousens/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dcousens/followers",
         "following_url" : "https://api.github.com/users/dcousens/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dcousens/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dcousens",
         "id" : 413395,
         "login" : "dcousens",
         "organizations_url" : "https://api.github.com/users/dcousens/orgs",
         "received_events_url" : "https://api.github.com/users/dcousens/received_events",
         "repos_url" : "https://api.github.com/users/dcousens/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dcousens/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dcousens/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dcousens"
      }
   },
   {
      "body" : "> Why bother with the class?\r\n> Practically a namespace at this point?\r\n\r\nI don't see a problem with using a class as a namespace, but happy to change if you think it is in bad taste and have a different suggestion. Note that the files are called feebumper.h/cpp so if you want to replace the class with something else, it might involve file renames. This PR is really more concerned with simplifying Qt code and moving code that doesn't belong there out.",
      "created_at" : "2017-06-16T10:02:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10600#issuecomment-308986463",
      "id" : 308986463,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10600",
      "updated_at" : "2017-06-16T10:02:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/308986463",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/7133040?v=3",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "body" : "I agree that if all of a class's methods have become `static` it's better to turn it into a namespace of functions, but don't care strongly. If so, I don't think a file rename is necessary.",
      "created_at" : "2017-08-27T20:06:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10600#issuecomment-325221081",
      "id" : 325221081,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10600",
      "updated_at" : "2017-08-27T20:06:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/325221081",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "> I agree that if all of a class's methods have become static it's better to turn it into a namespace of functions, but don't care strongly. If so, I don't think a file rename is necessary.\r\n\r\nThanks @sipa, removed class without renaming file.\r\n\r\nAdded commit 1ea35974529622eb16fe5710bee6719dfc205c31 -> 47c5601d5f6a992d9c46d8300de248374d6eb066 ([pr/ipc-bump.6](https://github.com/ryanofsky/bitcoin/commits/pr/ipc-bump.6) -> [pr/ipc-bump.7](https://github.com/ryanofsky/bitcoin/commits/pr/ipc-bump.7), [compare](https://github.com/ryanofsky/bitcoin/compare/pr/ipc-bump.6...pr/ipc-bump.7))",
      "created_at" : "2017-08-28T14:21:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10600#issuecomment-325367202",
      "id" : 325367202,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10600",
      "updated_at" : "2017-08-28T14:21:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/325367202",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "body" : "> because it means the feebumper object either has to be serialized back and forth between Qt and wallet processes between fee bump calls\r\n\r\nThat is a problem or inconvenient?",
      "created_at" : "2017-08-28T14:38:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10600#issuecomment-325372001",
      "id" : 325372001,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10600",
      "updated_at" : "2017-08-28T14:38:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/325372001",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "body" : ">> because it means the feebumper object either has to be serialized back and forth between Qt and wallet processes between fee bump calls\r\n\r\n> That is a problem or inconvenient?\r\n\r\nThese should just be plain function calls because there are no advantages to having a stateful FeeBumper object. Making the feebumper class serializable is dumb because it will add new code that send extra data that isn't always needed.",
      "created_at" : "2017-08-28T14:55:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10600#issuecomment-325377110",
      "id" : 325377110,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10600",
      "updated_at" : "2017-08-28T14:55:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/325377110",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10600#discussion_r135639557"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10600"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135639557"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "It's in the original code, but is it necessary to lock `cs_main`? The same applies for other functions.",
      "commit_id" : "2b2158ae5e21927f332c06ed72239bd2f4392dd9",
      "created_at" : "2017-08-28T21:25:48Z",
      "diff_hunk" : "@@ -43,70 +44,75 @@ int64_t CalculateMaximumSignedTxSize(const CTransaction &tx, const CWallet *pWal\n     return GetVirtualTransactionSize(txNew);\n }\n \n-bool CFeeBumper::preconditionChecks(const CWallet *pWallet, const CWalletTx& wtx) {\n+BumpFeeResult PreconditionChecks(const CWallet* pWallet, const CWalletTx& wtx, std::vector<std::string>& vErrors)\n+{\n     if (pWallet->HasWalletSpend(wtx.GetHash())) {\n         vErrors.push_back(\"Transaction has descendants in the wallet\");\n-        currentResult = BumpFeeResult::INVALID_PARAMETER;\n-        return false;\n+        return BumpFeeResult::INVALID_PARAMETER;\n     }\n \n     {\n         LOCK(mempool.cs);\n         auto it_mp = mempool.mapTx.find(wtx.GetHash());\n         if (it_mp != mempool.mapTx.end() && it_mp->GetCountWithDescendants() > 1) {\n             vErrors.push_back(\"Transaction has descendants in the mempool\");\n-            currentResult = BumpFeeResult::INVALID_PARAMETER;\n-            return false;\n+            return BumpFeeResult::INVALID_PARAMETER;\n         }\n     }\n \n     if (wtx.GetDepthInMainChain() != 0) {\n         vErrors.push_back(\"Transaction has been mined, or is conflicted with a mined transaction\");\n-        currentResult = BumpFeeResult::WALLET_ERROR;\n-        return false;\n+        return BumpFeeResult::WALLET_ERROR;\n     }\n-    return true;\n+    return BumpFeeResult::OK;\n }\n+} // namespace\n \n-CFeeBumper::CFeeBumper(const CWallet *pWallet, const uint256 txidIn, const CCoinControl& coin_control, CAmount totalFee)\n-    :\n-    txid(std::move(txidIn)),\n-    nOldFee(0),\n-    nNewFee(0)\n+bool TransactionCanBeBumped(CWallet* pWallet, const uint256& txid)\n {\n+    LOCK2(cs_main, pWallet->cs_wallet);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10600#discussion_r135639557",
      "id" : 135639557,
      "original_commit_id" : "47c5601d5f6a992d9c46d8300de248374d6eb066",
      "original_position" : 51,
      "path" : "src/wallet/feebumper.cpp",
      "position" : null,
      "pull_request_review_id" : 59071434,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10600",
      "updated_at" : "2017-09-07T00:37:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135639557",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10600#discussion_r135641158"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10600"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135641158"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "At least in the headers we could fix to snake_case, it doesn't make the patch bigger. WDYT?",
      "commit_id" : "2b2158ae5e21927f332c06ed72239bd2f4392dd9",
      "created_at" : "2017-08-28T21:32:47Z",
      "diff_hunk" : "@@ -23,39 +23,34 @@ enum class BumpFeeResult\n     MISC_ERROR,\n };\n \n-class CFeeBumper\n-{\n-public:\n-    CFeeBumper(const CWallet *pWalletIn, const uint256 txidIn, const CCoinControl& coin_control, CAmount totalFee);\n-    BumpFeeResult getResult() const { return currentResult; }\n-    const std::vector<std::string>& getErrors() const { return vErrors; }\n-    CAmount getOldFee() const { return nOldFee; }\n-    CAmount getNewFee() const { return nNewFee; }\n-    uint256 getBumpedTxId() const { return bumpedTxid; }\n-\n-    /* signs the new transaction,\n-     * returns false if the tx couldn't be found or if it was\n-     * impossible to create the signature(s)\n-     */\n-    bool signTransaction(CWallet *pWallet);\n-\n-    /* commits the fee bump,\n-     * returns true, in case of CWallet::CommitTransaction was successful\n-     * but, eventually sets vErrors if the tx could not be added to the mempool (will try later)\n-     * or if the old transaction could not be marked as replaced\n-     */\n-    bool commit(CWallet *pWalletNonConst);\n-\n-private:\n-    bool preconditionChecks(const CWallet *pWallet, const CWalletTx& wtx);\n-\n-    const uint256 txid;\n-    uint256 bumpedTxid;\n-    CMutableTransaction mtx;\n-    std::vector<std::string> vErrors;\n-    BumpFeeResult currentResult;\n-    CAmount nOldFee;\n-    CAmount nNewFee;\n-};\n+/* return whether transaction can be bumped */\n+bool TransactionCanBeBumped(CWallet* pWallet, const uint256& txid);\n+\n+/* create bumpfee transaction */\n+BumpFeeResult CreateBumpFeeTransaction(const CWallet* pWallet,\n+    const uint256& txid,\n+    const CCoinControl& coin_control,\n+    CAmount totalFee,",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10600#discussion_r135641158",
      "id" : 135641158,
      "original_commit_id" : "47c5601d5f6a992d9c46d8300de248374d6eb066",
      "original_position" : 45,
      "path" : "src/wallet/feebumper.h",
      "position" : null,
      "pull_request_review_id" : 59071434,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10600",
      "updated_at" : "2017-09-07T00:37:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135641158",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10600#discussion_r135641342"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10600"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135641342"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Use doxygen compatible comments as per developer notes?",
      "commit_id" : "2b2158ae5e21927f332c06ed72239bd2f4392dd9",
      "created_at" : "2017-08-28T21:33:40Z",
      "diff_hunk" : "@@ -23,39 +23,34 @@ enum class BumpFeeResult\n     MISC_ERROR,\n };\n \n-class CFeeBumper\n-{\n-public:\n-    CFeeBumper(const CWallet *pWalletIn, const uint256 txidIn, const CCoinControl& coin_control, CAmount totalFee);\n-    BumpFeeResult getResult() const { return currentResult; }\n-    const std::vector<std::string>& getErrors() const { return vErrors; }\n-    CAmount getOldFee() const { return nOldFee; }\n-    CAmount getNewFee() const { return nNewFee; }\n-    uint256 getBumpedTxId() const { return bumpedTxid; }\n-\n-    /* signs the new transaction,\n-     * returns false if the tx couldn't be found or if it was\n-     * impossible to create the signature(s)\n-     */\n-    bool signTransaction(CWallet *pWallet);\n-\n-    /* commits the fee bump,\n-     * returns true, in case of CWallet::CommitTransaction was successful\n-     * but, eventually sets vErrors if the tx could not be added to the mempool (will try later)\n-     * or if the old transaction could not be marked as replaced\n-     */\n-    bool commit(CWallet *pWalletNonConst);\n-\n-private:\n-    bool preconditionChecks(const CWallet *pWallet, const CWalletTx& wtx);\n-\n-    const uint256 txid;\n-    uint256 bumpedTxid;\n-    CMutableTransaction mtx;\n-    std::vector<std::string> vErrors;\n-    BumpFeeResult currentResult;\n-    CAmount nOldFee;\n-    CAmount nNewFee;\n-};\n+/* return whether transaction can be bumped */",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10600#discussion_r135641342",
      "id" : 135641342,
      "original_commit_id" : "47c5601d5f6a992d9c46d8300de248374d6eb066",
      "original_position" : 38,
      "path" : "src/wallet/feebumper.h",
      "position" : null,
      "pull_request_review_id" : 59071434,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10600",
      "updated_at" : "2017-09-07T00:37:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135641342",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10600#discussion_r135641866"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10600"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135641866"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "One line?",
      "commit_id" : "2b2158ae5e21927f332c06ed72239bd2f4392dd9",
      "created_at" : "2017-08-28T21:36:01Z",
      "diff_hunk" : "@@ -23,39 +23,34 @@ enum class BumpFeeResult\n     MISC_ERROR,\n };\n \n-class CFeeBumper\n-{\n-public:\n-    CFeeBumper(const CWallet *pWalletIn, const uint256 txidIn, const CCoinControl& coin_control, CAmount totalFee);\n-    BumpFeeResult getResult() const { return currentResult; }\n-    const std::vector<std::string>& getErrors() const { return vErrors; }\n-    CAmount getOldFee() const { return nOldFee; }\n-    CAmount getNewFee() const { return nNewFee; }\n-    uint256 getBumpedTxId() const { return bumpedTxid; }\n-\n-    /* signs the new transaction,\n-     * returns false if the tx couldn't be found or if it was\n-     * impossible to create the signature(s)\n-     */\n-    bool signTransaction(CWallet *pWallet);\n-\n-    /* commits the fee bump,\n-     * returns true, in case of CWallet::CommitTransaction was successful\n-     * but, eventually sets vErrors if the tx could not be added to the mempool (will try later)\n-     * or if the old transaction could not be marked as replaced\n-     */\n-    bool commit(CWallet *pWalletNonConst);\n-\n-private:\n-    bool preconditionChecks(const CWallet *pWallet, const CWalletTx& wtx);\n-\n-    const uint256 txid;\n-    uint256 bumpedTxid;\n-    CMutableTransaction mtx;\n-    std::vector<std::string> vErrors;\n-    BumpFeeResult currentResult;\n-    CAmount nOldFee;\n-    CAmount nNewFee;\n-};\n+/* return whether transaction can be bumped */\n+bool TransactionCanBeBumped(CWallet* pWallet, const uint256& txid);\n+\n+/* create bumpfee transaction */\n+BumpFeeResult CreateBumpFeeTransaction(const CWallet* pWallet,",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10600#discussion_r135641866",
      "id" : 135641866,
      "original_commit_id" : "47c5601d5f6a992d9c46d8300de248374d6eb066",
      "original_position" : 42,
      "path" : "src/wallet/feebumper.h",
      "position" : null,
      "pull_request_review_id" : 59071434,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10600",
      "updated_at" : "2017-09-07T00:37:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135641866",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10600#discussion_r135736764"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10600"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135736764"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "> It's in the original code, but is it necessary to lock cs_main? The same applies for other functions.\r\n\r\nGood catch! Fixed in 6a0131608e738f7fcf8ae9efb8ea54bf749ffe85. In the other places cs_main is required for preconditionChecks. Note that in #10973, I replace accesses to `cs_main` global throughout wallet code with `ipc_locked` locals, so it is immediately obvious where locking is and isn't required and mistakes like this will not happen in the future (see `ipc_locked` in https://github.com/ryanofsky/bitcoin/blob/pr/wipc-sep/src/wallet/feebumper.cpp).",
      "commit_id" : "2b2158ae5e21927f332c06ed72239bd2f4392dd9",
      "created_at" : "2017-08-29T09:19:24Z",
      "diff_hunk" : "@@ -43,70 +44,75 @@ int64_t CalculateMaximumSignedTxSize(const CTransaction &tx, const CWallet *pWal\n     return GetVirtualTransactionSize(txNew);\n }\n \n-bool CFeeBumper::preconditionChecks(const CWallet *pWallet, const CWalletTx& wtx) {\n+BumpFeeResult PreconditionChecks(const CWallet* pWallet, const CWalletTx& wtx, std::vector<std::string>& vErrors)\n+{\n     if (pWallet->HasWalletSpend(wtx.GetHash())) {\n         vErrors.push_back(\"Transaction has descendants in the wallet\");\n-        currentResult = BumpFeeResult::INVALID_PARAMETER;\n-        return false;\n+        return BumpFeeResult::INVALID_PARAMETER;\n     }\n \n     {\n         LOCK(mempool.cs);\n         auto it_mp = mempool.mapTx.find(wtx.GetHash());\n         if (it_mp != mempool.mapTx.end() && it_mp->GetCountWithDescendants() > 1) {\n             vErrors.push_back(\"Transaction has descendants in the mempool\");\n-            currentResult = BumpFeeResult::INVALID_PARAMETER;\n-            return false;\n+            return BumpFeeResult::INVALID_PARAMETER;\n         }\n     }\n \n     if (wtx.GetDepthInMainChain() != 0) {\n         vErrors.push_back(\"Transaction has been mined, or is conflicted with a mined transaction\");\n-        currentResult = BumpFeeResult::WALLET_ERROR;\n-        return false;\n+        return BumpFeeResult::WALLET_ERROR;\n     }\n-    return true;\n+    return BumpFeeResult::OK;\n }\n+} // namespace\n \n-CFeeBumper::CFeeBumper(const CWallet *pWallet, const uint256 txidIn, const CCoinControl& coin_control, CAmount totalFee)\n-    :\n-    txid(std::move(txidIn)),\n-    nOldFee(0),\n-    nNewFee(0)\n+bool TransactionCanBeBumped(CWallet* pWallet, const uint256& txid)\n {\n+    LOCK2(cs_main, pWallet->cs_wallet);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10600#discussion_r135736764",
      "id" : 135736764,
      "in_reply_to_id" : 135639557,
      "original_commit_id" : "47c5601d5f6a992d9c46d8300de248374d6eb066",
      "original_position" : 51,
      "path" : "src/wallet/feebumper.cpp",
      "position" : null,
      "pull_request_review_id" : 59179741,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10600",
      "updated_at" : "2017-09-07T00:37:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135736764",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10600#discussion_r135742545"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10600"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135742545"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "> One line?\r\n\r\nI use clang-format for everything, and avoid manual formatting, so that's where this comes from. Would prefer not to change unless someone thinks this is a problem.",
      "commit_id" : "2b2158ae5e21927f332c06ed72239bd2f4392dd9",
      "created_at" : "2017-08-29T09:44:31Z",
      "diff_hunk" : "@@ -23,39 +23,34 @@ enum class BumpFeeResult\n     MISC_ERROR,\n };\n \n-class CFeeBumper\n-{\n-public:\n-    CFeeBumper(const CWallet *pWalletIn, const uint256 txidIn, const CCoinControl& coin_control, CAmount totalFee);\n-    BumpFeeResult getResult() const { return currentResult; }\n-    const std::vector<std::string>& getErrors() const { return vErrors; }\n-    CAmount getOldFee() const { return nOldFee; }\n-    CAmount getNewFee() const { return nNewFee; }\n-    uint256 getBumpedTxId() const { return bumpedTxid; }\n-\n-    /* signs the new transaction,\n-     * returns false if the tx couldn't be found or if it was\n-     * impossible to create the signature(s)\n-     */\n-    bool signTransaction(CWallet *pWallet);\n-\n-    /* commits the fee bump,\n-     * returns true, in case of CWallet::CommitTransaction was successful\n-     * but, eventually sets vErrors if the tx could not be added to the mempool (will try later)\n-     * or if the old transaction could not be marked as replaced\n-     */\n-    bool commit(CWallet *pWalletNonConst);\n-\n-private:\n-    bool preconditionChecks(const CWallet *pWallet, const CWalletTx& wtx);\n-\n-    const uint256 txid;\n-    uint256 bumpedTxid;\n-    CMutableTransaction mtx;\n-    std::vector<std::string> vErrors;\n-    BumpFeeResult currentResult;\n-    CAmount nOldFee;\n-    CAmount nNewFee;\n-};\n+/* return whether transaction can be bumped */\n+bool TransactionCanBeBumped(CWallet* pWallet, const uint256& txid);\n+\n+/* create bumpfee transaction */\n+BumpFeeResult CreateBumpFeeTransaction(const CWallet* pWallet,",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10600#discussion_r135742545",
      "id" : 135742545,
      "in_reply_to_id" : 135641866,
      "original_commit_id" : "47c5601d5f6a992d9c46d8300de248374d6eb066",
      "original_position" : 42,
      "path" : "src/wallet/feebumper.h",
      "position" : null,
      "pull_request_review_id" : 59179741,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10600",
      "updated_at" : "2017-09-07T00:37:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135742545",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10600#discussion_r135742966"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10600"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135742966"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "> Use doxygen compatible comments as per developer notes?\r\n\r\nDone in db134b451b7c5871e12bf7ef947d7745446e96f4",
      "commit_id" : "2b2158ae5e21927f332c06ed72239bd2f4392dd9",
      "created_at" : "2017-08-29T09:46:04Z",
      "diff_hunk" : "@@ -23,39 +23,34 @@ enum class BumpFeeResult\n     MISC_ERROR,\n };\n \n-class CFeeBumper\n-{\n-public:\n-    CFeeBumper(const CWallet *pWalletIn, const uint256 txidIn, const CCoinControl& coin_control, CAmount totalFee);\n-    BumpFeeResult getResult() const { return currentResult; }\n-    const std::vector<std::string>& getErrors() const { return vErrors; }\n-    CAmount getOldFee() const { return nOldFee; }\n-    CAmount getNewFee() const { return nNewFee; }\n-    uint256 getBumpedTxId() const { return bumpedTxid; }\n-\n-    /* signs the new transaction,\n-     * returns false if the tx couldn't be found or if it was\n-     * impossible to create the signature(s)\n-     */\n-    bool signTransaction(CWallet *pWallet);\n-\n-    /* commits the fee bump,\n-     * returns true, in case of CWallet::CommitTransaction was successful\n-     * but, eventually sets vErrors if the tx could not be added to the mempool (will try later)\n-     * or if the old transaction could not be marked as replaced\n-     */\n-    bool commit(CWallet *pWalletNonConst);\n-\n-private:\n-    bool preconditionChecks(const CWallet *pWallet, const CWalletTx& wtx);\n-\n-    const uint256 txid;\n-    uint256 bumpedTxid;\n-    CMutableTransaction mtx;\n-    std::vector<std::string> vErrors;\n-    BumpFeeResult currentResult;\n-    CAmount nOldFee;\n-    CAmount nNewFee;\n-};\n+/* return whether transaction can be bumped */",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10600#discussion_r135742966",
      "id" : 135742966,
      "in_reply_to_id" : 135641342,
      "original_commit_id" : "47c5601d5f6a992d9c46d8300de248374d6eb066",
      "original_position" : 38,
      "path" : "src/wallet/feebumper.h",
      "position" : null,
      "pull_request_review_id" : 59179741,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10600",
      "updated_at" : "2017-09-07T00:37:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135742966",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10600#discussion_r135743008"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10600"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135743008"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "> At least in the headers we could fix to snake_case, it doesn't make the patch bigger. WDYT?\r\n\r\nDone in db134b451b7c5871e12bf7ef947d7745446e96f4",
      "commit_id" : "2b2158ae5e21927f332c06ed72239bd2f4392dd9",
      "created_at" : "2017-08-29T09:46:17Z",
      "diff_hunk" : "@@ -23,39 +23,34 @@ enum class BumpFeeResult\n     MISC_ERROR,\n };\n \n-class CFeeBumper\n-{\n-public:\n-    CFeeBumper(const CWallet *pWalletIn, const uint256 txidIn, const CCoinControl& coin_control, CAmount totalFee);\n-    BumpFeeResult getResult() const { return currentResult; }\n-    const std::vector<std::string>& getErrors() const { return vErrors; }\n-    CAmount getOldFee() const { return nOldFee; }\n-    CAmount getNewFee() const { return nNewFee; }\n-    uint256 getBumpedTxId() const { return bumpedTxid; }\n-\n-    /* signs the new transaction,\n-     * returns false if the tx couldn't be found or if it was\n-     * impossible to create the signature(s)\n-     */\n-    bool signTransaction(CWallet *pWallet);\n-\n-    /* commits the fee bump,\n-     * returns true, in case of CWallet::CommitTransaction was successful\n-     * but, eventually sets vErrors if the tx could not be added to the mempool (will try later)\n-     * or if the old transaction could not be marked as replaced\n-     */\n-    bool commit(CWallet *pWalletNonConst);\n-\n-private:\n-    bool preconditionChecks(const CWallet *pWallet, const CWalletTx& wtx);\n-\n-    const uint256 txid;\n-    uint256 bumpedTxid;\n-    CMutableTransaction mtx;\n-    std::vector<std::string> vErrors;\n-    BumpFeeResult currentResult;\n-    CAmount nOldFee;\n-    CAmount nNewFee;\n-};\n+/* return whether transaction can be bumped */\n+bool TransactionCanBeBumped(CWallet* pWallet, const uint256& txid);\n+\n+/* create bumpfee transaction */\n+BumpFeeResult CreateBumpFeeTransaction(const CWallet* pWallet,\n+    const uint256& txid,\n+    const CCoinControl& coin_control,\n+    CAmount totalFee,",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10600#discussion_r135743008",
      "id" : 135743008,
      "in_reply_to_id" : 135641158,
      "original_commit_id" : "47c5601d5f6a992d9c46d8300de248374d6eb066",
      "original_position" : 45,
      "path" : "src/wallet/feebumper.h",
      "position" : null,
      "pull_request_review_id" : 59179741,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10600",
      "updated_at" : "2017-09-07T00:37:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135743008",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10600#discussion_r137411519"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10600"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/137411519"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Can you document the exact locking requirements in GetWalletTx in wallet.h or wallet.cpp just to make sure someone doesnt do some crazy-ass change in the future and blow up the lockorder?",
      "commit_id" : "2b2158ae5e21927f332c06ed72239bd2f4392dd9",
      "created_at" : "2017-09-06T23:00:17Z",
      "diff_hunk" : "@@ -70,7 +70,7 @@ BumpFeeResult PreconditionChecks(const CWallet* pWallet, const CWalletTx& wtx, s\n \n bool TransactionCanBeBumped(CWallet* pWallet, const uint256& txid)\n {\n-    LOCK2(cs_main, pWallet->cs_wallet);\n+    LOCK(pWallet->cs_wallet);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10600#discussion_r137411519",
      "id" : 137411519,
      "original_commit_id" : "6a0131608e738f7fcf8ae9efb8ea54bf749ffe85",
      "original_position" : 5,
      "path" : "src/wallet/feebumper.cpp",
      "position" : null,
      "pull_request_review_id" : 61074392,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10600",
      "updated_at" : "2017-09-07T00:37:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/137411519",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/649246?v=4",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10600#discussion_r137412047"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10600"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/137412047"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Yes, please do this, but also please keep names consistent between the cpp and h.",
      "commit_id" : "2b2158ae5e21927f332c06ed72239bd2f4392dd9",
      "created_at" : "2017-09-06T23:03:29Z",
      "diff_hunk" : "@@ -23,34 +21,32 @@ enum class BumpFeeResult\n     MISC_ERROR,\n };\n \n-/* return whether transaction can be bumped */\n-bool TransactionCanBeBumped(CWallet* pWallet, const uint256& txid);\n+//! Return whether transaction can be bumped.\n+bool TransactionCanBeBumped(CWallet* wallet, const uint256& txid);\n \n-/* create bumpfee transaction */\n-BumpFeeResult CreateBumpFeeTransaction(const CWallet* pWallet,\n+//! Create bumpfee transaction.\n+BumpFeeResult CreateBumpFeeTransaction(const CWallet* wallet,\n     const uint256& txid,\n     const CCoinControl& coin_control,\n-    CAmount totalFee,\n-    std::vector<std::string>& vErrors,\n-    CAmount& nOldFee,\n-    CAmount& nNewFee,\n+    CAmount total_fee,",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10600#discussion_r137412047",
      "id" : 137412047,
      "original_commit_id" : "db134b451b7c5871e12bf7ef947d7745446e96f4",
      "original_position" : 34,
      "path" : "src/wallet/feebumper.h",
      "position" : null,
      "pull_request_review_id" : 61074392,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10600",
      "updated_at" : "2017-09-07T00:37:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/137412047",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/649246?v=4",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10600#discussion_r137417403"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10600"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/137417403"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Done in 52301dbe0ee05c6bb8b5e187d7d5384a7f7bef5c",
      "commit_id" : "2b2158ae5e21927f332c06ed72239bd2f4392dd9",
      "created_at" : "2017-09-06T23:43:20Z",
      "diff_hunk" : "@@ -23,34 +21,32 @@ enum class BumpFeeResult\n     MISC_ERROR,\n };\n \n-/* return whether transaction can be bumped */\n-bool TransactionCanBeBumped(CWallet* pWallet, const uint256& txid);\n+//! Return whether transaction can be bumped.\n+bool TransactionCanBeBumped(CWallet* wallet, const uint256& txid);\n \n-/* create bumpfee transaction */\n-BumpFeeResult CreateBumpFeeTransaction(const CWallet* pWallet,\n+//! Create bumpfee transaction.\n+BumpFeeResult CreateBumpFeeTransaction(const CWallet* wallet,\n     const uint256& txid,\n     const CCoinControl& coin_control,\n-    CAmount totalFee,\n-    std::vector<std::string>& vErrors,\n-    CAmount& nOldFee,\n-    CAmount& nNewFee,\n+    CAmount total_fee,",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10600#discussion_r137417403",
      "id" : 137417403,
      "in_reply_to_id" : 137412047,
      "original_commit_id" : "db134b451b7c5871e12bf7ef947d7745446e96f4",
      "original_position" : 34,
      "path" : "src/wallet/feebumper.h",
      "position" : null,
      "pull_request_review_id" : 61081269,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10600",
      "updated_at" : "2017-09-07T00:37:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/137417403",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10600#discussion_r137417465"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10600"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/137417465"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "> Can you document the exact locking requirements in GetWalletTx in wallet.h or wallet.cpp just to make sure someone doesnt do some crazy-ass change in the future and blow up the lockorder?\r\n\r\nDone in 3a7c0dfafbd3b8fc1e32f40d98a7614bc190635d. I could go further and assert cs_wallet lock is held in GetWalletTx, though that is getting pretty far afield. Could open a separate PR.",
      "commit_id" : "2b2158ae5e21927f332c06ed72239bd2f4392dd9",
      "created_at" : "2017-09-06T23:43:49Z",
      "diff_hunk" : "@@ -70,7 +70,7 @@ BumpFeeResult PreconditionChecks(const CWallet* pWallet, const CWalletTx& wtx, s\n \n bool TransactionCanBeBumped(CWallet* pWallet, const uint256& txid)\n {\n-    LOCK2(cs_main, pWallet->cs_wallet);\n+    LOCK(pWallet->cs_wallet);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10600#discussion_r137417465",
      "id" : 137417465,
      "in_reply_to_id" : 137411519,
      "original_commit_id" : "6a0131608e738f7fcf8ae9efb8ea54bf749ffe85",
      "original_position" : 5,
      "path" : "src/wallet/feebumper.cpp",
      "position" : null,
      "pull_request_review_id" : 61081269,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10600",
      "updated_at" : "2017-09-07T00:37:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/137417465",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "utACK 2b2158ae5e21927f332c06ed72239bd2f4392dd9",
      "created_at" : "2017-09-07T20:30:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10600#issuecomment-327919014",
      "id" : 327919014,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10600",
      "updated_at" : "2017-09-07T20:30:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/327919014",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/649246?v=4",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I like this, but the commits are structured in a way that makes it more difficult to review than necessary. I think you can remove the first commit that changes all the functions to static (since you're removing the class entirely in a later commit). I also think some of the intermediate commits could perhaps be squashed, although I haven't looked to closely at them.\r\n\r\nIf you're not interested in maintaining this branch, I can take it.",
      "created_at" : "2017-09-19T20:04:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10600#issuecomment-330657474",
      "id" : 330657474,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10600",
      "updated_at" : "2017-09-19T20:04:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/330657474",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Reset 2b2158ae5e21927f332c06ed72239bd2f4392dd9 -> 510e19c8c9d3c3b33a37dc601835f264df0c6685 ([pr/ipc-bump.9](https://github.com/ryanofsky/bitcoin/commits/pr/ipc-bump.9) -> [pr/ipc-bump.10](https://github.com/ryanofsky/bitcoin/commits/pr/ipc-bump.10))\r\n\r\nNew branch was written by @jnewbery. Has several changes:\r\n\r\n- Simplifies history so related changes are better grouped together.\r\n- Rebased on master\r\n- Reverts some unrelated changes suggested by previous reviewers which could go in separate PRs.\r\n- Other minor changes like declaring functions static instead of using an anonymous namespace.",
      "created_at" : "2017-09-20T21:09:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10600#issuecomment-330981706",
      "id" : 330981706,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10600",
      "updated_at" : "2017-09-20T21:09:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/330981706",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Updated 510e19c8c9d3c3b33a37dc601835f264df0c6685 -> 2db9e0a3d123dd7c7f5eb74fdefdb5dba189055b ([pr/ipc-bump.10](https://github.com/ryanofsky/bitcoin/commits/pr/ipc-bump.10) -> [pr/ipc-bump.11](https://github.com/ryanofsky/bitcoin/commits/pr/ipc-bump.11))\r\n\r\nAnother update from @jnewbery, adding to TransactionCanBeBumped to the namespace.",
      "created_at" : "2017-09-20T21:30:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10600#issuecomment-330986916",
      "id" : 330986916,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10600",
      "updated_at" : "2017-09-20T21:30:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/330986916",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Tested ACK 2db9e0a3d123dd7c7f5eb74fdefdb5dba189055b. This should be trivially reviewable now. The first two commits in particular are just mechanical changes. The third commit changes the feebumper from a stateful class to stateless function calls, but the code change is minimal (the only real change is the way that errors are propagated back to the caller).\r\n\r\n@promag - I've left out your suggested simplification to the locking, since I think that can be done in a follow-up PR.",
      "created_at" : "2017-09-20T21:37:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10600#issuecomment-330988487",
      "id" : 330988487,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10600",
      "updated_at" : "2017-09-20T21:37:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/330988487",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   }
]
