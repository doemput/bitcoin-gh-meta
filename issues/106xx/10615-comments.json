[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10615#discussion_r122534461"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10615"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/122534461"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "It seems like you could eliminate a bunch of ifdefs if you got rid of the JSONRPCRequest wallet pointer and did this mapping in GetWalletForJSONRPCRequest instead of here. This would keep core rpc code a little more independent from the wallet.",
      "commit_id" : "370d3361e837a3a578707cab319503270f9917ad",
      "created_at" : "2017-06-16T21:10:45Z",
      "diff_hunk" : "@@ -184,6 +191,23 @@ static bool HTTPReq_JSONRPC(HTTPRequest* req, const std::string &)\n         // Set the URI\n         jreq.URI = req->GetURI();\n \n+#ifdef ENABLE_WALLET\n+        if (walletName.empty()) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10615#discussion_r122534461",
      "id" : 122534461,
      "original_commit_id" : "dbbdef99425539d5b59eba4ef640d241f7319d96",
      "original_position" : 71,
      "path" : "src/httprpc.cpp",
      "position" : null,
      "pull_request_review_id" : 44665019,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10615",
      "updated_at" : "2017-09-02T08:06:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/122534461",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10615#discussion_r122833127"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10615"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/122833127"
         }
      },
      "author_association" : "MEMBER",
      "body" : "That would be less clean when calling in from GUI, tests, etc. But maybe a `void*` would make sense on the class?",
      "commit_id" : "370d3361e837a3a578707cab319503270f9917ad",
      "created_at" : "2017-06-19T21:45:42Z",
      "diff_hunk" : "@@ -184,6 +191,23 @@ static bool HTTPReq_JSONRPC(HTTPRequest* req, const std::string &)\n         // Set the URI\n         jreq.URI = req->GetURI();\n \n+#ifdef ENABLE_WALLET\n+        if (walletName.empty()) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10615#discussion_r122833127",
      "id" : 122833127,
      "in_reply_to_id" : 122534461,
      "original_commit_id" : "dbbdef99425539d5b59eba4ef640d241f7319d96",
      "original_position" : 71,
      "path" : "src/httprpc.cpp",
      "position" : null,
      "pull_request_review_id" : 44982715,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10615",
      "updated_at" : "2017-09-02T08:06:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/122833127",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10615#discussion_r122838637"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10615"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/122838637"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "> That would be less clean when calling in from GUI, tests, etc.\r\n\r\nI can see how deriving the wallet pointer in GetWalletForJSONRPCRequest could make gui & test code messier depending on how it was written, but if you provided an inverse function that set up the request object given the wallet name or pointer, I think that would keep things clean and isolated.\r\n\r\nAnyway, this is just a thought. It looks like if you wanted you could get rid of a lot of ifdefs even keeping the pointer member.\r\n\r\n> But maybe a void* would make sense on the class?\r\n\r\nAs long as there is a pointer member, I don't think making it void has advantages over using the forward declaration. Changing it to void just throws away type information and requires you to add casts, without letting you do anything that wasn't possible otherwise.",
      "commit_id" : "370d3361e837a3a578707cab319503270f9917ad",
      "created_at" : "2017-06-19T22:15:15Z",
      "diff_hunk" : "@@ -184,6 +191,23 @@ static bool HTTPReq_JSONRPC(HTTPRequest* req, const std::string &)\n         // Set the URI\n         jreq.URI = req->GetURI();\n \n+#ifdef ENABLE_WALLET\n+        if (walletName.empty()) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10615#discussion_r122838637",
      "id" : 122838637,
      "in_reply_to_id" : 122534461,
      "original_commit_id" : "dbbdef99425539d5b59eba4ef640d241f7319d96",
      "original_position" : 71,
      "path" : "src/httprpc.cpp",
      "position" : null,
      "pull_request_review_id" : 44988619,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10615",
      "updated_at" : "2017-09-02T08:06:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/122838637",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10615#discussion_r122972358"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10615"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/122972358"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"RPC: Pass wallet through JSONRPCRequest\"\r\n\r\nConsider dropping this ifdef. It saves an insignificant amount of memory and seems like noise.",
      "commit_id" : "370d3361e837a3a578707cab319503270f9917ad",
      "created_at" : "2017-06-20T13:18:13Z",
      "diff_hunk" : "@@ -46,8 +48,15 @@ class JSONRPCRequest\n     bool fHelp;\n     std::string URI;\n     std::string authUser;\n-\n-    JSONRPCRequest() : id(NullUniValue), params(NullUniValue), fHelp(false) {}\n+#ifdef ENABLE_WALLET",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10615#discussion_r122972358",
      "id" : 122972358,
      "original_commit_id" : "7b73f24311639fdc79c22608c21e4bfcbc6d4243",
      "original_position" : 15,
      "path" : "src/rpc/server.h",
      "position" : 15,
      "pull_request_review_id" : 45131983,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10615",
      "updated_at" : "2017-09-02T08:06:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/122972358",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10615#discussion_r122972500"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10615"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/122972500"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"RPC: Pass wallet through JSONRPCRequest\"\r\n\r\nCould drop this ifdef also.",
      "commit_id" : "370d3361e837a3a578707cab319503270f9917ad",
      "created_at" : "2017-06-20T13:18:48Z",
      "diff_hunk" : "@@ -46,8 +48,15 @@ class JSONRPCRequest\n     bool fHelp;\n     std::string URI;\n     std::string authUser;\n-\n-    JSONRPCRequest() : id(NullUniValue), params(NullUniValue), fHelp(false) {}\n+#ifdef ENABLE_WALLET\n+    CWallet *wallet;\n+#endif\n+\n+    JSONRPCRequest() : id(NullUniValue), params(NullUniValue), fHelp(false)\n+#ifdef ENABLE_WALLET",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10615#discussion_r122972500",
      "id" : 122972500,
      "original_commit_id" : "7b73f24311639fdc79c22608c21e4bfcbc6d4243",
      "original_position" : 20,
      "path" : "src/rpc/server.h",
      "position" : 20,
      "pull_request_review_id" : 45131983,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10615",
      "updated_at" : "2017-09-02T08:06:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/122972500",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10615#discussion_r122973289"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10615"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/122973289"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"RPC: Allow rpcauth configs to specify...\"\r\n\r\nShould update `-rpcauth` documentation to mention the new field.",
      "commit_id" : "370d3361e837a3a578707cab319503270f9917ad",
      "created_at" : "2017-06-20T13:21:51Z",
      "diff_hunk" : "@@ -119,14 +122,17 @@ static bool multiUserAuthorized(std::string strUserPass)\n             std::string strHashFromPass = HexStr(hexvec);\n \n             if (TimingResistantEqual(strHashFromPass, strHash)) {\n+                if (vFields.size() > 3) {\n+                    walletNameOut = vFields[3];",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10615#discussion_r122973289",
      "id" : 122973289,
      "original_commit_id" : "b77b2f254cc365728790f345deedbed1204964bb",
      "original_position" : 33,
      "path" : "src/httprpc.cpp",
      "position" : null,
      "pull_request_review_id" : 45131983,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10615",
      "updated_at" : "2017-09-02T08:06:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/122973289",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10615#discussion_r122988254"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10615"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/122988254"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"RPC: Allow rpcauth configs to specify...\"\r\n\r\nI think instead of interpreting the 4th rpcauth field as a wallet filename field, it might be better to treat it as a generic options field (similar to the field in `fstab` files for mount options). E.g. instead of:\r\n\r\n```\r\nrpcauth=user:salt:hash:filename.dat\r\n```\r\n\r\nYou would write:\r\n\r\n```\r\nrpcauth=user:salt:hash:wallet=filename.dat\r\n```\r\n\r\nThis would be more extensible, also more readable.",
      "commit_id" : "370d3361e837a3a578707cab319503270f9917ad",
      "created_at" : "2017-06-20T14:16:18Z",
      "diff_hunk" : "@@ -119,14 +122,17 @@ static bool multiUserAuthorized(std::string strUserPass)\n             std::string strHashFromPass = HexStr(hexvec);\n \n             if (TimingResistantEqual(strHashFromPass, strHash)) {\n+                if (vFields.size() > 3) {\n+                    walletNameOut = vFields[3];",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10615#discussion_r122988254",
      "id" : 122988254,
      "original_commit_id" : "b77b2f254cc365728790f345deedbed1204964bb",
      "original_position" : 33,
      "path" : "src/httprpc.cpp",
      "position" : null,
      "pull_request_review_id" : 45150078,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10615",
      "updated_at" : "2017-09-02T08:06:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/122988254",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "body" : "Multi-user for multiwallet is definitely a very useful feature and one that we should be aiming for long-term, so this is good to see. I think the implementation some more work before its ready:\r\n\r\n- most importantly, having individual user wallet access authentication will give users the impression that it's safe to open RPC access to multiple users, which it absolutely isn't. Just using the standard RPC commands, a malicious user could cause mischief by stopping the node, changing consensus state using invalidateblock/preciousblock, eclipse the node using disconnectnode/addnode, etc. RPC is not a secure interface and we should be very careful to not give users the impression that it is.\r\n- this implementation adds a lot of `#ifdef ENABLE_WALLET`s to libbitcoin_server.a. We should be trying to remove those in order to remove circular dependency between libbitcoin_server.a and libbitcoin_wallet.a (see #7965). This PR would make future work to cleanly separate wallet from server more difficult.\r\n- this implementation needlessly binds multiwallet to multi-user. It does not allow a single user to have access to multiple wallets or select a wallet on a per-call basis.\r\n\r\nSo, definite concept ACK that we should do this, but I think it should be sequenced *after* wallet separation. That would make the implementation a lot cleaner and make it easier to provide an implementation that is secure and safe for users.",
      "created_at" : "2017-06-28T13:20:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10615#issuecomment-311657757",
      "id" : 311657757,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10615",
      "updated_at" : "2017-06-28T13:20:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/311657757",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10615#discussion_r131492915"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10615"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/131492915"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Also add a test for the new parameter?",
      "commit_id" : "370d3361e837a3a578707cab319503270f9917ad",
      "created_at" : "2017-08-04T21:45:42Z",
      "diff_hunk" : "@@ -119,14 +122,17 @@ static bool multiUserAuthorized(std::string strUserPass)\n             std::string strHashFromPass = HexStr(hexvec);\n \n             if (TimingResistantEqual(strHashFromPass, strHash)) {\n+                if (vFields.size() > 3) {\n+                    walletNameOut = vFields[3];",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10615#discussion_r131492915",
      "id" : 131492915,
      "in_reply_to_id" : 122973289,
      "original_commit_id" : "b77b2f254cc365728790f345deedbed1204964bb",
      "original_position" : 33,
      "path" : "src/httprpc.cpp",
      "position" : null,
      "pull_request_review_id" : 54484591,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10615",
      "updated_at" : "2017-09-02T08:06:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/131492915",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10615#discussion_r131493030"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10615"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/131493030"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Just `wallet_name`?",
      "commit_id" : "370d3361e837a3a578707cab319503270f9917ad",
      "created_at" : "2017-08-04T21:46:22Z",
      "diff_hunk" : "@@ -119,14 +122,17 @@ static bool multiUserAuthorized(std::string strUserPass)\n             std::string strHashFromPass = HexStr(hexvec);\n \n             if (TimingResistantEqual(strHashFromPass, strHash)) {\n+                if (vFields.size() > 3) {\n+                    walletNameOut = vFields[3];\n+                }\n                 return true;\n             }\n         }\n     }\n     return false;\n }\n \n-static bool RPCAuthorized(const std::string& strAuth, std::string& strAuthUsernameOut)\n+static bool RPCAuthorized(const std::string& strAuth, std::string& strAuthUsernameOut, std::string& walletNameOut)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10615#discussion_r131493030",
      "id" : 131493030,
      "original_commit_id" : "b77b2f254cc365728790f345deedbed1204964bb",
      "original_position" : 43,
      "path" : "src/httprpc.cpp",
      "position" : null,
      "pull_request_review_id" : 54484591,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10615",
      "updated_at" : "2017-09-02T08:06:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/131493030",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10615#discussion_r131493081"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10615"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/131493081"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "`wallet_name`.",
      "commit_id" : "370d3361e837a3a578707cab319503270f9917ad",
      "created_at" : "2017-08-04T21:46:45Z",
      "diff_hunk" : "@@ -162,7 +168,8 @@ static bool HTTPReq_JSONRPC(HTTPRequest* req, const std::string &)\n     }\n \n     JSONRPCRequest jreq;\n-    if (!RPCAuthorized(authHeader.second, jreq.authUser)) {\n+    std::string walletName;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10615#discussion_r131493081",
      "id" : 131493081,
      "original_commit_id" : "b77b2f254cc365728790f345deedbed1204964bb",
      "original_position" : 61,
      "path" : "src/httprpc.cpp",
      "position" : null,
      "pull_request_review_id" : 54484591,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10615",
      "updated_at" : "2017-09-02T08:06:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/131493081",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10615#discussion_r131495519"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10615"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/131495519"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Agree with @ryanofsky. There has been an effort to avoid more wallet dependencies.",
      "commit_id" : "370d3361e837a3a578707cab319503270f9917ad",
      "created_at" : "2017-08-04T22:03:05Z",
      "diff_hunk" : "@@ -184,6 +191,23 @@ static bool HTTPReq_JSONRPC(HTTPRequest* req, const std::string &)\n         // Set the URI\n         jreq.URI = req->GetURI();\n \n+#ifdef ENABLE_WALLET\n+        if (walletName.empty()) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10615#discussion_r131495519",
      "id" : 131495519,
      "in_reply_to_id" : 122534461,
      "original_commit_id" : "dbbdef99425539d5b59eba4ef640d241f7319d96",
      "original_position" : 71,
      "path" : "src/httprpc.cpp",
      "position" : null,
      "pull_request_review_id" : 54484591,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10615",
      "updated_at" : "2017-09-02T08:06:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/131495519",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10615#discussion_r140373004"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10615"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/140373004"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Can we not allow an enumeration of possible users here and then have the user->wallet mapping checked in rpcwallet.cpp?",
      "commit_id" : "370d3361e837a3a578707cab319503270f9917ad",
      "created_at" : "2017-09-21T22:15:19Z",
      "diff_hunk" : "@@ -180,6 +188,49 @@ static bool HTTPReq_JSONRPC(HTTPRequest* req, const std::string &)\n         // Set the URI\n         jreq.URI = req->GetURI();\n \n+#ifdef ENABLE_WALLET\n+        static const std::string WALLET_ENDPOINT_BASE = \"/wallet/\";",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10615#discussion_r140373004",
      "id" : 140373004,
      "original_commit_id" : "370d3361e837a3a578707cab319503270f9917ad",
      "original_position" : 71,
      "path" : "src/httprpc.cpp",
      "position" : 71,
      "pull_request_review_id" : 64438364,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10615",
      "updated_at" : "2017-09-21T22:15:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/140373004",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/649246?v=4",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10615#discussion_r140381709"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10615"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/140381709"
         }
      },
      "author_association" : "MEMBER",
      "body" : "`rpcwallet.cpp` is already past the point where the GUI and RPC abstractions combine.\r\n\r\nAlso, we are already enumerating the possible users here. To move it would mean two enumerations...",
      "commit_id" : "370d3361e837a3a578707cab319503270f9917ad",
      "created_at" : "2017-09-21T23:17:05Z",
      "diff_hunk" : "@@ -180,6 +188,49 @@ static bool HTTPReq_JSONRPC(HTTPRequest* req, const std::string &)\n         // Set the URI\n         jreq.URI = req->GetURI();\n \n+#ifdef ENABLE_WALLET\n+        static const std::string WALLET_ENDPOINT_BASE = \"/wallet/\";",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10615#discussion_r140381709",
      "id" : 140381709,
      "in_reply_to_id" : 140373004,
      "original_commit_id" : "370d3361e837a3a578707cab319503270f9917ad",
      "original_position" : 71,
      "path" : "src/httprpc.cpp",
      "position" : 71,
      "pull_request_review_id" : 64448468,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10615",
      "updated_at" : "2017-09-21T23:17:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/140381709",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10615#discussion_r140605237"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10615"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/140605237"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I was primarily echoing @jnewbery's comments above about needing cleanups, especially not introducing a bunch more ifdef ENABLE_WALLETs, and this is maybe an obvious case where you seem to be possible-needlessly moving code from src/wallet to src/httprpc. It may be a bit more effecient, but I'm not sure its worth mucking up more wallet stuff in httprpc here.",
      "commit_id" : "370d3361e837a3a578707cab319503270f9917ad",
      "created_at" : "2017-09-22T21:57:12Z",
      "diff_hunk" : "@@ -180,6 +188,49 @@ static bool HTTPReq_JSONRPC(HTTPRequest* req, const std::string &)\n         // Set the URI\n         jreq.URI = req->GetURI();\n \n+#ifdef ENABLE_WALLET\n+        static const std::string WALLET_ENDPOINT_BASE = \"/wallet/\";",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10615#discussion_r140605237",
      "id" : 140605237,
      "in_reply_to_id" : 140373004,
      "original_commit_id" : "370d3361e837a3a578707cab319503270f9917ad",
      "original_position" : 71,
      "path" : "src/httprpc.cpp",
      "position" : 71,
      "pull_request_review_id" : 64709045,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10615",
      "updated_at" : "2017-09-22T21:57:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/140605237",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/649246?v=4",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10615#discussion_r140608261"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10615"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/140608261"
         }
      },
      "author_association" : "MEMBER",
      "body" : "There is no src/wallet code that is strictly for RPC. I could make a function there, I suppose, and call it from here, but that seems just plain ugly?",
      "commit_id" : "370d3361e837a3a578707cab319503270f9917ad",
      "created_at" : "2017-09-22T22:21:34Z",
      "diff_hunk" : "@@ -180,6 +188,49 @@ static bool HTTPReq_JSONRPC(HTTPRequest* req, const std::string &)\n         // Set the URI\n         jreq.URI = req->GetURI();\n \n+#ifdef ENABLE_WALLET\n+        static const std::string WALLET_ENDPOINT_BASE = \"/wallet/\";",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10615#discussion_r140608261",
      "id" : 140608261,
      "in_reply_to_id" : 140373004,
      "original_commit_id" : "370d3361e837a3a578707cab319503270f9917ad",
      "original_position" : 71,
      "path" : "src/httprpc.cpp",
      "position" : 71,
      "pull_request_review_id" : 64712610,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10615",
      "updated_at" : "2017-09-22T22:21:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/140608261",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10615#discussion_r141184050"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10615"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/141184050"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Why not throw some additional registration stuff in src/wallet/rpcwallet? There's already registration stuff there now. httprpc should be, IMO, as much as possible, a \"dumb dispatcher\" - wallet should tell RPC what it wants, and RPC can pass in the parameters it was given by the client and rpcwallet.cpp can handle how to deal with them.",
      "commit_id" : "370d3361e837a3a578707cab319503270f9917ad",
      "created_at" : "2017-09-26T21:04:00Z",
      "diff_hunk" : "@@ -180,6 +188,49 @@ static bool HTTPReq_JSONRPC(HTTPRequest* req, const std::string &)\n         // Set the URI\n         jreq.URI = req->GetURI();\n \n+#ifdef ENABLE_WALLET\n+        static const std::string WALLET_ENDPOINT_BASE = \"/wallet/\";",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10615#discussion_r141184050",
      "id" : 141184050,
      "in_reply_to_id" : 140373004,
      "original_commit_id" : "370d3361e837a3a578707cab319503270f9917ad",
      "original_position" : 71,
      "path" : "src/httprpc.cpp",
      "position" : 71,
      "pull_request_review_id" : 65361404,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10615",
      "updated_at" : "2017-09-26T21:04:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/141184050",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/649246?v=4",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   }
]
