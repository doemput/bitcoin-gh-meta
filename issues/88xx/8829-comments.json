[
   {
      "body" : "Awesome, thanks!\r\nutACK https://github.com/bitcoin/bitcoin/pull/8829/commits/54e5d7c1b81e1b76f5789abfa2cb1f5963cd9d72",
      "created_at" : "2016-09-29T06:16:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8829#issuecomment-250379838",
      "id" : 250379838,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8829",
      "updated_at" : "2016-09-29T06:16:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/250379838",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "utACK 54e5d7c1b81e1b76f5789abfa2cb1f5963cd9d72",
      "created_at" : "2016-09-29T08:43:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8829#issuecomment-250406552",
      "id" : 250406552,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8829",
      "updated_at" : "2016-09-29T08:43:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/250406552",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=3",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "body" : "ups, merged in the middle of my testing :-)\r\n\r\npostmerge ACK https://github.com/bitcoin/bitcoin/commit/54e5d7c1b81e1b76f5789abfa2cb1f5963cd9d72",
      "created_at" : "2016-09-29T09:00:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8829#issuecomment-250410259",
      "id" : 250410259,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8829",
      "updated_at" : "2016-09-29T09:00:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/250410259",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6848764?v=3",
         "events_url" : "https://api.github.com/users/paveljanik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/paveljanik/followers",
         "following_url" : "https://api.github.com/users/paveljanik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/paveljanik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/paveljanik",
         "id" : 6848764,
         "login" : "paveljanik",
         "organizations_url" : "https://api.github.com/users/paveljanik/orgs",
         "received_events_url" : "https://api.github.com/users/paveljanik/received_events",
         "repos_url" : "https://api.github.com/users/paveljanik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/paveljanik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/paveljanik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/paveljanik"
      }
   },
   {
      "body" : "Question: Was txcreate2.json supposed to be empty? I'm assuming some test data was supposed to be in it. :)",
      "created_at" : "2016-09-29T11:32:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8829#issuecomment-250441386",
      "id" : 250441386,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8829",
      "updated_at" : "2016-09-29T11:32:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/250441386",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5931802?v=3",
         "events_url" : "https://api.github.com/users/droark/events{/privacy}",
         "followers_url" : "https://api.github.com/users/droark/followers",
         "following_url" : "https://api.github.com/users/droark/following{/other_user}",
         "gists_url" : "https://api.github.com/users/droark/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/droark",
         "id" : 5931802,
         "login" : "droark",
         "organizations_url" : "https://api.github.com/users/droark/orgs",
         "received_events_url" : "https://api.github.com/users/droark/received_events",
         "repos_url" : "https://api.github.com/users/droark/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/droark/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/droark/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/droark"
      }
   },
   {
      "body" : "Interesting. The txcreate2 test is attempting to create a transaction with a single pay-to-script output for zero satoshi. When outputting as json, bitcoin-tx returns the empty string. When outputting as hex, it returns 01000000000100000000000000000000000000, ie:\r\n\r\n```\r\nversion |number in|number out|out1 amount     |out1 script length|nlocktime\r\n01000000 00        01         0000000000000000 00                 00000000\r\n```\r\n\r\nI think that's garbage and bitcoin-tx should reject any attempt to add an output with zero satoshi. I'll open a PR to fix that.\r\n\r\nInterestingly, bitcoin-tx does output a json object if I try to create a zero-value transaction output to a non-empty script:\r\n\r\n```\r\n$ bitcoin-tx -json -create outscript=0:\"OP_DROP\"\r\n{\r\n    \"txid\": \"f0851b68202f736b792649cfc960259c2374badcb644ab20cac726b5f72f61c9\",\r\n    \"version\": 1,\r\n    \"locktime\": 0,\r\n    \"vin\": [\r\n    ],\r\n    \"vout\": [\r\n        {\r\n            \"value\": 0.00,\r\n            \"n\": 0,\r\n            \"scriptPubKey\": {\r\n                \"asm\": \"OP_DROP\",\r\n                \"hex\": \"75\",\r\n                \"type\": \"nonstandard\"\r\n            }\r\n        }\r\n    ],\r\n    \"hex\": \"0100000000010000000000000000017500000000\"\r\n}\r\n```\r\n\r\ntxcreate2 is also the only test case that tests creating a pay-to-script, so we should add a new test case that tests adding a valid pay-to-script output.",
      "created_at" : "2016-09-29T12:35:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8829#issuecomment-250453335",
      "id" : 250453335,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8829",
      "updated_at" : "2016-09-29T12:35:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/250453335",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "body" : "Zero-value outputs are perfectly valid according to consensus rules.\n",
      "created_at" : "2016-09-29T12:39:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8829#issuecomment-250454267",
      "id" : 250454267,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8829",
      "updated_at" : "2016-09-29T12:39:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/250454267",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "ah, ok. Thanks. Then the fix is in bitcoin-tx to properly output zero-value, empty-script outputs.",
      "created_at" : "2016-09-29T12:45:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8829#issuecomment-250455451",
      "id" : 250455451,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8829",
      "updated_at" : "2016-09-29T12:45:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/250455451",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "body" : "Good to see that we're finding bugs in bitcoin-tx by adding tests :)",
      "created_at" : "2016-09-29T12:48:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8829#issuecomment-250456179",
      "id" : 250456179,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8829",
      "updated_at" : "2016-09-29T12:48:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/250456179",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "I've mischaracterised the problem here. bitcoin-tx *is* outputting the transaction correctly in hex and json. However, when I try to pipe that same hex transaction back into bitcoin-tx, it fails with `error: invalid transaction encoding`.",
      "created_at" : "2016-09-29T13:02:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8829#issuecomment-250459378",
      "id" : 250459378,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8829",
      "updated_at" : "2016-09-29T13:02:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/250459378",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "body" : "Ah, that seems to be due to the segwit ambiguity for 0-input transactions.\nIIRC, DecodeTransaction in core_io.h has a boolean parameter for attempting\nto decode partial transactions. It should be set to true in calls from\nbitcoin-tx.\n",
      "created_at" : "2016-09-29T13:09:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8829#issuecomment-250461109",
      "id" : 250461109,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8829",
      "updated_at" : "2016-09-29T13:09:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/250461109",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Thanks @sipa . New PR here: https://github.com/bitcoin/bitcoin/pull/8837 to make bitcoin-tx set the flag correctly and parse partial transactions.\r\n\r\n@droark - I've added https://github.com/bitcoin/bitcoin/pull/8836 to fix the fact that `bitcoin-util-test.py` would always succeed if the output comparison file was empty. That PR also fixes `txcreate2.json` so it's no longer empty.",
      "created_at" : "2016-09-29T14:29:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8829#issuecomment-250482775",
      "id" : 250482775,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8829",
      "updated_at" : "2016-09-29T14:29:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/250482775",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "body" : "This was backported in #8832, removing tag",
      "created_at" : "2016-10-13T18:04:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8829#issuecomment-253591194",
      "id" : 253591194,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8829",
      "updated_at" : "2016-10-13T18:04:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/253591194",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   }
]
