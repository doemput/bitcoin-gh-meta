[
   {
      "body" : "@JeremyRubin",
      "created_at" : "2017-02-14T15:30:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/9759#issuecomment-279739811",
      "id" : 279739811,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9759",
      "updated_at" : "2017-02-14T15:30:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/279739811",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "body" : "0.14 tag, probably, because its a regression (and hopefully easy fix).",
      "created_at" : "2017-02-15T00:44:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/9759#issuecomment-279883480",
      "id" : 279883480,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9759",
      "updated_at" : "2017-02-15T00:44:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/279883480",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "I guess You mean `if (nMaxCacheSize < MIN_SIG_CACHE_SIZE)` ? ",
      "created_at" : "2017-02-15T04:32:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/9759#issuecomment-279914568",
      "id" : 279914568,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9759",
      "updated_at" : "2017-02-15T04:32:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/279914568",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8447873?v=3",
         "events_url" : "https://api.github.com/users/wodry/events{/privacy}",
         "followers_url" : "https://api.github.com/users/wodry/followers",
         "following_url" : "https://api.github.com/users/wodry/following{/other_user}",
         "gists_url" : "https://api.github.com/users/wodry/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/wodry",
         "id" : 8447873,
         "login" : "wodry",
         "organizations_url" : "https://api.github.com/users/wodry/orgs",
         "received_events_url" : "https://api.github.com/users/wodry/received_events",
         "repos_url" : "https://api.github.com/users/wodry/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/wodry/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/wodry/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/wodry"
      }
   },
   {
      "body" : "@jnewbery Seems like a simple fix. Create a PR?",
      "created_at" : "2017-02-15T09:15:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/9759#issuecomment-279957164",
      "id" : 279957164,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9759",
      "updated_at" : "2017-02-15T09:15:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/279957164",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Seems fine! I think you could also just call `setup_bytes(max(0, nMaxCacheSize))` and it should work OK (if I recall correctly, a call to setup_bytes with argument 0 will construct a cache with only 2 elements).",
      "created_at" : "2017-02-15T10:25:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/9759#issuecomment-279973126",
      "id" : 279973126,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9759",
      "updated_at" : "2017-02-15T10:25:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/279973126",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/886523?v=3",
         "events_url" : "https://api.github.com/users/JeremyRubin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JeremyRubin/followers",
         "following_url" : "https://api.github.com/users/JeremyRubin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JeremyRubin",
         "id" : 886523,
         "login" : "JeremyRubin",
         "organizations_url" : "https://api.github.com/users/JeremyRubin/orgs",
         "received_events_url" : "https://api.github.com/users/JeremyRubin/received_events",
         "repos_url" : "https://api.github.com/users/JeremyRubin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JeremyRubin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JeremyRubin"
      }
   },
   {
      "body" : "Woud also  be ok to call setup(0) inside cuckoocache constructor, if you want to not have that requirement.\r\n\r\nOn a meta note, it's a little concerning that we check the cache when nMaxCacheSize is 0. If this is a common case, it may be worthwhile to otherwise disable trying to check the cache when it is 0.",
      "created_at" : "2017-02-15T10:30:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/9759#issuecomment-279974327",
      "id" : 279974327,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9759",
      "updated_at" : "2017-02-15T10:30:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/279974327",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/886523?v=3",
         "events_url" : "https://api.github.com/users/JeremyRubin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JeremyRubin/followers",
         "following_url" : "https://api.github.com/users/JeremyRubin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JeremyRubin",
         "id" : 886523,
         "login" : "JeremyRubin",
         "organizations_url" : "https://api.github.com/users/JeremyRubin/orgs",
         "received_events_url" : "https://api.github.com/users/JeremyRubin/received_events",
         "repos_url" : "https://api.github.com/users/JeremyRubin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JeremyRubin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JeremyRubin"
      }
   },
   {
      "body" : "Are you going to PR the (trivial) fix or should I?\r\n\r\nI don't think this should hold up 0.14. Easiest workaround is to just not set `-maxsigcachesize` to zero.",
      "created_at" : "2017-02-15T15:58:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/9759#issuecomment-280051176",
      "id" : 280051176,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9759",
      "updated_at" : "2017-02-15T15:59:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/280051176",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "@laanwj I'll PR today",
      "created_at" : "2017-02-15T17:26:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/9759#issuecomment-280078158",
      "id" : 280078158,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9759",
      "updated_at" : "2017-02-15T17:26:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/280078158",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "body" : "I've confirmed that @JeremyRubin is correct and that `setup_bytes(0)` creates a cache with two elements. \r\n\r\n`nMaxCacheSize` is unsigned, so can never be < 0. The fix is therefore just to remove the line:\r\n```c\r\nif (nMaxCacheSize <= 0) return;\r\n```\r\n(and add a comment). PR is here: https://github.com/bitcoin/bitcoin/pull/9770/files\r\n\r\nI've tested this with `-maxsigcachesize` set to zero and bitcoind no longer segfaults.",
      "created_at" : "2017-02-15T19:27:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/9759#issuecomment-280112579",
      "id" : 280112579,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9759",
      "updated_at" : "2017-02-15T19:27:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/280112579",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   }
]
