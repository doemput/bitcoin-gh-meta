[
   {
      "body" : "Hmm, I'd expect the sigcache to be bypassed entirely in this case. I suppose this is fine for 0.14, but I think it'd probably be useful to have a SignatureCheckerNoCache to benchmark cache overhead.",
      "created_at" : "2017-02-15T20:34:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9770#issuecomment-280130568",
      "id" : 280130568,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9770",
      "updated_at" : "2017-02-15T20:34:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/280130568",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/417043?v=3",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "body" : "@theuni I'm ambivalent about that approach but I agree that it's likely a better approach (see my comment making the same point (sans solution) in the issue #9759). Ambivalence because more reliance on virtual methods, whereas it might be nice to get rid of the virtual-ness at some point. Running with cache size 0 under this patch means doing some likely unfruitful work every check though so clearly that's the better of 2 evils.\r\n\r\n",
      "created_at" : "2017-02-16T03:04:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9770#issuecomment-280217451",
      "id" : 280217451,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9770",
      "updated_at" : "2017-02-16T03:05:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/280217451",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/886523?v=3",
         "events_url" : "https://api.github.com/users/JeremyRubin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JeremyRubin/followers",
         "following_url" : "https://api.github.com/users/JeremyRubin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JeremyRubin",
         "id" : 886523,
         "login" : "JeremyRubin",
         "organizations_url" : "https://api.github.com/users/JeremyRubin/orgs",
         "received_events_url" : "https://api.github.com/users/JeremyRubin/received_events",
         "repos_url" : "https://api.github.com/users/JeremyRubin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JeremyRubin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JeremyRubin"
      }
   },
   {
      "body" : "Slightly suboptimal performance with sigcachesize 0 (which is afaik not\nrecommended anywhere) is perfectly acceptable for 0.14, I think - it's not\neven a regression. We can reconsider for 0.15.\n",
      "created_at" : "2017-02-16T03:06:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9770#issuecomment-280217798",
      "id" : 280217798,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9770",
      "updated_at" : "2017-02-16T03:06:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/280217798",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "I think this is a good pragmatic solution.  What matters here is that it doesn't crash. A user shouldn't set the cache to 0 if the goal is performance.\r\n~~utACK https://github.com/bitcoin/bitcoin/pull/9770/commits/d72fe44fc1989575ff5de98c882c0010d1de26e7 .~~\r\nsee below, need decision on what to do with negative values",
      "created_at" : "2017-02-16T09:28:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9770#issuecomment-280278930",
      "id" : 280278930,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9770",
      "updated_at" : "2017-02-16T09:45:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/280278930",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "BTW: what happens with a negative argument? Will it wrap around and still crash? :)\r\nedit: bad_alloc, apparently:\r\n```\r\n2017-02-16 09:35:27 Using at most 125 automatic connections (1024 file descriptors available)\r\n2017-02-16 09:35:27 \r\n\r\n************************\r\nEXCEPTION: St9bad_alloc       \r\nstd::bad_alloc       \r\nbitcoin in AppInit()       \r\n\r\n\r\n\r\n************************\r\nEXCEPTION: St9bad_alloc       \r\nstd::bad_alloc       \r\nbitcoin in AppInit()       \r\n```",
      "created_at" : "2017-02-16T09:29:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9770#issuecomment-280279259",
      "id" : 280279259,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9770",
      "updated_at" : "2017-02-16T09:35:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/280279259",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "In #9759 I suggested `setup_bytes(max(0, nMaxCacheSize))` for that reason, but I suppose that's not sufficient either: nMaxCacheSize should be made a signed int of some sort rather than size_t.",
      "created_at" : "2017-02-16T09:47:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9770#issuecomment-280283544",
      "id" : 280283544,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9770",
      "updated_at" : "2017-02-16T09:47:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/280283544",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/886523?v=3",
         "events_url" : "https://api.github.com/users/JeremyRubin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JeremyRubin/followers",
         "following_url" : "https://api.github.com/users/JeremyRubin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JeremyRubin",
         "id" : 886523,
         "login" : "JeremyRubin",
         "organizations_url" : "https://api.github.com/users/JeremyRubin/orgs",
         "received_events_url" : "https://api.github.com/users/JeremyRubin/received_events",
         "repos_url" : "https://api.github.com/users/JeremyRubin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JeremyRubin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JeremyRubin"
      }
   },
   {
      "body" : "Yeah, `ssize_t` would do the job. Or apply the `std::max()` directly to the GetArg result.\r\n",
      "created_at" : "2017-02-16T09:48:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9770#issuecomment-280283802",
      "id" : 280283802,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9770",
      "updated_at" : "2017-02-16T09:48:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/280283802",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Didn't intend to merge this one yet, sorry.\r\nAnyhow if we want to cope with the negative amounts, need to do that in a new PR.\r\n\r\nEdit: needed to revert anyway - something went wrong with the tooling, the merge was not signed either.",
      "created_at" : "2017-02-16T11:19:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9770#issuecomment-280304204",
      "id" : 280304204,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9770",
      "updated_at" : "2017-02-16T11:40:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/280304204",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "@fanquake yes I'll do that today.",
      "created_at" : "2017-02-16T14:19:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9770#issuecomment-280341948",
      "id" : 280341948,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9770",
      "updated_at" : "2017-02-16T14:19:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/280341948",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   }
]
