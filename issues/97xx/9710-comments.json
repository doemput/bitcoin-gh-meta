[
   {
      "body" : "Maybe we should have an option `-mempoolerase` or something.",
      "created_at" : "2017-02-09T21:15:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/9710#issuecomment-278775989",
      "id" : 278775989,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9710",
      "updated_at" : "2017-02-09T21:15:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/278775989",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "@luke-jr yes that might be helpful.\r\n\r\nTo start with I'll add a warning message when someone starts bitcoind with -zapwallettxes and there's a mempool.dat file in their data directory. Something like:\r\n\r\n\"bitcoind started with -zapwallettxes, but there is a mempool file in the data directory. Unconfirmed transactions in the mempool file may be scanned and re-added to the wallet. To remove all unconfirmed transactions, you may wish to delete the mempool.dat file from your data directory.\"\r\n\r\nIf users are finding it too onerous to remove the mempool.dat file manually we could add a `-mempoolerase` option.\r\n\r\nSound good?",
      "created_at" : "2017-02-09T22:31:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/9710#issuecomment-278795984",
      "id" : 278795984,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9710",
      "updated_at" : "2017-02-09T22:31:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/278795984",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "body" : "What about just not loading (=deleting/resetting) the `mempool.dat`-dump when `-zapwallettxes=<n>` was passed? Mention the new behaviour in the -zapwallettxes help/documentation.",
      "created_at" : "2017-02-12T13:38:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/9710#issuecomment-279219176",
      "id" : 279219176,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9710",
      "updated_at" : "2017-02-12T13:38:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/279219176",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "@jonasschnelli you have much more experience of the wallet than I do. Not reloading the mempool when -zapwallettxes is set sounds like reasonable behaviour.\r\n\r\nAny other suggestions before I prepare a fix? @sipa you introduced the persistent mempool. @laanwj you provided the use case for zapwallettxes in #3659. Does not loading mempool when zapwallettxes is set sound like reasonable behaviour?",
      "created_at" : "2017-02-23T19:10:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/9710#issuecomment-282089729",
      "id" : 282089729,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9710",
      "updated_at" : "2017-02-23T19:10:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/282089729",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "body" : "Yes, that may make sense. I'd implement it like this:\r\n- Add a new option to delete/ignore the mempool at startup.\r\n- Change parameter interaction so that `-zapwallettxes` implies that option.\r\n\r\nThis leaves flexibility to do othewise, avoids a tight coupling between a wallet and mempool option, but makes the default case to get rid of transactions: which is generally what people want when zapping the transactions.",
      "created_at" : "2017-02-24T10:37:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/9710#issuecomment-282260165",
      "id" : 282260165,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9710",
      "updated_at" : "2017-02-24T10:37:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/282260165",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "#9966 was a pre-req for fixing this. It's now been merged so I've opened a PR to fix this issue at #10330 ",
      "created_at" : "2017-05-03T17:46:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/9710#issuecomment-298984395",
      "id" : 298984395,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9710",
      "updated_at" : "2017-05-03T17:46:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/298984395",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "body" : "I just wanted to mention that a user on Bitcoin.Stackexchange complained that -zapwallettxes didn't work as expected due to the mempool reload reintroducing the transaction to his wallet, and that a default behavior of `-zapwallettxes` at least blocking the own transactions from being loaded would be expected. :)",
      "created_at" : "2017-05-13T19:52:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/9710#issuecomment-301270960",
      "id" : 301270960,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9710",
      "updated_at" : "2017-05-13T19:52:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/301270960",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/4060799?v=3",
         "events_url" : "https://api.github.com/users/Xekyo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Xekyo/followers",
         "following_url" : "https://api.github.com/users/Xekyo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Xekyo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Xekyo",
         "id" : 4060799,
         "login" : "Xekyo",
         "organizations_url" : "https://api.github.com/users/Xekyo/orgs",
         "received_events_url" : "https://api.github.com/users/Xekyo/received_events",
         "repos_url" : "https://api.github.com/users/Xekyo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Xekyo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Xekyo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Xekyo"
      }
   }
]
