[
   {
      "body" : "Rather rename it to `CheckBlockPoW` then... but considering that's already covered by `CheckProofOfWork`, perhaps `CheckBlockHeader` should just be removed entirely and inlined where applicable.",
      "created_at" : "2017-02-08T03:25:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9717#issuecomment-278218882",
      "id" : 278218882,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9717",
      "updated_at" : "2017-02-08T03:25:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/278218882",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "I'm all for unifying CheckBlockHeader with CheckProofOfWork in pow.o, but one step at a time.\r\nHere are more future suggestions: \r\nhttps://github.com/jtimon/bitcoin/compare/pre-0.14-dont-call-me...jtimon:pre-0.14-encapsulate-pow\r\n\r\nCurrently the only difference between CheckProofOfWork and CheckBlockHeader and thus prevent from unifying the two functions are:\r\n\r\n1) Using CValidationState to give more detailed errors with CheckBlockHeader. \r\nPossible solution: More detailed errors are good, let's call with CheckBlockHeader and bring CValidationState down to CheckProofOfWork too.\r\n\r\n2) Not all CheckProofOfWork callers use CBlockHeader, this is can be a performance problem for refactor (see 'Pow: Performance hit: pre-static-CheckProofOfWork...').\r\n\r\nWe can rename CheckBlockHeader to CheckProofOfWork, CheckBlockPoW or whatever, no problem.\r\n",
      "created_at" : "2017-02-08T06:00:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9717#issuecomment-278237040",
      "id" : 278237040,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9717",
      "updated_at" : "2017-02-08T06:00:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/278237040",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "body" : "utACK.\r\n\r\nI'm not strongly in favor of this change though, given that if more functionality gets added to checkblockheader ever you would want to add fCheckPOW again.\r\n\r\nI am opposed to the other changes mentioned, ie, making checkproofofwork add the dos scores, seems better to keep checkproofofwork a pure function.",
      "created_at" : "2017-03-29T20:56:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9717#issuecomment-290223084",
      "id" : 290223084,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9717",
      "updated_at" : "2017-03-29T20:56:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/290223084",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/886523?v=3",
         "events_url" : "https://api.github.com/users/JeremyRubin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JeremyRubin/followers",
         "following_url" : "https://api.github.com/users/JeremyRubin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JeremyRubin",
         "id" : 886523,
         "login" : "JeremyRubin",
         "organizations_url" : "https://api.github.com/users/JeremyRubin/orgs",
         "received_events_url" : "https://api.github.com/users/JeremyRubin/received_events",
         "repos_url" : "https://api.github.com/users/JeremyRubin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JeremyRubin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JeremyRubin"
      }
   },
   {
      "body" : "If there are plans to add more functionality back to this functions (which I wouldn't oppose too), and I can only think that you are referring to this check https://github.com/bitcoin/bitcoin/blob/master/src/validation.cpp#L2967 then we definitely don't want either this PR or @luke-jr 's suggestion of going further and fully remove CheckBlockHeader in one step.\r\n\r\nBut if we don't plan to put that code back there, then the fCheckPOW parameter doesn't make any sense in CheckBlockHeader. Better is better. This was supposed to be the simplest fix for something that honestly looks embarrassing when I think of reviewers reading this function without looking at the history or thinking about https://github.com/bitcoin/bitcoin/blob/master/src/validation.cpp#L2967 .\r\n\r\nLet's please first decide whether we want to remove fCheckPOW from this function or we want to bring the check ```block.GetBlockTime() > nAdjustedTime + MAX_FUTURE_BLOCK_TIME)``` back here (which I'm not opposed to and I'm happy to write myself if that's what's preferred, I don't care).\r\n\r\nAfter this, as @luke-jr points out CheckBlockHeader is just a wrapper for CheckProofOfWork but passing CValidationState. An option would be to remove it, another option would be to use CValidationState or maybe put it in https://github.com/bitcoin/bitcoin/blob/master/src/script/script_error.h (and maybe rename script_error.h to consensus/errors.o too, who knows).\r\n\r\nBut if we can't decide whether fCheckPOW here is pointless or not (and I don't want to bet, but maybe the compiler has already decided for us at a lower level), I don't want to put more decisions in the same PR.\r\n\r\n@luke-jr @JeremyRubin Does that sound reasonable to you?\r\n\r\nFor more context:\r\nThe comments are really appreciated in the context of #9177 which I'm trying to complete while rewriting in a simpler and less disruptive way (it will remain on top of #8994 though, since that currently allows to reuse all existing rpc/python tests except segwit.py for any custom chain [or even testnet3 and mainchain] instead of having to replace regtest with your new testchain to do so).\r\n\r\nAt the same time, I understand neither this nor #9177 are a priority for bitcoin core itself, since I believe it is unlikely #9177 will ever be merged on mainnet unless I find a way that doesn't affect performance at all on mainchain and at the same time is not very disruptive (which as said I believe it's unlikely). It would be very useful for rebasing elements to have  #9177 completed and merged in bitcoin core, but bitcoin core shouldn't care about that since not all it's users care about elements.\r\nOn the other hand I think #8855 #8994 can be very useful for testing within bitcoin core itself, but have no relation with this PR, only with #9177.\r\n\r\nPS: Sorry for the text wall, this shouldn't happen in a +4-4 PR.",
      "created_at" : "2017-04-06T22:32:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9717#issuecomment-292344265",
      "id" : 292344265,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9717",
      "updated_at" : "2017-04-06T22:32:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/292344265",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "body" : "utACK 7b3b201f1ba5db4265363f29e3bea98686b6b5c3\r\n\r\nIf needed later, can add again.",
      "created_at" : "2017-04-07T10:26:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9717#issuecomment-292501932",
      "id" : 292501932,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9717",
      "updated_at" : "2017-04-07T10:26:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/292501932",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3020646?v=3",
         "events_url" : "https://api.github.com/users/NicolasDorier/events{/privacy}",
         "followers_url" : "https://api.github.com/users/NicolasDorier/followers",
         "following_url" : "https://api.github.com/users/NicolasDorier/following{/other_user}",
         "gists_url" : "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/NicolasDorier",
         "id" : 3020646,
         "login" : "NicolasDorier",
         "organizations_url" : "https://api.github.com/users/NicolasDorier/orgs",
         "received_events_url" : "https://api.github.com/users/NicolasDorier/received_events",
         "repos_url" : "https://api.github.com/users/NicolasDorier/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/NicolasDorier/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/NicolasDorier"
      }
   },
   {
      "body" : "Agree with @NicolasDorier - if `CheckBlockHeader()` is needed in future, it can be added.\r\n\r\nThis seems to be strictly an improvement, so utACK 7b3b201f1ba5db4265363f29e3bea98686b6b5c3.",
      "created_at" : "2017-04-07T16:47:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9717#issuecomment-292589495",
      "id" : 292589495,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9717",
      "updated_at" : "2017-04-07T16:47:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/292589495",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "body" : "@NicolasDorier @jnewbery By \"CheckBlockHeader() can be added back if needed\" I understand that you're not only ok with this but also with inlining CheckBlockHeader as suggested by @luke-jr in a future PR and therefore not bringing the MAX_FUTURE_BLOCK_TIME check back from ContextualCheckBlockHeader to CheckBlockHeader in the foreseeable future. \r\n",
      "created_at" : "2017-04-11T02:32:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9717#issuecomment-293132577",
      "id" : 293132577,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9717",
      "updated_at" : "2017-04-11T02:32:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/293132577",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "body" : "@jtimon yes, I am fine with both. Indeed no much point to have CheckBlockHeader anymore after this PR.",
      "created_at" : "2017-04-11T11:08:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9717#issuecomment-293224913",
      "id" : 293224913,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9717",
      "updated_at" : "2017-04-11T11:08:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/293224913",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3020646?v=3",
         "events_url" : "https://api.github.com/users/NicolasDorier/events{/privacy}",
         "followers_url" : "https://api.github.com/users/NicolasDorier/followers",
         "following_url" : "https://api.github.com/users/NicolasDorier/following{/other_user}",
         "gists_url" : "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/NicolasDorier",
         "id" : 3020646,
         "login" : "NicolasDorier",
         "organizations_url" : "https://api.github.com/users/NicolasDorier/orgs",
         "received_events_url" : "https://api.github.com/users/NicolasDorier/received_events",
         "repos_url" : "https://api.github.com/users/NicolasDorier/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/NicolasDorier/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/NicolasDorier"
      }
   },
   {
      "body" : "We can also pass the blockHash to CheckBlockHeader, that would make it closer to CheckProofOfWork, which I imagine would be more interesting to @luke-jr ?",
      "created_at" : "2017-05-04T02:12:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9717#issuecomment-299082722",
      "id" : 299082722,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9717",
      "updated_at" : "2017-05-04T02:15:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/299082722",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "body" : "utACK 7b3b201f1ba5db4265363f29e3bea98686b6b5c3",
      "created_at" : "2017-05-05T20:36:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9717#issuecomment-299569571",
      "id" : 299569571,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9717",
      "updated_at" : "2017-05-05T20:36:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/299569571",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "utACK 7b3b201f1ba5db4265363f29e3bea98686b6b5c3, good simplification.",
      "created_at" : "2017-05-08T19:11:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9717#issuecomment-299962335",
      "id" : 299962335,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9717",
      "updated_at" : "2017-05-08T19:11:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/299962335",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/7133040?v=3",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "body" : "Sorry, forgot to make the function static while at it.",
      "created_at" : "2017-05-09T16:14:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9717#issuecomment-300217396",
      "id" : 300217396,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9717",
      "updated_at" : "2017-05-09T16:14:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/300217396",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "body" : "utACK 9855ecaf880840a42f2a9678dc6d9e753c11c531. Only change since last review is making the function static.",
      "created_at" : "2017-06-01T20:54:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9717#issuecomment-305617441",
      "id" : 305617441,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9717",
      "updated_at" : "2017-06-01T20:54:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/305617441",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/7133040?v=3",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "body" : "This seems like it is ready to be merged. It's very minor, 4 people acked it, and #10339 depends on it.",
      "created_at" : "2017-06-01T21:06:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9717#issuecomment-305620383",
      "id" : 305620383,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9717",
      "updated_at" : "2017-06-01T21:06:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/305620383",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/7133040?v=3",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "body" : "NACK, there is no value in doing this, and it only makes the code less readable because it conflates the block header with the PoW.",
      "created_at" : "2017-06-02T02:35:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9717#issuecomment-305673262",
      "id" : 305673262,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9717",
      "updated_at" : "2017-06-02T02:35:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/305673262",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "@luke-jr so lets just remove CheckBlockHeader instead and call CheckProofOfWork where we need to?",
      "created_at" : "2017-06-07T19:36:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9717#issuecomment-306901995",
      "id" : 306901995,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9717",
      "updated_at" : "2017-06-07T19:36:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/306901995",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "@TheBlueMatt I don't see how that's an improvement, but at least it sounds non-confusing, and as such I wouldn't object.",
      "created_at" : "2017-06-07T19:45:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9717#issuecomment-306904241",
      "id" : 306904241,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9717",
      "updated_at" : "2017-06-07T19:45:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/306904241",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "Needed rebase. Rebased on top of #10339 instead of the other way around.\r\n\r\n> @TheBlueMatt I don't see how that's an improvement, but at least it sounds non-confusing, and as such I wouldn't object.\r\n\r\nI'm confused, I thought removing CheckBlockHeader was your preference https://github.com/bitcoin/bitcoin/pull/9717#issuecomment-278218882\r\n\r\n> makes the code less readable because it conflates the block header with the PoW\r\n\r\nRight now they are the same thing (except for CValidationState and the fDontDoAnything param that this PR tries to remove).\r\n",
      "created_at" : "2017-06-07T21:58:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9717#issuecomment-306937448",
      "id" : 306937448,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9717",
      "updated_at" : "2017-06-07T21:58:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/306937448",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "body" : "> I'm confused, I thought removing CheckBlockHeader was your preference #9717 (comment)\r\n\r\nI'd rather that than making the code more confusing, but I don't see how either change is *useful*.\r\n\r\n> Right now they are the same thing\r\n\r\nThey are *conceptually* different things. If we add an additional check to CheckBlockHeader, we would not expect it to also be skipped when PoW checks are skipped.",
      "created_at" : "2017-06-07T22:16:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9717#issuecomment-306941055",
      "id" : 306941055,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9717",
      "updated_at" : "2017-06-07T22:16:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/306941055",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "Sorry, removed the commit from #10339 again.\r\n\r\n> I'd rather that than making the code more confusing, but I don't see how either change is useful.\r\n\r\nIt is useful because it simplifies an interface that is more complex than it needs to be. Currently, if you're calling the function with fCheckPOW=false (could as well be named fActuallyDoSomethingWhenCallingThisFunction), you can just not call it.\r\nThis doesn't make the code more confusing, the opposite is true.\r\nAt a minimum, we could mae the nonsense argument non optional as a start.\r\n\r\n> They are conceptually different things. If we add an additional check to CheckBlockHeader, we would not expect it to also be skipped when PoW checks are skipped.\r\n\r\nThis argument actually makes sense to me.\r\nDo you have a a specific example of some check we may want to add to this function in the future or is it a \"maybe 5 years from now we realize we may want to undo this change so better not do it just in case\" kind of concern?\r\n\r\nIf you had specific examples it would be much simpler for me to close this PR. If you don't, I think your opposition to this PR is unreasonable.\r\n\r\n",
      "created_at" : "2017-06-25T00:06:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9717#issuecomment-310873335",
      "id" : 310873335,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9717",
      "updated_at" : "2017-06-25T00:06:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/310873335",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "body" : "A specific example we could put there right now, would be to check the nVersion is >0. But either way, they are still conceptually different things, and so long as it says `CheckBlockHeader`, it should be called whenever the block header is to be checked, independently of whether the PoW check ought to be skipped.",
      "created_at" : "2017-06-25T01:31:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9717#issuecomment-310875954",
      "id" : 310875954,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9717",
      "updated_at" : "2017-06-25T01:31:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/310875954",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "> A specific example we could put there right now, would be to check the nVersion is >0.\r\n\r\nThank you. I guess that would currently be an optimization. mhmm, didn't we used to check that block.version > 0 in ContextualCheckBlockHeader ? where are we checking it now? If in the future we want to use the \"hardfork bit\" to signal hardforks, I think  ContextualCheckBlockHeader is the right place (assuming the hf is coordinated with bip9/bip8).\r\nEDIT: never mind, it seems that check only existed in my head, it was just implicit after moving to version 2 or more.\r\n\r\nDo you have more examples? An example of something that we currently don't validate would serve.\r\nI can only think of  the \"time-too-new\" check as example, which used to be here, but since we considered that time was \"context\" anyway, I don't think we will ever put that back in CheckBlockHeader.\r\n",
      "created_at" : "2017-06-25T01:52:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9717#issuecomment-310876631",
      "id" : 310876631,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9717",
      "updated_at" : "2017-06-25T05:06:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/310876631",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1008458?v=4",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "body" : "ping this, is it really controversial or only for @luke-jr ?",
      "created_at" : "2017-08-26T02:33:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9717#issuecomment-325075607",
      "id" : 325075607,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9717",
      "updated_at" : "2017-08-26T02:33:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/325075607",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1008458?v=4",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Closing for now, but don't discard to reopen if I ever touch or review the header of main::CheckBlockHeader again, my fault or not.",
      "created_at" : "2017-09-30T23:55:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9717#issuecomment-333343937",
      "id" : 333343937,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9717",
      "updated_at" : "2017-09-30T23:55:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/333343937",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1008458?v=4",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   }
]
