[
   {
      "body" : "Thanks for trying to improve the error codes, however please don't use these two for application-level errors, they are reserved for errors in low-level protocol handling:\r\n- `RPC_INVALID_REQUEST`  is mapped to `HTTP_BAD_REQUEST` (400)\r\n- `RPC_METHOD_NOT_FOUND` is mapped to `HTTP_NOT_FOUND` (404)",
      "created_at" : "2017-02-08T10:25:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9714#issuecomment-278289274",
      "id" : 278289274,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9714",
      "updated_at" : "2017-02-08T10:25:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/278289274",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Thanks @laanwj - can you confirm that none of the error codes in this block should be used for application-level errors:\r\n\r\n```\r\n    //! Standard JSON-RPC 2.0 errors\r\n    RPC_INVALID_REQUEST  = -32600,\r\n    RPC_METHOD_NOT_FOUND = -32601,\r\n    RPC_INVALID_PARAMS   = -32602,\r\n    RPC_INTERNAL_ERROR   = -32603,\r\n    RPC_PARSE_ERROR      = -32700,\r\n```\r\n\r\nI've grepped through the RPC code and it appears that those are mostly not being used in the application-level code except for:\r\n\r\n- `RPC_INTERNAL_ERROR` - used (correctly I think) in rpc/blockchain.cpp and rawtransaction.cpp when the internal datastructures are corrupt.\r\n- `RPC_INTERNAL_ERROR` - abused in mining.cpp for application-level errors\r\n- `RPC_INVALID_REQUEST`, `RPC_METHOD_NOT_FOUND`, and `RPC_INTERNAL_ERROR` abused in rpcwallet.cpp for application-level errors.\r\n\r\nIf you confirm my understanding is correct, I'll fix those up in future commits (and add a comment to protocol.h to warn people not to use the -32xxx codes for application-level errors).",
      "created_at" : "2017-02-09T19:43:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9714#issuecomment-278750297",
      "id" : 278750297,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9714",
      "updated_at" : "2017-02-09T19:43:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/278750297",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "body" : "I've removed all uses of `RPC_INTERNAL_ERROR` from bumpfee()\r\n\r\nReviewers: please only review the second commit in this PR. The first commit is https://github.com/bitcoin/bitcoin/pull/9707",
      "created_at" : "2017-02-09T20:22:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9714#issuecomment-278761492",
      "id" : 278761492,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9714",
      "updated_at" : "2017-02-09T20:22:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/278761492",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "body" : "@jnewbery Not so sure about avoiding all the standard JSON-RPC errors. But propagating the two I mention above to the HTTP layer is a historical accident, which we can't undo without breaking the interface, but it means it's better to avoid them.",
      "created_at" : "2017-02-10T12:32:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9714#issuecomment-278931886",
      "id" : 278931886,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9714",
      "updated_at" : "2017-02-10T12:32:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/278931886",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "#9707 is now merged so this PR only contains the single commit which needs to be reviewed.",
      "created_at" : "2017-02-10T18:31:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9714#issuecomment-279026329",
      "id" : 279026329,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9714",
      "updated_at" : "2017-02-10T18:31:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/279026329",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "body" : "can you update the PR text at the top to what you think now as to which error codes should be used for which class of errors?\r\n",
      "created_at" : "2017-02-10T19:37:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9714#issuecomment-279044740",
      "id" : 279044740,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9714",
      "updated_at" : "2017-02-10T19:37:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/279044740",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4360349?v=3",
         "events_url" : "https://api.github.com/users/morcos/events{/privacy}",
         "followers_url" : "https://api.github.com/users/morcos/followers",
         "following_url" : "https://api.github.com/users/morcos/following{/other_user}",
         "gists_url" : "https://api.github.com/users/morcos/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/morcos",
         "id" : 4360349,
         "login" : "morcos",
         "organizations_url" : "https://api.github.com/users/morcos/orgs",
         "received_events_url" : "https://api.github.com/users/morcos/received_events",
         "repos_url" : "https://api.github.com/users/morcos/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/morcos/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/morcos/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/morcos"
      }
   },
   {
      "body" : "@morcos I've updated the error codes in the original PR notes (and updated the commit message).",
      "created_at" : "2017-02-15T21:45:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9714#issuecomment-280149672",
      "id" : 280149672,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9714",
      "updated_at" : "2017-02-15T21:45:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/280149672",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "body" : "Closing in favour of #9853.",
      "created_at" : "2017-02-24T16:29:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9714#issuecomment-282336150",
      "id" : 282336150,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9714",
      "updated_at" : "2017-02-24T16:29:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/282336150",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   }
]
