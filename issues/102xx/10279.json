{
   "assignee" : null,
   "assignees" : [],
   "body" : "CChainState should eventually, essentially, be our exposed \"libconsensus\", but we're probably a few releases away, so the real goal is to clarify our internal interfaces. The main split was a big step, but validation.cpp is still a somewhat ranomly-mixed bag of functions that are pure functions which validate inputs (which should probably either merge with their callers or move into another file in consensus/), read/write data from disk, manipulate our current chain state (which moves into CChainState), and do mempool transaction validation.\r\n\r\nObviously this is only a small step, but some effort is made to clean up what functions the functions in CChainState call, and obviously as things are added its easy to keep clear \"CChainState::* cannot call anything except via callbacks through CValidationInterface, pure functions, or disk read/write things\". Right now there are some glaring violations in mempool callbacks, and general flushing logic needs cleaning up (FlushStateToDisk maybe shouldnt be called, and there should be an API towards setDirtyBlockIndex, but I'll leave that for after @sipa's current changesets land).",
   "closed_at" : null,
   "closed_by" : null,
   "comments" : 8,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10279/comments",
   "created_at" : "2017-04-26T01:49:59Z",
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10279/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/pull/10279",
   "id" : 224320125,
   "labels" : [
      {
         "color" : "6060aa",
         "default" : false,
         "id" : 118379652,
         "name" : "Validation",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/Validation"
      }
   ],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10279/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "number" : 10279,
   "pull_request" : {
      "diff_url" : "https://github.com/bitcoin/bitcoin/pull/10279.diff",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10279",
      "patch_url" : "https://github.com/bitcoin/bitcoin/pull/10279.patch",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10279"
   },
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "open",
   "title" : "Add a CChainState class to validation.cpp to take another step towards clarifying internal interfaces",
   "updated_at" : "2017-06-13T17:47:40Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10279",
   "user" : {
      "avatar_url" : "https://avatars3.githubusercontent.com/u/649246?v=3",
      "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
      "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
      "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
      "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/TheBlueMatt",
      "id" : 649246,
      "login" : "TheBlueMatt",
      "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
      "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
      "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/TheBlueMatt"
   }
}
