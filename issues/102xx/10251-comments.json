[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10251#discussion_r112709836"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10251"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/112709836"
         }
      },
      "body" : "I think think you need to acquire cs_wallet lock here, otherwise this could return a partial sum if `GetBalance` got called from two threads at the same time and one thread returned `nBalanceCache` while the other thread was in the middle of the `nBalanceCache +=` loop.\r\n\r\nAlternately, you could bring back the nTotal local variable and just set `nBalanceCache = nTotal`  atomically.",
      "commit_id" : "187b3eea4a9da6e589099289632ce0425e269e37",
      "created_at" : "2017-04-21T15:07:29Z",
      "diff_hunk" : "@@ -1902,95 +1909,123 @@ void CWallet::ResendWalletTransactions(int64_t nBestBlockTime, CConnman* connman\n  * @{\n  */\n \n+void CWallet::MarkBalancesDirty()\n+{\n+    fBalancesDirty = true;\n+    BalancesDidChange();\n+}\n \n CAmount CWallet::GetBalance() const\n {\n-    CAmount nTotal = 0;\n+    if (!fBalancesDirty) {\n+        return nBalanceCache;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10251#discussion_r112709836",
      "id" : 112709836,
      "original_commit_id" : "69b751bd3635b28bb40815d7e370cc201cb0c6c5",
      "original_position" : 87,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 34048237,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10251",
      "updated_at" : "2017-06-14T07:31:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/112709836",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/7133040?v=3",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10251#discussion_r112710662"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10251"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/112710662"
         }
      },
      "body" : "I think you need to move this line after the `LOCK2(cs_main, cs_wallet);` line. Otherwise if this method is called from two different threads simultaneously, this line could zero out a balance which is in the middle of being added up by the other thread.\r\n\r\nOr alternately, delete this line and and set nBalanceCache = nTotal atomically after the loop.",
      "commit_id" : "187b3eea4a9da6e589099289632ce0425e269e37",
      "created_at" : "2017-04-21T15:10:37Z",
      "diff_hunk" : "@@ -1902,95 +1909,123 @@ void CWallet::ResendWalletTransactions(int64_t nBestBlockTime, CConnman* connman\n  * @{\n  */\n \n+void CWallet::MarkBalancesDirty()\n+{\n+    fBalancesDirty = true;\n+    BalancesDidChange();\n+}\n \n CAmount CWallet::GetBalance() const\n {\n-    CAmount nTotal = 0;\n+    if (!fBalancesDirty) {\n+        return nBalanceCache;\n+    }\n+\n+    nBalanceCache = 0;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10251#discussion_r112710662",
      "id" : 112710662,
      "original_commit_id" : "69b751bd3635b28bb40815d7e370cc201cb0c6c5",
      "original_position" : 90,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 34048237,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10251",
      "updated_at" : "2017-06-14T07:31:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/112710662",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/7133040?v=3",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "body" : "Concept ACK, nice!",
      "created_at" : "2017-04-21T15:11:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10251#issuecomment-296218058",
      "id" : 296218058,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10251",
      "updated_at" : "2017-04-21T15:11:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/296218058",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10251#discussion_r112713347"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10251"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/112713347"
         }
      },
      "body" : "Maybe call it `BalancesChanged` instead of `BalancesDidChange` to be consistent with the naming of other signals (`StatusChanged`, `AddressBookChanged`, etc).",
      "commit_id" : "187b3eea4a9da6e589099289632ce0425e269e37",
      "created_at" : "2017-04-21T15:21:59Z",
      "diff_hunk" : "@@ -898,13 +899,26 @@ class CWallet : public CCryptoKeyStore, public CValidationInterface\n     void ReacceptWalletTransactions();\n     void ResendWalletTransactions(int64_t nBestBlockTime, CConnman* connman) override;\n     std::vector<uint256> ResendWalletTransactionsBefore(int64_t nTime, CConnman* connman);\n+\n+    void MarkBalancesDirty();\n     CAmount GetBalance() const;\n     CAmount GetUnconfirmedBalance() const;\n     CAmount GetImmatureBalance() const;\n     CAmount GetWatchOnlyBalance() const;\n     CAmount GetUnconfirmedWatchOnlyBalance() const;\n     CAmount GetImmatureWatchOnlyBalance() const;\n \n+    mutable std::atomic<CAmount> nBalanceCache;\n+    mutable std::atomic<CAmount> nUnconfirmedBalanceCache;\n+    mutable std::atomic<CAmount> nImmatureBalanceCache;\n+    mutable std::atomic<CAmount> nWatchOnlyBalanceCache;\n+    mutable std::atomic<CAmount> nUnconfirmedWatchOnlyBalanceCache;\n+    mutable std::atomic<CAmount> nImmatureWatchOnlyBalanceCache;\n+    std::atomic<bool> fBalancesDirty;\n+\n+    /** Notification for balance changes */\n+    boost::signals2::signal<void ()> BalancesDidChange;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10251#discussion_r112713347",
      "id" : 112713347,
      "original_commit_id" : "69b751bd3635b28bb40815d7e370cc201cb0c6c5",
      "original_position" : 30,
      "path" : "src/wallet/wallet.h",
      "position" : null,
      "pull_request_review_id" : 34048237,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10251",
      "updated_at" : "2017-06-14T07:31:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/112713347",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/7133040?v=3",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10251#discussion_r112721119"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10251"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/112721119"
         }
      },
      "body" : "Oh.. good point.\r\nI'll re-add the temp variable then.",
      "commit_id" : "187b3eea4a9da6e589099289632ce0425e269e37",
      "created_at" : "2017-04-21T15:56:43Z",
      "diff_hunk" : "@@ -1902,95 +1909,123 @@ void CWallet::ResendWalletTransactions(int64_t nBestBlockTime, CConnman* connman\n  * @{\n  */\n \n+void CWallet::MarkBalancesDirty()\n+{\n+    fBalancesDirty = true;\n+    BalancesDidChange();\n+}\n \n CAmount CWallet::GetBalance() const\n {\n-    CAmount nTotal = 0;\n+    if (!fBalancesDirty) {\n+        return nBalanceCache;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10251#discussion_r112721119",
      "id" : 112721119,
      "original_commit_id" : "69b751bd3635b28bb40815d7e370cc201cb0c6c5",
      "original_position" : 87,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 34061013,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10251",
      "updated_at" : "2017-06-14T07:31:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/112721119",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10251#discussion_r112721851"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10251"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/112721851"
         }
      },
      "body" : "Yes. I can do that. I kinda like the signal naming convention from apple. XYWillChange, XYDidChange, etc.: because it allows the listener to know (without reading to much code) if the event was synchronous or has triggered a process with a later update. But lets not overdo it here,.. will change therefore.",
      "commit_id" : "187b3eea4a9da6e589099289632ce0425e269e37",
      "created_at" : "2017-04-21T15:59:57Z",
      "diff_hunk" : "@@ -898,13 +899,26 @@ class CWallet : public CCryptoKeyStore, public CValidationInterface\n     void ReacceptWalletTransactions();\n     void ResendWalletTransactions(int64_t nBestBlockTime, CConnman* connman) override;\n     std::vector<uint256> ResendWalletTransactionsBefore(int64_t nTime, CConnman* connman);\n+\n+    void MarkBalancesDirty();\n     CAmount GetBalance() const;\n     CAmount GetUnconfirmedBalance() const;\n     CAmount GetImmatureBalance() const;\n     CAmount GetWatchOnlyBalance() const;\n     CAmount GetUnconfirmedWatchOnlyBalance() const;\n     CAmount GetImmatureWatchOnlyBalance() const;\n \n+    mutable std::atomic<CAmount> nBalanceCache;\n+    mutable std::atomic<CAmount> nUnconfirmedBalanceCache;\n+    mutable std::atomic<CAmount> nImmatureBalanceCache;\n+    mutable std::atomic<CAmount> nWatchOnlyBalanceCache;\n+    mutable std::atomic<CAmount> nUnconfirmedWatchOnlyBalanceCache;\n+    mutable std::atomic<CAmount> nImmatureWatchOnlyBalanceCache;\n+    std::atomic<bool> fBalancesDirty;\n+\n+    /** Notification for balance changes */\n+    boost::signals2::signal<void ()> BalancesDidChange;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10251#discussion_r112721851",
      "id" : 112721851,
      "original_commit_id" : "69b751bd3635b28bb40815d7e370cc201cb0c6c5",
      "original_position" : 30,
      "path" : "src/wallet/wallet.h",
      "position" : null,
      "pull_request_review_id" : 34061812,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10251",
      "updated_at" : "2017-06-14T07:31:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/112721851",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "Force pushed fixes for issues found by @ryanofsky.",
      "created_at" : "2017-04-21T16:12:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10251#issuecomment-296234383",
      "id" : 296234383,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10251",
      "updated_at" : "2017-04-21T16:12:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/296234383",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10251#discussion_r114147182"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10251"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114147182"
         }
      },
      "body" : "In commit \"Add atomic cache for balances\"\r\n\r\nThe whole caching portion of this PR actually seems broken because `fBalancesDirty` is initialized to true but never set to false anywhere. I think this can be fixed, but maybe simplest thing to do would be to drop the caching, and just keep the signalling part of this PR.",
      "commit_id" : "187b3eea4a9da6e589099289632ce0425e269e37",
      "created_at" : "2017-05-01T16:09:11Z",
      "diff_hunk" : "@@ -780,6 +780,7 @@ class CWallet : public CCryptoKeyStore, public CValidationInterface\n         nRelockTime = 0;\n         fAbortRescan = false;\n         fScanningWallet = false;\n+        fBalancesDirty = true;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10251#discussion_r114147182",
      "id" : 114147182,
      "original_commit_id" : "b18f6765c5f919de18562253f2f03f83e2ba9dcd",
      "original_position" : 4,
      "path" : "src/wallet/wallet.h",
      "position" : null,
      "pull_request_review_id" : 35590164,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10251",
      "updated_at" : "2017-06-14T07:31:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114147182",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/7133040?v=3",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10251#discussion_r114156091"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10251"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114156091"
         }
      },
      "body" : "In commit \"[Qt] remove unused polling code\"\r\n\r\nI think it would be good to squash this commit into \"[Qt] use the BalancesChanged signal instead of a 250ms poll timer.\" It's confusing to see code that checks the `fForceCheckBalanceChanged` variable and some code that sets it removed, while other code that sets it sticks around.",
      "commit_id" : "187b3eea4a9da6e589099289632ce0425e269e37",
      "created_at" : "2017-05-01T17:05:22Z",
      "diff_hunk" : "@@ -137,12 +136,6 @@ void WalletModel::updateBalance()\n     }\n }\n \n-void WalletModel::updateTransaction()",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10251#discussion_r114156091",
      "id" : 114156091,
      "original_commit_id" : "e63ab9be56827166cc40f890bf252361ef27808b",
      "original_position" : 12,
      "path" : "src/qt/walletmodel.cpp",
      "position" : 64,
      "pull_request_review_id" : 35590164,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10251",
      "updated_at" : "2017-06-14T07:31:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114156091",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/7133040?v=3",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10251#discussion_r114711533"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10251"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114711533"
         }
      },
      "body" : "Oh. Yes indeed. I now switched to a cache-invalidation-atomic per balance type and set it to `false` once the cache has been built.",
      "commit_id" : "187b3eea4a9da6e589099289632ce0425e269e37",
      "created_at" : "2017-05-04T07:19:24Z",
      "diff_hunk" : "@@ -780,6 +780,7 @@ class CWallet : public CCryptoKeyStore, public CValidationInterface\n         nRelockTime = 0;\n         fAbortRescan = false;\n         fScanningWallet = false;\n+        fBalancesDirty = true;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10251#discussion_r114711533",
      "id" : 114711533,
      "original_commit_id" : "b18f6765c5f919de18562253f2f03f83e2ba9dcd",
      "original_position" : 4,
      "path" : "src/wallet/wallet.h",
      "position" : null,
      "pull_request_review_id" : 36199012,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10251",
      "updated_at" : "2017-06-14T07:31:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114711533",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10251#discussion_r114711567"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10251"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114711567"
         }
      },
      "body" : "Good point. Squashed those two commits together.",
      "commit_id" : "187b3eea4a9da6e589099289632ce0425e269e37",
      "created_at" : "2017-05-04T07:19:39Z",
      "diff_hunk" : "@@ -137,12 +136,6 @@ void WalletModel::updateBalance()\n     }\n }\n \n-void WalletModel::updateTransaction()",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10251#discussion_r114711567",
      "id" : 114711567,
      "original_commit_id" : "e63ab9be56827166cc40f890bf252361ef27808b",
      "original_position" : 12,
      "path" : "src/qt/walletmodel.cpp",
      "position" : 64,
      "pull_request_review_id" : 36199047,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10251",
      "updated_at" : "2017-06-14T07:31:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114711567",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "Force push fixed @ryanofsky points.",
      "created_at" : "2017-05-04T07:20:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10251#issuecomment-299113394",
      "id" : 299113394,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10251",
      "updated_at" : "2017-05-04T07:20:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/299113394",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10251#discussion_r114810109"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10251"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114810109"
         }
      },
      "body" : "In commit \"Add atomic cache for balances\"\r\n\r\nMaybe rename `fBalancesDirty` to `fBalanceDirty` since this only applies to the balance returned from CWallet::GetBalance and not the other balances.",
      "commit_id" : "187b3eea4a9da6e589099289632ce0425e269e37",
      "created_at" : "2017-05-04T15:22:15Z",
      "diff_hunk" : "@@ -1914,13 +1935,18 @@ CAmount CWallet::GetBalance() const\n             if (pcoin->IsTrusted())\n                 nTotal += pcoin->GetAvailableCredit();\n         }\n+        nBalanceCache = nTotal;\n+        fBalancesDirty = false;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10251#discussion_r114810109",
      "id" : 114810109,
      "original_commit_id" : "28637b62546a37bdf8e7502e3247413fb92c6ec3",
      "original_position" : 102,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 36301148,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10251",
      "updated_at" : "2017-06-14T07:31:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114810109",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/7133040?v=3",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "body" : "Force push fixed @ryanofsky's nit (and also added the \"other balances\" atomics to `SetNull()`).",
      "created_at" : "2017-05-04T18:42:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10251#issuecomment-299273734",
      "id" : 299273734,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10251",
      "updated_at" : "2017-05-04T18:42:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/299273734",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "ACK 84904a9d8ac5e98558b366bc69338d4ad07dc2f7.\r\n\r\nChanges since last review were those Jonas mentioned. Seeing the missing initializations in SetNull() was a little disconcerting, because I would have expected tests to catch errors they would cause. Actually one test did fail (wallet_tests/rescan) but I guess I didn't notice it.",
      "created_at" : "2017-05-05T15:14:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10251#issuecomment-299492327",
      "id" : 299492327,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10251",
      "updated_at" : "2017-05-05T15:14:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/299492327",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/7133040?v=3",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "body" : "Needed a trivial rebase (`BOOST_FOREACH` -> `for` change).",
      "created_at" : "2017-06-14T06:38:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10251#issuecomment-308333912",
      "id" : 308333912,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10251",
      "updated_at" : "2017-06-14T06:38:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/308333912",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10251#discussion_r121867835"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10251"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/121867835"
         }
      },
      "body" : "Am I mistaken when I think that the lock on `cs_wallet` will actually happen before the call to `MarkBalancesDirty()` due to scope? If so I would swap these lines for clarity.",
      "commit_id" : "187b3eea4a9da6e589099289632ce0425e269e37",
      "created_at" : "2017-06-14T06:58:07Z",
      "diff_hunk" : "@@ -812,11 +813,11 @@ bool CWallet::GetAccountPubkey(CPubKey &pubKey, std::string strAccount, bool bFo\n \n void CWallet::MarkDirty()\n {\n-    {\n-        LOCK(cs_wallet);\n-        for (std::pair<const uint256, CWalletTx>& item : mapWallet)\n-            item.second.MarkDirty();\n-    }\n+    MarkBalancesDirty();\n+\n+    LOCK(cs_wallet);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10251#discussion_r121867835",
      "id" : 121867835,
      "original_commit_id" : "51a7a33141a0772d154da736d69fc08106d2262d",
      "original_position" : 19,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 43929442,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10251",
      "updated_at" : "2017-06-14T07:31:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/121867835",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/250224?v=3",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "body" : "@kallewoof No, the lock on cs_wallet will happen after MarkBalancesDirty",
      "created_at" : "2017-06-14T07:18:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10251#issuecomment-308341918",
      "id" : 308341918,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10251",
      "updated_at" : "2017-06-14T07:18:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/308341918",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10251#discussion_r121872229"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10251"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/121872229"
         }
      },
      "body" : "I guess I should move the `LOCK()` up to the top. Because its RAII, I think it doesn't matter in this case (no extra block). The lock should take affect when we enter the function/scope (before `MarkBalancesDirty()`). But maybe I'm wrong.",
      "commit_id" : "187b3eea4a9da6e589099289632ce0425e269e37",
      "created_at" : "2017-06-14T07:26:42Z",
      "diff_hunk" : "@@ -812,11 +813,11 @@ bool CWallet::GetAccountPubkey(CPubKey &pubKey, std::string strAccount, bool bFo\n \n void CWallet::MarkDirty()\n {\n-    {\n-        LOCK(cs_wallet);\n-        for (std::pair<const uint256, CWalletTx>& item : mapWallet)\n-            item.second.MarkDirty();\n-    }\n+    MarkBalancesDirty();\n+\n+    LOCK(cs_wallet);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10251#discussion_r121872229",
      "id" : 121872229,
      "original_commit_id" : "51a7a33141a0772d154da736d69fc08106d2262d",
      "original_position" : 19,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 43934262,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10251",
      "updated_at" : "2017-06-14T07:31:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/121872229",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "> But maybe I'm wrong\n\nYou're wrong.",
      "created_at" : "2017-06-14T07:27:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10251#issuecomment-308344209",
      "id" : 308344209,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10251",
      "updated_at" : "2017-06-14T07:27:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/308344209",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : ">> But maybe I'm wrong\r\n\r\n> You're wrong.\r\n\r\nOkay. Then I'll better be quite.\r\nMoved up the `LOCK()`.",
      "created_at" : "2017-06-14T07:32:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10251#issuecomment-308345329",
      "id" : 308345329,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10251",
      "updated_at" : "2017-06-14T07:32:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/308345329",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "I'm trying to understand whether this will introduce a hang in the GUI thread in some cases.\r\n\r\nRight now, the recurrent poll timer (not thread! it's a qt timer which runs in the GUI thread) updates the balance *if* it's possible to get the locks using TRY_LOCK. Then it will get them, once, and process all balances.\r\n\r\nAfter this change the locks are no longer TRY, so the `BalancesChanged` signal will always cause the GUI thread to take the wallet locks (through `CWallet::get*Balance()`). Not once, but up to once per type of balance, if they all turn out to be dirty (which is likely).\r\nTaking the `cs_main` and `cs_wallet` lock up to 6 times can take ages when the `cs_main` lock is contended: during initial sync, catching up. This all happens in the GUI thread (at the receiving end of `updateBalance` signal).\r\n\r\nMaybe I'm misunderstanding the code, but if I'm right about this, I'm not convinced that this is an improvement in user experience.",
      "created_at" : "2017-06-15T07:06:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10251#issuecomment-308647720",
      "id" : 308647720,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10251",
      "updated_at" : "2017-06-15T07:07:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/308647720",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Some of the current heavy \"freezes\" are happening because of the balance poll thread... it seems to be a significant CPU eater.\r\nRight now, we TRY_LOCK every 250ms (which often LOCKS successfully and then iterates (multiple times) through the complete mapWallet).\r\n\r\n<img width=\"1027\" alt=\"bildschirmfoto 2017-06-16 um 14 00 59\" src=\"https://user-images.githubusercontent.com/178464/27225895-8d7eb58e-529c-11e7-95a6-895b9373367d.png\">",
      "created_at" : "2017-06-16T12:05:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10251#issuecomment-309009539",
      "id" : 309009539,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10251",
      "updated_at" : "2017-06-16T12:05:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/309009539",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "Here the complete profiling (master):\r\n\r\nIt seems like that the pollBalanceThread took 50% of the complete CPU time for the measured run.\r\n(30 seconds, opening debug window and 10-20 times sendtoaddress)\r\n\r\n<img width=\"1026\" alt=\"bildschirmfoto 2017-06-16 um 14 09 00\" src=\"https://user-images.githubusercontent.com/178464/27226052-6664332e-529d-11e7-9f4b-bd02376c401e.png\">",
      "created_at" : "2017-06-16T12:10:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10251#issuecomment-309010477",
      "id" : 309010477,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10251",
      "updated_at" : "2017-06-16T12:10:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/309010477",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "I testes again with this PR and the responsiveness is much better. @laanwj points make sense to me.\r\n\r\nCould it be, that the TRY_LOCK every 250ms will result in getting the LOCK very often and then do the heavy balance calculation on the main thread because `QTimer` runs on the Main/GUI thread?",
      "created_at" : "2017-06-16T12:16:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10251#issuecomment-309011605",
      "id" : 309011605,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10251",
      "updated_at" : "2017-06-16T12:16:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/309011605",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "> Could it be, that the TRY_LOCK every 250ms will result in getting the LOCK very often and then do the heavy balance calculation on the main thread because QTimer runs on the Main/GUI thread?\r\n\r\nThat's what I would expect. Have you thought about keeping the cache but bringing back the polling and try lock to address laanwj's point?",
      "created_at" : "2017-06-16T12:20:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10251#issuecomment-309012390",
      "id" : 309012390,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10251",
      "updated_at" : "2017-06-16T12:20:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/309012390",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/7133040?v=3",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "body" : "@ryanofsky I profiled this PR with only the first commit (atomic caches, keep the polling).\r\nThe results are better, but not as good as with the signal/non-polling approach:\r\n\r\nTest run: Startup, call `sendtoaddress(getnewaddress(), 1)` 20 times manually\r\n\r\n## Master with only the first commit (pure atomic caches):\r\nThe polling thread gets measured (through significants) in my profiler with ~33% (very high IMO)\r\n<img width=\"1396\" alt=\"bildschirmfoto 2017-06-16 um 14 58 42\" src=\"https://user-images.githubusercontent.com/178464/27227684-c2640fda-52a4-11e7-9396-b111d1c28e13.png\">\r\n\r\n## Master with this PR\r\nThe balance updates seems no longer be significant:\r\n<img width=\"1396\" alt=\"bildschirmfoto 2017-06-16 um 15 04 14\" src=\"https://user-images.githubusercontent.com/178464/27227760-169d1c18-52a5-11e7-8d3a-f359c0f2b21b.png\">",
      "created_at" : "2017-06-16T13:05:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10251#issuecomment-309021160",
      "id" : 309021160,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10251",
      "updated_at" : "2017-06-16T13:05:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/309021160",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "Unclear to me if @laanwj's concern about losing the try lock is sufficiently addressed with the new testing and discussion at https://botbot.me/freenode/bitcoin-core-dev/msg/87346236/. If it is, maybe this PR is close to ready for merge (so far two utACKs from kallewoof and me). If not, it seems like there is some advantage (50% -> 30% poll thread cpu decrease) and no downside to just merging the first commit for now?",
      "created_at" : "2017-06-21T18:36:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10251#issuecomment-310167848",
      "id" : 310167848,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10251",
      "updated_at" : "2017-06-21T18:36:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/310167848",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/7133040?v=3",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "body" : "I guess it would be great if someone with (g)perf experience on Linux/Ubuntu and maybe on Windows could benchmark this PR against master.",
      "created_at" : "2017-06-21T18:38:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10251#issuecomment-310168368",
      "id" : 310168368,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10251",
      "updated_at" : "2017-06-21T18:38:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/310168368",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "Linux and windows performance tests seem like they would be a good sanity check on the numbers you collected (50% cpu usage spent on balance computation on master, 33% with caching commit, and ~0% with full pr), but is there some reason to think this behavior would be dependent on the platform?\r\n\r\nI guess the main thing I'm not clear on is whether the results you collected (assuming they do hold up on other platforms) address laanwj's concern above, or if there is some kind of different testing that needs to be done, or some other safeguard that should be added to prevent the possibility of new hangs.",
      "created_at" : "2017-06-21T19:54:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10251#issuecomment-310187267",
      "id" : 310187267,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10251",
      "updated_at" : "2017-06-21T19:54:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/310187267",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/7133040?v=3",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "body" : "@jonasschnelli if still relevant I can do it.",
      "created_at" : "2017-07-20T01:19:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10251#issuecomment-316568639",
      "id" : 316568639,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10251",
      "updated_at" : "2017-07-20T01:20:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/316568639",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "body" : "@promag: A benchmark would be very good to have.\r\nIdeally you compare master against this PR **and** against only the first commit in this PR (3 versions).\r\nThanks!",
      "created_at" : "2017-07-20T06:57:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10251#issuecomment-316614446",
      "id" : 316614446,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10251",
      "updated_at" : "2017-07-20T06:57:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/316614446",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/178464?v=4",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Closing for now... ",
      "created_at" : "2017-10-05T04:05:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10251#issuecomment-334353012",
      "id" : 334353012,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10251",
      "updated_at" : "2017-10-05T04:05:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/334353012",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/178464?v=4",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   }
]
