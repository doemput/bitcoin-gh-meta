{
   "assignee" : null,
   "assignees" : [],
   "body" : "Make a copy of the boost time-point to wait for, as the head of the queue may be deleted by another thread while this one is waiting, while the boost function still has a reference to it.\r\n\r\nAlthough this problem is in non-test code, this is not an actual problem outside of the tests because we use the thread scheduler with only one service thread, so there will never be threads fighting at the head of the queue.\r\n\r\nThe old boost fallback escapes this problem because it passes a scalar value to wait_until instead of a const object reference.\r\n\r\nFound by running the bitcoin_test in LLVM-4.0-master asan.\r\nSee also: https://svn.boost.org/trac/boost/ticket/11097#comment:10",
   "closed_at" : "2016-11-19T15:19:06Z",
   "closed_by" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
      "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
      "followers_url" : "https://api.github.com/users/laanwj/followers",
      "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/laanwj",
      "id" : 126646,
      "login" : "laanwj",
      "organizations_url" : "https://api.github.com/users/laanwj/orgs",
      "received_events_url" : "https://api.github.com/users/laanwj/received_events",
      "repos_url" : "https://api.github.com/users/laanwj/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/laanwj"
   },
   "comments" : 2,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9186/comments",
   "created_at" : "2016-11-18T12:13:29Z",
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9186/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/pull/9186",
   "id" : 190305383,
   "labels" : [
      {
         "color" : "d4c5f9",
         "default" : false,
         "id" : 62963516,
         "name" : "Tests",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/Tests"
      }
   ],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9186/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "number" : 9186,
   "pull_request" : {
      "diff_url" : "https://github.com/bitcoin/bitcoin/pull/9186.diff",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9186",
      "patch_url" : "https://github.com/bitcoin/bitcoin/pull/9186.patch",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9186"
   },
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "closed",
   "title" : "test: Fix use-after-free in scheduler tests",
   "updated_at" : "2016-11-19T15:19:06Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9186",
   "user" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
      "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
      "followers_url" : "https://api.github.com/users/laanwj/followers",
      "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/laanwj",
      "id" : 126646,
      "login" : "laanwj",
      "organizations_url" : "https://api.github.com/users/laanwj/orgs",
      "received_events_url" : "https://api.github.com/users/laanwj/received_events",
      "repos_url" : "https://api.github.com/users/laanwj/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/laanwj"
   }
}
