[
   {
      "body" : "The block time is set by miners, it is unreasonable to let the miner of the block decide if it should be verified or not. What Bitcoin Classic does is trivially exploitable and doesn't even require a reorg to exploit.\r\n\r\nThis is not what was suggested in 7591, what was suggested there was based on an amount of work beyond the block, not what the block claimed about itself. :)",
      "created_at" : "2016-11-17T05:29:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9175#issuecomment-261159071",
      "id" : 261159071,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9175",
      "updated_at" : "2016-11-17T05:29:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/261159071",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "@gmaxwell Thanks for reviewing and sorry for my misunderstanding.\r\n\r\nThe block header is still checked and all blocks claiming to be within the last 30 days would be fully validated. Wouldn't 30 days worth of blocks well cover that kind of issue because of the limits on valid block times? Which assumption would have to be violated for this to be a problem? Can the node not get a valid header chain? Can the node not get an \"accurate\" view of time?",
      "created_at" : "2016-11-17T12:18:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9175#issuecomment-261233013",
      "id" : 261233013,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9175",
      "updated_at" : "2016-11-17T12:18:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/261233013",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6440430?v=3",
         "events_url" : "https://api.github.com/users/mruddy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mruddy/followers",
         "following_url" : "https://api.github.com/users/mruddy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mruddy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mruddy",
         "id" : 6440430,
         "login" : "mruddy",
         "organizations_url" : "https://api.github.com/users/mruddy/orgs",
         "received_events_url" : "https://api.github.com/users/mruddy/received_events",
         "repos_url" : "https://api.github.com/users/mruddy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mruddy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mruddy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mruddy"
      }
   },
   {
      "body" : "The two ways I can think of to measure 30 days worth of work are:\r\n1) based on block time where you also verify that the chain has at least an amount of work to make an attack very costly.\r\n2) based on height by being buried under 4320 blocks (6 * 24 * 30).\r\n\r\nThe second does not fix the script checking IBD race like the first does (but no big deal).\r\n\r\nSo, I put up an alternate commit that does the second way.\r\nHere are the two approaches diffed https://github.com/bitcoin/bitcoin/pull/9175/commits/9bee2baedcf02726a928f8bc0aca9d52e93dd931\r\nIs either way acceptable?",
      "created_at" : "2016-11-17T15:17:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9175#issuecomment-261273918",
      "id" : 261273918,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9175",
      "updated_at" : "2016-11-17T15:17:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/261273918",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6440430?v=3",
         "events_url" : "https://api.github.com/users/mruddy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mruddy/followers",
         "following_url" : "https://api.github.com/users/mruddy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mruddy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mruddy",
         "id" : 6440430,
         "login" : "mruddy",
         "organizations_url" : "https://api.github.com/users/mruddy/orgs",
         "received_events_url" : "https://api.github.com/users/mruddy/received_events",
         "repos_url" : "https://api.github.com/users/mruddy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mruddy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mruddy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mruddy"
      }
   },
   {
      "body" : "Oh, I think I see now what you're aiming for with respect to the amount of work between a block and the block you know about with the most total work. I'm closing this and will open something else later if I get it working.",
      "created_at" : "2016-11-17T20:14:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9175#issuecomment-261356625",
      "id" : 261356625,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9175",
      "updated_at" : "2016-11-17T20:14:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/261356625",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6440430?v=3",
         "events_url" : "https://api.github.com/users/mruddy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mruddy/followers",
         "following_url" : "https://api.github.com/users/mruddy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mruddy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mruddy",
         "id" : 6440430,
         "login" : "mruddy",
         "organizations_url" : "https://api.github.com/users/mruddy/orgs",
         "received_events_url" : "https://api.github.com/users/mruddy/received_events",
         "repos_url" : "https://api.github.com/users/mruddy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mruddy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mruddy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mruddy"
      }
   }
]
