{
   "assignee" : null,
   "body" : "This is a work-in-progress that certainly needs more testing and cleanup -- sharing now in light of discussions happening elsewhere (#6972) about some of the drawbacks from introducing mempool limiting in #6722.\r\n\r\nOverall I agree with @sturles in that the existing notion of priority is largely a useful one to differentiate transactions that might be part of an attack from ones that likely are not.  On the other hand, coming up with a mempool limiting algorithm like #6722 that we believe is robust against attack was challenging enough without having to also try to maintain this particular existing policy.\r\n\r\nHowever after further thought I think we can restore some of the useful features of priority without major re-engineering of the mempool.  I propose to reserve some fraction of the mempool (defaults to the blockprioritysize/blockmaxsize) for transactions that have no unconfirmed parents.  Transactions in that space will be sorted by priority at the time of entry to the mempool.\r\n\r\nIf the priority space in the mempool exceeds its limit, priority transactions will be moved to the feerate portion of the mempool (where they will be sorted based on their feerate and the feerate of any descendants).  Once moved to the feerate area, transactions never move back to the priority area.\r\n\r\nNew transactions that don't meet the mempool reject fee must meet the new GetMinPriority(), which is increased when priority transactions are moved to the feerate part of the mempool, and decayed as time passes (just like the mempool's minimum fee).\r\n\r\nNote that this relies on the rate limiting of free transactions to prevent relay bandwidth DoS attacks using priority transactions.\r\n",
   "closed_at" : "2015-11-12T19:34:56Z",
   "closed_by" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/7463573?v=3",
      "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
      "followers_url" : "https://api.github.com/users/sdaftuar/followers",
      "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
      "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/sdaftuar",
      "id" : 7463573,
      "login" : "sdaftuar",
      "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
      "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
      "repos_url" : "https://api.github.com/users/sdaftuar/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/sdaftuar"
   },
   "comments" : 30,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6992/comments",
   "created_at" : "2015-11-11T20:28:15Z",
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6992/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/pull/6992",
   "id" : 116414863,
   "labels" : [],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6992/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "number" : 6992,
   "pull_request" : {
      "diff_url" : "https://github.com/bitcoin/bitcoin/pull/6992.diff",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6992",
      "patch_url" : "https://github.com/bitcoin/bitcoin/pull/6992.patch",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6992"
   },
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "closed",
   "title" : "[WIP] [Mempool] Add space for priority transactions",
   "updated_at" : "2015-11-13T16:17:12Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6992",
   "user" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/7463573?v=3",
      "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
      "followers_url" : "https://api.github.com/users/sdaftuar/followers",
      "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
      "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/sdaftuar",
      "id" : 7463573,
      "login" : "sdaftuar",
      "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
      "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
      "repos_url" : "https://api.github.com/users/sdaftuar/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/sdaftuar"
   }
}
