[
   {
      "body" : "concept ACK",
      "created_at" : "2015-11-05T20:47:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6954#issuecomment-154185478",
      "id" : 154185478,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6954",
      "updated_at" : "2015-11-05T20:47:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/154185478",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/413395?v=3",
         "events_url" : "https://api.github.com/users/dcousens/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dcousens/followers",
         "following_url" : "https://api.github.com/users/dcousens/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dcousens/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dcousens",
         "id" : 413395,
         "login" : "dcousens",
         "organizations_url" : "https://api.github.com/users/dcousens/orgs",
         "received_events_url" : "https://api.github.com/users/dcousens/received_events",
         "repos_url" : "https://api.github.com/users/dcousens/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dcousens/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dcousens/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dcousens"
      }
   },
   {
      "body" : "ACK",
      "created_at" : "2015-11-05T21:30:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6954#issuecomment-154198556",
      "id" : 154198556,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6954",
      "updated_at" : "2015-11-05T21:30:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/154198556",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Concept ACK\r\n\r\n```\r\n$ ./contrib/devtools/git-subtree-check.sh src/secp256k1\r\nsrc/secp256k1 in HEAD was last updated to upstream commit 2bfb82b10edf0f0b0e366a12f94c8b21a914159d (tree 7a74d5de4d518bc5165feeeb75edb0ac4e8c5bea)\r\nsrc/secp256k1 in HEAD currently refers to tree 7a74d5de4d518bc5165feeeb75edb0ac4e8c5bea\r\nGOOD\r\n",
      "created_at" : "2015-11-05T22:12:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6954#issuecomment-154211737",
      "id" : 154211737,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6954",
      "updated_at" : "2015-11-05T22:12:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/154211737",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=3",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "body" : "Concept ACK. Will start testing shortly.",
      "created_at" : "2015-11-06T02:35:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6954#issuecomment-154265694",
      "id" : 154265694,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6954",
      "updated_at" : "2015-11-06T02:35:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/154265694",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=3",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "body" : "Concept ACK.\r\n\r\nAwesome work! Many thanks to all contributors, especially @sipa and @gmaxwell.\r\nStarted testing now.",
      "created_at" : "2015-11-06T07:26:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6954#issuecomment-154333453",
      "id" : 154333453,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6954",
      "updated_at" : "2015-11-06T07:26:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/154333453",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "In the build process, you run `gen_context`:\r\n```\r\ngcc -I./ -g -O2 -Wall -Wextra -Wno-unused-function -c src/gen_context.c -o gen_context.o\r\ngcc gen_context.o -o gen_context\r\n./gen_context\r\n```\r\nIs this compatible with our gitian/crossbuild processes?\r\n",
      "created_at" : "2015-11-06T07:53:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6954#issuecomment-154338772",
      "id" : 154338772,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6954",
      "updated_at" : "2015-11-06T07:53:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/154338772",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6848764?v=3",
         "events_url" : "https://api.github.com/users/paveljanik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/paveljanik/followers",
         "following_url" : "https://api.github.com/users/paveljanik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/paveljanik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/paveljanik",
         "id" : 6848764,
         "login" : "paveljanik",
         "organizations_url" : "https://api.github.com/users/paveljanik/orgs",
         "received_events_url" : "https://api.github.com/users/paveljanik/received_events",
         "repos_url" : "https://api.github.com/users/paveljanik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/paveljanik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/paveljanik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/paveljanik"
      }
   },
   {
      "body" : "@paveljanik: Yes. It is. I also tested a gitian build: https://bitcoin.jonasschnelli.ch/pulls/6954/",
      "created_at" : "2015-11-06T07:56:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6954#issuecomment-154339113",
      "id" : 154339113,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6954",
      "updated_at" : "2015-11-06T07:56:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/154339113",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "concept ACK\r\n",
      "created_at" : "2015-11-06T12:42:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6954#issuecomment-154399284",
      "id" : 154399284,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6954",
      "updated_at" : "2015-11-06T12:42:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/154399284",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/494411?v=3",
         "events_url" : "https://api.github.com/users/jgarzik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jgarzik/followers",
         "following_url" : "https://api.github.com/users/jgarzik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jgarzik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jgarzik",
         "id" : 494411,
         "login" : "jgarzik",
         "organizations_url" : "https://api.github.com/users/jgarzik/orgs",
         "received_events_url" : "https://api.github.com/users/jgarzik/received_events",
         "repos_url" : "https://api.github.com/users/jgarzik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jgarzik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jgarzik"
      }
   },
   {
      "body" : "Just synced a fresh node with this branch with `-debug=bench`. It took ~9h.\r\nStandard parameters (i didn't change `dbcache`).\r\nDebug log is here: https://bitcoin.jonasschnelli.ch/secp/debug.log (>300MB!).\r\n\r\nSystem: Quad Core Intel(R) Xeon(R) CPU E31245 @ 3.30GHz, 16GB Ram, 7200rpm disk.",
      "created_at" : "2015-11-06T16:58:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6954#issuecomment-154471932",
      "id" : 154471932,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6954",
      "updated_at" : "2015-11-06T16:58:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/154471932",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "Concept ACK",
      "created_at" : "2015-11-06T22:59:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6954#issuecomment-154569565",
      "id" : 154569565,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6954",
      "updated_at" : "2015-11-06T22:59:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/154569565",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/894059?v=3",
         "events_url" : "https://api.github.com/users/CodeShark/events{/privacy}",
         "followers_url" : "https://api.github.com/users/CodeShark/followers",
         "following_url" : "https://api.github.com/users/CodeShark/following{/other_user}",
         "gists_url" : "https://api.github.com/users/CodeShark/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/CodeShark",
         "id" : 894059,
         "login" : "CodeShark",
         "organizations_url" : "https://api.github.com/users/CodeShark/orgs",
         "received_events_url" : "https://api.github.com/users/CodeShark/received_events",
         "repos_url" : "https://api.github.com/users/CodeShark/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/CodeShark/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/CodeShark/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/CodeShark"
      }
   },
   {
      "body" : "ACK.  I provided some nits, I consider them super minor and not blockers.\r\n\r\nAlso tested IBD w/ no checkpoints, reindex, reindex in valgrind, signmessage/verify message. Could not test derive, because we don't actually expose it.  ",
      "created_at" : "2015-11-06T23:27:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6954#issuecomment-154575674",
      "id" : 154575674,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6954",
      "updated_at" : "2015-11-06T23:27:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/154575674",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "Unrepresentative non-scientific trivial IBD comparison with standard parameters:\r\nSystem Ressources see comment above. 1000MBit internet connection (server data center).\r\n\r\n**Current Master:**\r\n```\r\n2015-11-06 16:54:46 Bitcoin version v0.11.99.0-4ee149a (2015-11-05 23:39:48 +0100)\r\n--- snip ---\r\n2015-11-07 04:53:00 UpdateTip: new best=00000000000000000b48452a4825f7a171b7dcc4a4e63db523a39b9b33536d6f  height=382323\r\n```\r\n**Time for IBD: ~11h59'**\r\n\r\n**This PR**\r\n```\r\n2015-11-06 07:40:49 Bitcoin version v0.11.99.0-332a5b0 (2015-11-06 08:30:43 +0100)\r\n--- snip ---\r\n015-11-06 16:30:17 UpdateTip: new best=00000000000000000b48452a4825f7a171b7dcc4a4e63db523a39b9b33536d6f  height=382323\r\n```\r\n**Time for IBD: ~8h50`**\r\n\r\nWill do the same now with `-dbcache=3000`.",
      "created_at" : "2015-11-07T19:20:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6954#issuecomment-154741052",
      "id" : 154741052,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6954",
      "updated_at" : "2015-11-07T19:20:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/154741052",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "> Will do the same now with -dbcache=3000.\r\n\r\nFWIW, you need a coinscache around 5500 MB to actually have the UTXO in ram.  In that configuration with this patch _and checkpoints disabled_ I performed an IBD off the network in about three and a half hours:\r\n\r\n```\r\n2015-11-06 01:25:11 Bitcoin version v0.11.99.0-66c5214 (2015-11-05 21:19:41 +0100)\r\n...\r\n2015-11-06 05:04:32 UpdateTip: new best=000000000000000003c9781a9ef9c3e1b7b5a644f26c0eb448513366fd31782f  height=382265  log2_work=83.564787  tx=91230928  date=2015-11-06 05:03:19 progress=0.999999  cache=5486.7MiB(7411884tx)\r\n```\r\n",
      "created_at" : "2015-11-08T19:12:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6954#issuecomment-154858821",
      "id" : 154858821,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6954",
      "updated_at" : "2015-11-08T19:26:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/154858821",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "`-dbache=3000` benchmark:\r\n\r\n**current master**:\r\n2015-11-07 19:21:43 Bitcoin version v0.11.99.0-4ee149a (2015-11-05 23:39:48 +0100)\r\n2015-11-08 03:58:51 UpdateTip: new best=000000000000000009641f7a3734cfb9fe861c20a1aa77e8d1d6780913728bfe  height=382556 \r\n**Total: ~7h37'**\r\n\r\n**This PR**\r\n2015-11-08 12:06:24 Bitcoin version v0.11.99.0-332a5b0 (2015-11-06 08:30:43 +0100)\r\n2015-11-08 15:54:21 UpdateTip: new best=000000000000000009641f7a3734cfb9fe861c20a1aa77e8d1d6780913728bfe  height=382556 \r\n**Total: ~3h48'**",
      "created_at" : "2015-11-08T19:16:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6954#issuecomment-154859033",
      "id" : 154859033,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6954",
      "updated_at" : "2015-11-08T19:16:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/154859033",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "`-dbcache=6000` with this PR:\r\n\r\n```\r\n2015-11-08 19:17:23 Bitcoin version v0.11.99.0-332a5b0 (2015-11-06 08:30:43 +0100)\r\n2015-11-08 22:39:21 UpdateTip: new best=000000000000000009641f7a3734cfb9fe861c20a1aa77e8d1d6780913728bfe  height=382556 \r\n```\r\n\r\n**Total: 3h22**",
      "created_at" : "2015-11-09T08:17:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6954#issuecomment-154993958",
      "id" : 154993958,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6954",
      "updated_at" : "2015-11-09T08:17:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/154993958",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "Just encountered a possible issue:\r\n\r\nThe node running this PR is stuck on height 382748.\r\n```\r\n  {\r\n    \"height\": 382761,\r\n    \"hash\": \"00000000000000000a017d90eaf3bcffdc106a4606ab7e94880a506b1b7ca8a4\",\r\n    \"branchlen\": 13,\r\n    \"status\": \"headers-only\"\r\n  }, \r\n  {\r\n    \"height\": 382748,\r\n    \"hash\": \"00000000000000001043ada919c3851e17876deca67acc19f365fab4a79bd59d\",\r\n    \"branchlen\": 0,\r\n    \"status\": \"active\"\r\n  }, \r\n  {\r\n    \"height\": 382649,\r\n    \"hash\": \"000000000000000011981b8d79967f6d2c04e2a008d3365b404752898eb784d5\",\r\n    \"branchlen\": 1,\r\n    \"status\": \"headers-only\"\r\n  }\r\n```\r\n\r\nTherefore the mempool is getting relatively big:\r\n```\r\n{\r\n  \"size\": 21944,\r\n  \"bytes\": 136785777,\r\n  \"usage\": 299990208,\r\n  \"maxmempool\": 300000000,\r\n  \"mempoolminfee\": 0.00002013\r\n}\r\n```\r\n\r\nNode running current master (openssl verification) on the same machine (same ip, different port) reports:\r\n```\r\n~$ ./src/bitcoin-cli <snipp> getchaintips\r\n[\r\n  {\r\n    \"height\": 382760,\r\n    \"hash\": \"000000000000000003bd88e340376361db3422c8df01b0dacfd4b291da71b7fe\",\r\n    \"branchlen\": 0,\r\n    \"status\": \"active\"\r\n  }\r\n]\r\n```\r\n\r\nlast 1000 lines of the debug log: https://bitcoin.jonasschnelli.ch/secp/stuck_debug.log",
      "created_at" : "2015-11-09T15:17:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6954#issuecomment-155093019",
      "id" : 155093019,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6954",
      "updated_at" : "2015-11-09T15:35:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/155093019",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "I'm very in favor of this being merged, however I can't say I have reviewed this code or done specific testing.  I have however been using it over the last several months and never encountered a problem.\r\n",
      "created_at" : "2015-11-09T19:02:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6954#issuecomment-155156869",
      "id" : 155156869,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6954",
      "updated_at" : "2015-11-09T19:02:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/155156869",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4360349?v=3",
         "events_url" : "https://api.github.com/users/morcos/events{/privacy}",
         "followers_url" : "https://api.github.com/users/morcos/followers",
         "following_url" : "https://api.github.com/users/morcos/following{/other_user}",
         "gists_url" : "https://api.github.com/users/morcos/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/morcos",
         "id" : 4360349,
         "login" : "morcos",
         "organizations_url" : "https://api.github.com/users/morcos/orgs",
         "received_events_url" : "https://api.github.com/users/morcos/received_events",
         "repos_url" : "https://api.github.com/users/morcos/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/morcos/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/morcos/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/morcos"
      }
   },
   {
      "body" : "Re: libsecp256k1 testing, awesome work!\r\n\r\nIs there a document anywhere describing that process a bit more formally? It'd be good to have that to point people too. (particularly if you have enough time to make it repeatable by others)",
      "created_at" : "2015-11-09T19:21:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6954#issuecomment-155163735",
      "id" : 155163735,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6954",
      "updated_at" : "2015-11-09T19:21:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/155163735",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7042?v=3",
         "events_url" : "https://api.github.com/users/petertodd/events{/privacy}",
         "followers_url" : "https://api.github.com/users/petertodd/followers",
         "following_url" : "https://api.github.com/users/petertodd/following{/other_user}",
         "gists_url" : "https://api.github.com/users/petertodd/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/petertodd",
         "id" : 7042,
         "login" : "petertodd",
         "organizations_url" : "https://api.github.com/users/petertodd/orgs",
         "received_events_url" : "https://api.github.com/users/petertodd/received_events",
         "repos_url" : "https://api.github.com/users/petertodd/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/petertodd/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/petertodd/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/petertodd"
      }
   },
   {
      "body" : "F.Y.I:\r\nThe problem above (https://github.com/bitcoin/bitcoin/pull/6954#issuecomment-155093019) could be cured Ã¢ÂÂ as expected Ã¢ÂÂ with a bitcoind restart.\r\nI have bootstrapped another fresh mainnet node with this PR and `-dbcache=6000` and it didn't happen again.\r\nAnyways, the problem is/was very likely unrelated to this PR.",
      "created_at" : "2015-11-10T08:08:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6954#issuecomment-155353027",
      "id" : 155353027,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6954",
      "updated_at" : "2015-11-10T10:06:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/155353027",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6954#discussion_r44389687"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6954"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/44389687"
         }
      },
      "body" : "nit: it would be nice if we could print a log entry similar to L1005 about the usage of libsecp256k1 for verification (maybe with a version number [in future]). It might be helpful when analyzing a debug.log coming out of self-compiled bitcoin-core versions.",
      "commit_id" : "6e182686163ce3c15b878bd78c41d8d18db344f1",
      "created_at" : "2015-11-10T10:16:26Z",
      "diff_hunk" : "@@ -967,6 +967,7 @@ bool AppInit2(boost::thread_group& threadGroup, CScheduler& scheduler)\n     // ********************************************************* Step 4: application initialization: dir lock, daemonize, pidfile, debug log\n \n     // Initialize elliptic curve code\n+    ECC_Verify_Start();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6954#discussion_r44389687",
      "id" : 44389687,
      "original_commit_id" : "66c52145d8fdd6490cf80fef85b20edf496f1119",
      "original_position" : 22,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6954",
      "updated_at" : "2015-11-15T15:07:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/44389687",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "**Tested & Code-Review ACK.**\r\n\r\nDid serval IBD's and running nodes with this PR since 3 days without problems (expect the one that is not related to this PR). Attached my OSX leaks detector during IBD and -verifyblocks=288 phase (can only collect the BDB leaks).\r\n\r\n+1 for next step to fully remove the openssl dependency by replacing `RandAddSeed()` and co. with something like #5885 (wallet AES could also be replaced by #5949). The openssl dependency then would only be required when building the QT only BIP70 implementation.",
      "created_at" : "2015-11-10T10:44:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6954#issuecomment-155385800",
      "id" : 155385800,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6954",
      "updated_at" : "2015-11-10T10:44:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/155385800",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "Reindex up to block 380912 w/ dbcache=8000 took 3.2 hours with this patch, 8.0 hours without.\r\n",
      "created_at" : "2015-11-10T14:42:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6954#issuecomment-155438100",
      "id" : 155438100,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6954",
      "updated_at" : "2015-11-10T14:42:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/155438100",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Concept ACK. I've been waiting for this.",
      "created_at" : "2015-11-10T16:18:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6954#issuecomment-155470311",
      "id" : 155470311,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6954",
      "updated_at" : "2015-11-10T16:18:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/155470311",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "body" : "This needs more people to review the integration code before it can be merged. (Enough benchmarks.)",
      "created_at" : "2015-11-11T01:30:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6954#issuecomment-155625688",
      "id" : 155625688,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6954",
      "updated_at" : "2015-11-11T01:30:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/155625688",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "Rebased on top of #6983 and nits addressed.",
      "created_at" : "2015-11-11T06:11:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6954#issuecomment-155678941",
      "id" : 155678941,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6954",
      "updated_at" : "2015-11-11T06:11:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/155678941",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "The DIFF is huge because of the squashes libsecp256k1 git subtree. The integration code (first couple of files in the diff) can be reviewed with a fair amount of effort. One shouldn't be discourage because of the large diff.",
      "created_at" : "2015-11-11T08:34:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6954#issuecomment-155703318",
      "id" : 155703318,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6954",
      "updated_at" : "2015-11-11T08:34:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/155703318",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "@jonasschnelli Or just look at the individual commits.",
      "created_at" : "2015-11-11T08:35:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6954#issuecomment-155703646",
      "id" : 155703646,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6954",
      "updated_at" : "2015-11-11T08:35:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/155703646",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Rebased.",
      "created_at" : "2015-11-13T15:55:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6954#issuecomment-156471843",
      "id" : 156471843,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6954",
      "updated_at" : "2015-11-13T15:55:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/156471843",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6954#discussion_r44800952"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6954"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/44800952"
         }
      },
      "body" : "Users have to hold a ECCVerifyHandle. Maybe we should make them pass it in to make sure of that? :-)",
      "commit_id" : "6e182686163ce3c15b878bd78c41d8d18db344f1",
      "created_at" : "2015-11-13T16:21:18Z",
      "diff_hunk" : "@@ -205,4 +210,12 @@ struct CExtPubKey {\n     bool Derive(CExtPubKey& out, unsigned int nChild) const;\n };\n \n+/** Users of this module must hold an ECCVerifyHandle. */",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6954#discussion_r44800952",
      "id" : 44800952,
      "original_commit_id" : "28d09111834674c7571e9cfa61bbcb5712d3ece8",
      "original_position" : 16,
      "path" : "src/pubkey.h",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6954",
      "updated_at" : "2015-11-15T15:07:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/44800952",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6954#discussion_r44801186"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6954"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/44801186"
         }
      },
      "body" : "Happy to see this code in red.",
      "commit_id" : "6e182686163ce3c15b878bd78c41d8d18db344f1",
      "created_at" : "2015-11-13T16:23:03Z",
      "diff_hunk" : "@@ -1,218 +0,0 @@\n-// Copyright (c) 2009-2014 The Bitcoin Core developers\n-// Distributed under the MIT software license, see the accompanying\n-// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n-\n-#include \"ecwrapper.h\"\n-\n-#include \"serialize.h\"\n-#include \"uint256.h\"\n-\n-#include <openssl/bn.h>\n-#include <openssl/ecdsa.h>\n-#include <openssl/obj_mac.h>\n-\n-namespace {\n-\n-class ecgroup_order\n-{\n-public:\n-  static const EC_GROUP* get()\n-  {\n-      static const ecgroup_order wrapper;\n-      return wrapper.pgroup;\n-  }\n-\n-private:\n-  ecgroup_order()\n-  : pgroup(EC_GROUP_new_by_curve_name(NID_secp256k1))\n-  {\n-  }\n-\n-  ~ecgroup_order()\n-  {\n-    EC_GROUP_free(pgroup);\n-  }\n-\n-  EC_GROUP* pgroup;\n-};\n-\n-/**\n- * Perform ECDSA key recovery (see SEC1 4.1.6) for curves over (mod p)-fields\n- * recid selects which key is recovered\n- * if check is non-zero, additional checks are performed\n- */\n-int ECDSA_SIG_recover_key_GFp(EC_KEY *eckey, ECDSA_SIG *ecsig, const unsigned char *msg, int msglen, int recid, int check)\n-{\n-    if (!eckey) return 0;\n-\n-    int ret = 0;\n-    BN_CTX *ctx = NULL;\n-\n-    BIGNUM *x = NULL;\n-    BIGNUM *e = NULL;\n-    BIGNUM *order = NULL;\n-    BIGNUM *sor = NULL;\n-    BIGNUM *eor = NULL;\n-    BIGNUM *field = NULL;\n-    EC_POINT *R = NULL;\n-    EC_POINT *O = NULL;\n-    EC_POINT *Q = NULL;\n-    BIGNUM *rr = NULL;\n-    BIGNUM *zero = NULL;\n-    int n = 0;\n-    int i = recid / 2;\n-\n-    const EC_GROUP *group = EC_KEY_get0_group(eckey);\n-    if ((ctx = BN_CTX_new()) == NULL) { ret = -1; goto err; }\n-    BN_CTX_start(ctx);\n-    order = BN_CTX_get(ctx);\n-    if (!EC_GROUP_get_order(group, order, ctx)) { ret = -2; goto err; }\n-    x = BN_CTX_get(ctx);\n-    if (!BN_copy(x, order)) { ret=-1; goto err; }\n-    if (!BN_mul_word(x, i)) { ret=-1; goto err; }\n-    if (!BN_add(x, x, ecsig->r)) { ret=-1; goto err; }\n-    field = BN_CTX_get(ctx);\n-    if (!EC_GROUP_get_curve_GFp(group, field, NULL, NULL, ctx)) { ret=-2; goto err; }\n-    if (BN_cmp(x, field) >= 0) { ret=0; goto err; }\n-    if ((R = EC_POINT_new(group)) == NULL) { ret = -2; goto err; }\n-    if (!EC_POINT_set_compressed_coordinates_GFp(group, R, x, recid % 2, ctx)) { ret=0; goto err; }\n-    if (check)\n-    {\n-        if ((O = EC_POINT_new(group)) == NULL) { ret = -2; goto err; }\n-        if (!EC_POINT_mul(group, O, NULL, R, order, ctx)) { ret=-2; goto err; }\n-        if (!EC_POINT_is_at_infinity(group, O)) { ret = 0; goto err; }\n-    }\n-    if ((Q = EC_POINT_new(group)) == NULL) { ret = -2; goto err; }\n-    n = EC_GROUP_get_degree(group);\n-    e = BN_CTX_get(ctx);\n-    if (!BN_bin2bn(msg, msglen, e)) { ret=-1; goto err; }\n-    if (8*msglen > n) BN_rshift(e, e, 8-(n & 7));\n-    zero = BN_CTX_get(ctx);\n-    if (!BN_zero(zero)) { ret=-1; goto err; }\n-    if (!BN_mod_sub(e, zero, e, order, ctx)) { ret=-1; goto err; }\n-    rr = BN_CTX_get(ctx);\n-    if (!BN_mod_inverse(rr, ecsig->r, order, ctx)) { ret=-1; goto err; }\n-    sor = BN_CTX_get(ctx);\n-    if (!BN_mod_mul(sor, ecsig->s, rr, order, ctx)) { ret=-1; goto err; }\n-    eor = BN_CTX_get(ctx);\n-    if (!BN_mod_mul(eor, e, rr, order, ctx)) { ret=-1; goto err; }\n-    if (!EC_POINT_mul(group, Q, eor, R, sor, ctx)) { ret=-2; goto err; }\n-    if (!EC_KEY_set_public_key(eckey, Q)) { ret=-2; goto err; }\n-\n-    ret = 1;\n-\n-err:\n-    if (ctx) {\n-        BN_CTX_end(ctx);\n-        BN_CTX_free(ctx);\n-    }\n-    if (R != NULL) EC_POINT_free(R);\n-    if (O != NULL) EC_POINT_free(O);\n-    if (Q != NULL) EC_POINT_free(Q);\n-    return ret;\n-}\n-\n-} // anon namespace\n-\n-CECKey::CECKey() {\n-    pkey = EC_KEY_new();\n-    assert(pkey != NULL);\n-    int result = EC_KEY_set_group(pkey, ecgroup_order::get());\n-    assert(result);\n-}\n-\n-CECKey::~CECKey() {\n-    EC_KEY_free(pkey);\n-}\n-\n-void CECKey::GetPubKey(std::vector<unsigned char> &pubkey, bool fCompressed) {\n-    EC_KEY_set_conv_form(pkey, fCompressed ? POINT_CONVERSION_COMPRESSED : POINT_CONVERSION_UNCOMPRESSED);\n-    int nSize = i2o_ECPublicKey(pkey, NULL);\n-    assert(nSize);\n-    assert(nSize <= 65);\n-    pubkey.clear();\n-    pubkey.resize(nSize);\n-    unsigned char *pbegin(begin_ptr(pubkey));\n-    int nSize2 = i2o_ECPublicKey(pkey, &pbegin);\n-    assert(nSize == nSize2);\n-}\n-\n-bool CECKey::SetPubKey(const unsigned char* pubkey, size_t size) {\n-    return o2i_ECPublicKey(&pkey, &pubkey, size) != NULL;\n-}\n-\n-bool CECKey::Verify(const uint256 &hash, const std::vector<unsigned char>& vchSig) {\n-    if (vchSig.empty())\n-        return false;\n-\n-    // New versions of OpenSSL will reject non-canonical DER signatures. de/re-serialize first.\n-    unsigned char *norm_der = NULL;\n-    ECDSA_SIG *norm_sig = ECDSA_SIG_new();\n-    const unsigned char* sigptr = &vchSig[0];\n-    assert(norm_sig);\n-    if (d2i_ECDSA_SIG(&norm_sig, &sigptr, vchSig.size()) == NULL)\n-    {\n-        /* As of OpenSSL 1.0.0p d2i_ECDSA_SIG frees and nulls the pointer on\n-         * error. But OpenSSL's own use of this function redundantly frees the\n-         * result. As ECDSA_SIG_free(NULL) is a no-op, and in the absence of a\n-         * clear contract for the function behaving the same way is more\n-         * conservative.\n-         */\n-        ECDSA_SIG_free(norm_sig);\n-        return false;\n-    }\n-    int derlen = i2d_ECDSA_SIG(norm_sig, &norm_der);\n-    ECDSA_SIG_free(norm_sig);\n-    if (derlen <= 0)\n-        return false;\n-\n-    // -1 = error, 0 = bad sig, 1 = good\n-    bool ret = ECDSA_verify(0, (unsigned char*)&hash, sizeof(hash), norm_der, derlen, pkey) == 1;\n-    OPENSSL_free(norm_der);\n-    return ret;\n-}\n-\n-bool CECKey::Recover(const uint256 &hash, const unsigned char *p64, int rec)\n-{\n-    if (rec<0 || rec>=3)\n-        return false;\n-    ECDSA_SIG *sig = ECDSA_SIG_new();\n-    BN_bin2bn(&p64[0],  32, sig->r);\n-    BN_bin2bn(&p64[32], 32, sig->s);\n-    bool ret = ECDSA_SIG_recover_key_GFp(pkey, sig, (unsigned char*)&hash, sizeof(hash), rec, 0) == 1;\n-    ECDSA_SIG_free(sig);\n-    return ret;\n-}\n-\n-bool CECKey::TweakPublic(const unsigned char vchTweak[32]) {\n-    bool ret = true;\n-    BN_CTX *ctx = BN_CTX_new();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6954#discussion_r44801186",
      "id" : 44801186,
      "original_commit_id" : "28d09111834674c7571e9cfa61bbcb5712d3ece8",
      "original_position" : 189,
      "path" : "src/ecwrapper.cpp",
      "position" : 189,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6954",
      "updated_at" : "2015-11-15T15:07:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/44801186",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6954#discussion_r44801474"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6954"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/44801474"
         }
      },
      "body" : "Nice to see this has an explicit lifecycle, instead of the OpenSSL global init object",
      "commit_id" : "6e182686163ce3c15b878bd78c41d8d18db344f1",
      "created_at" : "2015-11-13T16:24:55Z",
      "diff_hunk" : "@@ -978,6 +979,7 @@ bool AppInit2(boost::thread_group& threadGroup, CScheduler& scheduler)\n \n     // Initialize elliptic curve code\n     ECC_Start();\n+    verify_handle.reset(new ECCVerifyHandle());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6954#discussion_r44801474",
      "id" : 44801474,
      "original_commit_id" : "28d09111834674c7571e9cfa61bbcb5712d3ece8",
      "original_position" : 30,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6954",
      "updated_at" : "2015-11-15T15:07:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/44801474",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6954#discussion_r44801790"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6954"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/44801790"
         }
      },
      "body" : "Does this need synchronization?",
      "commit_id" : "6e182686163ce3c15b878bd78c41d8d18db344f1",
      "created_at" : "2015-11-13T16:27:31Z",
      "diff_hunk" : "@@ -4,19 +4,182 @@\n \n #include \"pubkey.h\"\n \n-#include \"eccryptoverify.h\"\n+#include <secp256k1.h>\n+#include <secp256k1_recovery.h>\n \n-#include \"ecwrapper.h\"\n+namespace\n+{\n+secp256k1_context* secp256k1_context_verify = NULL;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6954#discussion_r44801790",
      "id" : 44801790,
      "original_commit_id" : "28d09111834674c7571e9cfa61bbcb5712d3ece8",
      "original_position" : 11,
      "path" : "src/pubkey.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6954",
      "updated_at" : "2015-11-15T15:07:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/44801790",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6954#discussion_r44802579"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6954"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/44802579"
         }
      },
      "body" : "Only the secp256k1_context_randomize (not used in this module) and secp256k1_context_destroy (obviously) functions need exclusive access, so no, as long as all uses happen after the context is guaranteed to be constructed.",
      "commit_id" : "6e182686163ce3c15b878bd78c41d8d18db344f1",
      "created_at" : "2015-11-13T16:33:20Z",
      "diff_hunk" : "@@ -4,19 +4,182 @@\n \n #include \"pubkey.h\"\n \n-#include \"eccryptoverify.h\"\n+#include <secp256k1.h>\n+#include <secp256k1_recovery.h>\n \n-#include \"ecwrapper.h\"\n+namespace\n+{\n+secp256k1_context* secp256k1_context_verify = NULL;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6954#discussion_r44802579",
      "id" : 44802579,
      "original_commit_id" : "28d09111834674c7571e9cfa61bbcb5712d3ece8",
      "original_position" : 11,
      "path" : "src/pubkey.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6954",
      "updated_at" : "2015-11-15T15:07:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/44802579",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6954#discussion_r44802713"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6954"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/44802713"
         }
      },
      "body" : "I've considered that, but it would be a mess to pass it down all the way from libconsensus' main function through all validation and script code to pubkey.cpp...",
      "commit_id" : "6e182686163ce3c15b878bd78c41d8d18db344f1",
      "created_at" : "2015-11-13T16:34:13Z",
      "diff_hunk" : "@@ -205,4 +210,12 @@ struct CExtPubKey {\n     bool Derive(CExtPubKey& out, unsigned int nChild) const;\n };\n \n+/** Users of this module must hold an ECCVerifyHandle. */",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6954#discussion_r44802713",
      "id" : 44802713,
      "original_commit_id" : "28d09111834674c7571e9cfa61bbcb5712d3ece8",
      "original_position" : 16,
      "path" : "src/pubkey.h",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6954",
      "updated_at" : "2015-11-15T15:07:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/44802713",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6954#discussion_r44803093"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6954"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/44803093"
         }
      },
      "body" : "Agree",
      "commit_id" : "6e182686163ce3c15b878bd78c41d8d18db344f1",
      "created_at" : "2015-11-13T16:37:03Z",
      "diff_hunk" : "@@ -205,4 +210,12 @@ struct CExtPubKey {\n     bool Derive(CExtPubKey& out, unsigned int nChild) const;\n };\n \n+/** Users of this module must hold an ECCVerifyHandle. */",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6954#discussion_r44803093",
      "id" : 44803093,
      "original_commit_id" : "28d09111834674c7571e9cfa61bbcb5712d3ece8",
      "original_position" : 16,
      "path" : "src/pubkey.h",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6954",
      "updated_at" : "2015-11-15T15:07:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/44803093",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6954#discussion_r44803410"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6954"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/44803410"
         }
      },
      "body" : "Ok. But verify_refcount is not updated atomically, so multiple threads creating/destroying ECCVerifyHandles at the same time can cause problems. Maybe that's not supposed to happen though.",
      "commit_id" : "6e182686163ce3c15b878bd78c41d8d18db344f1",
      "created_at" : "2015-11-13T16:39:27Z",
      "diff_hunk" : "@@ -4,19 +4,182 @@\n \n #include \"pubkey.h\"\n \n-#include \"eccryptoverify.h\"\n+#include <secp256k1.h>\n+#include <secp256k1_recovery.h>\n \n-#include \"ecwrapper.h\"\n+namespace\n+{\n+secp256k1_context* secp256k1_context_verify = NULL;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6954#discussion_r44803410",
      "id" : 44803410,
      "original_commit_id" : "28d09111834674c7571e9cfa61bbcb5712d3ece8",
      "original_position" : 11,
      "path" : "src/pubkey.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6954",
      "updated_at" : "2015-11-15T15:07:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/44803410",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Code review ACK",
      "created_at" : "2015-11-13T17:08:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6954#issuecomment-156490315",
      "id" : 156490315,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6954",
      "updated_at" : "2015-11-13T17:08:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/156490315",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6954#discussion_r44807335"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6954"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/44807335"
         }
      },
      "body" : "Looks like another \"Hack to initialize sig with a correctly-parsed but invalid signature\"? We already did this in the beginning (not that it can hurt to do it again)",
      "commit_id" : "6e182686163ce3c15b878bd78c41d8d18db344f1",
      "created_at" : "2015-11-13T17:10:56Z",
      "diff_hunk" : "@@ -4,19 +4,182 @@\n \n #include \"pubkey.h\"\n \n-#include \"eccryptoverify.h\"\n+#include <secp256k1.h>\n+#include <secp256k1_recovery.h>\n \n-#include \"ecwrapper.h\"\n+namespace\n+{\n+secp256k1_context* secp256k1_context_verify = NULL;\n+int verify_refcount = 0;\n+}\n+\n+/** This function is taken from the libsecp256k1 distribution and implements\n+ *  DER parsing for ECDSA signatures, while supporting an arbitrary subset of\n+ *  format violations.\n+ *\n+ *  Supported violations include negative integers, excessive padding, garbage\n+ *  at the end, and overly long length descriptors. This is safe to use in\n+ *  Bitcoin because since the activation of BIP66, signatures are verified to be\n+ *  strict DER before being passed to this module, and we know it supports all\n+ *  violations present in the blockchain before that point.\n+ */\n+static int ecdsa_signature_parse_der_lax(const secp256k1_context* ctx, secp256k1_ecdsa_signature* sig, const unsigned char *input, size_t inputlen) {\n+    size_t rpos, rlen, spos, slen;\n+    size_t pos = 0;\n+    size_t lenbyte;\n+    unsigned char tmpsig[64] = {0};\n+    int overflow = 0;\n+\n+    /* Hack to initialize sig with a correctly-parsed but invalid signature. */\n+    secp256k1_ecdsa_signature_parse_compact(ctx, sig, tmpsig);\n+\n+    /* Sequence tag byte */\n+    if (pos == inputlen || input[pos] != 0x30) {\n+        return 0;\n+    }\n+    pos++;\n+\n+    /* Sequence length bytes */\n+    if (pos == inputlen) {\n+        return 0;\n+    }\n+    lenbyte = input[pos++];\n+    if (lenbyte & 0x80) {\n+        lenbyte -= 0x80;\n+        if (pos + lenbyte > inputlen) {\n+            return 0;\n+        }\n+        pos += lenbyte;\n+    }\n+\n+    /* Integer tag byte for R */\n+    if (pos == inputlen || input[pos] != 0x02) {\n+        return 0;\n+    }\n+    pos++;\n+\n+    /* Integer length for R */\n+    if (pos == inputlen) {\n+        return 0;\n+    }\n+    lenbyte = input[pos++];\n+    if (lenbyte & 0x80) {\n+        lenbyte -= 0x80;\n+        if (pos + lenbyte > inputlen) {\n+            return 0;\n+        }\n+        while (lenbyte > 0 && input[pos] == 0) {\n+            pos++;\n+            lenbyte--;\n+        }\n+        if (lenbyte >= sizeof(size_t)) {\n+            return 0;\n+        }\n+        rlen = 0;\n+        while (lenbyte > 0) {\n+            rlen = (rlen << 8) + input[pos];\n+            pos++;\n+            lenbyte--;\n+        }\n+    } else {\n+        rlen = lenbyte;\n+    }\n+    if (rlen > inputlen - pos) {\n+        return 0;\n+    }\n+    rpos = pos;\n+    pos += rlen;\n+\n+    /* Integer tag byte for S */\n+    if (pos == inputlen || input[pos] != 0x02) {\n+        return 0;\n+    }\n+    pos++;\n+\n+    /* Integer length for S */\n+    if (pos == inputlen) {\n+        return 0;\n+    }\n+    lenbyte = input[pos++];\n+    if (lenbyte & 0x80) {\n+        lenbyte -= 0x80;\n+        if (pos + lenbyte > inputlen) {\n+            return 0;\n+        }\n+        while (lenbyte > 0 && input[pos] == 0) {\n+            pos++;\n+            lenbyte--;\n+        }\n+        if (lenbyte >= sizeof(size_t)) {\n+            return 0;\n+        }\n+        slen = 0;\n+        while (lenbyte > 0) {\n+            slen = (slen << 8) + input[pos];\n+            pos++;\n+            lenbyte--;\n+        }\n+    } else {\n+        slen = lenbyte;\n+    }\n+    if (slen > inputlen - pos) {\n+        return 0;\n+    }\n+    spos = pos;\n+    pos += slen;\n+\n+    /* Ignore leading zeroes in R */\n+    while (rlen > 0 && input[rpos] == 0) {\n+        rlen--;\n+        rpos++;\n+    }\n+    /* Copy R value */\n+    if (rlen > 32) {\n+        overflow = 1;\n+    } else {\n+        memcpy(tmpsig + 32 - rlen, input + rpos, rlen);\n+    }\n+\n+    /* Ignore leading zeroes in S */\n+    while (slen > 0 && input[spos] == 0) {\n+        slen--;\n+        spos++;\n+    }\n+    /* Copy S value */\n+    if (slen > 32) {\n+        overflow = 1;\n+    } else {\n+        memcpy(tmpsig + 64 - slen, input + spos, slen);\n+    }\n+\n+    if (!overflow) {\n+        overflow = !secp256k1_ecdsa_signature_parse_compact(ctx, sig, tmpsig);\n+    }\n+    if (overflow) {\n+        memset(tmpsig, 0, 64);\n+        secp256k1_ecdsa_signature_parse_compact(ctx, sig, tmpsig);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6954#discussion_r44807335",
      "id" : 44807335,
      "original_commit_id" : "28d09111834674c7571e9cfa61bbcb5712d3ece8",
      "original_position" : 159,
      "path" : "src/pubkey.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6954",
      "updated_at" : "2015-11-15T15:07:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/44807335",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6954#discussion_r44807792"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6954"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/44807792"
         }
      },
      "body" : "The other call to secp256k1_ecdsa_signature_parse_compact above may have overwritten the result in sig, but still have returned overflow.\r\n\r\nNote that this function is (at this point) a literal copy from the src/secp256k1/contrib directory, where it is well-tested. It's however copied as the code in contrib carries no real guarantees of providing the exact same behaviour in the long run, and this is consensus critical.",
      "commit_id" : "6e182686163ce3c15b878bd78c41d8d18db344f1",
      "created_at" : "2015-11-13T17:14:54Z",
      "diff_hunk" : "@@ -4,19 +4,182 @@\n \n #include \"pubkey.h\"\n \n-#include \"eccryptoverify.h\"\n+#include <secp256k1.h>\n+#include <secp256k1_recovery.h>\n \n-#include \"ecwrapper.h\"\n+namespace\n+{\n+secp256k1_context* secp256k1_context_verify = NULL;\n+int verify_refcount = 0;\n+}\n+\n+/** This function is taken from the libsecp256k1 distribution and implements\n+ *  DER parsing for ECDSA signatures, while supporting an arbitrary subset of\n+ *  format violations.\n+ *\n+ *  Supported violations include negative integers, excessive padding, garbage\n+ *  at the end, and overly long length descriptors. This is safe to use in\n+ *  Bitcoin because since the activation of BIP66, signatures are verified to be\n+ *  strict DER before being passed to this module, and we know it supports all\n+ *  violations present in the blockchain before that point.\n+ */\n+static int ecdsa_signature_parse_der_lax(const secp256k1_context* ctx, secp256k1_ecdsa_signature* sig, const unsigned char *input, size_t inputlen) {\n+    size_t rpos, rlen, spos, slen;\n+    size_t pos = 0;\n+    size_t lenbyte;\n+    unsigned char tmpsig[64] = {0};\n+    int overflow = 0;\n+\n+    /* Hack to initialize sig with a correctly-parsed but invalid signature. */\n+    secp256k1_ecdsa_signature_parse_compact(ctx, sig, tmpsig);\n+\n+    /* Sequence tag byte */\n+    if (pos == inputlen || input[pos] != 0x30) {\n+        return 0;\n+    }\n+    pos++;\n+\n+    /* Sequence length bytes */\n+    if (pos == inputlen) {\n+        return 0;\n+    }\n+    lenbyte = input[pos++];\n+    if (lenbyte & 0x80) {\n+        lenbyte -= 0x80;\n+        if (pos + lenbyte > inputlen) {\n+            return 0;\n+        }\n+        pos += lenbyte;\n+    }\n+\n+    /* Integer tag byte for R */\n+    if (pos == inputlen || input[pos] != 0x02) {\n+        return 0;\n+    }\n+    pos++;\n+\n+    /* Integer length for R */\n+    if (pos == inputlen) {\n+        return 0;\n+    }\n+    lenbyte = input[pos++];\n+    if (lenbyte & 0x80) {\n+        lenbyte -= 0x80;\n+        if (pos + lenbyte > inputlen) {\n+            return 0;\n+        }\n+        while (lenbyte > 0 && input[pos] == 0) {\n+            pos++;\n+            lenbyte--;\n+        }\n+        if (lenbyte >= sizeof(size_t)) {\n+            return 0;\n+        }\n+        rlen = 0;\n+        while (lenbyte > 0) {\n+            rlen = (rlen << 8) + input[pos];\n+            pos++;\n+            lenbyte--;\n+        }\n+    } else {\n+        rlen = lenbyte;\n+    }\n+    if (rlen > inputlen - pos) {\n+        return 0;\n+    }\n+    rpos = pos;\n+    pos += rlen;\n+\n+    /* Integer tag byte for S */\n+    if (pos == inputlen || input[pos] != 0x02) {\n+        return 0;\n+    }\n+    pos++;\n+\n+    /* Integer length for S */\n+    if (pos == inputlen) {\n+        return 0;\n+    }\n+    lenbyte = input[pos++];\n+    if (lenbyte & 0x80) {\n+        lenbyte -= 0x80;\n+        if (pos + lenbyte > inputlen) {\n+            return 0;\n+        }\n+        while (lenbyte > 0 && input[pos] == 0) {\n+            pos++;\n+            lenbyte--;\n+        }\n+        if (lenbyte >= sizeof(size_t)) {\n+            return 0;\n+        }\n+        slen = 0;\n+        while (lenbyte > 0) {\n+            slen = (slen << 8) + input[pos];\n+            pos++;\n+            lenbyte--;\n+        }\n+    } else {\n+        slen = lenbyte;\n+    }\n+    if (slen > inputlen - pos) {\n+        return 0;\n+    }\n+    spos = pos;\n+    pos += slen;\n+\n+    /* Ignore leading zeroes in R */\n+    while (rlen > 0 && input[rpos] == 0) {\n+        rlen--;\n+        rpos++;\n+    }\n+    /* Copy R value */\n+    if (rlen > 32) {\n+        overflow = 1;\n+    } else {\n+        memcpy(tmpsig + 32 - rlen, input + rpos, rlen);\n+    }\n+\n+    /* Ignore leading zeroes in S */\n+    while (slen > 0 && input[spos] == 0) {\n+        slen--;\n+        spos++;\n+    }\n+    /* Copy S value */\n+    if (slen > 32) {\n+        overflow = 1;\n+    } else {\n+        memcpy(tmpsig + 64 - slen, input + spos, slen);\n+    }\n+\n+    if (!overflow) {\n+        overflow = !secp256k1_ecdsa_signature_parse_compact(ctx, sig, tmpsig);\n+    }\n+    if (overflow) {\n+        memset(tmpsig, 0, 64);\n+        secp256k1_ecdsa_signature_parse_compact(ctx, sig, tmpsig);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6954#discussion_r44807792",
      "id" : 44807792,
      "original_commit_id" : "28d09111834674c7571e9cfa61bbcb5712d3ece8",
      "original_position" : 159,
      "path" : "src/pubkey.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6954",
      "updated_at" : "2015-11-15T15:07:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/44807792",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6954#discussion_r44808520"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6954"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/44808520"
         }
      },
      "body" : "That's indeed ugly, but it isn't supposed to happen: all but one instance of ECCVerifyHandle are global (and global initializers are guaranteed to not run in parallel), and the one other is in init.cpp, before any parallel code runs. I've considered putting a lock around it, but it would make libconsensus depend on boost again (until c++11). ",
      "commit_id" : "6e182686163ce3c15b878bd78c41d8d18db344f1",
      "created_at" : "2015-11-13T17:21:10Z",
      "diff_hunk" : "@@ -4,19 +4,182 @@\n \n #include \"pubkey.h\"\n \n-#include \"eccryptoverify.h\"\n+#include <secp256k1.h>\n+#include <secp256k1_recovery.h>\n \n-#include \"ecwrapper.h\"\n+namespace\n+{\n+secp256k1_context* secp256k1_context_verify = NULL;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6954#discussion_r44808520",
      "id" : 44808520,
      "original_commit_id" : "28d09111834674c7571e9cfa61bbcb5712d3ece8",
      "original_position" : 11,
      "path" : "src/pubkey.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6954",
      "updated_at" : "2015-11-15T15:07:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/44808520",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6954#discussion_r44809104"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6954"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/44809104"
         }
      },
      "body" : "Perhaps that can use a comment to explain that constraint.",
      "commit_id" : "6e182686163ce3c15b878bd78c41d8d18db344f1",
      "created_at" : "2015-11-13T17:26:17Z",
      "diff_hunk" : "@@ -4,19 +4,182 @@\n \n #include \"pubkey.h\"\n \n-#include \"eccryptoverify.h\"\n+#include <secp256k1.h>\n+#include <secp256k1_recovery.h>\n \n-#include \"ecwrapper.h\"\n+namespace\n+{\n+secp256k1_context* secp256k1_context_verify = NULL;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6954#discussion_r44809104",
      "id" : 44809104,
      "original_commit_id" : "28d09111834674c7571e9cfa61bbcb5712d3ece8",
      "original_position" : 11,
      "path" : "src/pubkey.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6954",
      "updated_at" : "2015-11-15T15:07:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/44809104",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6954#discussion_r44809861"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6954"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/44809861"
         }
      },
      "body" : "Yes let's just document it",
      "commit_id" : "6e182686163ce3c15b878bd78c41d8d18db344f1",
      "created_at" : "2015-11-13T17:33:06Z",
      "diff_hunk" : "@@ -4,19 +4,182 @@\n \n #include \"pubkey.h\"\n \n-#include \"eccryptoverify.h\"\n+#include <secp256k1.h>\n+#include <secp256k1_recovery.h>\n \n-#include \"ecwrapper.h\"\n+namespace\n+{\n+secp256k1_context* secp256k1_context_verify = NULL;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6954#discussion_r44809861",
      "id" : 44809861,
      "original_commit_id" : "28d09111834674c7571e9cfa61bbcb5712d3ece8",
      "original_position" : 11,
      "path" : "src/pubkey.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6954",
      "updated_at" : "2015-11-15T15:07:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/44809861",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "This pull could write the release notes too, see comments for benchmark numbers. :)",
      "created_at" : "2015-11-13T20:02:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6954#issuecomment-156542635",
      "id" : 156542635,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6954",
      "updated_at" : "2015-11-13T20:02:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/156542635",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "I can also confirm this makes Bitcoin work on unmodified RHEL7.",
      "created_at" : "2015-11-14T05:58:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6954#issuecomment-156641327",
      "id" : 156641327,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6954",
      "updated_at" : "2015-11-14T05:58:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/156641327",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6954#discussion_r44855973"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6954"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/44855973"
         }
      },
      "body" : "Ouch. That one is subtle. I'd suggest adding a comment so that other people don't have the same dumb thought as me.",
      "commit_id" : "6e182686163ce3c15b878bd78c41d8d18db344f1",
      "created_at" : "2015-11-14T06:59:46Z",
      "diff_hunk" : "@@ -4,19 +4,182 @@\n \n #include \"pubkey.h\"\n \n-#include \"eccryptoverify.h\"\n+#include <secp256k1.h>\n+#include <secp256k1_recovery.h>\n \n-#include \"ecwrapper.h\"\n+namespace\n+{\n+secp256k1_context* secp256k1_context_verify = NULL;\n+int verify_refcount = 0;\n+}\n+\n+/** This function is taken from the libsecp256k1 distribution and implements\n+ *  DER parsing for ECDSA signatures, while supporting an arbitrary subset of\n+ *  format violations.\n+ *\n+ *  Supported violations include negative integers, excessive padding, garbage\n+ *  at the end, and overly long length descriptors. This is safe to use in\n+ *  Bitcoin because since the activation of BIP66, signatures are verified to be\n+ *  strict DER before being passed to this module, and we know it supports all\n+ *  violations present in the blockchain before that point.\n+ */\n+static int ecdsa_signature_parse_der_lax(const secp256k1_context* ctx, secp256k1_ecdsa_signature* sig, const unsigned char *input, size_t inputlen) {\n+    size_t rpos, rlen, spos, slen;\n+    size_t pos = 0;\n+    size_t lenbyte;\n+    unsigned char tmpsig[64] = {0};\n+    int overflow = 0;\n+\n+    /* Hack to initialize sig with a correctly-parsed but invalid signature. */\n+    secp256k1_ecdsa_signature_parse_compact(ctx, sig, tmpsig);\n+\n+    /* Sequence tag byte */\n+    if (pos == inputlen || input[pos] != 0x30) {\n+        return 0;\n+    }\n+    pos++;\n+\n+    /* Sequence length bytes */\n+    if (pos == inputlen) {\n+        return 0;\n+    }\n+    lenbyte = input[pos++];\n+    if (lenbyte & 0x80) {\n+        lenbyte -= 0x80;\n+        if (pos + lenbyte > inputlen) {\n+            return 0;\n+        }\n+        pos += lenbyte;\n+    }\n+\n+    /* Integer tag byte for R */\n+    if (pos == inputlen || input[pos] != 0x02) {\n+        return 0;\n+    }\n+    pos++;\n+\n+    /* Integer length for R */\n+    if (pos == inputlen) {\n+        return 0;\n+    }\n+    lenbyte = input[pos++];\n+    if (lenbyte & 0x80) {\n+        lenbyte -= 0x80;\n+        if (pos + lenbyte > inputlen) {\n+            return 0;\n+        }\n+        while (lenbyte > 0 && input[pos] == 0) {\n+            pos++;\n+            lenbyte--;\n+        }\n+        if (lenbyte >= sizeof(size_t)) {\n+            return 0;\n+        }\n+        rlen = 0;\n+        while (lenbyte > 0) {\n+            rlen = (rlen << 8) + input[pos];\n+            pos++;\n+            lenbyte--;\n+        }\n+    } else {\n+        rlen = lenbyte;\n+    }\n+    if (rlen > inputlen - pos) {\n+        return 0;\n+    }\n+    rpos = pos;\n+    pos += rlen;\n+\n+    /* Integer tag byte for S */\n+    if (pos == inputlen || input[pos] != 0x02) {\n+        return 0;\n+    }\n+    pos++;\n+\n+    /* Integer length for S */\n+    if (pos == inputlen) {\n+        return 0;\n+    }\n+    lenbyte = input[pos++];\n+    if (lenbyte & 0x80) {\n+        lenbyte -= 0x80;\n+        if (pos + lenbyte > inputlen) {\n+            return 0;\n+        }\n+        while (lenbyte > 0 && input[pos] == 0) {\n+            pos++;\n+            lenbyte--;\n+        }\n+        if (lenbyte >= sizeof(size_t)) {\n+            return 0;\n+        }\n+        slen = 0;\n+        while (lenbyte > 0) {\n+            slen = (slen << 8) + input[pos];\n+            pos++;\n+            lenbyte--;\n+        }\n+    } else {\n+        slen = lenbyte;\n+    }\n+    if (slen > inputlen - pos) {\n+        return 0;\n+    }\n+    spos = pos;\n+    pos += slen;\n+\n+    /* Ignore leading zeroes in R */\n+    while (rlen > 0 && input[rpos] == 0) {\n+        rlen--;\n+        rpos++;\n+    }\n+    /* Copy R value */\n+    if (rlen > 32) {\n+        overflow = 1;\n+    } else {\n+        memcpy(tmpsig + 32 - rlen, input + rpos, rlen);\n+    }\n+\n+    /* Ignore leading zeroes in S */\n+    while (slen > 0 && input[spos] == 0) {\n+        slen--;\n+        spos++;\n+    }\n+    /* Copy S value */\n+    if (slen > 32) {\n+        overflow = 1;\n+    } else {\n+        memcpy(tmpsig + 64 - slen, input + spos, slen);\n+    }\n+\n+    if (!overflow) {\n+        overflow = !secp256k1_ecdsa_signature_parse_compact(ctx, sig, tmpsig);\n+    }\n+    if (overflow) {\n+        memset(tmpsig, 0, 64);\n+        secp256k1_ecdsa_signature_parse_compact(ctx, sig, tmpsig);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6954#discussion_r44855973",
      "id" : 44855973,
      "original_commit_id" : "28d09111834674c7571e9cfa61bbcb5712d3ece8",
      "original_position" : 159,
      "path" : "src/pubkey.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6954",
      "updated_at" : "2015-11-15T15:07:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/44855973",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6954#discussion_r44858054"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6954"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/44858054"
         }
      },
      "body" : "Yes, please don't put synchronization in libbitcoinconsensus, at least until we decide for either C++11 or C for the long term language trend for libconsensus. Last time I checked in IRC, it seems I wasn't alone in preferring a libconsensus that eventually is only C over one that is eventually C++11. Although that decision shouldn't affect this PR or even libconsensus' encapsulation completion, I insist that it would be good very good to know this asap.\r\n ",
      "commit_id" : "6e182686163ce3c15b878bd78c41d8d18db344f1",
      "created_at" : "2015-11-14T12:29:07Z",
      "diff_hunk" : "@@ -4,19 +4,182 @@\n \n #include \"pubkey.h\"\n \n-#include \"eccryptoverify.h\"\n+#include <secp256k1.h>\n+#include <secp256k1_recovery.h>\n \n-#include \"ecwrapper.h\"\n+namespace\n+{\n+secp256k1_context* secp256k1_context_verify = NULL;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6954#discussion_r44858054",
      "id" : 44858054,
      "original_commit_id" : "28d09111834674c7571e9cfa61bbcb5712d3ece8",
      "original_position" : 11,
      "path" : "src/pubkey.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6954",
      "updated_at" : "2015-11-15T15:07:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/44858054",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6954#discussion_r44871184"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6954"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/44871184"
         }
      },
      "body" : "bike-shedding: s/verify_handle/globalVerifyHandle or something of the short to make its scope clearer.",
      "commit_id" : "6e182686163ce3c15b878bd78c41d8d18db344f1",
      "created_at" : "2015-11-15T12:36:13Z",
      "diff_hunk" : "@@ -154,6 +154,7 @@ class CCoinsViewErrorCatcher : public CCoinsViewBacked\n \n static CCoinsViewDB *pcoinsdbview = NULL;\n static CCoinsViewErrorCatcher *pcoinscatcher = NULL;\n+static boost::scoped_ptr<ECCVerifyHandle> verify_handle;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6954#discussion_r44871184",
      "id" : 44871184,
      "original_commit_id" : "6528f4114f045bbf519c5dd5f6b27193b6df09b3",
      "original_position" : 4,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6954",
      "updated_at" : "2015-11-15T15:07:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/44871184",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6954#discussion_r44871214"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6954"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/44871214"
         }
      },
      "body" : "@laanwj wrote:\r\n> Users have to hold a ECCVerifyHandle. Maybe we should make them pass it in to make sure of that? :-)\r\n\r\nI agree. It may look weird because it doesn't appear to be used.\r\nBut if secp256k1_context_verify and verify_refcount were static attributes of ECCVerifyHandle, we would see much clearly which functions/methods need to take the ECCVerifyHandle as parameter.\r\nI suggest doing both changes.",
      "commit_id" : "6e182686163ce3c15b878bd78c41d8d18db344f1",
      "created_at" : "2015-11-15T12:40:59Z",
      "diff_hunk" : "@@ -205,4 +210,13 @@ struct CExtPubKey {\n     bool Derive(CExtPubKey& out, unsigned int nChild) const;\n };\n \n+/** Users of this module must hold an ECCVerifyHandle. The constructor and\n+ *  destructor of these are not allowed to run in parallel, though. */",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6954#discussion_r44871214",
      "id" : 44871214,
      "original_commit_id" : "6528f4114f045bbf519c5dd5f6b27193b6df09b3",
      "original_position" : 17,
      "path" : "src/pubkey.h",
      "position" : 17,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6954",
      "updated_at" : "2015-11-15T15:07:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/44871214",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "body" : "I cannot give an utACK because I'm not trying to understand everything that is done here.\r\nBut I reviewed the parts is easy for me to understand and I would utACK those parts (modulo my \"put secp256k1_context_verify inside ECCVerifyHandle\" nit).",
      "created_at" : "2015-11-15T12:46:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6954#issuecomment-156809318",
      "id" : 156809318,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6954",
      "updated_at" : "2015-11-15T12:46:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/156809318",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6954#discussion_r44871361"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6954"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/44871361"
         }
      },
      "body" : "In fact, can't the consensus code that needs it simply take the secp256k1_context_verify explicitly?",
      "commit_id" : "6e182686163ce3c15b878bd78c41d8d18db344f1",
      "created_at" : "2015-11-15T12:57:28Z",
      "diff_hunk" : "@@ -205,4 +210,13 @@ struct CExtPubKey {\n     bool Derive(CExtPubKey& out, unsigned int nChild) const;\n };\n \n+/** Users of this module must hold an ECCVerifyHandle. The constructor and\n+ *  destructor of these are not allowed to run in parallel, though. */",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6954#discussion_r44871361",
      "id" : 44871361,
      "original_commit_id" : "6528f4114f045bbf519c5dd5f6b27193b6df09b3",
      "original_position" : 17,
      "path" : "src/pubkey.h",
      "position" : 17,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6954",
      "updated_at" : "2015-11-15T15:07:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/44871361",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6954#discussion_r44871511"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6954"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/44871511"
         }
      },
      "body" : "Yes, if we pass it through main, consensus, script interpreter, and\npubkey... which is possible but annoyingly much code for something that's\njust an immutable blob initialized at startup and usable from all threads.\n",
      "commit_id" : "6e182686163ce3c15b878bd78c41d8d18db344f1",
      "created_at" : "2015-11-15T13:06:44Z",
      "diff_hunk" : "@@ -205,4 +210,13 @@ struct CExtPubKey {\n     bool Derive(CExtPubKey& out, unsigned int nChild) const;\n };\n \n+/** Users of this module must hold an ECCVerifyHandle. The constructor and\n+ *  destructor of these are not allowed to run in parallel, though. */",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6954#discussion_r44871511",
      "id" : 44871511,
      "original_commit_id" : "6528f4114f045bbf519c5dd5f6b27193b6df09b3",
      "original_position" : 17,
      "path" : "src/pubkey.h",
      "position" : 17,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6954",
      "updated_at" : "2015-11-15T15:07:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/44871511",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6954#discussion_r44871668"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6954"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/44871668"
         }
      },
      "body" : "That would be highly inefficient. Not every user needs his own context. The\npurpose of ECCVerifyHandle is to ensure that the single global context\nvariable is always initialized while someone is using it. You can't have a\nrefcount variable per user, you need a single refcount for all users.\n",
      "commit_id" : "6e182686163ce3c15b878bd78c41d8d18db344f1",
      "created_at" : "2015-11-15T13:19:54Z",
      "diff_hunk" : "@@ -205,4 +210,13 @@ struct CExtPubKey {\n     bool Derive(CExtPubKey& out, unsigned int nChild) const;\n };\n \n+/** Users of this module must hold an ECCVerifyHandle. The constructor and\n+ *  destructor of these are not allowed to run in parallel, though. */",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6954#discussion_r44871668",
      "id" : 44871668,
      "original_commit_id" : "6528f4114f045bbf519c5dd5f6b27193b6df09b3",
      "original_position" : 17,
      "path" : "src/pubkey.h",
      "position" : 17,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6954",
      "updated_at" : "2015-11-15T15:07:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/44871668",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6954#discussion_r44871995"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6954"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/44871995"
         }
      },
      "body" : "Oh, static attributes! I missed that... that's possible.",
      "commit_id" : "6e182686163ce3c15b878bd78c41d8d18db344f1",
      "created_at" : "2015-11-15T13:48:40Z",
      "diff_hunk" : "@@ -205,4 +210,13 @@ struct CExtPubKey {\n     bool Derive(CExtPubKey& out, unsigned int nChild) const;\n };\n \n+/** Users of this module must hold an ECCVerifyHandle. The constructor and\n+ *  destructor of these are not allowed to run in parallel, though. */",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6954#discussion_r44871995",
      "id" : 44871995,
      "original_commit_id" : "6528f4114f045bbf519c5dd5f6b27193b6df09b3",
      "original_position" : 17,
      "path" : "src/pubkey.h",
      "position" : 17,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6954",
      "updated_at" : "2015-11-15T15:07:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/44871995",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6954#discussion_r44872736"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6954"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/44872736"
         }
      },
      "body" : "Done. Only for the refcount though, as the context variable is needed outside of the class (for obvious reasons).",
      "commit_id" : "6e182686163ce3c15b878bd78c41d8d18db344f1",
      "created_at" : "2015-11-15T14:58:02Z",
      "diff_hunk" : "@@ -205,4 +210,13 @@ struct CExtPubKey {\n     bool Derive(CExtPubKey& out, unsigned int nChild) const;\n };\n \n+/** Users of this module must hold an ECCVerifyHandle. The constructor and\n+ *  destructor of these are not allowed to run in parallel, though. */",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6954#discussion_r44872736",
      "id" : 44872736,
      "original_commit_id" : "6528f4114f045bbf519c5dd5f6b27193b6df09b3",
      "original_position" : 17,
      "path" : "src/pubkey.h",
      "position" : 17,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6954",
      "updated_at" : "2015-11-15T15:07:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/44872736",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6954#discussion_r44872738"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6954"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/44872738"
         }
      },
      "body" : "Done.",
      "commit_id" : "6e182686163ce3c15b878bd78c41d8d18db344f1",
      "created_at" : "2015-11-15T14:58:08Z",
      "diff_hunk" : "@@ -154,6 +154,7 @@ class CCoinsViewErrorCatcher : public CCoinsViewBacked\n \n static CCoinsViewDB *pcoinsdbview = NULL;\n static CCoinsViewErrorCatcher *pcoinscatcher = NULL;\n+static boost::scoped_ptr<ECCVerifyHandle> verify_handle;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6954#discussion_r44872738",
      "id" : 44872738,
      "original_commit_id" : "6528f4114f045bbf519c5dd5f6b27193b6df09b3",
      "original_position" : 4,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6954",
      "updated_at" : "2015-11-15T15:07:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/44872738",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Addressed some nits.",
      "created_at" : "2015-11-15T14:58:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6954#issuecomment-156816215",
      "id" : 156816215,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6954",
      "updated_at" : "2015-11-15T14:58:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/156816215",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6954#discussion_r44875740"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6954"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/44875740"
         }
      },
      "body" : "Yes, I guess passing secp256k1_context_verify explicitly explicitly would be too disruptive. Could we document somewhere that it would be ideal but we just don't want to do it right now? Maybe an example doing it \"the right way\" (a static getter or something) would be useful too.",
      "commit_id" : "6e182686163ce3c15b878bd78c41d8d18db344f1",
      "created_at" : "2015-11-15T18:47:11Z",
      "diff_hunk" : "@@ -205,4 +210,13 @@ struct CExtPubKey {\n     bool Derive(CExtPubKey& out, unsigned int nChild) const;\n };\n \n+/** Users of this module must hold an ECCVerifyHandle. The constructor and\n+ *  destructor of these are not allowed to run in parallel, though. */",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6954#discussion_r44875740",
      "id" : 44875740,
      "original_commit_id" : "6528f4114f045bbf519c5dd5f6b27193b6df09b3",
      "original_position" : 17,
      "path" : "src/pubkey.h",
      "position" : 17,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6954",
      "updated_at" : "2015-11-15T18:47:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/44875740",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6954#discussion_r44878032"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6954"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/44878032"
         }
      },
      "body" : "In C++11 I would just use once initializers which guarantee it's\ninitialized exactly once, atomically, upon first use.\n",
      "commit_id" : "6e182686163ce3c15b878bd78c41d8d18db344f1",
      "created_at" : "2015-11-15T21:48:59Z",
      "diff_hunk" : "@@ -205,4 +210,13 @@ struct CExtPubKey {\n     bool Derive(CExtPubKey& out, unsigned int nChild) const;\n };\n \n+/** Users of this module must hold an ECCVerifyHandle. The constructor and\n+ *  destructor of these are not allowed to run in parallel, though. */",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6954#discussion_r44878032",
      "id" : 44878032,
      "original_commit_id" : "6528f4114f045bbf519c5dd5f6b27193b6df09b3",
      "original_position" : 17,
      "path" : "src/pubkey.h",
      "position" : 17,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6954",
      "updated_at" : "2015-11-15T21:48:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/44878032",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Bikeshedding over different (but semantically equivalent) syntax can happen later. I'd like to move forward with this, to make sure it ends up in 0.12 and to save @sipa the work of rebasing this every time.\r\n\r\nFurther testing and review will probably only happen anyway when this is merged.\r\n",
      "created_at" : "2015-11-16T12:24:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6954#issuecomment-157012126",
      "id" : 157012126,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6954",
      "updated_at" : "2015-11-16T12:26:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/157012126",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Sure, my non-addressed suggestion was too disruptive to make this happen fast and it's not a priority.\r\nI'm glad that this got merged like this, but I'm also glad that my suggestion doesn't seem crazy either.",
      "created_at" : "2015-11-16T14:18:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6954#issuecomment-157044176",
      "id" : 157044176,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6954",
      "updated_at" : "2015-11-16T14:18:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/157044176",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "body" : "Is there proper and academic documentation for these proposed changes and is there a BIP?\r\n\r\nThis isn't solely a code change, in my opinion. New algorithms are being proposed towards some of the most fundamental aspects of bitcoin - signature validation. As we all know, things can go terribly wrong in this space and unfortunately it is not even knowable what can go wrong. \r\n\r\nCertain experts have expressed concerns about seemingly impossible claims that 700% improvements can be achieved by these \"invented\" mathematical algorithms. Further concerns have been raised towards suggestions that this is more tested than standard practice when standard practice requires some 20 years of testing.\r\n\r\nI am not, of course, suggesting that the proposed changes are conceptually deficient, but I would not be comfortable with these changes in the absence of proper documentation and wider review from experts who specialise in this area because it is far too easy to hide backdoors in this space or less maliciously to unknowably fatally weaken the algorithm and its security. ",
      "created_at" : "2015-12-23T21:52:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6954#issuecomment-166998024",
      "id" : 166998024,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6954",
      "updated_at" : "2015-12-23T21:56:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/166998024",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/16388632?v=3",
         "events_url" : "https://api.github.com/users/Aquentus/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Aquentus/followers",
         "following_url" : "https://api.github.com/users/Aquentus/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Aquentus/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Aquentus",
         "id" : 16388632,
         "login" : "Aquentus",
         "organizations_url" : "https://api.github.com/users/Aquentus/orgs",
         "received_events_url" : "https://api.github.com/users/Aquentus/received_events",
         "repos_url" : "https://api.github.com/users/Aquentus/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Aquentus/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Aquentus/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Aquentus"
      }
   },
   {
      "body" : "@Aquentus While I agree with your concerns, I am not sure this needs a BIP beyond BIP 66. The review of libsecp256k1 (which included comparison of results with the current consensus-protocol OpenSSL verification) turned up serious consensus-failure bugs in OpenSSL which BIP 66 solved. When review of the new code has fixed de facto problems in the old code, I think it demonstrates a clear higher standard of testing for the new code. \"20 years of testing\" is non-existent insofar as consensus safety is concerned - the field of decentralised consensus systems is only 6 years old, after all.",
      "created_at" : "2015-12-24T01:18:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6954#issuecomment-167018158",
      "id" : 167018158,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6954",
      "updated_at" : "2015-12-24T01:18:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/167018158",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "I disagree with a need for a BIP. None of the consensus rules are intended\nto change.\n\nI do agree that better visibility of the algorithms used is useful.\n\nOne thing that is planned before final release is an explanation of the\ntest procedures and formal verification mechanisms used.\n\nA small summary of the optimizations used in signature verification, and are not used by OpenSSL:\n* A special representation for field elements (numbers modulo 2^256 - 2^32\n- 933), using 5 52-bit limbs (rather than the typical 4 64-bit limbs),\ninspired by an Ed25519 implementation. This allows performing multiple\nadditions and constant multiplications in a row without carry or\nnormalization.\n* Multiplication algorithm for field elements that computes the\nintermediate high 256 bits in parallel with the low 256 bits (by Peter\nDettman).\n* x86_64 assembly implementation for scalar and field multiplications\n(disabled in Bitcoin's build).\n* Inversion-free comparison for ECDSA verification (by Greg Maxwell).\n* Fast inversion and square root ladders (by Peter Dettman).\n* Very large table of precomputed multiples of the secp256k1 curve\ngenerator point (~1 megabyte), resulting in very low overhead for computing\naP + bG compared to just aP.\n* Effective affine EC multiplication, which allows using affine group\naddition formulae with a single correction at the end for all additions\n(possible due to secp256k1 having a=0 in the group equation, by Peter\nDettman).\n* Bypassing the exensive point-in-group check needed by ECDSA, as for\nsecp256k1 every point on the curve belongs to the group (it has cofactor 1).\n* No heap memory overhead anywhere during tight loops, as all memory is\nallocated on the stack, preconputed, or constant.\n* No indirect calls or function pointers, as libsecp256k1 only supports one\ncurve, so no dispatch/lookups for implementations are needed.\n\nFor all of the above, we have:\n* High test coverage (the only missing parts are cryptographically\nimprobable to reach ones).\n* Hand verifiable proof of correctness for the field multiplication\nalgorithm (provably no overflow, and provably equivalent to the correct\nresponse assuming no overflow).\n* Computer verified proof of correctness for group addition formulae\n(computer algebra system can prove polynomial equivalence between\nimplementation and mathematical expressions for the result).\n* Special compilable mode that changes a constant to end up with a very\nsmall group, and exhaustive tests that all assumptions remain true (in\nprogress, by Andrew Poelstra).\n* Test cases for the scalar code that were extracted from a set of 1\ntrillion randomly generated tests which give very high\ncoverage, and work in progress to algebraically derive cases that trigger\nthe (nearly) unreachable remaining ones.\n\nFurthermore:\n* An old build mode which used OpenSSL's bignum code for integer operations helped discover a bug in OpenSSL square code (CVE-2014-3570).\n* During tested we discovered an platform inconsistency in OpenSSL's signature parsing code (fixed by BIP66).\n* Our ECDSA signature fuzzer pointed out several types of previously unknown invalid signature types that OpenSSL accepted (discovered after BIP66 took effect).",
      "created_at" : "2015-12-24T15:31:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6954#issuecomment-167126321",
      "id" : 167126321,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6954",
      "updated_at" : "2015-12-24T15:44:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/167126321",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   }
]
