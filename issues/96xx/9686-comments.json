[
   {
      "body" : "Concept ACK. Though to avoid too many intermediate steps it would make sense to make this part of a larger refactor to make the RPC help easier machine-readable. This would make it possible to generate man-pages, wiki pages, etc maybe even simple language bindings from the same source as the \"online\" RPC help.",
      "created_at" : "2017-02-04T10:33:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9686#issuecomment-277434335",
      "id" : 277434335,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9686",
      "updated_at" : "2017-02-04T10:34:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/277434335",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "@laanwj I like the idea, presuming it's not adding too much overhead to the work of adding/fixing the help content. Not sure what it would look like. A mini-doxygen-parser?",
      "created_at" : "2017-02-04T11:34:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9686#issuecomment-277437857",
      "id" : 277437857,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9686",
      "updated_at" : "2017-02-04T11:35:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/277437857",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/250224?v=3",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "body" : "I don't know for sure.\r\n\r\nPossibly easiest would be to make the input a (say) JSON file per module, in structured format, then have a script to generate code to include in the build - same principle as for the tests. These JSON files could be used by anything that needs RPC documentation.\r\n\r\n(there could even be a way to get unformatted documentation over RPC - say, for RPC clients that want to extract per-parameter documentation from it)\r\n\r\nThe drawback would be that the documentation is no longer next to the implementation so people may sooner forget to update it. Indeed, something like doxygen could parse the documentation from comments, but that may become too much magic.\r\n",
      "created_at" : "2017-02-04T12:36:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9686#issuecomment-277443189",
      "id" : 277443189,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9686",
      "updated_at" : "2017-02-04T12:36:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/277443189",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "> The drawback would be that the documentation is no longer next to the implementation so people may sooner forget to update it.\r\n\r\nAs soon as the documentation is machine readable it is probably easy to  compare the  output with the documentation and fail if one of the types is not found. The issue, however, is that the output sometimes depends on the input. Or sometimes on command line args such as disablewallet. I am not sure how to handle those cases.",
      "created_at" : "2017-02-04T13:14:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9686#issuecomment-277445155",
      "id" : 277445155,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9686",
      "updated_at" : "2017-02-04T13:14:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/277445155",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=3",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "body" : "> The issue, however, is that the output sometimes depends on the input. \r\n\r\nIn the help? Can you give any specific examples?\r\n\r\n> Or sometimes on command line args such as disablewallet.\r\n\r\nAs an aside, the long-term goal is to get rid of RPCs that behave differently based on availability of the wallet.\r\n\r\nIn most cases the RPCs are disabled completely without the wallet, which could be handled by importing the documentation for the wallet module only when the wallet is enabled.\r\n\r\nMore generally these cases can just be documented: Just mention in the text that the behavior depends on *someoption*. I'd say this is usually clearer to the user than documentation that changes based on some context information.\r\n",
      "created_at" : "2017-02-04T14:49:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9686#issuecomment-277450583",
      "id" : 277450583,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9686",
      "updated_at" : "2017-02-04T14:49:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/277450583",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "> In the help? Can you give any specific examples?\n\nNo, not in the help. Just in the output.\n\nhttps://github.com/bitcoin/bitcoin/blob/7821db30e16149a3d8b7f467a4e5ac276af6ccbd/src/wallet/rpcwallet.cpp#L1494-L1495\n\nAgree that the documentation should include all cases (thus be static)\nregardless of input or command line switches.\n\n\nOn Sat, Feb 4, 2017 at 3:49 PM, Wladimir J. van der Laan <\nnotifications@github.com> wrote:\n\n> The issue, however, is that the output sometimes depends on the input.\n>\n> In the help? Can you give any specific examples?\n>\n> Or sometimes on command line args such as disablewallet.\n>\n> As an aside, the long-term goal is to get rid of RPCs that behave\n> differently based on availability of the wallet.\n>\n> In most cases the RPCs are disabled completely without the wallet, which\n> could be handled by importing the documentation for the wallet module only\n> when the wallet is enabled.\n>\n> More generally these cases can just be documented: Just mention in the\n> text that the behavior depends on *someoption*. I'd say this is usually\n> clearer to the user than documentation that changes based on some context\n> information.\n>\n> Ã¢ÂÂ\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/bitcoin/bitcoin/pull/9686#issuecomment-277450583>, or mute\n> the thread\n> <https://github.com/notifications/unsubscribe-auth/AGGmvwMioUjo-NAOvWuxTp9qZiQgKfZ2ks5rZJANgaJpZM4L3BpL>\n> .\n>\n",
      "created_at" : "2017-02-04T16:49:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9686#issuecomment-277458654",
      "id" : 277458654,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9686",
      "updated_at" : "2017-02-04T16:49:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/277458654",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=3",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "body" : "How about a formatter like we use for `--help`?",
      "created_at" : "2017-02-04T19:41:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9686#issuecomment-277470253",
      "id" : 277470253,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9686",
      "updated_at" : "2017-02-04T19:41:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/277470253",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "I'm not sure I like moving docs away from sources, but if we do, there are plenty of options. (I'm trying to look at any tools that have a CLI similar to bitcoin-cli (multiple commands, not just options) but can't think of a lot of them, for some reason. Ideas welcome to make this comment more encompassing.)\r\n\r\n* Git simply has Documentation/git-[command].txt files, each one being a manpage. See e.g. https://github.com/git/git/blob/35f6318d44379452d8d33e880d8df0267b4a0cd0/Documentation/git-diff.txt\r\n* HomeBrew (macOS package manager) keeps documentation in the source code using special formatting, and then parses that on the fly: https://github.com/Homebrew/brew/blob/master/Library/Homebrew/cmd/help.rb#L76\r\n* RubyGems (`gem` command) seems to use something similar to HomeBrew but less fancy, e.g.: https://github.com/rubygems/rubygems/blob/master/lib/rubygems/commands/build_command.rb\r\n",
      "created_at" : "2017-02-04T23:21:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9686#issuecomment-277485507",
      "id" : 277485507,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9686",
      "updated_at" : "2017-02-06T05:49:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/277485507",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/250224?v=3",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "body" : "Will resurrect when/if a solution becomes mature enough for discussion.",
      "created_at" : "2017-04-07T02:53:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9686#issuecomment-292411535",
      "id" : 292411535,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9686",
      "updated_at" : "2017-04-07T02:53:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/292411535",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/250224?v=3",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   }
]
