[
   {
      "body" : "There is no unused variable here.\r\n\r\nTrue, resetting the nonce hardly matters for regtest, but that won't stop others from looking at that code when writing their own mining software.\r\n\r\nI also don't understand why the assert is being added, all it is checking is that the block template header is filled out correctly. Sure. It is, though nothing in that function depends on it being so.\r\n\r\nIf someone believed that it wasn't possible to call Increment twice with the same prior block,  that is not true: the caller can hit the nInnerLoopCount comparison, continue the loop without solving a block and call IncrementExtraNonce to do its job while staying on the same block.\r\n\r\nActually, I think that assert would introduce an infrequently triggered crash in the regtest miner code. CS_MAIN is not held during the entire duration of the mining. If you have two regtest nodes mining at once, you might accept a block between the CreateNewBlock and the IncrementExtraNonce, resulting in the template and the pindexPrev disagreeing on the identity of the prior block.",
      "created_at" : "2017-01-25T07:38:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9627#issuecomment-275039456",
      "id" : 275039456,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9627",
      "updated_at" : "2017-01-25T07:38:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/275039456",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "I meant the variable hashPrevBlock is not needed, but I missed it is static. I was only wondering why the assert wasn't simply ```assert(pblock->hashPrevBlock != uint256());```.\r\nSorry, it seems I misunderstood the changes and should probably not have opened this PR.\r\n\r\nIn the commmit description, @TheBlueMatt says:\r\n> I assume this was added to prevent deanonymization, but that\r\n> doesn't matter anymore since its only used on regtest.\r\n\r\n",
      "created_at" : "2017-01-25T17:21:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9627#issuecomment-275172196",
      "id" : 275172196,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9627",
      "updated_at" : "2017-01-25T17:21:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/275172196",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "body" : "I dont recall the point here (I believe it was something to do with cleaning up code for later refactors in elements), but the point of the code block, I'm pretty sure was to prevent the walking extranonce patterns which appear to deanonymize (or at least allow you to bucket) early miners.",
      "created_at" : "2017-01-25T17:49:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9627#issuecomment-275180389",
      "id" : 275180389,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9627",
      "updated_at" : "2017-01-25T17:49:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/275180389",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "Thanks for clarifying and sorry for the distraction. Closing.",
      "created_at" : "2017-01-25T18:28:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9627#issuecomment-275191247",
      "id" : 275191247,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9627",
      "updated_at" : "2017-01-25T18:28:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/275191247",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   }
]
