[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/9615#discussion_r97430520"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9615"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/97430520"
         }
      },
      "body" : "Maybe s/should have its own minimum incremental fee/uses a conservative WALLET_INCREMENTAL_RELAY_FEE value/. Saying \"should\" could suggest that the wallet doesn't already do this. ",
      "commit_id" : "4b189c13401bcd350c05cf8194beaeb3d18b3ebc",
      "created_at" : "2017-01-23T22:19:55Z",
      "diff_hunk" : "@@ -2823,8 +2827,17 @@ UniValue bumpfee(const JSONRPCRequest& request)\n         // new fee rate must be at least old rate + minimum incremental relay rate\n         if (nNewFeeRate.GetFeePerK() < nOldFeeRate.GetFeePerK() + ::incrementalRelayFee.GetFeePerK()) {\n             nNewFeeRate = CFeeRate(nOldFeeRate.GetFeePerK() + ::incrementalRelayFee.GetFeePerK());\n+            if (specifiedConfirmTarget || payTxFee.GetFeePerK() == 0) {\n+                // In the default case where the user is depending on the wallet\n+                // to smartly pick the fee, the wallet should have its own",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9615#discussion_r97430520",
      "id" : 97430520,
      "original_commit_id" : "86e8cca1d2341f7e99ff3179e60775aeba781fe4",
      "original_position" : 23,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 18040231,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9615",
      "updated_at" : "2017-01-26T17:06:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/97430520",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=3",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/9615#discussion_r97435466"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9615"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/97435466"
         }
      },
      "body" : "Another another way to avoid the ambiguity of having different \"oldfee\" values might be to phrase error message to in terms of fee rates, rather than fees:\r\n\r\n```\r\nnNewFee = totalFee;\r\nnNewFeeRate = CFeeRate(totalFee, maxNewTxSize);\r\nCFeeRate minFeeRate = CFeeRate(nOldFeeRate.GetFeePerK() + ::incrementalRelayFee.GetFeePerK());\r\nif (nNewFeeRate < minFeeRate) {\r\n    CAmount recommendedTotalFee = nOldFeeRate.GetFee(maxNewTxSize) + walletIncrementalRelayFee.GetFee(maxNewTxSize);\r\n    throw JSONRPCError(RPC_INVALID_PARAMETER, strprintf(\"Insufficient totalFee rate %s %s/kB, must be at least %s %s/kB (old rate %s %s/kB + incremental rate %s %s/kB), recommended %s %s (incremental fee %s %s)\",\r\n                                                        FormatMoney(nNewFeeRate.GetFeePerK()), CURRENCY_UNIT,\r\n                                                        FormatMoney(minFeeRate.GetFeePerK()), CURRENCY_UNIT,\r\n                                                        FormatMoney(nOldFeeRate.GetFeePerK()), CURRENCY_UNIT,\r\n                                                        FormatMoney(::incrementalRelayFee.GetFeePerK()), CURRENCY_UNIT,\r\n                                                        FormatMoney(recommendedTotalFee), CURRENCY_UNIT,\r\n                                                        walletIncrementalRelayFee.GetFee(maxNewTxSize)));\r\n}\r\n```\r\n\r\nI think this would make more sense anyway, because whatever client code is calling this will probably be deriving totalFee values based on fee rates, and this error message is more explicit about the minimum fee rate required.\r\n\r\n(Also think saying insufficient fee is better than saying invalid fee, to be more specific).",
      "commit_id" : "4b189c13401bcd350c05cf8194beaeb3d18b3ebc",
      "created_at" : "2017-01-23T22:47:48Z",
      "diff_hunk" : "@@ -2801,11 +2801,15 @@ UniValue bumpfee(const JSONRPCRequest& request)\n     CFeeRate nOldFeeRate(nOldFee, txSize);\n     CAmount nNewFee;\n     CFeeRate nNewFeeRate;\n+    CFeeRate walletIncrementalRelayFee = CFeeRate(WALLET_INCREMENTAL_RELAY_FEE);\n \n     if (totalFee > 0) {\n         CAmount minTotalFee = nOldFeeRate.GetFee(maxNewTxSize) + ::incrementalRelayFee.GetFee(maxNewTxSize);\n         if (totalFee < minTotalFee) {\n-            throw JSONRPCError(RPC_INVALID_PARAMETER, strprintf(\"Invalid totalFee, must be at least %s (oldFee %s + relayFee %s)\", FormatMoney(minTotalFee), nOldFeeRate.GetFee(maxNewTxSize), ::incrementalRelayFee.GetFee(maxNewTxSize)));\n+            CAmount recommendedTotalFee =  nOldFeeRate.GetFee(maxNewTxSize) + walletIncrementalRelayFee.GetFee(maxNewTxSize);\n+            throw JSONRPCError(RPC_INVALID_PARAMETER, strprintf(\"Invalid totalFee, must be at least %s (oldFee %s + incrementalFee %s), recommended %s (incrementalFee %s)\",",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9615#discussion_r97435466",
      "id" : 97435466,
      "original_commit_id" : "86e8cca1d2341f7e99ff3179e60775aeba781fe4",
      "original_position" : 11,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 18040231,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9615",
      "updated_at" : "2017-01-26T17:06:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/97435466",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=3",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/9615#discussion_r97455866"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9615"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/97455866"
         }
      },
      "body" : "hmm...  I feel like if the option is total fee (not rate) then we should give the error message in fee (not rate).   I don't feel strongly about that.., but its not really relevant to the gist of this PR anyway, so I'll leave it alone for now.     BTW, CFeeRate has a ToString().\r\n\r\nI will make the change to `Insufficient totalFee` though..\r\n",
      "commit_id" : "4b189c13401bcd350c05cf8194beaeb3d18b3ebc",
      "created_at" : "2017-01-24T01:17:31Z",
      "diff_hunk" : "@@ -2801,11 +2801,15 @@ UniValue bumpfee(const JSONRPCRequest& request)\n     CFeeRate nOldFeeRate(nOldFee, txSize);\n     CAmount nNewFee;\n     CFeeRate nNewFeeRate;\n+    CFeeRate walletIncrementalRelayFee = CFeeRate(WALLET_INCREMENTAL_RELAY_FEE);\n \n     if (totalFee > 0) {\n         CAmount minTotalFee = nOldFeeRate.GetFee(maxNewTxSize) + ::incrementalRelayFee.GetFee(maxNewTxSize);\n         if (totalFee < minTotalFee) {\n-            throw JSONRPCError(RPC_INVALID_PARAMETER, strprintf(\"Invalid totalFee, must be at least %s (oldFee %s + relayFee %s)\", FormatMoney(minTotalFee), nOldFeeRate.GetFee(maxNewTxSize), ::incrementalRelayFee.GetFee(maxNewTxSize)));\n+            CAmount recommendedTotalFee =  nOldFeeRate.GetFee(maxNewTxSize) + walletIncrementalRelayFee.GetFee(maxNewTxSize);\n+            throw JSONRPCError(RPC_INVALID_PARAMETER, strprintf(\"Invalid totalFee, must be at least %s (oldFee %s + incrementalFee %s), recommended %s (incrementalFee %s)\",",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9615#discussion_r97455866",
      "id" : 97455866,
      "original_commit_id" : "86e8cca1d2341f7e99ff3179e60775aeba781fe4",
      "original_position" : 11,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 18066254,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9615",
      "updated_at" : "2017-01-26T17:06:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/97455866",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4360349?v=3",
         "events_url" : "https://api.github.com/users/morcos/events{/privacy}",
         "followers_url" : "https://api.github.com/users/morcos/followers",
         "following_url" : "https://api.github.com/users/morcos/following{/other_user}",
         "gists_url" : "https://api.github.com/users/morcos/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/morcos",
         "id" : 4360349,
         "login" : "morcos",
         "organizations_url" : "https://api.github.com/users/morcos/orgs",
         "received_events_url" : "https://api.github.com/users/morcos/received_events",
         "repos_url" : "https://api.github.com/users/morcos/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/morcos/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/morcos/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/morcos"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/9615#discussion_r97455907"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9615"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/97455907"
         }
      },
      "body" : "will do",
      "commit_id" : "4b189c13401bcd350c05cf8194beaeb3d18b3ebc",
      "created_at" : "2017-01-24T01:17:52Z",
      "diff_hunk" : "@@ -2823,8 +2827,17 @@ UniValue bumpfee(const JSONRPCRequest& request)\n         // new fee rate must be at least old rate + minimum incremental relay rate\n         if (nNewFeeRate.GetFeePerK() < nOldFeeRate.GetFeePerK() + ::incrementalRelayFee.GetFeePerK()) {\n             nNewFeeRate = CFeeRate(nOldFeeRate.GetFeePerK() + ::incrementalRelayFee.GetFeePerK());\n+            if (specifiedConfirmTarget || payTxFee.GetFeePerK() == 0) {\n+                // In the default case where the user is depending on the wallet\n+                // to smartly pick the fee, the wallet should have its own",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9615#discussion_r97455907",
      "id" : 97455907,
      "original_commit_id" : "86e8cca1d2341f7e99ff3179e60775aeba781fe4",
      "original_position" : 23,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 18066301,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9615",
      "updated_at" : "2017-01-26T17:06:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/97455907",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4360349?v=3",
         "events_url" : "https://api.github.com/users/morcos/events{/privacy}",
         "followers_url" : "https://api.github.com/users/morcos/followers",
         "following_url" : "https://api.github.com/users/morcos/following{/other_user}",
         "gists_url" : "https://api.github.com/users/morcos/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/morcos",
         "id" : 4360349,
         "login" : "morcos",
         "organizations_url" : "https://api.github.com/users/morcos/orgs",
         "received_events_url" : "https://api.github.com/users/morcos/received_events",
         "repos_url" : "https://api.github.com/users/morcos/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/morcos/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/morcos/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/morcos"
      }
   },
   {
      "body" : "Concept ACK.",
      "created_at" : "2017-01-24T08:07:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9615#issuecomment-274735446",
      "id" : 274735446,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9615",
      "updated_at" : "2017-01-24T08:07:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/274735446",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "Please tag 0.14",
      "created_at" : "2017-01-24T18:03:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9615#issuecomment-274884918",
      "id" : 274884918,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9615",
      "updated_at" : "2017-01-24T18:03:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/274884918",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4360349?v=3",
         "events_url" : "https://api.github.com/users/morcos/events{/privacy}",
         "followers_url" : "https://api.github.com/users/morcos/followers",
         "following_url" : "https://api.github.com/users/morcos/following{/other_user}",
         "gists_url" : "https://api.github.com/users/morcos/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/morcos",
         "id" : 4360349,
         "login" : "morcos",
         "organizations_url" : "https://api.github.com/users/morcos/orgs",
         "received_events_url" : "https://api.github.com/users/morcos/received_events",
         "repos_url" : "https://api.github.com/users/morcos/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/morcos/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/morcos/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/morcos"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/9615#discussion_r97849625"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9615"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/97849625"
         }
      },
      "body" : "~I think we want this logic to apply even if the user didn't specify a confirmation target -- just as long as paytxfee is 0.~ EDIT: I misread the code above, this logic does correctly do what is intended here, though I still think this is complication is unnecessary.",
      "commit_id" : "4b189c13401bcd350c05cf8194beaeb3d18b3ebc",
      "created_at" : "2017-01-25T18:47:44Z",
      "diff_hunk" : "@@ -2823,8 +2827,17 @@ UniValue bumpfee(const JSONRPCRequest& request)\n         // new fee rate must be at least old rate + minimum incremental relay rate\n         if (nNewFeeRate.GetFeePerK() < nOldFeeRate.GetFeePerK() + ::incrementalRelayFee.GetFeePerK()) {\n             nNewFeeRate = CFeeRate(nOldFeeRate.GetFeePerK() + ::incrementalRelayFee.GetFeePerK());\n+            if (specifiedConfirmTarget || payTxFee.GetFeePerK() == 0) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9615#discussion_r97849625",
      "id" : 97849625,
      "original_commit_id" : "ad2e6fb2dcc121b62ee3efc26344f977974548b2",
      "original_position" : 21,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 18472666,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9615",
      "updated_at" : "2017-01-26T17:06:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/97849625",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7463573?v=3",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/9615#discussion_r97861399"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9615"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/97861399"
         }
      },
      "body" : "Actually, on further thought, we might as well have this apply even if payTxFee is set...  There's no philosophical difference in my mind between being willing to exceed it by `incrementalRelayFee` vs. `walletIncrementalRelayFee`.",
      "commit_id" : "4b189c13401bcd350c05cf8194beaeb3d18b3ebc",
      "created_at" : "2017-01-25T19:39:43Z",
      "diff_hunk" : "@@ -2823,8 +2827,17 @@ UniValue bumpfee(const JSONRPCRequest& request)\n         // new fee rate must be at least old rate + minimum incremental relay rate\n         if (nNewFeeRate.GetFeePerK() < nOldFeeRate.GetFeePerK() + ::incrementalRelayFee.GetFeePerK()) {\n             nNewFeeRate = CFeeRate(nOldFeeRate.GetFeePerK() + ::incrementalRelayFee.GetFeePerK());\n+            if (specifiedConfirmTarget || payTxFee.GetFeePerK() == 0) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9615#discussion_r97861399",
      "id" : 97861399,
      "original_commit_id" : "ad2e6fb2dcc121b62ee3efc26344f977974548b2",
      "original_position" : 21,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 18484683,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9615",
      "updated_at" : "2017-01-26T17:06:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/97861399",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7463573?v=3",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/9615#discussion_r97927945"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9615"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/97927945"
         }
      },
      "body" : "Ok took this advice",
      "commit_id" : "4b189c13401bcd350c05cf8194beaeb3d18b3ebc",
      "created_at" : "2017-01-26T03:45:25Z",
      "diff_hunk" : "@@ -2823,8 +2827,17 @@ UniValue bumpfee(const JSONRPCRequest& request)\n         // new fee rate must be at least old rate + minimum incremental relay rate\n         if (nNewFeeRate.GetFeePerK() < nOldFeeRate.GetFeePerK() + ::incrementalRelayFee.GetFeePerK()) {\n             nNewFeeRate = CFeeRate(nOldFeeRate.GetFeePerK() + ::incrementalRelayFee.GetFeePerK());\n+            if (specifiedConfirmTarget || payTxFee.GetFeePerK() == 0) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9615#discussion_r97927945",
      "id" : 97927945,
      "original_commit_id" : "ad2e6fb2dcc121b62ee3efc26344f977974548b2",
      "original_position" : 21,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 18553314,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9615",
      "updated_at" : "2017-01-26T17:06:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/97927945",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4360349?v=3",
         "events_url" : "https://api.github.com/users/morcos/events{/privacy}",
         "followers_url" : "https://api.github.com/users/morcos/followers",
         "following_url" : "https://api.github.com/users/morcos/following{/other_user}",
         "gists_url" : "https://api.github.com/users/morcos/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/morcos",
         "id" : 4360349,
         "login" : "morcos",
         "organizations_url" : "https://api.github.com/users/morcos/orgs",
         "received_events_url" : "https://api.github.com/users/morcos/received_events",
         "repos_url" : "https://api.github.com/users/morcos/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/morcos/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/morcos/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/morcos"
      }
   },
   {
      "body" : "Rebased on new #9589 and simplified the logic per @sdaftuar's comment\r\n",
      "created_at" : "2017-01-26T03:46:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9615#issuecomment-275301721",
      "id" : 275301721,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9615",
      "updated_at" : "2017-01-26T03:46:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/275301721",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4360349?v=3",
         "events_url" : "https://api.github.com/users/morcos/events{/privacy}",
         "followers_url" : "https://api.github.com/users/morcos/followers",
         "following_url" : "https://api.github.com/users/morcos/following{/other_user}",
         "gists_url" : "https://api.github.com/users/morcos/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/morcos",
         "id" : 4360349,
         "login" : "morcos",
         "organizations_url" : "https://api.github.com/users/morcos/orgs",
         "received_events_url" : "https://api.github.com/users/morcos/received_events",
         "repos_url" : "https://api.github.com/users/morcos/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/morcos/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/morcos/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/morcos"
      }
   },
   {
      "body" : "Still just the last 2 commits are part of this PR,  updated because of #9589 again and added check that walletIncrementalRelayFee is always at least as big as global policy incrementalRelayFee",
      "created_at" : "2017-01-26T15:46:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9615#issuecomment-275422632",
      "id" : 275422632,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9615",
      "updated_at" : "2017-01-26T15:46:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/275422632",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4360349?v=3",
         "events_url" : "https://api.github.com/users/morcos/events{/privacy}",
         "followers_url" : "https://api.github.com/users/morcos/followers",
         "following_url" : "https://api.github.com/users/morcos/following{/other_user}",
         "gists_url" : "https://api.github.com/users/morcos/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/morcos",
         "id" : 4360349,
         "login" : "morcos",
         "organizations_url" : "https://api.github.com/users/morcos/orgs",
         "received_events_url" : "https://api.github.com/users/morcos/received_events",
         "repos_url" : "https://api.github.com/users/morcos/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/morcos/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/morcos/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/morcos"
      }
   },
   {
      "body" : "utACK de798cb",
      "created_at" : "2017-01-26T16:22:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9615#issuecomment-275433281",
      "id" : 275433281,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9615",
      "updated_at" : "2017-01-26T16:22:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/275433281",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7463573?v=3",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/9615#discussion_r98038862"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9615"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/98038862"
         }
      },
      "body" : "I believe this is undefined behavior (though I'm no expert on tinyformat) - you're printing CAmounts with %s. I also find it super strange to print both Bitcoin and Satoshis side-by-side with no unit information.",
      "commit_id" : "4b189c13401bcd350c05cf8194beaeb3d18b3ebc",
      "created_at" : "2017-01-26T16:56:25Z",
      "diff_hunk" : "@@ -2786,11 +2786,21 @@ UniValue bumpfee(const JSONRPCRequest& request)\n     CFeeRate nOldFeeRate(nOldFee, txSize);\n     CAmount nNewFee;\n     CFeeRate nNewFeeRate;\n+    // The wallet uses a conservative WALLET_INCREMENTAL_RELAY_FEE value to\n+    // future proof against changes to network wide policy for incremental relay\n+    // fee that our node may not be aware of.\n+    CFeeRate walletIncrementalRelayFee = CFeeRate(WALLET_INCREMENTAL_RELAY_FEE);\n+    if (::incrementalRelayFee > walletIncrementalRelayFee) {\n+        walletIncrementalRelayFee = ::incrementalRelayFee;\n+    }\n \n     if (totalFee > 0) {\n         CAmount minTotalFee = nOldFeeRate.GetFee(maxNewTxSize) + ::incrementalRelayFee.GetFee(maxNewTxSize);\n         if (totalFee < minTotalFee) {\n-            throw JSONRPCError(RPC_INVALID_PARAMETER, strprintf(\"Invalid totalFee, must be at least %s (oldFee %s + relayFee %s)\", FormatMoney(minTotalFee), nOldFeeRate.GetFee(maxNewTxSize), ::incrementalRelayFee.GetFee(maxNewTxSize)));\n+            CAmount recommendedTotalFee =  nOldFeeRate.GetFee(maxNewTxSize) + walletIncrementalRelayFee.GetFee(maxNewTxSize);\n+            throw JSONRPCError(RPC_INVALID_PARAMETER, strprintf(\"Insufficient totalFee, must be at least %s (oldFee %s + incrementalFee %s), recommended %s (incrementalFee %s)\",",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9615#discussion_r98038862",
      "id" : 98038862,
      "original_commit_id" : "633ed03b97a06ae9e15b3a5919da0595bb50a063",
      "original_position" : 17,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 18668862,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9615",
      "updated_at" : "2017-01-26T17:06:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/98038862",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "ok fixed and squashed  https://github.com/bitcoin/bitcoin/commit/51c67f4 -> 4b189c1\r\n\r\n(removed the unnecessary recommended amount from the error message as well)\r\n",
      "created_at" : "2017-01-26T17:07:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9615#issuecomment-275446838",
      "id" : 275446838,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9615",
      "updated_at" : "2017-01-26T17:10:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/275446838",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4360349?v=3",
         "events_url" : "https://api.github.com/users/morcos/events{/privacy}",
         "followers_url" : "https://api.github.com/users/morcos/followers",
         "following_url" : "https://api.github.com/users/morcos/following{/other_user}",
         "gists_url" : "https://api.github.com/users/morcos/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/morcos",
         "id" : 4360349,
         "login" : "morcos",
         "organizations_url" : "https://api.github.com/users/morcos/orgs",
         "received_events_url" : "https://api.github.com/users/morcos/received_events",
         "repos_url" : "https://api.github.com/users/morcos/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/morcos/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/morcos/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/morcos"
      }
   },
   {
      "body" : "utACK 4b189c13401bcd350c05cf8194beaeb3d18b3ebc",
      "created_at" : "2017-01-26T17:12:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9615#issuecomment-275447997",
      "id" : 275447997,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9615",
      "updated_at" : "2017-01-26T17:12:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/275447997",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "utACK 4b189c1",
      "created_at" : "2017-01-26T21:31:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9615#issuecomment-275520218",
      "id" : 275520218,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9615",
      "updated_at" : "2017-01-26T21:31:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/275520218",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7463573?v=3",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   }
]
