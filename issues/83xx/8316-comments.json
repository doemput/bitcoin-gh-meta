[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/8316#discussion_r70236751"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/8316"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/70236751"
         }
      },
      "body" : "nit: No need for a `;`",
      "commit_id" : "fa4a8cd840599af83c4481db638b2bcfcf93cbc9",
      "created_at" : "2016-07-11T10:49:27Z",
      "diff_hunk" : "@@ -23,7 +23,7 @@ def allInvsMatch(invsExpected, testnode):\n             if (sorted(invsExpected) == sorted(testnode.txinvs)):\n                 return True;\n         time.sleep(1)\n-    return False;\n+    raise AssertionError(\"Did not match; Timed out\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8316#discussion_r70236751",
      "id" : 70236751,
      "original_commit_id" : "fac1bb352c1c7c5a5cf83fd65df199623548df85",
      "original_position" : 5,
      "path" : "qa/rpc-tests/p2p-feefilter.py",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/8316",
      "updated_at" : "2016-07-11T11:42:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/70236751",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/8316#discussion_r70242845"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/8316"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/70242845"
         }
      },
      "body" : "Changed to `.`.",
      "commit_id" : "fa4a8cd840599af83c4481db638b2bcfcf93cbc9",
      "created_at" : "2016-07-11T11:45:18Z",
      "diff_hunk" : "@@ -23,7 +23,7 @@ def allInvsMatch(invsExpected, testnode):\n             if (sorted(invsExpected) == sorted(testnode.txinvs)):\n                 return True;\n         time.sleep(1)\n-    return False;\n+    raise AssertionError(\"Did not match; Timed out\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8316#discussion_r70242845",
      "id" : 70242845,
      "original_commit_id" : "fac1bb352c1c7c5a5cf83fd65df199623548df85",
      "original_position" : 5,
      "path" : "qa/rpc-tests/p2p-feefilter.py",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/8316",
      "updated_at" : "2016-07-11T11:45:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/70242845",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=3",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "body" : "This fixes the following travis failure:\r\n\r\n```py\r\n  File \"/home/travis/build/bitcoin/bitcoin/build/../qa/rpc-tests/p2p-feefilter.py\", line 101, in run_test\r\n    assert(allInvsMatch(txids, test_node))",
      "created_at" : "2016-07-16T21:06:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8316#issuecomment-233151058",
      "id" : 233151058,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8316",
      "updated_at" : "2016-07-16T21:06:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/233151058",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=3",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "body" : "Thanks for trying to fix this.  This might be good enough, but it occurred to me that in the situation where clearing the mempool is preventing the test failure we're trying to fix, it's really just covering up the fact that the test isn't exercising the code path we want to test.  \r\n\r\nThe current test failures occur when the time from mempool-acceptance-to-relay exceeds 10 seconds (which it sometimes does, as the delay is random).  So if we clear the mempool after 10 seconds to avoid this scenario, then we're not really exercising the feefilter logic in that situation.\r\n\r\nSo I think a more robust fix would be forget about clearing the mempool, and instead send a single transaction that should be received regardless of filter, and syncing with the receipt of that inv.  I think we only need to do this in the test case where we call `allInvsMatch` and expect nothing (at line 96).  We could then also get rid of the `time.sleep(10)` at line 95.\r\n\r\nping @morcos \r\n\r\n",
      "created_at" : "2016-07-22T20:25:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8316#issuecomment-234647094",
      "id" : 234647094,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8316",
      "updated_at" : "2016-07-22T20:25:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/234647094",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7463573?v=3",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   }
]
