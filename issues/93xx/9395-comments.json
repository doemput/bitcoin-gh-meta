[
   {
      "body" : "Tests?",
      "created_at" : "2016-12-21T01:41:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9395#issuecomment-268410842",
      "id" : 268410842,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9395",
      "updated_at" : "2016-12-21T01:41:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/268410842",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/413395?v=3",
         "events_url" : "https://api.github.com/users/dcousens/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dcousens/followers",
         "following_url" : "https://api.github.com/users/dcousens/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dcousens/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dcousens",
         "id" : 413395,
         "login" : "dcousens",
         "organizations_url" : "https://api.github.com/users/dcousens/orgs",
         "received_events_url" : "https://api.github.com/users/dcousens/received_events",
         "repos_url" : "https://api.github.com/users/dcousens/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dcousens/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dcousens/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dcousens"
      }
   },
   {
      "body" : "As the `CTransaction::CTransaction(CMutableTransaction&& x)` constructor that destroys the passed-in object does not exist in 0.13, the backport is actually fine. But we do need to fix this in master.",
      "created_at" : "2016-12-21T01:50:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9395#issuecomment-268412096",
      "id" : 268412096,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9395",
      "updated_at" : "2016-12-21T01:50:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/268412096",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "@dcousens ok test added\r\n",
      "created_at" : "2016-12-21T02:57:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9395#issuecomment-268421379",
      "id" : 268421379,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9395",
      "updated_at" : "2016-12-21T02:57:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/268421379",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4360349?v=3",
         "events_url" : "https://api.github.com/users/morcos/events{/privacy}",
         "followers_url" : "https://api.github.com/users/morcos/followers",
         "following_url" : "https://api.github.com/users/morcos/following{/other_user}",
         "gists_url" : "https://api.github.com/users/morcos/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/morcos",
         "id" : 4360349,
         "login" : "morcos",
         "organizations_url" : "https://api.github.com/users/morcos/orgs",
         "received_events_url" : "https://api.github.com/users/morcos/received_events",
         "repos_url" : "https://api.github.com/users/morcos/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/morcos/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/morcos/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/morcos"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/9395#discussion_r93367187"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9395"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/93367187"
         }
      },
      "body" : "unused value?",
      "commit_id" : "ffeb1956cb4eec7be205c994d5cd89bb98283e9e",
      "created_at" : "2016-12-21T03:02:38Z",
      "diff_hunk" : "@@ -363,11 +363,41 @@ def run_test (self):\n         self.nodes[0].generate(1)\n \n         # Make a long chain of unconfirmed payments without hitting mempool limit\n+        # Each tx we make leaves only one output of change on a chain 1 longer\n+        # Since the amount to send is always much less than the outputs, we only ever need one output\n+        # So we should be able to generate exactly chainlimit txs for each original output\n+        sending_addr = self.nodes[1].getnewaddress()\n         txid_list = []\n         for i in range(chainlimit*2):\n-            txid_list.append(self.nodes[0].sendtoaddress(chain_addrs[0], Decimal('0.0001')))\n+            txid_list.append(self.nodes[0].sendtoaddress(sending_addr, Decimal('0.0001')))\n         assert_equal(self.nodes[0].getmempoolinfo()['size'], chainlimit*2)\n         assert_equal(len(txid_list), chainlimit*2)\n \n+        # Without walletrejectlongchains, we will still generate a txid\n+        # The tx will be stored in the wallet but not accepted to the mempool\n+        extra_txid = self.nodes[0].sendtoaddress(sending_addr, Decimal('0.0001'))\n+        assert(extra_txid not in self.nodes[0].getrawmempool())\n+        assert(extra_txid in [tx[\"txid\"] for tx in self.nodes[0].listtransactions()])\n+        self.nodes[0].abandontransaction(extra_txid)\n+        total_txs = len(self.nodes[0].listtransactions(\"*\",99999))\n+\n+        # Try with walletrejectlongchains\n+        # Double chain limit but require combining inputs, so we pass SelectCoinsMinConf\n+        stop_node(self.nodes[0],0)\n+        self.nodes[0] = start_node(0, self.options.tmpdir, [\"-walletrejectlongchains\", \"-limitancestorcount=\"+str(2*chainlimit)])\n+\n+        # wait for loadmempool\n+        timeout = 10",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9395#discussion_r93367187",
      "id" : 93367187,
      "original_commit_id" : "6c174aee99cad7ff07e42dc933fb8f513e985f62",
      "original_position" : 29,
      "path" : "qa/rpc-tests/wallet.py",
      "position" : 29,
      "pull_request_review_id" : 13892476,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9395",
      "updated_at" : "2017-01-04T18:29:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/93367187",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=3",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "body" : "Awesome, thanks @morcos ",
      "created_at" : "2016-12-21T03:04:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9395#issuecomment-268422579",
      "id" : 268422579,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9395",
      "updated_at" : "2016-12-21T03:04:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/268422579",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/413395?v=3",
         "events_url" : "https://api.github.com/users/dcousens/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dcousens/followers",
         "following_url" : "https://api.github.com/users/dcousens/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dcousens/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dcousens",
         "id" : 413395,
         "login" : "dcousens",
         "organizations_url" : "https://api.github.com/users/dcousens/orgs",
         "received_events_url" : "https://api.github.com/users/dcousens/received_events",
         "repos_url" : "https://api.github.com/users/dcousens/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dcousens/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dcousens/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dcousens"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/9395#discussion_r93367591"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9395"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/93367591"
         }
      },
      "body" : "oops thanks.. adding the update of timeout",
      "commit_id" : "ffeb1956cb4eec7be205c994d5cd89bb98283e9e",
      "created_at" : "2016-12-21T03:09:29Z",
      "diff_hunk" : "@@ -363,11 +363,41 @@ def run_test (self):\n         self.nodes[0].generate(1)\n \n         # Make a long chain of unconfirmed payments without hitting mempool limit\n+        # Each tx we make leaves only one output of change on a chain 1 longer\n+        # Since the amount to send is always much less than the outputs, we only ever need one output\n+        # So we should be able to generate exactly chainlimit txs for each original output\n+        sending_addr = self.nodes[1].getnewaddress()\n         txid_list = []\n         for i in range(chainlimit*2):\n-            txid_list.append(self.nodes[0].sendtoaddress(chain_addrs[0], Decimal('0.0001')))\n+            txid_list.append(self.nodes[0].sendtoaddress(sending_addr, Decimal('0.0001')))\n         assert_equal(self.nodes[0].getmempoolinfo()['size'], chainlimit*2)\n         assert_equal(len(txid_list), chainlimit*2)\n \n+        # Without walletrejectlongchains, we will still generate a txid\n+        # The tx will be stored in the wallet but not accepted to the mempool\n+        extra_txid = self.nodes[0].sendtoaddress(sending_addr, Decimal('0.0001'))\n+        assert(extra_txid not in self.nodes[0].getrawmempool())\n+        assert(extra_txid in [tx[\"txid\"] for tx in self.nodes[0].listtransactions()])\n+        self.nodes[0].abandontransaction(extra_txid)\n+        total_txs = len(self.nodes[0].listtransactions(\"*\",99999))\n+\n+        # Try with walletrejectlongchains\n+        # Double chain limit but require combining inputs, so we pass SelectCoinsMinConf\n+        stop_node(self.nodes[0],0)\n+        self.nodes[0] = start_node(0, self.options.tmpdir, [\"-walletrejectlongchains\", \"-limitancestorcount=\"+str(2*chainlimit)])\n+\n+        # wait for loadmempool\n+        timeout = 10",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9395#discussion_r93367591",
      "id" : 93367591,
      "original_commit_id" : "6c174aee99cad7ff07e42dc933fb8f513e985f62",
      "original_position" : 29,
      "path" : "qa/rpc-tests/wallet.py",
      "position" : 29,
      "pull_request_review_id" : 13892941,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9395",
      "updated_at" : "2017-01-04T18:29:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/93367591",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4360349?v=3",
         "events_url" : "https://api.github.com/users/morcos/events{/privacy}",
         "followers_url" : "https://api.github.com/users/morcos/followers",
         "following_url" : "https://api.github.com/users/morcos/following{/other_user}",
         "gists_url" : "https://api.github.com/users/morcos/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/morcos",
         "id" : 4360349,
         "login" : "morcos",
         "organizations_url" : "https://api.github.com/users/morcos/orgs",
         "received_events_url" : "https://api.github.com/users/morcos/received_events",
         "repos_url" : "https://api.github.com/users/morcos/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/morcos/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/morcos/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/morcos"
      }
   },
   {
      "body" : "utACK",
      "created_at" : "2016-12-21T09:10:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9395#issuecomment-268472897",
      "id" : 268472897,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9395",
      "updated_at" : "2016-12-21T09:10:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/268472897",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "utACK 2f882f8",
      "created_at" : "2016-12-21T12:37:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9395#issuecomment-268513250",
      "id" : 268513250,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9395",
      "updated_at" : "2016-12-21T12:37:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/268513250",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=3",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "body" : "ACK-before-it-was-conflicted needs rebase.",
      "created_at" : "2017-01-04T15:54:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9395#issuecomment-270405437",
      "id" : 270405437,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9395",
      "updated_at" : "2017-01-04T15:54:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/270405437",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "This was fixed in #9283, but still is useful to add the test, so kept that commit . (and changed PR title)\r\n\r\n",
      "created_at" : "2017-01-04T18:30:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9395#issuecomment-270447590",
      "id" : 270447590,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9395",
      "updated_at" : "2017-01-04T18:30:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/270447590",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4360349?v=3",
         "events_url" : "https://api.github.com/users/morcos/events{/privacy}",
         "followers_url" : "https://api.github.com/users/morcos/followers",
         "following_url" : "https://api.github.com/users/morcos/following{/other_user}",
         "gists_url" : "https://api.github.com/users/morcos/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/morcos",
         "id" : 4360349,
         "login" : "morcos",
         "organizations_url" : "https://api.github.com/users/morcos/orgs",
         "received_events_url" : "https://api.github.com/users/morcos/received_events",
         "repos_url" : "https://api.github.com/users/morcos/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/morcos/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/morcos/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/morcos"
      }
   },
   {
      "body" : "re-ACK ffeb1956cb4eec7be205c994d5cd89bb98283e9e",
      "created_at" : "2017-01-04T19:15:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9395#issuecomment-270459818",
      "id" : 270459818,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9395",
      "updated_at" : "2017-01-04T19:15:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/270459818",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=3",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   }
]
