[
   {
      "body" : "ACK, I think it's a good idea to build the transactions in-place instead of hardcoding them.",
      "created_at" : "2015-09-21T11:57:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6700#issuecomment-141951405",
      "id" : 141951405,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6700",
      "updated_at" : "2015-09-21T11:57:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/141951405",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "@laanwj could we use a JSON format instead?\r\n\r\nRelying on the test creator to intricately build a transaction each time can be more error prone then just adapting a human-readable data format to what is needed for the test case.",
      "created_at" : "2015-09-22T01:43:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6700#issuecomment-142156812",
      "id" : 142156812,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6700",
      "updated_at" : "2015-09-22T01:44:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/142156812",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/413395?v=3",
         "events_url" : "https://api.github.com/users/dcousens/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dcousens/followers",
         "following_url" : "https://api.github.com/users/dcousens/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dcousens/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dcousens",
         "id" : 413395,
         "login" : "dcousens",
         "organizations_url" : "https://api.github.com/users/dcousens/orgs",
         "received_events_url" : "https://api.github.com/users/dcousens/received_events",
         "repos_url" : "https://api.github.com/users/dcousens/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dcousens/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dcousens/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dcousens"
      }
   },
   {
      "body" : "@dcousens Error-prone in what sense? Remember the purpose here is to find errors. :)",
      "created_at" : "2015-09-22T02:00:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6700#issuecomment-142158896",
      "id" : 142158896,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6700",
      "updated_at" : "2015-09-22T02:00:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/142158896",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "@luke-jr from my own experience in writing tests for https://github.com/bitcoinjs/bitcoinjs-lib,  the most common source of regressions / uncaught errors was actually in the test being poorly written, or a simple syntax error causing something to be missed.\r\nThis may have been symptomatic of how wonderful Javascript is as a language.\r\n\r\nAdopting a data-driven approach for us meant we only had to validate one test function that built the test data, and then validated it, from a human readable data format.\r\nIn our case, some of that data can be seen [here](https://github.com/bitcoinjs/bitcoinjs-lib/blob/master/test/fixtures/transaction.json).\r\n\r\nThe serialized transaction in its hex form is included for a byte-for-byte comparison, but it should be evident that the test data is verbose enough that you can **easily read** and add test  fixtures.",
      "created_at" : "2015-09-22T03:29:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6700#issuecomment-142170080",
      "id" : 142170080,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6700",
      "updated_at" : "2015-09-22T03:34:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/142170080",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/413395?v=3",
         "events_url" : "https://api.github.com/users/dcousens/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dcousens/followers",
         "following_url" : "https://api.github.com/users/dcousens/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dcousens/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dcousens",
         "id" : 413395,
         "login" : "dcousens",
         "organizations_url" : "https://api.github.com/users/dcousens/orgs",
         "received_events_url" : "https://api.github.com/users/dcousens/received_events",
         "repos_url" : "https://api.github.com/users/dcousens/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dcousens/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dcousens/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dcousens"
      }
   },
   {
      "body" : "In general I'm in favor of data-driven tests, as it alllows comparing between implementations.\r\n\r\nBut there is a good point that tests should not be too fragile, they should only break when something is wrong, so they should test what matters, not the e.g. an exact sequence of steps if only the outcome is relevant.\r\n\r\nIn the case of bloom filtering the goal is to test bloom filtering. Not transaction serialization/deserialization. If the transaction format changes (e.g. as in elements, or an altcoin), this test should ideally not break.\r\n\r\nI'm not entirely convinced that data-driven tests will add something here.",
      "created_at" : "2015-09-22T09:45:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6700#issuecomment-142229560",
      "id" : 142229560,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6700",
      "updated_at" : "2015-09-22T09:45:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/142229560",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "@laanwj the alternative of in-lining all the TX construction code seems worse IMHO.  Why not break it out to a JSON file to keep the tests streamline?\r\n(I may be underestimating how 'streamline' this will be for C++ however)",
      "created_at" : "2015-10-22T08:11:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6700#issuecomment-150140082",
      "id" : 150140082,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6700",
      "updated_at" : "2015-10-22T08:11:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/150140082",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/413395?v=3",
         "events_url" : "https://api.github.com/users/dcousens/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dcousens/followers",
         "following_url" : "https://api.github.com/users/dcousens/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dcousens/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dcousens",
         "id" : 413395,
         "login" : "dcousens",
         "organizations_url" : "https://api.github.com/users/dcousens/orgs",
         "received_events_url" : "https://api.github.com/users/dcousens/received_events",
         "repos_url" : "https://api.github.com/users/dcousens/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dcousens/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dcousens/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dcousens"
      }
   },
   {
      "body" : "If this is wanted, then any reason not to merge?",
      "created_at" : "2015-11-24T03:26:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6700#issuecomment-159140292",
      "id" : 159140292,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6700",
      "updated_at" : "2015-11-24T03:26:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/159140292",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/413395?v=3",
         "events_url" : "https://api.github.com/users/dcousens/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dcousens/followers",
         "following_url" : "https://api.github.com/users/dcousens/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dcousens/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dcousens",
         "id" : 413395,
         "login" : "dcousens",
         "organizations_url" : "https://api.github.com/users/dcousens/orgs",
         "received_events_url" : "https://api.github.com/users/dcousens/received_events",
         "repos_url" : "https://api.github.com/users/dcousens/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dcousens/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dcousens/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dcousens"
      }
   },
   {
      "body" : "I don't feel strongly enough about it to merge it. Certainly with just my ACK. Seems at least you have some concerns with it.\r\n\r\nNeeds input from different people.\r\n",
      "created_at" : "2015-11-24T09:37:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6700#issuecomment-159208315",
      "id" : 159208315,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6700",
      "updated_at" : "2015-11-24T09:37:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/159208315",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "@laanwj my concern is this makes it more difficult to port these tests to other libraries based on the serialized transactions alone.\r\nBut it does make the tests more transparent as to what they might actually be testing.\r\n",
      "created_at" : "2015-11-25T03:06:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6700#issuecomment-159474376",
      "id" : 159474376,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6700",
      "updated_at" : "2015-11-25T03:06:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/159474376",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/413395?v=3",
         "events_url" : "https://api.github.com/users/dcousens/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dcousens/followers",
         "following_url" : "https://api.github.com/users/dcousens/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dcousens/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dcousens",
         "id" : 413395,
         "login" : "dcousens",
         "organizations_url" : "https://api.github.com/users/dcousens/orgs",
         "received_events_url" : "https://api.github.com/users/dcousens/received_events",
         "repos_url" : "https://api.github.com/users/dcousens/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dcousens/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dcousens/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dcousens"
      }
   },
   {
      "body" : "@dcousens I don't think it makes these any more difficult than any other tests we already have?",
      "created_at" : "2016-01-17T18:51:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6700#issuecomment-172364593",
      "id" : 172364593,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6700",
      "updated_at" : "2016-01-17T18:51:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/172364593",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "@luke-jr well,  the serialized JSON fixtures are usually as simple as a copy paste.  These fixtures would mean I'd have to compile the code and generate the fixtures my self.",
      "created_at" : "2016-01-18T01:11:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6700#issuecomment-172403233",
      "id" : 172403233,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6700",
      "updated_at" : "2016-01-18T01:11:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/172403233",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/413395?v=3",
         "events_url" : "https://api.github.com/users/dcousens/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dcousens/followers",
         "following_url" : "https://api.github.com/users/dcousens/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dcousens/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dcousens",
         "id" : 413395,
         "login" : "dcousens",
         "organizations_url" : "https://api.github.com/users/dcousens/orgs",
         "received_events_url" : "https://api.github.com/users/dcousens/received_events",
         "repos_url" : "https://api.github.com/users/dcousens/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dcousens/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dcousens/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dcousens"
      }
   },
   {
      "body" : "I'm comparing it with the *other* tests, not the current version of *this* test...",
      "created_at" : "2016-01-18T01:58:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6700#issuecomment-172406870",
      "id" : 172406870,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6700",
      "updated_at" : "2016-01-18T01:58:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/172406870",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "It doesn't seem there is strong enough consensus to make this change, so going to close this.",
      "created_at" : "2016-01-20T12:16:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6700#issuecomment-173186377",
      "id" : 173186377,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6700",
      "updated_at" : "2016-01-20T12:16:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/173186377",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   }
]
