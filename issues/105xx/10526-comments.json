[
   {
      "body" : "utACK https://github.com/bitcoin/bitcoin/pull/10526/commits/fe84334135afa79845d18e472b71536cca72fd0d",
      "created_at" : "2017-06-05T12:47:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10526#issuecomment-306178965",
      "id" : 306178965,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10526",
      "updated_at" : "2017-06-05T12:47:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/306178965",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Concept ACK",
      "created_at" : "2017-06-06T08:26:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10526#issuecomment-306417328",
      "id" : 306417328,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10526",
      "updated_at" : "2017-06-06T08:26:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/306417328",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "Original chainstate (up to height=430234).\r\n```\r\n2.4G    testbtc.olddb/chainstate\r\n```\r\nAfter converting using master (and shutting down immediately):\r\n```\r\n2017-06-07 12:54:30 Upgrading database...\r\n2017-06-07 13:09:39 LoadBlockIndexDB: last block file = 628\r\n\r\n4.5G    chainstate\r\n```\r\nConverting using this pull (and shutting down immediately):\r\n```\r\n2017-06-07 12:29:37 Upgrading database...\r\n2017-06-07 12:41:50 LoadBlockIndexDB: last block file = 628\r\n\r\n4.4G    testbtc.newdb/chainstate\r\n```\r\nIn this test, it doesn't seem to make a significant difference.",
      "created_at" : "2017-06-07T13:12:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10526#issuecomment-306790220",
      "id" : 306790220,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10526",
      "updated_at" : "2017-06-07T13:12:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/306790220",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "I wonder what to do here. Without any forced compaction, it's likely that many nodes will remain with a database that still contains table files for the old rows for an extended period of time.",
      "created_at" : "2017-07-17T07:54:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10526#issuecomment-315688560",
      "id" : 315688560,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10526",
      "updated_at" : "2017-07-17T07:54:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/315688560",
      "user" : {
         "avatar_url" : "https://avatars5.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Looks like this needed a 15 tag... If it's not too late let's call it a bugfix, tag it 15, and try to get it in this week.\n\nOn July 17, 2017 3:54:35 AM EDT, Pieter Wuille <notifications@github.com> wrote:\n>I wonder what to do here. Without any forced compaction, it's likely\n>that many nodes will remain with a database that still contains table\n>files for the old rows for an extended period of time.\n",
      "created_at" : "2017-07-17T13:25:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10526#issuecomment-315754585",
      "id" : 315754585,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10526",
      "updated_at" : "2017-07-17T13:25:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/315754585",
      "user" : {
         "avatar_url" : "https://avatars4.githubusercontent.com/u/649246?v=4",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "Also, needs rebase.",
      "created_at" : "2017-07-17T14:18:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10526#issuecomment-315769366",
      "id" : 315769366,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10526",
      "updated_at" : "2017-07-17T14:18:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/315769366",
      "user" : {
         "avatar_url" : "https://avatars4.githubusercontent.com/u/649246?v=4",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "After converting up to block height=430234 (same dataset as last time), hardwiring shutdown immediately after the block database processing.\r\n\r\nTested with rebased version here: https://github.com/laanwj/bitcoin/tree/2017_07_sipa_onthefly\r\n```\r\n2.1G    chainstate/\r\n```\r\nWith master:\r\n```\r\n4.3G    chainstate/\r\n```\r\nSo it seems the negative result last time was a fluke. utACK.\r\n",
      "created_at" : "2017-07-24T10:06:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10526#issuecomment-317377472",
      "id" : 317377472,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10526",
      "updated_at" : "2017-07-24T10:06:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/317377472",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "I repeated a few times, and it seems that it's like a coin toss. Sometimes it ends up as 4.4G, sometimes as 2.1G. \r\nWhen the former, *every time* after running bitcoind again, even terminating immediately after chainstate processing, it was at 2.1G after shutting down.\r\nIt might be that a cleanup is re-triggered when re-opening the database, or when closing it.",
      "created_at" : "2017-07-24T12:29:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10526#issuecomment-317407205",
      "id" : 317407205,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10526",
      "updated_at" : "2017-07-24T12:29:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/317407205",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Rebased. I've changed the final compact request to be for the entire per-tx range of keys, rather than just the last group updated. Maybe that triggers compaction sooner. Or not.",
      "created_at" : "2017-07-24T22:03:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10526#issuecomment-317568197",
      "id" : 317568197,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10526",
      "updated_at" : "2017-07-25T00:38:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/317568197",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10526#discussion_r129904918"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10526"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/129904918"
         }
      },
      "body" : "Is this meant to be shadowed by the key defined 7 lines down?",
      "commit_id" : "efeb273305e3e4d2c42e1e153de83c1cb6f0a28c",
      "created_at" : "2017-07-27T17:25:05Z",
      "diff_hunk" : "@@ -375,6 +375,8 @@ bool CCoinsViewDB::Upgrade() {\n     CDBBatch batch(db);\n     uiInterface.SetProgressBreakAction(StartShutdown);\n     int reportDone = 0;\n+    std::pair<unsigned char, uint256> key;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10526#discussion_r129904918",
      "id" : 129904918,
      "original_commit_id" : "e9cccbf336af86ea7cd671b3bb1d48f6ad5de54b",
      "original_position" : 4,
      "path" : "src/txdb.cpp",
      "position" : 4,
      "pull_request_review_id" : 52727005,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10526",
      "updated_at" : "2017-07-28T04:07:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/129904918",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/4360349?v=4",
         "events_url" : "https://api.github.com/users/morcos/events{/privacy}",
         "followers_url" : "https://api.github.com/users/morcos/followers",
         "following_url" : "https://api.github.com/users/morcos/following{/other_user}",
         "gists_url" : "https://api.github.com/users/morcos/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/morcos",
         "id" : 4360349,
         "login" : "morcos",
         "organizations_url" : "https://api.github.com/users/morcos/orgs",
         "received_events_url" : "https://api.github.com/users/morcos/received_events",
         "repos_url" : "https://api.github.com/users/morcos/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/morcos/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/morcos/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/morcos"
      }
   },
   {
      "body" : "If someone was running with master before this commit, how does their database ever get compacted?\r\n",
      "created_at" : "2017-07-27T17:52:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10526#issuecomment-318437325",
      "id" : 318437325,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10526",
      "updated_at" : "2017-07-27T17:52:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/318437325",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/4360349?v=4",
         "events_url" : "https://api.github.com/users/morcos/events{/privacy}",
         "followers_url" : "https://api.github.com/users/morcos/followers",
         "following_url" : "https://api.github.com/users/morcos/following{/other_user}",
         "gists_url" : "https://api.github.com/users/morcos/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/morcos",
         "id" : 4360349,
         "login" : "morcos",
         "organizations_url" : "https://api.github.com/users/morcos/orgs",
         "received_events_url" : "https://api.github.com/users/morcos/received_events",
         "repos_url" : "https://api.github.com/users/morcos/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/morcos/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/morcos/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/morcos"
      }
   },
   {
      "body" : "@morcos leveldb does automatic background compaction.",
      "created_at" : "2017-07-27T17:56:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10526#issuecomment-318438319",
      "id" : 318438319,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10526",
      "updated_at" : "2017-07-27T17:56:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/318438319",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/649246?v=4",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : ">@morcos leveldb does automatic background compaction.\r\n\r\nwhen?  I have nodes running for a week that have 5.8G chainstate despite recent repeated stopping and starting.\r\n",
      "created_at" : "2017-07-27T18:22:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10526#issuecomment-318445541",
      "id" : 318445541,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10526",
      "updated_at" : "2017-07-27T18:22:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/318445541",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/4360349?v=4",
         "events_url" : "https://api.github.com/users/morcos/events{/privacy}",
         "followers_url" : "https://api.github.com/users/morcos/followers",
         "following_url" : "https://api.github.com/users/morcos/following{/other_user}",
         "gists_url" : "https://api.github.com/users/morcos/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/morcos",
         "id" : 4360349,
         "login" : "morcos",
         "organizations_url" : "https://api.github.com/users/morcos/orgs",
         "received_events_url" : "https://api.github.com/users/morcos/received_events",
         "repos_url" : "https://api.github.com/users/morcos/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/morcos/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/morcos/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/morcos"
      }
   },
   {
      "body" : "@morcos  Yea, I have one two weeks now.   Perhaps we should also have some general compaction thing to clean up existing databases too....",
      "created_at" : "2017-07-27T19:03:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10526#issuecomment-318456549",
      "id" : 318456549,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10526",
      "updated_at" : "2017-07-27T19:03:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/318456549",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/858454?v=4",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "I got some strange testing results...current master:\r\n * Convert time 26:30, final chainstate size 3.5G\r\n * Convert time 28:05, final chainstate size 3.5G\r\n\r\nThis PR:\r\n * Convert time: 16:51, final chainstate size 5.9G (down to 2.7 immediately upon restart)\r\n * Convert time: 16:11, final chainstate size 5.9G (down to 2.7 immediately upon restart)\r\n\r\nEither way, I dont care about the excess usage if its faster and gets cleared upon restart (might get cleared in the background, too, i just made bitcoind do a clean exit right after chain state gets loaded).",
      "created_at" : "2017-07-27T19:05:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10526#issuecomment-318457112",
      "id" : 318457112,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10526",
      "updated_at" : "2017-07-27T19:05:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/318457112",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/649246?v=4",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "@morcos hmm, I guess its just done when tables fill up, it should /eventually/ happen, but may take a long time, I suppose.",
      "created_at" : "2017-07-27T19:05:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10526#issuecomment-318457298",
      "id" : 318457298,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10526",
      "updated_at" : "2017-07-27T19:05:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/318457298",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/649246?v=4",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "@TheBlueMatt wow, that's some really long convert times\r\nMy convert times with or without this PR were on the order of between 4 mins and 7 mins with some variation.",
      "created_at" : "2017-07-28T02:34:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10526#issuecomment-318540082",
      "id" : 318540082,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10526",
      "updated_at" : "2017-07-28T02:34:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/318540082",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/4360349?v=4",
         "events_url" : "https://api.github.com/users/morcos/events{/privacy}",
         "followers_url" : "https://api.github.com/users/morcos/followers",
         "following_url" : "https://api.github.com/users/morcos/following{/other_user}",
         "gists_url" : "https://api.github.com/users/morcos/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/morcos",
         "id" : 4360349,
         "login" : "morcos",
         "organizations_url" : "https://api.github.com/users/morcos/orgs",
         "received_events_url" : "https://api.github.com/users/morcos/received_events",
         "repos_url" : "https://api.github.com/users/morcos/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/morcos/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/morcos/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/morcos"
      }
   },
   {
      "body" : "Heh, thats what putting a database on spinning rust on a CoW filesystem\ndoes to you....I've seen it much faster under other conditions.\n\nOn 07/27/17 22:34, Alex Morcos wrote:\n> @TheBlueMatt <https://github.com/thebluematt> wow, that's some really\n> long convert times\n> My convert times with or without this PR were on the order of between 4\n> mins and 7 mins with some variation.\n> \n> Ã¢ÂÂ\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/bitcoin/bitcoin/pull/10526#issuecomment-318540082>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AAnoHj14tGPkhrDI1xEjbwZ03P1iikGrks5sSUjJgaJpZM4NvdNV>.\n> \n",
      "created_at" : "2017-07-28T02:36:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10526#issuecomment-318540395",
      "id" : 318540395,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10526",
      "updated_at" : "2017-07-28T02:36:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/318540395",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/649246?v=4",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10526#discussion_r130009071"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10526"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/130009071"
         }
      },
      "body" : "Fixed.",
      "commit_id" : "efeb273305e3e4d2c42e1e153de83c1cb6f0a28c",
      "created_at" : "2017-07-28T04:08:01Z",
      "diff_hunk" : "@@ -375,6 +375,8 @@ bool CCoinsViewDB::Upgrade() {\n     CDBBatch batch(db);\n     uiInterface.SetProgressBreakAction(StartShutdown);\n     int reportDone = 0;\n+    std::pair<unsigned char, uint256> key;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10526#discussion_r130009071",
      "id" : 130009071,
      "original_commit_id" : "e9cccbf336af86ea7cd671b3bb1d48f6ad5de54b",
      "original_position" : 4,
      "path" : "src/txdb.cpp",
      "position" : 4,
      "pull_request_review_id" : 52840281,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10526",
      "updated_at" : "2017-07-28T04:08:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/130009071",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "utACK efeb273305e3e4d2c42e1e153de83c1cb6f0a28c, I tested an earlier version of the patch which should be equivalent, however.",
      "created_at" : "2017-07-30T13:52:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10526#issuecomment-318903191",
      "id" : 318903191,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10526",
      "updated_at" : "2017-07-30T13:52:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/318903191",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/649246?v=4",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   }
]
