[
   {
      "body" : "Meh.\r\nThose code parts are already tested in bumpfee / keypool / fundrawtransaction / wallet-dump.\r\nIMO we don't need another test for this.\r\n\r\nOr where are the improvements?",
      "created_at" : "2017-06-08T06:22:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10551#issuecomment-307010245",
      "id" : 307010245,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10551",
      "updated_at" : "2017-06-08T06:22:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/307010245",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "The improvements are that walletpassphrasechange is now tested and that these functionality are explicitly being tested. The usage of these RPCs in other tests are more for doing stuff with testing other stuff rather than actually testing the behavior of these RPCs themselves.",
      "created_at" : "2017-06-08T07:04:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10551#issuecomment-307017754",
      "id" : 307017754,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10551",
      "updated_at" : "2017-06-08T07:04:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/307017754",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/3782274?v=3",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "body" : "I would recommend to add the missing test to an existing wallet test and maybe rename the test file (so the name may make more sense).\r\nIt's just my opinion, I think we should try to combine tests (if it makes sense) to avoid unnecessary test-bootstraps/runs.",
      "created_at" : "2017-06-08T07:07:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10551#issuecomment-307018378",
      "id" : 307018378,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10551",
      "updated_at" : "2017-06-08T07:07:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/307018378",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10551#discussion_r120917646"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10551"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/120917646"
         }
      },
      "body" : "`os` and `shutil` are imported but not used.",
      "commit_id" : "ec98b78e1e1ce6bd9e6189788f7689aebfbf343c",
      "created_at" : "2017-06-08T15:18:26Z",
      "diff_hunk" : "@@ -0,0 +1,64 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2016 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test Wallet encryption\"\"\"\n+\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import (\n+    assert_equal,\n+    assert_raises_jsonrpc,\n+)\n+import os",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10551#discussion_r120917646",
      "id" : 120917646,
      "original_commit_id" : "3f35a8773727b3909584b87cfc3870e91487509a",
      "original_position" : 12,
      "path" : "test/functional/wallet-encryption.py",
      "position" : null,
      "pull_request_review_id" : 42923266,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10551",
      "updated_at" : "2017-06-08T18:07:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/120917646",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10551#discussion_r120917991"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10551"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/120917991"
         }
      },
      "body" : "nit: prefer [PIP8](https://www.python.org/dev/peps/pep-0008/) import order (std library, followed by 3rd party library, followed by project imports)",
      "commit_id" : "ec98b78e1e1ce6bd9e6189788f7689aebfbf343c",
      "created_at" : "2017-06-08T15:19:39Z",
      "diff_hunk" : "@@ -0,0 +1,64 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2016 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test Wallet encryption\"\"\"\n+",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10551#discussion_r120917991",
      "id" : 120917991,
      "original_commit_id" : "3f35a8773727b3909584b87cfc3870e91487509a",
      "original_position" : 6,
      "path" : "test/functional/wallet-encryption.py",
      "position" : 6,
      "pull_request_review_id" : 42923266,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10551",
      "updated_at" : "2017-06-08T18:07:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/120917991",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10551#discussion_r120918433"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10551"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/120918433"
         }
      },
      "body" : "no space before parens for function parameters please.",
      "commit_id" : "ec98b78e1e1ce6bd9e6189788f7689aebfbf343c",
      "created_at" : "2017-06-08T15:21:15Z",
      "diff_hunk" : "@@ -0,0 +1,64 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2016 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test Wallet encryption\"\"\"\n+\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import (\n+    assert_equal,\n+    assert_raises_jsonrpc,\n+)\n+import os\n+import shutil\n+import time\n+\n+class WalletEncryptionTest(BitcoinTestFramework):\n+\n+    def __init__(self):\n+        super().__init__()\n+        self.setup_clean_chain = True\n+        self.num_nodes = 1\n+\n+    def run_test (self):",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10551#discussion_r120918433",
      "id" : 120918433,
      "original_commit_id" : "3f35a8773727b3909584b87cfc3870e91487509a",
      "original_position" : 23,
      "path" : "test/functional/wallet-encryption.py",
      "position" : null,
      "pull_request_review_id" : 42923266,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10551",
      "updated_at" : "2017-06-08T18:07:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/120918433",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10551#discussion_r120918739"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10551"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/120918739"
         }
      },
      "body" : "I don't think this local variable is needed. You can just use `self.options.tmpdir` directly in the call to `start_node()` below.",
      "commit_id" : "ec98b78e1e1ce6bd9e6189788f7689aebfbf343c",
      "created_at" : "2017-06-08T15:22:10Z",
      "diff_hunk" : "@@ -0,0 +1,64 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2016 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test Wallet encryption\"\"\"\n+\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import (\n+    assert_equal,\n+    assert_raises_jsonrpc,\n+)\n+import os\n+import shutil\n+import time\n+\n+class WalletEncryptionTest(BitcoinTestFramework):\n+\n+    def __init__(self):\n+        super().__init__()\n+        self.setup_clean_chain = True\n+        self.num_nodes = 1\n+\n+    def run_test (self):\n+        tmpdir = self.options.tmpdir",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10551#discussion_r120918739",
      "id" : 120918739,
      "original_commit_id" : "3f35a8773727b3909584b87cfc3870e91487509a",
      "original_position" : 24,
      "path" : "test/functional/wallet-encryption.py",
      "position" : null,
      "pull_request_review_id" : 42923266,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10551",
      "updated_at" : "2017-06-08T18:07:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/120918739",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10551#discussion_r120919323"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10551"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/120919323"
         }
      },
      "body" : "Is it possible to assert that privkey is a legitimate privkey here? You're asserting everything against it further down, but you never assert that privkey is actually a private key. This test would still pass if, for example, `dumpprivkey()` always returns an empty string.",
      "commit_id" : "ec98b78e1e1ce6bd9e6189788f7689aebfbf343c",
      "created_at" : "2017-06-08T15:24:09Z",
      "diff_hunk" : "@@ -0,0 +1,64 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2016 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test Wallet encryption\"\"\"\n+\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import (\n+    assert_equal,\n+    assert_raises_jsonrpc,\n+)\n+import os\n+import shutil\n+import time\n+\n+class WalletEncryptionTest(BitcoinTestFramework):\n+\n+    def __init__(self):\n+        super().__init__()\n+        self.setup_clean_chain = True\n+        self.num_nodes = 1\n+\n+    def run_test (self):\n+        tmpdir = self.options.tmpdir\n+        passphrase = \"WalletPassphrase\"\n+        passphrase2 = \"SecondWalletPassphrase\"\n+        \n+        # Make sure the wallet isn't encrypted first\n+        address = self.nodes[0].getnewaddress()\n+        privkey = self.nodes[0].dumpprivkey(address)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10551#discussion_r120919323",
      "id" : 120919323,
      "original_commit_id" : "3f35a8773727b3909584b87cfc3870e91487509a",
      "original_position" : 30,
      "path" : "test/functional/wallet-encryption.py",
      "position" : null,
      "pull_request_review_id" : 42923266,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10551",
      "updated_at" : "2017-06-08T18:07:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/120919323",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10551#discussion_r120920657"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10551"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/120920657"
         }
      },
      "body" : "This call to `stop_node()` is not needed (and may be dangerous). the encryptwallet RPC causes bitcoind to stop. Really what you need to do here is wait for the bitcoind process to terminate rather than call `stop_node()`. See https://github.com/bitcoin/bitcoin/blob/9c248e39f2807a7f89e555e99cc55cb2de1ad335/test/functional/fundrawtransaction.py#L455 for example.\r\n\r\n`stop_node()` will assert if the bitcoind process no longer exists, so your current code is a bit racy. If the call to encryptwallet causes the node to stop before stop_node() is called, then the test will assert and fail.",
      "commit_id" : "ec98b78e1e1ce6bd9e6189788f7689aebfbf343c",
      "created_at" : "2017-06-08T15:28:46Z",
      "diff_hunk" : "@@ -0,0 +1,64 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2016 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test Wallet encryption\"\"\"\n+\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import (\n+    assert_equal,\n+    assert_raises_jsonrpc,\n+)\n+import os\n+import shutil\n+import time\n+\n+class WalletEncryptionTest(BitcoinTestFramework):\n+\n+    def __init__(self):\n+        super().__init__()\n+        self.setup_clean_chain = True\n+        self.num_nodes = 1\n+\n+    def run_test (self):\n+        tmpdir = self.options.tmpdir\n+        passphrase = \"WalletPassphrase\"\n+        passphrase2 = \"SecondWalletPassphrase\"\n+        \n+        # Make sure the wallet isn't encrypted first\n+        address = self.nodes[0].getnewaddress()\n+        privkey = self.nodes[0].dumpprivkey(address)\n+        \n+        # Encrypt the wallet\n+        self.nodes[0].encryptwallet(passphrase)\n+        self.stop_node(0)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10551#discussion_r120920657",
      "id" : 120920657,
      "original_commit_id" : "3f35a8773727b3909584b87cfc3870e91487509a",
      "original_position" : 34,
      "path" : "test/functional/wallet-encryption.py",
      "position" : null,
      "pull_request_review_id" : 42923266,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10551",
      "updated_at" : "2017-06-08T18:07:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/120920657",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10551#discussion_r120921197"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10551"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/120921197"
         }
      },
      "body" : "Consider reducing the timeout in the call to walletpassphrase to shorten this test. Alternatively, you could use mocktime to avoid waiting for 10 seconds.",
      "commit_id" : "ec98b78e1e1ce6bd9e6189788f7689aebfbf343c",
      "created_at" : "2017-06-08T15:30:49Z",
      "diff_hunk" : "@@ -0,0 +1,64 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2016 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test Wallet encryption\"\"\"\n+\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import (\n+    assert_equal,\n+    assert_raises_jsonrpc,\n+)\n+import os\n+import shutil\n+import time\n+\n+class WalletEncryptionTest(BitcoinTestFramework):\n+\n+    def __init__(self):\n+        super().__init__()\n+        self.setup_clean_chain = True\n+        self.num_nodes = 1\n+\n+    def run_test (self):\n+        tmpdir = self.options.tmpdir\n+        passphrase = \"WalletPassphrase\"\n+        passphrase2 = \"SecondWalletPassphrase\"\n+        \n+        # Make sure the wallet isn't encrypted first\n+        address = self.nodes[0].getnewaddress()\n+        privkey = self.nodes[0].dumpprivkey(address)\n+        \n+        # Encrypt the wallet\n+        self.nodes[0].encryptwallet(passphrase)\n+        self.stop_node(0)\n+        self.nodes[0] = self.start_node(0, tmpdir)\n+        \n+        # Test that the wallet is encrypted\n+        assert_raises_jsonrpc(-13, \"Please enter the wallet passphrase with walletpassphrase first\", self.nodes[0].dumpprivkey, address)\n+        \n+        # Check that walletpassphrase works\n+        self.nodes[0].walletpassphrase(passphrase, 10)\n+        assert_equal(privkey, self.nodes[0].dumpprivkey(address))\n+        \n+        # Check that the timeout is right\n+        time.sleep(10)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10551#discussion_r120921197",
      "id" : 120921197,
      "original_commit_id" : "3f35a8773727b3909584b87cfc3870e91487509a",
      "original_position" : 45,
      "path" : "test/functional/wallet-encryption.py",
      "position" : null,
      "pull_request_review_id" : 42923266,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10551",
      "updated_at" : "2017-06-08T18:07:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/120921197",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "body" : "> Those code parts are already tested in bumpfee / keypool / fundrawtransaction / wallet-dump. IMO we don't need another test for this.\r\n\r\nOnly just saw this comment. I agree with @achow101 that the calls to encryptwallet in those tests is incidental and it makes sense to have directed tests of encrypting/decrypting and changing passphrases. It may make sense to add it to an existing test, but on the other hand I'm not too concerned about adding a new test file.\r\n\r\nThere's a balance here: adding new test cases conceptually separates the different test objectives, and also allows tests to be run in parallel, but test setup/teardown is a non-negligable part of the time taken to run the tests.",
      "created_at" : "2017-06-08T16:04:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10551#issuecomment-307149633",
      "id" : 307149633,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10551",
      "updated_at" : "2017-06-08T16:04:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/307149633",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10551#discussion_r120955573"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10551"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/120955573"
         }
      },
      "body" : "I suppose it would be possible to do a prefix and length check on it. Alternatively a private key could be hard-coded and imported into the wallet. But actually checking that the private key is legitimate, I'm not sure that that can be done.",
      "commit_id" : "ec98b78e1e1ce6bd9e6189788f7689aebfbf343c",
      "created_at" : "2017-06-08T17:53:54Z",
      "diff_hunk" : "@@ -0,0 +1,64 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2016 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test Wallet encryption\"\"\"\n+\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import (\n+    assert_equal,\n+    assert_raises_jsonrpc,\n+)\n+import os\n+import shutil\n+import time\n+\n+class WalletEncryptionTest(BitcoinTestFramework):\n+\n+    def __init__(self):\n+        super().__init__()\n+        self.setup_clean_chain = True\n+        self.num_nodes = 1\n+\n+    def run_test (self):\n+        tmpdir = self.options.tmpdir\n+        passphrase = \"WalletPassphrase\"\n+        passphrase2 = \"SecondWalletPassphrase\"\n+        \n+        # Make sure the wallet isn't encrypted first\n+        address = self.nodes[0].getnewaddress()\n+        privkey = self.nodes[0].dumpprivkey(address)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10551#discussion_r120955573",
      "id" : 120955573,
      "original_commit_id" : "3f35a8773727b3909584b87cfc3870e91487509a",
      "original_position" : 30,
      "path" : "test/functional/wallet-encryption.py",
      "position" : null,
      "pull_request_review_id" : 42965435,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10551",
      "updated_at" : "2017-06-08T18:07:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/120955573",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/3782274?v=3",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10551#discussion_r120955670"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10551"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/120955670"
         }
      },
      "body" : "done",
      "commit_id" : "ec98b78e1e1ce6bd9e6189788f7689aebfbf343c",
      "created_at" : "2017-06-08T17:54:17Z",
      "diff_hunk" : "@@ -0,0 +1,64 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2016 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test Wallet encryption\"\"\"\n+",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10551#discussion_r120955670",
      "id" : 120955670,
      "original_commit_id" : "3f35a8773727b3909584b87cfc3870e91487509a",
      "original_position" : 6,
      "path" : "test/functional/wallet-encryption.py",
      "position" : 6,
      "pull_request_review_id" : 42965535,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10551",
      "updated_at" : "2017-06-08T18:07:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/120955670",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/3782274?v=3",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10551#discussion_r120955689"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10551"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/120955689"
         }
      },
      "body" : "done",
      "commit_id" : "ec98b78e1e1ce6bd9e6189788f7689aebfbf343c",
      "created_at" : "2017-06-08T17:54:23Z",
      "diff_hunk" : "@@ -0,0 +1,64 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2016 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test Wallet encryption\"\"\"\n+\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import (\n+    assert_equal,\n+    assert_raises_jsonrpc,\n+)\n+import os",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10551#discussion_r120955689",
      "id" : 120955689,
      "original_commit_id" : "3f35a8773727b3909584b87cfc3870e91487509a",
      "original_position" : 12,
      "path" : "test/functional/wallet-encryption.py",
      "position" : null,
      "pull_request_review_id" : 42965535,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10551",
      "updated_at" : "2017-06-08T18:07:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/120955689",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/3782274?v=3",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10551#discussion_r120955710"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10551"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/120955710"
         }
      },
      "body" : "done",
      "commit_id" : "ec98b78e1e1ce6bd9e6189788f7689aebfbf343c",
      "created_at" : "2017-06-08T17:54:28Z",
      "diff_hunk" : "@@ -0,0 +1,64 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2016 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test Wallet encryption\"\"\"\n+\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import (\n+    assert_equal,\n+    assert_raises_jsonrpc,\n+)\n+import os\n+import shutil\n+import time\n+\n+class WalletEncryptionTest(BitcoinTestFramework):\n+\n+    def __init__(self):\n+        super().__init__()\n+        self.setup_clean_chain = True\n+        self.num_nodes = 1\n+\n+    def run_test (self):",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10551#discussion_r120955710",
      "id" : 120955710,
      "original_commit_id" : "3f35a8773727b3909584b87cfc3870e91487509a",
      "original_position" : 23,
      "path" : "test/functional/wallet-encryption.py",
      "position" : null,
      "pull_request_review_id" : 42965535,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10551",
      "updated_at" : "2017-06-08T18:07:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/120955710",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/3782274?v=3",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10551#discussion_r120955731"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10551"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/120955731"
         }
      },
      "body" : "done",
      "commit_id" : "ec98b78e1e1ce6bd9e6189788f7689aebfbf343c",
      "created_at" : "2017-06-08T17:54:33Z",
      "diff_hunk" : "@@ -0,0 +1,64 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2016 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test Wallet encryption\"\"\"\n+\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import (\n+    assert_equal,\n+    assert_raises_jsonrpc,\n+)\n+import os\n+import shutil\n+import time\n+\n+class WalletEncryptionTest(BitcoinTestFramework):\n+\n+    def __init__(self):\n+        super().__init__()\n+        self.setup_clean_chain = True\n+        self.num_nodes = 1\n+\n+    def run_test (self):\n+        tmpdir = self.options.tmpdir",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10551#discussion_r120955731",
      "id" : 120955731,
      "original_commit_id" : "3f35a8773727b3909584b87cfc3870e91487509a",
      "original_position" : 24,
      "path" : "test/functional/wallet-encryption.py",
      "position" : null,
      "pull_request_review_id" : 42965535,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10551",
      "updated_at" : "2017-06-08T18:07:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/120955731",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/3782274?v=3",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10551#discussion_r120955765"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10551"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/120955765"
         }
      },
      "body" : "done",
      "commit_id" : "ec98b78e1e1ce6bd9e6189788f7689aebfbf343c",
      "created_at" : "2017-06-08T17:54:43Z",
      "diff_hunk" : "@@ -0,0 +1,64 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2016 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test Wallet encryption\"\"\"\n+\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import (\n+    assert_equal,\n+    assert_raises_jsonrpc,\n+)\n+import os\n+import shutil\n+import time\n+\n+class WalletEncryptionTest(BitcoinTestFramework):\n+\n+    def __init__(self):\n+        super().__init__()\n+        self.setup_clean_chain = True\n+        self.num_nodes = 1\n+\n+    def run_test (self):\n+        tmpdir = self.options.tmpdir\n+        passphrase = \"WalletPassphrase\"\n+        passphrase2 = \"SecondWalletPassphrase\"\n+        \n+        # Make sure the wallet isn't encrypted first\n+        address = self.nodes[0].getnewaddress()\n+        privkey = self.nodes[0].dumpprivkey(address)\n+        \n+        # Encrypt the wallet\n+        self.nodes[0].encryptwallet(passphrase)\n+        self.stop_node(0)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10551#discussion_r120955765",
      "id" : 120955765,
      "original_commit_id" : "3f35a8773727b3909584b87cfc3870e91487509a",
      "original_position" : 34,
      "path" : "test/functional/wallet-encryption.py",
      "position" : null,
      "pull_request_review_id" : 42965535,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10551",
      "updated_at" : "2017-06-08T18:07:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/120955765",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/3782274?v=3",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10551#discussion_r120955777"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10551"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/120955777"
         }
      },
      "body" : "done",
      "commit_id" : "ec98b78e1e1ce6bd9e6189788f7689aebfbf343c",
      "created_at" : "2017-06-08T17:54:48Z",
      "diff_hunk" : "@@ -0,0 +1,64 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2016 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test Wallet encryption\"\"\"\n+\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import (\n+    assert_equal,\n+    assert_raises_jsonrpc,\n+)\n+import os\n+import shutil\n+import time\n+\n+class WalletEncryptionTest(BitcoinTestFramework):\n+\n+    def __init__(self):\n+        super().__init__()\n+        self.setup_clean_chain = True\n+        self.num_nodes = 1\n+\n+    def run_test (self):\n+        tmpdir = self.options.tmpdir\n+        passphrase = \"WalletPassphrase\"\n+        passphrase2 = \"SecondWalletPassphrase\"\n+        \n+        # Make sure the wallet isn't encrypted first\n+        address = self.nodes[0].getnewaddress()\n+        privkey = self.nodes[0].dumpprivkey(address)\n+        \n+        # Encrypt the wallet\n+        self.nodes[0].encryptwallet(passphrase)\n+        self.stop_node(0)\n+        self.nodes[0] = self.start_node(0, tmpdir)\n+        \n+        # Test that the wallet is encrypted\n+        assert_raises_jsonrpc(-13, \"Please enter the wallet passphrase with walletpassphrase first\", self.nodes[0].dumpprivkey, address)\n+        \n+        # Check that walletpassphrase works\n+        self.nodes[0].walletpassphrase(passphrase, 10)\n+        assert_equal(privkey, self.nodes[0].dumpprivkey(address))\n+        \n+        # Check that the timeout is right\n+        time.sleep(10)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10551#discussion_r120955777",
      "id" : 120955777,
      "original_commit_id" : "3f35a8773727b3909584b87cfc3870e91487509a",
      "original_position" : 45,
      "path" : "test/functional/wallet-encryption.py",
      "position" : null,
      "pull_request_review_id" : 42965535,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10551",
      "updated_at" : "2017-06-08T18:07:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/120955777",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/3782274?v=3",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10551#discussion_r120956510"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10551"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/120956510"
         }
      },
      "body" : "Presumably it'd be possible to check that it's a base58 string of the correct length? That should be enough. I think we should at least detect the case where the return value is obviously *not* a private key.",
      "commit_id" : "ec98b78e1e1ce6bd9e6189788f7689aebfbf343c",
      "created_at" : "2017-06-08T17:57:18Z",
      "diff_hunk" : "@@ -0,0 +1,64 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2016 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test Wallet encryption\"\"\"\n+\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import (\n+    assert_equal,\n+    assert_raises_jsonrpc,\n+)\n+import os\n+import shutil\n+import time\n+\n+class WalletEncryptionTest(BitcoinTestFramework):\n+\n+    def __init__(self):\n+        super().__init__()\n+        self.setup_clean_chain = True\n+        self.num_nodes = 1\n+\n+    def run_test (self):\n+        tmpdir = self.options.tmpdir\n+        passphrase = \"WalletPassphrase\"\n+        passphrase2 = \"SecondWalletPassphrase\"\n+        \n+        # Make sure the wallet isn't encrypted first\n+        address = self.nodes[0].getnewaddress()\n+        privkey = self.nodes[0].dumpprivkey(address)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10551#discussion_r120956510",
      "id" : 120956510,
      "original_commit_id" : "3f35a8773727b3909584b87cfc3870e91487509a",
      "original_position" : 30,
      "path" : "test/functional/wallet-encryption.py",
      "position" : null,
      "pull_request_review_id" : 42966402,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10551",
      "updated_at" : "2017-06-08T18:07:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/120956510",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10551#discussion_r120959237"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10551"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/120959237"
         }
      },
      "body" : "I added a prefix check and length check since there isn't actually anything to do a base58 check in the tests.",
      "commit_id" : "ec98b78e1e1ce6bd9e6189788f7689aebfbf343c",
      "created_at" : "2017-06-08T18:08:09Z",
      "diff_hunk" : "@@ -0,0 +1,64 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2016 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test Wallet encryption\"\"\"\n+\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import (\n+    assert_equal,\n+    assert_raises_jsonrpc,\n+)\n+import os\n+import shutil\n+import time\n+\n+class WalletEncryptionTest(BitcoinTestFramework):\n+\n+    def __init__(self):\n+        super().__init__()\n+        self.setup_clean_chain = True\n+        self.num_nodes = 1\n+\n+    def run_test (self):\n+        tmpdir = self.options.tmpdir\n+        passphrase = \"WalletPassphrase\"\n+        passphrase2 = \"SecondWalletPassphrase\"\n+        \n+        # Make sure the wallet isn't encrypted first\n+        address = self.nodes[0].getnewaddress()\n+        privkey = self.nodes[0].dumpprivkey(address)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10551#discussion_r120959237",
      "id" : 120959237,
      "original_commit_id" : "3f35a8773727b3909584b87cfc3870e91487509a",
      "original_position" : 30,
      "path" : "test/functional/wallet-encryption.py",
      "position" : null,
      "pull_request_review_id" : 42969335,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10551",
      "updated_at" : "2017-06-08T18:08:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/120959237",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/3782274?v=3",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "body" : "> There's a balance here: adding new test cases conceptually separates the different test objectives, and also allows tests to be run in parallel, but test setup/teardown is a non-negligable part of the time taken to run the tests.\r\n\r\nFair point.",
      "created_at" : "2017-06-08T18:28:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10551#issuecomment-307188305",
      "id" : 307188305,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10551",
      "updated_at" : "2017-06-08T18:28:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/307188305",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "Looks good to me! Tested ACK ec98b78e1e1ce6bd9e6189788f7689aebfbf343c",
      "created_at" : "2017-06-08T19:51:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10551#issuecomment-307208959",
      "id" : 307208959,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10551",
      "updated_at" : "2017-06-08T19:51:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/307208959",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "body" : "ACK ec98b78",
      "created_at" : "2017-06-14T13:27:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10551#issuecomment-308430727",
      "id" : 308430727,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10551",
      "updated_at" : "2017-06-14T13:27:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/308430727",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   }
]
