[
   {
      "body" : "I suspect you need to update to gpg2 in travis.yml as well, as trusty comes with gpg2?\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/303c171b949be2c050f6f52e03b74ff1ad3dea63/.travis.yml#L54",
      "created_at" : "2017-06-13T11:24:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10580#issuecomment-308086258",
      "id" : 308086258,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10580",
      "updated_at" : "2017-06-13T11:24:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/308086258",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/6399679?v=3",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "body" : "Concept ACK.\r\n\r\nThough I think the `gpg2`/`gpg` thing is temporary and distribution-dependent. Let's first figure out how various Linux distributions (as well as BSDs) stand on this.\r\n\r\nhttps://superuser.com/questions/763724/how-to-set-gpg2-as-default-implementation-of-gpg-on-debian/852994:\r\n> Background: At DebConf15 the Debian GnuPG Package Maintainers announced that in the future, GnuPG 2.x will be /usr/bin/gpg in Debian and the GnuPG 1.x command will be renamed to /usr/bin/gpg1.\r\n\r\nThat's from 2015: I don't know what the plans are now.\r\n\r\nIn any case ACK on making the tool configurable with an environment variable.\r\n",
      "created_at" : "2017-06-13T14:35:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10580#issuecomment-308136781",
      "id" : 308136781,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10580",
      "updated_at" : "2017-06-13T14:35:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/308136781",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "@laanwj I have an alternative implementation idea.\r\nWhat do you think about using the \"standard\" git config gpg.program?\r\n\r\nSomething like:\r\n```\r\ndiff --git a/contrib/verify-commits/gpg.sh b/contrib/verify-commits/gpg.sh\r\nindex ad26e9bf0..4d2380021 100755\r\n--- a/contrib/verify-commits/gpg.sh\r\n+++ b/contrib/verify-commits/gpg.sh\r\n@@ -8,9 +8,6 @@ VALID=false\r\n REVSIG=false\r\n IFS='\r\n '\r\n-GPG=$(which gpg2)\r\n-[ x\"$GPG\" = \"x\" ] && GPG=$(which gpg)\r\n-\r\n if [ \"$BITCOIN_VERIFY_COMMITS_ALLOW_SHA1\" = 1 ]; then\r\n \tGPG_RES=\"$(echo \"$INPUT\" | \"$GPG\" --trust-model always \"$@\" 2>/dev/null)\"\r\n else\r\ndiff --git a/contrib/verify-commits/verify-commits.sh b/contrib/verify-commits/verify-commits.sh\r\nindex 74b7f3837..86451ff74 100755\r\n--- a/contrib/verify-commits/verify-commits.sh\r\n+++ b/contrib/verify-commits/verify-commits.sh\r\n@@ -17,6 +17,12 @@ HAVE_FAILED=false\r\n HAVE_GNU_SHA512=1\r\n [ ! -x \"$(which sha512sum)\" ] && HAVE_GNU_SHA512=0\r\n \r\n+GPG=$(git config gpg.program)\r\n+if [ x\"$GPG\" = \"x\" ]; then\r\n+\tGPG=gpg\r\n+fi\r\n+export GPG\r\n+\r\n if [ x\"$1\" = \"x\" ]; then\r\n \tCURRENT_COMMIT=\"HEAD\"\r\n else\r\n```",
      "created_at" : "2017-06-14T15:53:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10580#issuecomment-308475523",
      "id" : 308475523,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10580",
      "updated_at" : "2017-06-14T15:53:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/308475523",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/211316?v=3",
         "events_url" : "https://api.github.com/users/drizzt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/drizzt/followers",
         "following_url" : "https://api.github.com/users/drizzt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/drizzt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/drizzt",
         "id" : 211316,
         "login" : "drizzt",
         "organizations_url" : "https://api.github.com/users/drizzt/orgs",
         "received_events_url" : "https://api.github.com/users/drizzt/received_events",
         "repos_url" : "https://api.github.com/users/drizzt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/drizzt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/drizzt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/drizzt"
      }
   },
   {
      "body" : "Yes, using git's preferred gpg seems like a good idea!",
      "created_at" : "2017-06-14T16:05:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10580#issuecomment-308479289",
      "id" : 308479289,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10580",
      "updated_at" : "2017-06-14T16:05:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/308479289",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Concept ACK",
      "created_at" : "2017-06-16T23:19:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10580#issuecomment-309160382",
      "id" : 309160382,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10580",
      "updated_at" : "2017-06-16T23:19:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/309160382",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10580#discussion_r123242346"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10580"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/123242346"
         }
      },
      "body" : "Is this script ever called separately?\r\nWe should document in a comment that this script requires environment variable GPG to be set.\r\nAlso maybe it should fail if it is not.",
      "commit_id" : "c419d7a4184b4b81aaa7185b6bfb77652811b202",
      "created_at" : "2017-06-21T13:08:36Z",
      "diff_hunk" : "@@ -9,7 +9,7 @@ REVSIG=false\n IFS='\n '\n if [ \"$BITCOIN_VERIFY_COMMITS_ALLOW_SHA1\" = 1 ]; then\n-\tGPG_RES=\"$(echo \"$INPUT\" | gpg --trust-model always \"$@\" 2>/dev/null)\"\n+\tGPG_RES=\"$(echo \"$INPUT\" | \"$GPG\" --trust-model always \"$@\" 2>/dev/null)\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10580#discussion_r123242346",
      "id" : 123242346,
      "original_commit_id" : "c419d7a4184b4b81aaa7185b6bfb77652811b202",
      "original_position" : 5,
      "path" : "contrib/verify-commits/gpg.sh",
      "position" : 5,
      "pull_request_review_id" : 45425489,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10580",
      "updated_at" : "2017-06-21T13:08:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/123242346",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Somehow I recall there being one or two Debian releases where gpg 1 was updated to support weak digests but gpg2 was not. I don't think we have any specific reason to prefer any gpg otherwise, so if we're gonna use something other than the default maybe we should check which supports --weak-digest?\n\nOn June 21, 2017 9:08:41 AM EDT, \"Wladimir J. van der Laan\" <notifications@github.com> wrote:\n>laanwj commented on this pull request.\n>\n>\n>\n>> @@ -9,7 +9,7 @@ REVSIG=false\n> IFS='\n> '\n> if [ \"$BITCOIN_VERIFY_COMMITS_ALLOW_SHA1\" = 1 ]; then\n>-\tGPG_RES=\"$(echo \"$INPUT\" | gpg --trust-model always \"$@\"\n>2>/dev/null)\"\n>+\tGPG_RES=\"$(echo \"$INPUT\" | \"$GPG\" --trust-model always \"$@\"\n>2>/dev/null)\"\n>\n>Is this script ever called separately?\n>We should document in a comment that this script requires environment\n>variable GPG to be set.\n>Also maybe it should fail if it is not.\n",
      "created_at" : "2017-06-22T03:09:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10580#issuecomment-310263151",
      "id" : 310263151,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10580",
      "updated_at" : "2017-06-22T03:09:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/310263151",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "@TheBlueMatt Mind that the PR title is wrong (should be updated) - it no longer prefers `gpg2`, but whatever has been set as preferred gpg in `git` config.",
      "created_at" : "2017-06-23T08:29:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10580#issuecomment-310605510",
      "id" : 310605510,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10580",
      "updated_at" : "2017-06-23T08:29:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/310605510",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "@laanwj Fair, if the user has manually set a gpg program in git we could use that (and maybe update the warning docs to inform the user they can do so), but I'd think thats rare, and we might as well check both gpg and gpg2 to see which, if any, has weak-digest support?",
      "created_at" : "2017-06-23T15:30:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10580#issuecomment-310697178",
      "id" : 310697178,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10580",
      "updated_at" : "2017-06-23T15:30:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/310697178",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "> Fair, if the user has manually set a gpg program in git we could use that (and maybe update the warning docs to inform the user they can do so), but I'd think thats rare\r\n\r\nRare or not, there should be a way to override the gpg command used.\r\n\r\n> might as well check both gpg and gpg2 to see which, if any, has weak-digest support?\r\n\r\nSounds good to me.",
      "created_at" : "2017-06-24T09:35:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10580#issuecomment-310828177",
      "id" : 310828177,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10580",
      "updated_at" : "2017-06-24T09:35:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/310828177",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Closoing this, as there is no clear agreement in the way forward.",
      "created_at" : "2017-07-24T12:19:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10580#issuecomment-317404508",
      "id" : 317404508,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10580",
      "updated_at" : "2017-07-24T12:19:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/317404508",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   }
]
