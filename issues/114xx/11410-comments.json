[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "utACK d4e253e.",
      "created_at" : "2017-09-28T20:37:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11410#issuecomment-332956814",
      "id" : 332956814,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11410",
      "updated_at" : "2017-09-28T20:37:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/332956814",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I think we should just replace mempoolminfee with max(mempoolminfee, minrelayfee) as we no longer support priority/free-relay txn that will likely not be mined (so the original arguments for separating them no longer hold).",
      "created_at" : "2017-09-28T23:30:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11410#issuecomment-332991078",
      "id" : 332991078,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11410",
      "updated_at" : "2017-09-28T23:30:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/332991078",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/649246?v=4",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "author_association" : "OWNER",
      "body" : "Agree with @TheBlueMatt.",
      "created_at" : "2017-09-29T00:34:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11410#issuecomment-332999688",
      "id" : 332999688,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11410",
      "updated_at" : "2017-09-29T00:34:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/332999688",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Thanks for the feedback.\r\n\r\nWe already do max between `rollingMinimumFeeRate` and `incrementalRelayFee` in https://github.com/bitcoin/bitcoin/blob/master/src/txmempool.cpp#L1002, but there are cases when we return 0:\r\n\r\n* https://github.com/bitcoin/bitcoin/blob/master/src/txmempool.cpp#L999\r\n* https://github.com/bitcoin/bitcoin/blob/master/src/txmempool.cpp#L984\r\n\r\nTo solve this, (imo) we have a few options:\r\n\r\n1. Do max between the `mempool.GetMinFee(maxmempool)` and `::minRelayTxFee` in https://github.com/bitcoin/bitcoin/blob/master/src/rpc/blockchain.cpp#L1328\r\n2. Do the max in https://github.com/bitcoin/bitcoin/blob/master/src/txmempool.cpp#L981\r\n    - for this I would suggest to create a new method in https://github.com/bitcoin/bitcoin/blob/master/src/txmempool.cpp which returns the max between `GetMinFee` and `::minRelayTxFee` so we don't do 3 max statements (one for each return)\r\n    - or do max in the 3 returns of the method\r\n\r\nOption 1 seems like the least behavior changing because it is there for the RPC interface.\r\nI am not sure weather option 2 is desired because it might alter some behavior, but it does seem like the correct place where to put it.\r\n\r\nAt the moment, I am leaning towards option 1. I want to ask for some advice, which option do you think is better 1 or 2?",
      "created_at" : "2017-09-29T15:34:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11410#issuecomment-333159978",
      "id" : 333159978,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11410",
      "updated_at" : "2017-09-29T15:34:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/333159978",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/226170?v=4",
         "events_url" : "https://api.github.com/users/mess110/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mess110/followers",
         "following_url" : "https://api.github.com/users/mess110/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mess110/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mess110",
         "id" : 226170,
         "login" : "mess110",
         "organizations_url" : "https://api.github.com/users/mess110/orgs",
         "received_events_url" : "https://api.github.com/users/mess110/received_events",
         "repos_url" : "https://api.github.com/users/mess110/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mess110/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mess110/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mess110"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "If you create the new method (option 2), you should also use it in the other places where `GetMinFee` is called and remove the (now obsolete) `std::max` from them. If you only plan to use it in `getmempoolinfo`, you could as well just do the `std::max` there (option 1).",
      "created_at" : "2017-09-29T16:54:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11410#issuecomment-333179982",
      "id" : 333179982,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11410",
      "updated_at" : "2017-09-29T16:54:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/333179982",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I think I agree with @sipa and @TheBlueMatt.  There are still a couple of differences between minRelayTxFee and mempoolMinFee.  One I can thing of now is the wallet will allow you to create a transaction below mempoolMinFee but not below minRelayTxFee.  But I think if we carefully went through the code to see where either of them were used we might find that there is no point in ever returning a mempoolMinFee below the minRelayTxFee.  In which case we could do as suggested.\r\n\r\n- Line 984 is a bug as this should still have been maxed with minIncrementalRelayFee, so the test before that could just be reversed and used to guard executing the bulk of the function so there is no early return. \r\n- Line 999 could just go away and not early return\r\n- Line 1002 could be changed to max with minRelayTxFee (but also max with minIncrementalRelayFee).\r\n\r\nThen we may be able to simplify other places in the code that check both like AcceptToMemoryPool.\r\n",
      "created_at" : "2017-09-29T17:12:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11410#issuecomment-333184250",
      "id" : 333184250,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11410",
      "updated_at" : "2017-09-29T17:12:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/333184250",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/4360349?v=4",
         "events_url" : "https://api.github.com/users/morcos/events{/privacy}",
         "followers_url" : "https://api.github.com/users/morcos/followers",
         "following_url" : "https://api.github.com/users/morcos/following{/other_user}",
         "gists_url" : "https://api.github.com/users/morcos/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/morcos",
         "id" : 4360349,
         "login" : "morcos",
         "organizations_url" : "https://api.github.com/users/morcos/orgs",
         "received_events_url" : "https://api.github.com/users/morcos/received_events",
         "repos_url" : "https://api.github.com/users/morcos/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/morcos/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/morcos/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/morcos"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Rebased",
      "created_at" : "2017-09-30T23:11:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11410#issuecomment-333341963",
      "id" : 333341963,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11410",
      "updated_at" : "2017-09-30T23:11:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/333341963",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/226170?v=4",
         "events_url" : "https://api.github.com/users/mess110/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mess110/followers",
         "following_url" : "https://api.github.com/users/mess110/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mess110/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mess110",
         "id" : 226170,
         "login" : "mess110",
         "organizations_url" : "https://api.github.com/users/mess110/orgs",
         "received_events_url" : "https://api.github.com/users/mess110/received_events",
         "repos_url" : "https://api.github.com/users/mess110/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mess110/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mess110/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mess110"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11410#discussion_r142161090"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11410"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/142161090"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Maybe preserve this comment (move it up by mempoolRejectFee check).\r\n\r\nAlso maybe drop the `mempoolRejectFee > 0` check above which seems impossible to hit now (and confusing & unnecessary previously).",
      "commit_id" : "65d2c68d4df676acd2085fb17d07baad25cde0df",
      "created_at" : "2017-10-02T14:51:16Z",
      "diff_hunk" : "@@ -624,11 +624,6 @@ static bool AcceptToMemoryPoolWorker(const CChainParams& chainparams, CTxMemPool\n             return state.DoS(0, false, REJECT_INSUFFICIENTFEE, \"mempool min fee not met\", false, strprintf(\"%d < %d\", nFees, mempoolRejectFee));\n         }\n \n-        // No transactions are allowed below minRelayTxFee except from disconnected blocks",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11410#discussion_r142161090",
      "id" : 142161090,
      "original_commit_id" : "52711b9aa8c35b6f9d275fde7206bdb2276ce201",
      "original_position" : 4,
      "path" : "src/validation.cpp",
      "position" : 11,
      "pull_request_review_id" : 66481855,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11410",
      "updated_at" : "2017-10-02T23:12:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/142161090",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11410#discussion_r142169216"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11410"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/142169216"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Thanks for the review, fixed",
      "commit_id" : "65d2c68d4df676acd2085fb17d07baad25cde0df",
      "created_at" : "2017-10-02T15:18:49Z",
      "diff_hunk" : "@@ -624,11 +624,6 @@ static bool AcceptToMemoryPoolWorker(const CChainParams& chainparams, CTxMemPool\n             return state.DoS(0, false, REJECT_INSUFFICIENTFEE, \"mempool min fee not met\", false, strprintf(\"%d < %d\", nFees, mempoolRejectFee));\n         }\n \n-        // No transactions are allowed below minRelayTxFee except from disconnected blocks",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11410#discussion_r142169216",
      "id" : 142169216,
      "in_reply_to_id" : 142161090,
      "original_commit_id" : "52711b9aa8c35b6f9d275fde7206bdb2276ce201",
      "original_position" : 4,
      "path" : "src/validation.cpp",
      "position" : 11,
      "pull_request_review_id" : 66491425,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11410",
      "updated_at" : "2017-10-02T23:12:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/142169216",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/226170?v=4",
         "events_url" : "https://api.github.com/users/mess110/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mess110/followers",
         "following_url" : "https://api.github.com/users/mess110/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mess110/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mess110",
         "id" : 226170,
         "login" : "mess110",
         "organizations_url" : "https://api.github.com/users/mess110/orgs",
         "received_events_url" : "https://api.github.com/users/mess110/received_events",
         "repos_url" : "https://api.github.com/users/mess110/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mess110/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mess110/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mess110"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "You can remove `GetRequiredFee` in src/wallet/fees.cpp now.",
      "created_at" : "2017-10-02T15:19:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11410#issuecomment-333566941",
      "id" : 333566941,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11410",
      "updated_at" : "2017-10-02T15:19:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/333566941",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11410#discussion_r142171745"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11410"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/142171745"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Should probably say mempool min fee instead of minRelayTxFee.",
      "commit_id" : "65d2c68d4df676acd2085fb17d07baad25cde0df",
      "created_at" : "2017-10-02T15:27:20Z",
      "diff_hunk" : "@@ -619,16 +619,12 @@ static bool AcceptToMemoryPoolWorker(const CChainParams& chainparams, CTxMemPool\n             return state.DoS(0, false, REJECT_NONSTANDARD, \"bad-txns-too-many-sigops\", false,\n                 strprintf(\"%d\", nSigOpsCost));\n \n+        // No transactions are allowed below minRelayTxFee except from disconnected blocks",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11410#discussion_r142171745",
      "id" : 142171745,
      "original_commit_id" : "9423369fabb9ad13769a594f8b7b2ed5b655170c",
      "original_position" : 4,
      "path" : "src/validation.cpp",
      "position" : null,
      "pull_request_review_id" : 66494308,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11410",
      "updated_at" : "2017-10-02T23:12:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/142171745",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@ryanofsky fixed, thx\r\n\r\n@MarcoFalke prefer to do that in a different PR. Is that fine? Will create a different issue if that is ok.",
      "created_at" : "2017-10-02T15:36:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11410#issuecomment-333572525",
      "id" : 333572525,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11410",
      "updated_at" : "2017-10-02T15:36:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/333572525",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/226170?v=4",
         "events_url" : "https://api.github.com/users/mess110/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mess110/followers",
         "following_url" : "https://api.github.com/users/mess110/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mess110/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mess110",
         "id" : 226170,
         "login" : "mess110",
         "organizations_url" : "https://api.github.com/users/mess110/orgs",
         "received_events_url" : "https://api.github.com/users/mess110/received_events",
         "repos_url" : "https://api.github.com/users/mess110/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mess110/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mess110/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mess110"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "To elaborate a bit: Previously, when calling `GetMinimumFee` and the resulting fee was smaller than the `minRelayTxFee`, the reason for increasing the fee would always be `FeeReason::REQUIRED`. Now, the reason for increasing the fee would depend on whether `paytxfee` (would result in `FeeReason::REQUIRED`) was used or smart fee estimation (would result in `FeeReason::MEMPOOL_MIN`). With your changes, I'd prefer to set `FeeReason::MEMPOOL_MIN` in all cases where the mempool min fee is not met (including minRelayTxFee). Thus, removing the call to `GetRequiredFee` in `GetMinimumFee` makes sense to me.\r\n\r\nI know that those are just internal debugging details, so I am fine if this is done in a follow up pull.",
      "created_at" : "2017-10-02T16:01:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11410#issuecomment-333580217",
      "id" : 333580217,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11410",
      "updated_at" : "2017-10-02T16:01:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/333580217",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Removing the call to GetRequiredFee in GetMinimumFee does seem like the correct thing to do here (and the change would only be harder to understand in another context). I just didn't think GetRequiredFee should be removed entirely.",
      "created_at" : "2017-10-02T16:52:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11410#issuecomment-333594635",
      "id" : 333594635,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11410",
      "updated_at" : "2017-10-02T16:52:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/333594635",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Oh, ok, now I understand. I removed the `GetRequiredFee` code from `GetMinimumFee`",
      "created_at" : "2017-10-02T19:58:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11410#issuecomment-333647186",
      "id" : 333647186,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11410",
      "updated_at" : "2017-10-02T19:58:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/333647186",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/226170?v=4",
         "events_url" : "https://api.github.com/users/mess110/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mess110/followers",
         "following_url" : "https://api.github.com/users/mess110/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mess110/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mess110",
         "id" : 226170,
         "login" : "mess110",
         "organizations_url" : "https://api.github.com/users/mess110/orgs",
         "received_events_url" : "https://api.github.com/users/mess110/received_events",
         "repos_url" : "https://api.github.com/users/mess110/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mess110/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mess110/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mess110"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11410#discussion_r142243128"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11410"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/142243128"
         }
      },
      "author_association" : "MEMBER",
      "body" : "You'd still need to set it to minTxFee in case the current fee is smaller than that (Also set the FeeReason appropriately)\r\n\r\nAlso, I'd suggest to move GetMinFee down, so that it is applied when paytxfee is set.",
      "commit_id" : "65d2c68d4df676acd2085fb17d07baad25cde0df",
      "created_at" : "2017-10-02T20:16:30Z",
      "diff_hunk" : "@@ -62,13 +62,7 @@ CAmount GetMinimumFee(unsigned int nTxBytes, const CCoinControl& coin_control, c\n         }\n     }\n \n-    // prevent user from paying a fee below minRelayTxFee or minTxFee\n-    CAmount required_fee = GetRequiredFee(nTxBytes);\n-    if (required_fee > fee_needed) {\n-        fee_needed = required_fee;\n-        if (feeCalc) feeCalc->reason = FeeReason::REQUIRED;\n-    }\n-    // But always obey the maximum\n+    // And always obey the maximum",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11410#discussion_r142243128",
      "id" : 142243128,
      "original_commit_id" : "4a331eafba2b05295eb527e397d143f6c6a75902",
      "original_position" : 11,
      "path" : "src/wallet/fees.cpp",
      "position" : null,
      "pull_request_review_id" : 66577329,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11410",
      "updated_at" : "2017-10-02T23:12:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/142243128",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "After repeated runs of  `./test/functional/test_runner.py fundrawtransaction`, I have my doubts that the code in `https://github.com/bitcoin/bitcoin/pull/11410/files#diff-ca74c4b28865382863b8fe7633a85cd6` is correct.\r\n\r\nSometimes, I get this error:\r\n\r\n```\r\n..........................................................................................................................................................................\r\nfundrawtransaction.py failed, Duration: 85 s\r\n\r\nstdout:\r\n2017-10-03 14:51:58.853000 TestFramework (INFO): Initializing test directory /tmp/bitcoin_test_runner_20171003_175158/fundrawtransaction_49\r\n{'936dc7485b7e275eed5d7a4fa4f2f5b26b7ffb180a05fc7d28a395ba07b006b8'}\r\n{'936dc7485b7e275eed5d7a4fa4f2f5b26b7ffb180a05fc7d28a395ba07b006b8'}\r\n{'936dc7485b7e275eed5d7a4fa4f2f5b26b7ffb180a05fc7d28a395ba07b006b8'}\r\nset()\r\n2017-10-03 14:53:21.925000 TestFramework (ERROR): Assertion failed\r\nTraceback (most recent call last):\r\n  File \"/home/whoami/pr0n/bitcoin/test/functional/test_framework/test_framework.py\", line 117, in main\r\n    self.run_test()\r\n  File \"/home/whoami/pr0n/bitcoin/test/functional/fundrawtransaction.py\", line 505, in run_test\r\n    self.sync_all()\r\n  File \"/home/whoami/pr0n/bitcoin/test/functional/test_framework/test_framework.py\", line 326, in sync_all\r\n    sync_mempools(group)\r\n  File \"/home/whoami/pr0n/bitcoin/test/functional/test_framework/util.py\", line 401, in sync_mempools\r\n    raise AssertionError(\"Mempool sync failed\")\r\nAssertionError: Mempool sync failed\r\n2017-10-03 14:53:21.926000 TestFramework (INFO): Stopping nodes\r\n2017-10-03 14:53:24.184000 TestFramework (WARNING): Not cleaning up dir /tmp/bitcoin_test_runner_20171003_175158/fundrawtransaction_49\r\n2017-10-03 14:53:24.184000 TestFramework (ERROR): Test failed. Test logging available at /tmp/bitcoin_test_runner_20171003_175158/fundrawtransaction_49/test_framework.log\r\n```\r\n\r\nNOTE: on `master`, this doesn't happen. Need to investigate",
      "created_at" : "2017-10-03T14:55:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11410#issuecomment-333868390",
      "id" : 333868390,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11410",
      "updated_at" : "2017-10-03T14:56:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/333868390",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/226170?v=4",
         "events_url" : "https://api.github.com/users/mess110/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mess110/followers",
         "following_url" : "https://api.github.com/users/mess110/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mess110/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mess110",
         "id" : 226170,
         "login" : "mess110",
         "organizations_url" : "https://api.github.com/users/mess110/orgs",
         "received_events_url" : "https://api.github.com/users/mess110/received_events",
         "repos_url" : "https://api.github.com/users/mess110/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mess110/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mess110/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mess110"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11410#discussion_r142904723"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11410"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/142904723"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I don't feel entirely happy that a bug fix is part of a mostly refactoring commit. Would you mind to split up those bug fixes to a separate (minimal) commit and pull request?",
      "commit_id" : "65d2c68d4df676acd2085fb17d07baad25cde0df",
      "created_at" : "2017-10-05T10:44:16Z",
      "diff_hunk" : "@@ -980,26 +980,25 @@ const CTxMemPool::setEntries & CTxMemPool::GetMemPoolChildren(txiter entry) cons\n \n CFeeRate CTxMemPool::GetMinFee(size_t sizelimit) const {\n     LOCK(cs);\n-    if (!blockSinceLastRollingFeeBump || rollingMinimumFeeRate == 0)\n-        return CFeeRate(llround(rollingMinimumFeeRate));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11410#discussion_r142904723",
      "id" : 142904723,
      "original_commit_id" : "65d2c68d4df676acd2085fb17d07baad25cde0df",
      "original_position" : 5,
      "path" : "src/txmempool.cpp",
      "position" : 5,
      "pull_request_review_id" : 67334500,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11410",
      "updated_at" : "2017-10-05T10:44:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/142904723",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11410#discussion_r142918699"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11410"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/142918699"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "No, I think that is a great idea. Should help me with digging as well. Will do",
      "commit_id" : "65d2c68d4df676acd2085fb17d07baad25cde0df",
      "created_at" : "2017-10-05T12:06:09Z",
      "diff_hunk" : "@@ -980,26 +980,25 @@ const CTxMemPool::setEntries & CTxMemPool::GetMemPoolChildren(txiter entry) cons\n \n CFeeRate CTxMemPool::GetMinFee(size_t sizelimit) const {\n     LOCK(cs);\n-    if (!blockSinceLastRollingFeeBump || rollingMinimumFeeRate == 0)\n-        return CFeeRate(llround(rollingMinimumFeeRate));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11410#discussion_r142918699",
      "id" : 142918699,
      "in_reply_to_id" : 142904723,
      "original_commit_id" : "65d2c68d4df676acd2085fb17d07baad25cde0df",
      "original_position" : 5,
      "path" : "src/txmempool.cpp",
      "position" : 5,
      "pull_request_review_id" : 67351101,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11410",
      "updated_at" : "2017-10-05T12:06:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/142918699",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/226170?v=4",
         "events_url" : "https://api.github.com/users/mess110/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mess110/followers",
         "following_url" : "https://api.github.com/users/mess110/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mess110/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mess110",
         "id" : 226170,
         "login" : "mess110",
         "organizations_url" : "https://api.github.com/users/mess110/orgs",
         "received_events_url" : "https://api.github.com/users/mess110/received_events",
         "repos_url" : "https://api.github.com/users/mess110/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mess110/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mess110/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mess110"
      }
   }
]
