[
   {
      "author_association" : "MEMBER",
      "body" : "I'm not sure what the motivation is for this, since there's no PR description.\r\n\r\nAs currently implemented, this doesn't seem to work for bitcoin.cli. Options don't get converted from strings into the correct type:\r\n\r\n```\r\nÃ¢ÂÂ bitcoin-cli -named fundrawtransaction hexstring=02000000000100bca065010000001976a9146bed745a50ee10d6dbd524b4806f84fec46c4bf388ac00000000 changeAddress=mqMd4D1wY8ye82FpPbT98keCifcue3u35n changePosition=0\r\nerror code: -3\r\nerror message:\r\nExpected type number for changePosition, got string\r\n```\r\n\r\nIt also seems to break argument name checking. With this PR:\r\n\r\n```\r\nÃ¢ÂÂ bitcoin-cli -named fundrawtransaction hexstirng=02000000000100bca065010000001976a9146bed745a50ee10d6dbd524b4806f84fec46c4bf388ac00000000\r\nerror code: -3\r\nerror message:\r\nExpected type string, got null\r\n```\r\n\r\non master:\r\n```\r\nÃ¢ÂÂ bitcoin-cli -named fundrawtransaction hexstirng=02000000000100bca065010000001976a9146bed745a50ee10d6dbd524b4806f84fec46c4bf388ac00000000\r\nerror code: -8\r\nerror message:\r\nUnknown named parameter hexstirng\r\n```",
      "created_at" : "2017-10-03T21:45:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11441#issuecomment-333988160",
      "id" : 333988160,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11441",
      "updated_at" : "2017-10-03T21:45:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/333988160",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> As currently implemented, this doesn't seem to work for bitcoin.cli. Options don't get converted from strings into the correct type:\r\n\r\nThat would be a task for an independent PR. This is just for the server.\r\n\r\n> It also seems to break argument name checking.\r\n\r\nDoesn't look broken to me. It's seeing the missing argument before checking options. If we want the other behaviour, the RPC method should check options before other arguments.",
      "created_at" : "2017-10-04T00:18:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11441#issuecomment-334016046",
      "id" : 334016046,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11441",
      "updated_at" : "2017-10-04T00:18:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/334016046",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "author_association" : "OWNER",
      "body" : "How about going the other way? When an 'options' parameter is present, and the RPC has no argument with that name, treat its keys as extra named arguments. This presents an easier interface for implementing RPCs (which can just use named arguments, rather than needing to disassemble and typecheck fields of an object).\r\n\r\nThis needs motivation regardless.",
      "created_at" : "2017-10-04T00:35:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11441#issuecomment-334018329",
      "id" : 334018329,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11441",
      "updated_at" : "2017-10-04T00:36:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/334018329",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "The motivation is to fix the named args interface.\r\n\r\nGoing \"the other way\" encourages terrible array-args interfaces, which should be discouraged.",
      "created_at" : "2017-10-04T01:11:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11441#issuecomment-334023206",
      "id" : 334023206,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11441",
      "updated_at" : "2017-10-04T01:11:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/334023206",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "author_association" : "OWNER",
      "body" : "> Going \"the other way\" encourages terrible array-args interfaces, which should be discouraged.\r\nMerge state\r\n\r\nThe interface would be identical. You'd accept any named argument either as real named argument, or as a key in a positional 'options' argument. You either convert one to the other, or the other to one.\r\n\r\nBut it would be easier to write RPC handlers for.",
      "created_at" : "2017-10-04T02:15:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11441#issuecomment-334031796",
      "id" : 334031796,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11441",
      "updated_at" : "2017-10-04T02:15:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/334031796",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "But when using positional arguments, you'd have a terrible interface where you have a dozen null values just to reach the one you actually want to set.",
      "created_at" : "2017-10-04T03:09:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11441#issuecomment-334038484",
      "id" : 334038484,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11441",
      "updated_at" : "2017-10-04T03:09:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/334038484",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "author_association" : "OWNER",
      "body" : "slight NACK - I'm not convinced this is really necessary. As I see it it adds complexity to the argument parsing code and makes nothing new possible. Just follow the darn API and pass these additional options in the options object and don't be lazy.\r\n(a slight argument could be made that this makes using bitcoin-cli with the options object easier, but that's nullified by the difficulty of getting the specific-option-argument parsing to work here...)\r\n",
      "created_at" : "2017-10-04T12:46:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11441#issuecomment-334143543",
      "id" : 334143543,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11441",
      "updated_at" : "2017-10-04T12:46:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/334143543",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> That would be a task for an independent PR. This is just for the server.\r\n\r\nThe interface for `bitcoin-cli` should be as close as possible to the RPC interface. It's a useful testing tool for people writing their own RPC clients, so we should avoid there being any surprises when switching between the two. In general, I don't think we should merge PRs that increase the delta between bitcoin-cli and the RPC interface.\r\n\r\n>> It also seems to break argument name checking.\r\n\r\n> Doesn't look broken to me.\r\n\r\nThe point is that this PR makes the error message less helpful for the user. That's a regression.\r\n\r\n> The motivation is to fix the named args interface.\r\n\r\nIt's not obvious to me that the named args interface needs 'fixing'. Named args are arguably better than an options object for a number of reasons:\r\n\r\n- name and type checking is provided for free by the `rpc/server` framework.\r\n- providers a simpler, flatter interface for client code.\r\n- options objects are really awkward to use with `bitcoin-cli` and shells.\r\n\r\n> But when using positional arguments, you'd have a terrible interface\r\n\r\nNo-one is suggesting that users should use positional arguments. Named args solve this problem already.",
      "created_at" : "2017-10-04T13:11:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11441#issuecomment-334150135",
      "id" : 334150135,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11441",
      "updated_at" : "2017-10-04T13:11:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/334150135",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Named arguments with `--` prefix (or whatever) could form the options object, just a shortcut to *write*  the JSON. Example:\r\n```\r\nbitcoin-cli -named fundrawtransaction hexstring=... --lockUnspents=true\r\n```\r\nThis sounds more command line to me.\r\n\r\nAnyway, IMO we should avoid adding *fat* to bitcoin-cli.",
      "created_at" : "2017-10-04T23:01:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11441#issuecomment-334313908",
      "id" : 334313908,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11441",
      "updated_at" : "2017-10-04T23:01:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/334313908",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Named args should not be used as an excuse to have a crappy positional-args interface.",
      "created_at" : "2017-10-04T23:11:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11441#issuecomment-334315558",
      "id" : 334315558,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11441",
      "updated_at" : "2017-10-04T23:11:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/334315558",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> where you have a dozen null values just to reach the one you actually want to set.\r\n\r\nThis is not improved here. The JSON-RPC implementation supports both positional and named arguments and this can not change. If all RPC method implementations change to use named arguments then we must invert the index->name mapping to keep compatibility with the existing version.\r\n\r\nI can't see the advantages for other clients other than bitcoin-cli. And for bitcoin-cli [something like](https://github.com/bitcoin/bitcoin/pull/11441#issuecomment-334313908) would be enough.",
      "created_at" : "2017-10-04T23:41:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11441#issuecomment-334320059",
      "id" : 334320059,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11441",
      "updated_at" : "2017-10-04T23:41:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/334320059",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@promag The other day someone was being suggested to make the problem *worse*.",
      "created_at" : "2017-10-05T03:44:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11441#issuecomment-334350695",
      "id" : 334350695,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11441",
      "updated_at" : "2017-10-05T03:44:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/334350695",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   }
]
