[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6261#discussion_r32088146"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6261"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/32088146"
         }
      },
      "body" : "Harmonize the two LogPrint() calls.  No reason to omit strCommand diagnostic output on this first LogPrint() here.",
      "commit_id" : "a4a18f03690b64e641afe49b757e1ef126e7bfb3",
      "created_at" : "2015-06-10T04:55:14Z",
      "diff_hunk" : "@@ -3760,6 +3765,36 @@ std::string GetWarnings(const std::string& strFor)\n // Messages\n //\n \n+static std::map<std::string, size_t> maxMessageSizes = boost::assign::map_list_of\n+    (\"addr\", 2+1000*30)\n+    (\"getaddr\",0)\n+    (\"getdata\", 2+MAX_INV_SZ*36)\n+    (\"inv\", 2+MAX_INV_SZ*36)\n+    (\"mempool\",0)\n+    (\"notfound\", 2+MAX_INV_SZ*36)\n+    (\"ping\",8)\n+    (\"pong\",8)\n+    (\"verack\", 0)\n+    ;\n+\n+bool static SanityCheckMessage(CNode* peer, const CNetMessage& msg)\n+{\n+    if (msg.hdr.nMessageSize > MAX_PROTOCOL_MESSAGE_LENGTH) {\n+        LogPrint(\"net\", \"Oversized message from peer=%i, disconnecting\", peer->GetId());\n+        return false;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6261#discussion_r32088146",
      "id" : 32088146,
      "original_commit_id" : "fc820b39c5778afd1b3f1020b22684192493f642",
      "original_position" : 53,
      "path" : "src/main.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6261",
      "updated_at" : "2015-09-28T15:30:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/32088146",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/494411?v=3",
         "events_url" : "https://api.github.com/users/jgarzik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jgarzik/followers",
         "following_url" : "https://api.github.com/users/jgarzik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jgarzik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jgarzik",
         "id" : 494411,
         "login" : "jgarzik",
         "organizations_url" : "https://api.github.com/users/jgarzik/orgs",
         "received_events_url" : "https://api.github.com/users/jgarzik/received_events",
         "repos_url" : "https://api.github.com/users/jgarzik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jgarzik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jgarzik"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6261#discussion_r32088223"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6261"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/32088223"
         }
      },
      "body" : "Code is correct.  However, it seems odd to put this in CNode. </nit>",
      "commit_id" : "a4a18f03690b64e641afe49b757e1ef126e7bfb3",
      "created_at" : "2015-06-10T04:58:01Z",
      "diff_hunk" : "@@ -2017,6 +2015,22 @@ void CNode::AbortMessage() UNLOCK_FUNCTION(cs_vSend)\n     LogPrint(\"net\", \"(aborted)\\n\");\n }\n \n+unsigned int CNode::FinalizeHeader(CDataStream& s)\n+{\n+    // Set the size\n+    unsigned int nSize = s.size() - CMessageHeader::HEADER_SIZE;\n+    WriteLE32((uint8_t*)&s[CMessageHeader::MESSAGE_SIZE_OFFSET], nSize);\n+\n+    // Set the checksum\n+    uint256 hash = Hash(s.begin() + CMessageHeader::HEADER_SIZE, s.end());\n+    unsigned int nChecksum = 0;\n+    memcpy(&nChecksum, &hash, sizeof(nChecksum));\n+    assert(s.size () >= CMessageHeader::CHECKSUM_OFFSET + sizeof(nChecksum));\n+    memcpy((char*)&s[CMessageHeader::CHECKSUM_OFFSET], &nChecksum, sizeof(nChecksum));\n+",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6261#discussion_r32088223",
      "id" : 32088223,
      "original_commit_id" : "fc820b39c5778afd1b3f1020b22684192493f642",
      "original_position" : 31,
      "path" : "src/net.cpp",
      "position" : 31,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6261",
      "updated_at" : "2015-09-28T15:30:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/32088223",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/494411?v=3",
         "events_url" : "https://api.github.com/users/jgarzik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jgarzik/followers",
         "following_url" : "https://api.github.com/users/jgarzik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jgarzik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jgarzik",
         "id" : 494411,
         "login" : "jgarzik",
         "organizations_url" : "https://api.github.com/users/jgarzik/orgs",
         "received_events_url" : "https://api.github.com/users/jgarzik/received_events",
         "repos_url" : "https://api.github.com/users/jgarzik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jgarzik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jgarzik"
      }
   },
   {
      "body" : "ut ACK modulo comments\r\n",
      "created_at" : "2015-06-10T04:58:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6261#issuecomment-110588705",
      "id" : 110588705,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6261",
      "updated_at" : "2015-06-10T04:58:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/110588705",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/494411?v=3",
         "events_url" : "https://api.github.com/users/jgarzik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jgarzik/followers",
         "following_url" : "https://api.github.com/users/jgarzik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jgarzik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jgarzik",
         "id" : 494411,
         "login" : "jgarzik",
         "organizations_url" : "https://api.github.com/users/jgarzik/orgs",
         "received_events_url" : "https://api.github.com/users/jgarzik/received_events",
         "repos_url" : "https://api.github.com/users/jgarzik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jgarzik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jgarzik"
      }
   },
   {
      "body" : "Addressed @jgarzik comments -- FinalizeHeader moved to CNetMessage (I considered moving it to CNetHeader, but didn't want to make protocol.h dependent on CDataStream).  And unified the log message (and remembered to SanitizeString(command) at the very last moment).",
      "created_at" : "2015-06-10T13:50:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6261#issuecomment-110761701",
      "id" : 110761701,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6261",
      "updated_at" : "2015-06-10T13:50:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/110761701",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/331997?v=3",
         "events_url" : "https://api.github.com/users/gavinandresen/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gavinandresen/followers",
         "following_url" : "https://api.github.com/users/gavinandresen/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gavinandresen/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gavinandresen",
         "id" : 331997,
         "login" : "gavinandresen",
         "organizations_url" : "https://api.github.com/users/gavinandresen/orgs",
         "received_events_url" : "https://api.github.com/users/gavinandresen/received_events",
         "repos_url" : "https://api.github.com/users/gavinandresen/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gavinandresen/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gavinandresen/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gavinandresen"
      }
   },
   {
      "body" : "Concept ACK, though I would just pass a pointer to CNetMessage rather than a wrapper-and-then-auto-unwrapped boost reference object.",
      "created_at" : "2015-06-14T13:27:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6261#issuecomment-111827108",
      "id" : 111827108,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6261",
      "updated_at" : "2015-06-14T13:27:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/111827108",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "@sipa: it'll be std::cref() when we move to C++11... and passing a reference is, in my opinion, cleaner than passing a pointer since the routine doesn't have to worry about checking for NULL.",
      "created_at" : "2015-06-26T18:10:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6261#issuecomment-115821371",
      "id" : 115821371,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6261",
      "updated_at" : "2015-06-26T18:10:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/115821371",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/331997?v=3",
         "events_url" : "https://api.github.com/users/gavinandresen/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gavinandresen/followers",
         "following_url" : "https://api.github.com/users/gavinandresen/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gavinandresen/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gavinandresen",
         "id" : 331997,
         "login" : "gavinandresen",
         "organizations_url" : "https://api.github.com/users/gavinandresen/orgs",
         "received_events_url" : "https://api.github.com/users/gavinandresen/received_events",
         "repos_url" : "https://api.github.com/users/gavinandresen/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gavinandresen/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gavinandresen/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gavinandresen"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6261#discussion_r33404109"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6261"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/33404109"
         }
      },
      "body" : "Why did you choose to not directly pass the NodeId? It seems it's the only field used in here.",
      "commit_id" : "a4a18f03690b64e641afe49b757e1ef126e7bfb3",
      "created_at" : "2015-06-26T23:15:25Z",
      "diff_hunk" : "@@ -3765,6 +3770,32 @@ std::string GetWarnings(const std::string& strFor)\n // Messages\n //\n \n+static std::map<std::string, size_t> maxMessageSizes = boost::assign::map_list_of\n+    (\"addr\", 2+1000*30)\n+    (\"getaddr\",0)\n+    (\"getdata\", 2+MAX_INV_SZ*36)\n+    (\"inv\", 2+MAX_INV_SZ*36)\n+    (\"mempool\",0)\n+    (\"notfound\", 2+MAX_INV_SZ*36)\n+    (\"ping\",8)\n+    (\"pong\",8)\n+    (\"verack\", 0)\n+    ;\n+\n+bool static SanityCheckMessage(CNode* peer, const CNetMessage& msg)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6261#discussion_r33404109",
      "id" : 33404109,
      "original_commit_id" : "31c808d601fdbf657e229fabcf2465a1923eb93f",
      "original_position" : 49,
      "path" : "src/main.cpp",
      "position" : 277,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6261",
      "updated_at" : "2015-09-28T15:30:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/33404109",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6261#discussion_r33404350"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6261"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/33404350"
         }
      },
      "body" : "``s.size()`` returns ``size_t``, so we have ``unsigned int = size_t - int``... is this correct?",
      "commit_id" : "a4a18f03690b64e641afe49b757e1ef126e7bfb3",
      "created_at" : "2015-06-26T23:19:39Z",
      "diff_hunk" : "@@ -564,6 +562,22 @@ bool CNode::ReceiveMsgBytes(const char *pch, unsigned int nBytes)\n     return true;\n }\n \n+unsigned int CNetMessage::FinalizeHeader(CDataStream& s)\n+{\n+    // Set the size\n+    unsigned int nSize = s.size() - CMessageHeader::HEADER_SIZE;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6261#discussion_r33404350",
      "id" : 33404350,
      "original_commit_id" : "31c808d601fdbf657e229fabcf2465a1923eb93f",
      "original_position" : 22,
      "path" : "src/net.cpp",
      "position" : 22,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6261",
      "updated_at" : "2015-09-28T15:30:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/33404350",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "body" : "@dgenr8 is seeing peer disconnections due to this code (it is part of the BIP101 pull request), especially with 'addr' messages. I need to investigate why.\r\n\r\nAnd I like detecting misbehavior early, but this should work with the existing Misbehaving() logic. I think I see a path to get there:\r\n\r\n1) Refactor mapNodeState so it is protected by it's own lock instead of cs_main. \r\n2) Rework this pull request to call Misbehaving() for oversize messages; never immediately disconnect.",
      "created_at" : "2015-07-13T16:27:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6261#issuecomment-120986538",
      "id" : 120986538,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6261",
      "updated_at" : "2015-07-13T16:27:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/120986538",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/331997?v=3",
         "events_url" : "https://api.github.com/users/gavinandresen/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gavinandresen/followers",
         "following_url" : "https://api.github.com/users/gavinandresen/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gavinandresen/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gavinandresen",
         "id" : 331997,
         "login" : "gavinandresen",
         "organizations_url" : "https://api.github.com/users/gavinandresen/orgs",
         "received_events_url" : "https://api.github.com/users/gavinandresen/received_events",
         "repos_url" : "https://api.github.com/users/gavinandresen/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gavinandresen/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gavinandresen/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gavinandresen"
      }
   },
   {
      "body" : "@gavinandresen 1000 addr messages is 3 + 1000*30 bytes, as the serialized vector length for sizes over 253 takes 3 bytes,",
      "created_at" : "2015-07-13T16:35:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6261#issuecomment-120988215",
      "id" : 120988215,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6261",
      "updated_at" : "2015-07-13T16:35:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/120988215",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Reworked the mapNodeState encapsulation into a RAII NodeStatePtr smart-pointer class.\r\n\r\nThat allowed me to change the SanityCheckMessage() callback match the old behavior: if a peer send a message larger than 2MB, immediately drop their connection. If they send a message bigger than expected but less than 2MB, call Misbehaving(20) (which, by default, gets them dropped/banned if they send more than 5 oversize messages).\r\n\r\nAnd I removed the addr/inv/getdata checks-- those messages already check for message length and call Misbehaving() if passed vectors that are too big.\r\n",
      "created_at" : "2015-07-14T15:31:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6261#issuecomment-121282771",
      "id" : 121282771,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6261",
      "updated_at" : "2015-07-14T15:31:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/121282771",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/331997?v=3",
         "events_url" : "https://api.github.com/users/gavinandresen/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gavinandresen/followers",
         "following_url" : "https://api.github.com/users/gavinandresen/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gavinandresen/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gavinandresen",
         "id" : 331997,
         "login" : "gavinandresen",
         "organizations_url" : "https://api.github.com/users/gavinandresen/orgs",
         "received_events_url" : "https://api.github.com/users/gavinandresen/received_events",
         "repos_url" : "https://api.github.com/users/gavinandresen/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gavinandresen/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gavinandresen/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gavinandresen"
      }
   },
   {
      "body" : "I believe that the \"version\" message can be limited to 344 bytes. Right now I can send the full 2MB and it's accepted. The \"filterclear\" and \"reject\" messages need lower limits too as 2MB works for them with no penalty. Then that leaves the obvious final case in ProcessMessage that other fictitious/junk commands can be used with a 2MB payload to hog bandwidth.\r\n\r\nI came looking for a ticket with a fix like this ticket implements because, I was playing around on my local node with a script that basically connected, sent a good \"version\" message (actually I used 2MB, but that is easy to fix with this ticket), then looped sending 2MB junk command messages. That might eventually timeout.If so, my script would have eventually had to maybe add in some pong and verack handling, but nothing difficult.\r\n\r\nMaybe there's another ticket for doing something about the junk case that I didn't find yet too?",
      "created_at" : "2015-08-02T19:07:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6261#issuecomment-127055875",
      "id" : 127055875,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6261",
      "updated_at" : "2015-08-02T19:07:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/127055875",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6440430?v=3",
         "events_url" : "https://api.github.com/users/mruddy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mruddy/followers",
         "following_url" : "https://api.github.com/users/mruddy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mruddy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mruddy",
         "id" : 6440430,
         "login" : "mruddy",
         "organizations_url" : "https://api.github.com/users/mruddy/orgs",
         "received_events_url" : "https://api.github.com/users/mruddy/received_events",
         "repos_url" : "https://api.github.com/users/mruddy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mruddy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mruddy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mruddy"
      }
   },
   {
      "body" : "concept ACK\r\n",
      "created_at" : "2015-09-16T15:06:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6261#issuecomment-140769937",
      "id" : 140769937,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6261",
      "updated_at" : "2015-09-16T15:06:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/140769937",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/494411?v=3",
         "events_url" : "https://api.github.com/users/jgarzik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jgarzik/followers",
         "following_url" : "https://api.github.com/users/jgarzik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jgarzik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jgarzik",
         "id" : 494411,
         "login" : "jgarzik",
         "organizations_url" : "https://api.github.com/users/jgarzik/orgs",
         "received_events_url" : "https://api.github.com/users/jgarzik/received_events",
         "repos_url" : "https://api.github.com/users/jgarzik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jgarzik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jgarzik"
      }
   },
   {
      "body" : "@gavinandresen Travis failed with `test_bitcoin: key.cpp:198: void ECC_Start(): Assertion `secp256k1_context == __null' failed.` This seems a temporary outage? Mind to run travis again?",
      "created_at" : "2015-11-10T22:42:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6261#issuecomment-155591313",
      "id" : 155591313,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6261",
      "updated_at" : "2015-11-10T22:42:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/155591313",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=3",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "body" : "Closing due to inactivity, feel free to reopen if you pick this up again.",
      "created_at" : "2016-01-29T14:30:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6261#issuecomment-176781772",
      "id" : 176781772,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6261",
      "updated_at" : "2016-01-29T14:30:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/176781772",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   }
]
