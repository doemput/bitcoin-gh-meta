[
   {
      "body" : "Theres probably another way to do it (I know @theuni wanted to build with different flags for release, but it would be good to at least fix build).",
      "created_at" : "2015-06-07T19:12:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6248#issuecomment-109789480",
      "id" : 109789480,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6248",
      "updated_at" : "2015-06-07T19:12:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/109789480",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "We discussed this on IRC. I don't think -fPIC should be the default, for executables -fPIE is superior option. See e.g. http://www.openbsd.org/papers/nycbsdcon08-pie/\r\n\r\nThough I'm fine with enabling it as a fallback if you can add a check to autoconf that `PIE` is broken on a platform.\r\n",
      "created_at" : "2015-06-09T12:14:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6248#issuecomment-110335092",
      "id" : 110335092,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6248",
      "updated_at" : "2015-06-09T12:14:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/110335092",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Many distros force PIC anyway, so this actually wont change anything for most builds.",
      "created_at" : "2015-06-09T20:11:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6248#issuecomment-110489701",
      "id" : 110489701,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6248",
      "updated_at" : "2015-06-09T20:11:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/110489701",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "After researching the issue some over the weekend, I agree with @laanwj.\r\n\r\nTo clarify, this is an issue with gcc5 and newer clang+lto when qt is built with -reduce-relocations. Upstream GCC discussion is [here](https://gcc.gnu.org/bugzilla/show_bug.cgi?id=65886). \r\n\r\nWe have a few options:\r\n- Do nothing. I think I'd prefer this, reasoning below.\r\n- use -PIC instead for known-problematic compilers. This would mean maintaining a black-list since I don't believe this can be easily tested.\r\n- Use -PIC instead only when building bitcoin-qt _and_ using a problematic compiler _and_ when qt was built with -reduce-relocations (this can be tested via preprocessor).\r\n- Default to -PIC everywhere and override with -PIE when creating release binaries.\r\n\r\n2 and 3 would be necessary only for building bitcoin-qt, but we'd end up having to disable PIE for bitcoind as well, to avoid building 2 sets of objects.\r\n\r\nI believe that the root issue here is that distros are shipping qt libs with -reduce-relocations, which is known to violate abi specs and makes assumptions about how downstreams will use their libs. That abi spec violation became a real-world issue with the latest compilers.\r\n\r\nSo IMO, the more reasonable thing to do here would be to try to convince Arch to disable -reduce-relocations for their qt build. We can't be the only downstream with this issue.",
      "created_at" : "2015-06-09T20:16:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6248#issuecomment-110491401",
      "id" : 110491401,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6248",
      "updated_at" : "2015-06-09T20:50:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/110491401",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/417043?v=3",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "body" : "OK, @theuni I filed a bug at https://bugs.archlinux.org/task/45283 lets see what the maintainers there say.",
      "created_at" : "2015-06-09T20:29:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6248#issuecomment-110495368",
      "id" : 110495368,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6248",
      "updated_at" : "2015-06-09T20:29:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/110495368",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "@cfields I'm ok with all those options, except \"Default to -PIC everywhere and override with -PIE when creating release binaries.\" Let's not have everyone suffer because a distro builds libraries with broken options. \r\nEither we work around this specific case when it happens, or we do nothing and have Arch users provide an extra option as workaround (could be documented in `build_unix.md`).\r\nWould be even better if the problem could just be solved upstream.\r\n",
      "created_at" : "2015-06-10T06:05:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6248#issuecomment-110603934",
      "id" : 110603934,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6248",
      "updated_at" : "2015-06-10T06:05:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/110603934",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "@cfields would you mind discussing with the arch maintainer @ https://bugs.archlinux.org/task/45283#comment136231 ?\n\nOn June 9, 2015 11:06:00 PM PDT, \"Wladimir J. van der Laan\" <notifications@github.com> wrote:\n>@cfields I'm ok with all those options, except \"Default to -PIC\n>everywhere and override with -PIE when creating release binaries.\"\n>Let's not have everyone suffer because a distro builds libraries with\n>broken options. \n>Either we work around this specific case when it happens, or we do\n>nothing and have Arch users provide an extra option as workaround\n>(could be documented in `build_unix.md`).\n>Would be even better if the problem could just be solved upstream.\n>\n>\n>---\n>Reply to this email directly or view it on GitHub:\n>https://github.com/bitcoin/bitcoin/pull/6248#issuecomment-110603934\n",
      "created_at" : "2015-06-10T08:41:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6248#issuecomment-110656561",
      "id" : 110656561,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6248",
      "updated_at" : "2015-06-10T08:41:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/110656561",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "This issue is present on Fedora 22 as well.",
      "created_at" : "2015-06-27T13:01:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6248#issuecomment-116041222",
      "id" : 116041222,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6248",
      "updated_at" : "2015-06-27T13:01:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/116041222",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1021899?v=3",
         "events_url" : "https://api.github.com/users/dankeder/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dankeder/followers",
         "following_url" : "https://api.github.com/users/dankeder/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dankeder/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dankeder",
         "id" : 1021899,
         "login" : "dankeder",
         "organizations_url" : "https://api.github.com/users/dankeder/orgs",
         "received_events_url" : "https://api.github.com/users/dankeder/received_events",
         "repos_url" : "https://api.github.com/users/dankeder/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dankeder/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dankeder/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dankeder"
      }
   },
   {
      "body" : "I have a fix for this in the works. I'll try to push it up in the next few days.",
      "created_at" : "2015-06-27T14:29:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6248#issuecomment-116068528",
      "id" : 116068528,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6248",
      "updated_at" : "2015-06-27T14:29:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/116068528",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/417043?v=3",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "body" : "Arch changed their build settings and this is no longer an issue there, is it still on Fedora? Can we file a bug there? @dankeder ",
      "created_at" : "2015-07-17T23:14:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6248#issuecomment-122441727",
      "id" : 122441727,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6248",
      "updated_at" : "2015-07-17T23:14:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/122441727",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "Yes, the problem is still present on F22:\r\n\r\nIn my bitcoin repo (checkout tag v0.10.2):\r\n\r\n    $ ./configure --prefix=/home/dan/programs/bitcoin-0.10.2 --with-gui=qt5 --with-pic --disable-shared --disable-tests\r\n    (...)\r\n    $ make                     \r\n    Making all in src\r\n    make[1]: Entering directory '/home/dan/tmp/src/bitcoin/src'\r\n    make[2]: Entering directory '/home/dan/tmp/src/bitcoin/src'\r\n      CXX      qt/qt_bitcoin_qt-bitcoin.o\r\n    In file included from /usr/include/qt5/QtGui/qwindowdefs.h:37:0,\r\n                     from /usr/include/qt5/QtWidgets/qwidget.h:37,\r\n                     from /usr/include/qt5/QtWidgets/qframe.h:37,\r\n                     from /usr/include/qt5/QtWidgets/qlabel.h:37,\r\n                     from /usr/include/qt5/QtWidgets/QLabel:1,\r\n                     from qt/bitcoingui.h:14,\r\n                     from qt/bitcoin.cpp:9:\r\n    /usr/include/qt5/QtCore/qglobal.h:1052:4: error: #error \"You must build your code with position independent code if Qt was built with -reduce-relocations. \" \"Compile your code with -fPIC (-fPIE is not enough).\"\r\n     #  error \"You must build your code with position independent code if Qt was built with -reduce-relocations. \"\\\r\n        ^\r\n    Makefile:5494: recipe for target 'qt/qt_bitcoin_qt-bitcoin.o' failed\r\n    make[2]: *** [qt/qt_bitcoin_qt-bitcoin.o] Error 1\r\n    make[2]: Leaving directory '/home/dan/tmp/src/bitcoin/src'\r\n    Makefile:6246: recipe for target 'all-recursive' failed\r\n    make[1]: *** [all-recursive] Error 1\r\n    make[1]: Leaving directory '/home/dan/tmp/src/bitcoin/src'\r\n    Makefile:568: recipe for target 'all-recursive' failed\r\n    make: *** [all-recursive] Error 1\r\n\r\nI have these QT5 packages:\r\n\r\n    $ rpm -qa | grep qt5-qtbase \r\n    qt5-qtbase-gui-5.4.2-2.fc22.x86_64\r\n    qt5-qtbase-5.4.2-2.fc22.x86_64\r\n    qt5-qtbase-devel-5.4.2-2.fc22.x86_64\r\n    qt5-qtbase-common-5.4.2-2.fc22.noarch\r\n",
      "created_at" : "2015-07-20T18:32:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6248#issuecomment-122979235",
      "id" : 122979235,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6248",
      "updated_at" : "2015-07-20T18:32:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/122979235",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1021899?v=3",
         "events_url" : "https://api.github.com/users/dankeder/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dankeder/followers",
         "following_url" : "https://api.github.com/users/dankeder/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dankeder/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dankeder",
         "id" : 1021899,
         "login" : "dankeder",
         "organizations_url" : "https://api.github.com/users/dankeder/orgs",
         "received_events_url" : "https://api.github.com/users/dankeder/received_events",
         "repos_url" : "https://api.github.com/users/dankeder/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dankeder/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dankeder/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dankeder"
      }
   },
   {
      "body" : "I'm unsure what to do here. I have a rather complicated patch that changes around the PIC flags for qt objects if it was built with -reduce-locations, but since Arch elected to quit doing that, I'm somewhat hopeful that we can lobby the other distros to do the same. That really is the correct fix.",
      "created_at" : "2015-07-22T22:31:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6248#issuecomment-123890594",
      "id" : 123890594,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6248",
      "updated_at" : "2015-07-22T22:31:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/123890594",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/417043?v=3",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "body" : "I asked a friend who is a contributor to the Fedora Project what he thinks about this issue.\r\n\r\nHis opinion is that bitcoin build logic shouldn't set compiler options on its own, it should rather make use of qmake to get the flags of the particular platform. Also, it seems that `-fPIC` is set as the default directly in qt build scripts. So if you think that the flags need to be changed, they should be changed upstream, not in each and every Linux distribution that has this problem.",
      "created_at" : "2015-07-23T13:37:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6248#issuecomment-124102779",
      "id" : 124102779,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6248",
      "updated_at" : "2015-07-23T13:37:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/124102779",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1021899?v=3",
         "events_url" : "https://api.github.com/users/dankeder/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dankeder/followers",
         "following_url" : "https://api.github.com/users/dankeder/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dankeder/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dankeder",
         "id" : 1021899,
         "login" : "dankeder",
         "organizations_url" : "https://api.github.com/users/dankeder/orgs",
         "received_events_url" : "https://api.github.com/users/dankeder/received_events",
         "repos_url" : "https://api.github.com/users/dankeder/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dankeder/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dankeder/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dankeder"
      }
   },
   {
      "body" : "We're setting custom compiler options because of `--enable-hardening`, which sets some (relatively) obscure options to improve worst-case security. With `--disable-hardening` this problem it just uses the suggested flags and I don't think this problem exists.\r\n\r\nI do like having hardening enabled by default, though. @theuni Can we add a test to configure that detects this problem, and disables or falls back to other options if it fails?\r\n",
      "created_at" : "2015-08-25T09:01:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6248#issuecomment-134532490",
      "id" : 134532490,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6248",
      "updated_at" : "2015-08-25T09:02:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/134532490",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Well, reviewing PIE vs. PIC, no immediate security issue jumps out (via hardening) at the introduction of PIC.  It's just a bit slower.  Capturing the flags from qmake seems reasonable?\r\n",
      "created_at" : "2015-09-16T15:12:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6248#issuecomment-140772104",
      "id" : 140772104,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6248",
      "updated_at" : "2015-09-16T15:12:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/140772104",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/494411?v=3",
         "events_url" : "https://api.github.com/users/jgarzik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jgarzik/followers",
         "following_url" : "https://api.github.com/users/jgarzik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jgarzik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jgarzik",
         "id" : 494411,
         "login" : "jgarzik",
         "organizations_url" : "https://api.github.com/users/jgarzik/orgs",
         "received_events_url" : "https://api.github.com/users/jgarzik/received_events",
         "repos_url" : "https://api.github.com/users/jgarzik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jgarzik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jgarzik"
      }
   },
   {
      "body" : "Building with PIC instead of PIE means the [Address Space Layout Randomization](https://en.wikipedia.org/wiki/Address_space_layout_randomization#Linux) & [features from Grsecurity / PaX are less effective](https://wiki.gentoo.org/wiki/Hardened/Introduction_to_Hardened_Gentoo#PIE_and_SSP).",
      "created_at" : "2015-09-16T16:05:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6248#issuecomment-140789229",
      "id" : 140789229,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6248",
      "updated_at" : "2015-09-16T16:05:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/140789229",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1141947?v=3",
         "events_url" : "https://api.github.com/users/itoffshore/events{/privacy}",
         "followers_url" : "https://api.github.com/users/itoffshore/followers",
         "following_url" : "https://api.github.com/users/itoffshore/following{/other_user}",
         "gists_url" : "https://api.github.com/users/itoffshore/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/itoffshore",
         "id" : 1141947,
         "login" : "itoffshore",
         "organizations_url" : "https://api.github.com/users/itoffshore/orgs",
         "received_events_url" : "https://api.github.com/users/itoffshore/received_events",
         "repos_url" : "https://api.github.com/users/itoffshore/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/itoffshore/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/itoffshore/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/itoffshore"
      }
   },
   {
      "body" : "In Alpine Linux `qt5` is built with `-no-reduce-relocations` &`bitcoin` / `bitcoin-qt` are still built with `-fPIE`",
      "created_at" : "2015-09-18T13:55:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6248#issuecomment-141457687",
      "id" : 141457687,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6248",
      "updated_at" : "2015-09-18T13:55:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/141457687",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1141947?v=3",
         "events_url" : "https://api.github.com/users/itoffshore/events{/privacy}",
         "followers_url" : "https://api.github.com/users/itoffshore/followers",
         "following_url" : "https://api.github.com/users/itoffshore/following{/other_user}",
         "gists_url" : "https://api.github.com/users/itoffshore/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/itoffshore",
         "id" : 1141947,
         "login" : "itoffshore",
         "organizations_url" : "https://api.github.com/users/itoffshore/orgs",
         "received_events_url" : "https://api.github.com/users/itoffshore/received_events",
         "repos_url" : "https://api.github.com/users/itoffshore/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/itoffshore/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/itoffshore/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/itoffshore"
      }
   },
   {
      "body" : "> Use -PIC instead only when building bitcoin-qt and using a problematic compiler and when qt was built with -reduce-relocations (this can be tested via preprocessor).\r\n\r\nRight, detecting this would be the right way to solve this. Although the logic is quite ugly, it's not that much worse than other auto* checks.\r\n\r\nAnd agree it would be even better if `-reduce-relocations` was not provided to the Qt build upstream. That's the root issue, not PIE versus PIC.\r\n\r\nStill NACK on setting `-fPIC` by default, so going to close this.",
      "created_at" : "2015-10-06T12:30:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6248#issuecomment-145842204",
      "id" : 145842204,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6248",
      "updated_at" : "2015-10-06T12:30:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/145842204",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Bleh, getting the same on Ubuntu 15.10 now.\r\nSeems a lot of distributions are compiling Qt with that awful option.\r\nWe do need to detect it somehow in configure.\r\n\r\n@theuni can you take a look at this?\r\n",
      "created_at" : "2015-11-02T14:58:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6248#issuecomment-153043144",
      "id" : 153043144,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6248",
      "updated_at" : "2015-11-02T15:01:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/153043144",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Closing in favor of #6978",
      "created_at" : "2015-11-10T14:32:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6248#issuecomment-155435650",
      "id" : 155435650,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6248",
      "updated_at" : "2015-11-10T14:32:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/155435650",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   }
]
