[
   {
      "body" : "Concept ACK.\r\nI just wonder if this makes the wallet code more complex (add another layer).\r\n\r\nMy idea was it to duplicate the current wallet implementation (`cp src/wallet src/newwallet`-approach) and add such things there (after removing the accounts-related code). Also the Bip32 and @CodeShark multi-wallet PR could be added there.\r\n\r\nThe second wallet could come without API stableness (for the first two releases or so) and could be marked as experimental.",
      "created_at" : "2016-03-21T16:14:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7729#issuecomment-199361174",
      "id" : 199361174,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7729",
      "updated_at" : "2016-03-21T16:14:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/199361174",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "> I just wonder if this makes the wallet code more complex (add another layer).\r\n\r\nI disagree:\r\n\r\n- All of this functionality is required anyway to support the GUI.\r\n- Yes, there is some intentional duplication, but only until the account calls are ripped out, which should be one of the next steps.\r\n- There are only added RPC calls in rpcwallet.cpp. The `CWallet` class is not complicated by this.\r\n\r\nThe point here is to give a non-deprecated equivalent to the 'label' system as used in the GUI, so the subset of the 'account system' that people are still allowed to use. This is a required, but up to now missing part of deprecating the account system.\r\n\r\nI'm not trying to rule out any other work that is being done such as multi-wallet support. I think this is pretty much orthogonal. As for alternative wallets, they've been proposed since at least 2012 - but none have materialized yet. And none of this change rules them out.\r\n",
      "created_at" : "2016-03-21T16:17:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7729#issuecomment-199362346",
      "id" : 199362346,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7729",
      "updated_at" : "2016-03-21T16:24:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/199362346",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "> As for alternative wallets, they've been proposed since at least 2012 - but none have materialized yet. And none of this change rules them out.\r\n\r\nYes. I agree.\r\nThis PR has a clear value.",
      "created_at" : "2016-03-21T16:33:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7729#issuecomment-199368604",
      "id" : 199368604,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7729",
      "updated_at" : "2016-03-21T16:33:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/199368604",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "Note getaccountaddress does not presently get a \"default\" address, it gets an *unused* address with the label, creating one if necessary. This seems useful *only* for mining, since no other context can guarantee an address hasn't been \"used\" but not sent to yet. I can't think of a good way to deprecate this, however.",
      "created_at" : "2016-03-21T19:42:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7729#issuecomment-199444036",
      "id" : 199444036,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7729",
      "updated_at" : "2016-03-21T19:42:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/199444036",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "> it gets an unused address with the label, creating one if necessary.\r\n\r\nI wonder if we can find a better (or at least simpler, the `GetAccountAddress` function is pretty terrible) way to do this, now that we're creating a new API anyway. Need to think about this a bit.",
      "created_at" : "2016-03-22T08:53:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7729#issuecomment-199705726",
      "id" : 199705726,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7729",
      "updated_at" : "2016-03-22T08:54:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/199705726",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "@luke-jr \r\n> I wonder if we can find a better (or at least simpler, the GetAccountAddress function is pretty terrible) way to do this, now that we're creating a new API anyway. Need to think about this a bit.\r\n\r\nI thought of the following: you could use two labels, one for the 'active' address, one for the 'normal'. Say `mining_active` and `mining`.\r\n\r\nWhen the miner needs an address it will:\r\n- *addr* = `getaddressesbylabel mining_active` (if no address returned, go to \"if so\" directly below and skip the first)\r\n- `getreceivedbyaddress` - check with wallet that *addr* has been used before (or maybe add a more convenient RPC call for checking a single address)\r\n- If so:\r\n  -  `setlabel <addr> mining`  - move current address to normal label\r\n  - *addr* = `getnewaddress mining_active` - generate new address in `mining_active` label\r\n  - Use *addr* for mining to\r\n- If not:\r\n  - Use *addr* for mining to\r\n\r\nThis is a little bit more involved at the user side, but it avoids special administration (needing to keep around `CAccount` structure per label) at the server side.",
      "created_at" : "2016-03-23T07:10:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7729#issuecomment-200219840",
      "id" : 200219840,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7729",
      "updated_at" : "2016-03-23T07:16:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/200219840",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "That looks like a lot of overhead, and this is a rather time-sensitive call, as the miner is working on stale work until it's done.\r\n\r\nAlso, why are there no getreceivedbylabel/listreceivedbylabel? These don't have anything to do with balances.",
      "created_at" : "2016-04-07T07:25:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7729#issuecomment-206735494",
      "id" : 206735494,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7729",
      "updated_at" : "2016-04-07T07:25:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/206735494",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "> That looks like a lot of overhead, and this is a rather time-sensitive call, as the miner is working on stale work until it's done.\r\n\r\nI'd suggest to try it. It shouldn't be much slower.\r\n\r\n> Also, why are there no getreceivedbylabel/listreceivedbylabel? These don't have anything to do with balances.\r\n\r\nLooks like you're right. `getreceivedbyaccount` doesn't actually return the account balance, but the total number of coins sent to the addresses that make up the account?\r\n\r\n`listreceivedbyaccount`  on the other hand goes over the account tally. But I agree if it only were to show actual transactions sent to addresses belonging to a label it'd be ok.\r\n",
      "created_at" : "2016-04-07T14:19:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7729#issuecomment-206927479",
      "id" : 206927479,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7729",
      "updated_at" : "2016-04-07T14:19:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/206927479",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "@luke-jr Wouldn't it be feasible to instead generate a sequence of deterministic addresses for mining, for example using BIP32 derivation with the block height as index?",
      "created_at" : "2016-04-07T14:24:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7729#issuecomment-206929678",
      "id" : 206929678,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7729",
      "updated_at" : "2016-04-07T14:24:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/206929678",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "> I'd suggest to try it. It shouldn't be much slower.\r\n\r\n@laanwj getreceivedbyaddress at least would loop over all the wtx... and then there's the additional latency from the back and forth of multiple calls. I haven't tried it yet, though.\r\n\r\n> Wouldn't it be feasible to instead generate a sequence of deterministic addresses for mining, for example using BIP32 derivation with the block height as index?\r\n\r\n@sipa Perhaps, if the wallet had a way to do this. Using the height seems incompatible with gap limits, though?",
      "created_at" : "2016-04-07T14:37:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7729#issuecomment-206934807",
      "id" : 206934807,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7729",
      "updated_at" : "2016-04-07T14:37:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/206934807",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "@luke-jr I mean the mining software can do derivation, and import the keys into the wallet when a block is found.\r\n\r\n",
      "created_at" : "2016-04-07T14:48:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7729#issuecomment-206938418",
      "id" : 206938418,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7729",
      "updated_at" : "2016-04-07T14:48:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/206938418",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "The functional test coverage for accounts is minimal or not existent, I think we should move forward with this pull.\r\n\r\nNeeds rebase.",
      "created_at" : "2016-05-22T12:02:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7729#issuecomment-220828728",
      "id" : 220828728,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7729",
      "updated_at" : "2016-05-22T12:02:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/220828728",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=3",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "body" : "Re-Concept ACK.\r\nI think this solution makes more sense than the closed #7830.\r\nNeeds tests, rebase and release-note mentioning.",
      "created_at" : "2016-05-22T12:54:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7729#issuecomment-220830924",
      "id" : 220830924,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7729",
      "updated_at" : "2016-05-22T12:54:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/220830924",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "Needs tests.",
      "created_at" : "2016-05-22T16:04:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7729#issuecomment-220840308",
      "id" : 220840308,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7729",
      "updated_at" : "2016-05-22T16:04:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/220840308",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2033945?v=3",
         "events_url" : "https://api.github.com/users/wallclockbuilder/events{/privacy}",
         "followers_url" : "https://api.github.com/users/wallclockbuilder/followers",
         "following_url" : "https://api.github.com/users/wallclockbuilder/following{/other_user}",
         "gists_url" : "https://api.github.com/users/wallclockbuilder/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/wallclockbuilder",
         "id" : 2033945,
         "login" : "wallclockbuilder",
         "organizations_url" : "https://api.github.com/users/wallclockbuilder/orgs",
         "received_events_url" : "https://api.github.com/users/wallclockbuilder/received_events",
         "repos_url" : "https://api.github.com/users/wallclockbuilder/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/wallclockbuilder/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/wallclockbuilder/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/wallclockbuilder"
      }
   },
   {
      "body" : "@wallclockbuilder No shit, have you seen the TODOs at the bottom of the opening post?",
      "created_at" : "2016-06-02T13:13:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7729#issuecomment-223287263",
      "id" : 223287263,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7729",
      "updated_at" : "2016-06-02T13:13:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/223287263",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "To be clear I posted this to get comments on the API, is there anything left to be done there? I'm going to write tests when it is clear that this is what we want at all.",
      "created_at" : "2016-06-02T13:15:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7729#issuecomment-223287825",
      "id" : 223287825,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7729",
      "updated_at" : "2016-06-02T13:16:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/223287825",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "> Do not use the deprecated account system and the label system with the same wallet at the same time\r\n> [...]\r\n> optional: a flag in the wallet to prevent use of both the account and label API\r\n\r\nI would not consider this optional. User will always do what you not want them to do.\r\n",
      "created_at" : "2016-07-14T20:05:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7729#issuecomment-232776422",
      "id" : 232776422,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7729",
      "updated_at" : "2016-07-14T20:05:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/232776422",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=3",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "body" : "Concept ACK",
      "created_at" : "2016-08-25T12:46:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7729#issuecomment-242373379",
      "id" : 242373379,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7729",
      "updated_at" : "2016-08-25T12:46:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/242373379",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "listtransactions has an \"account\" argument where you now you would pass \"*\" if you need to supply non-default args for count, from, and includeWatchOnly. Will there be a way to query for transactions affecting any address with a given label? Could we tack on a \"label\" argument to listtransactions?",
      "created_at" : "2016-09-24T02:38:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7729#issuecomment-249340313",
      "id" : 249340313,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7729",
      "updated_at" : "2016-09-24T02:39:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/249340313",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/101534?v=3",
         "events_url" : "https://api.github.com/users/andrewbaine/events{/privacy}",
         "followers_url" : "https://api.github.com/users/andrewbaine/followers",
         "following_url" : "https://api.github.com/users/andrewbaine/following{/other_user}",
         "gists_url" : "https://api.github.com/users/andrewbaine/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/andrewbaine",
         "id" : 101534,
         "login" : "andrewbaine",
         "organizations_url" : "https://api.github.com/users/andrewbaine/orgs",
         "received_events_url" : "https://api.github.com/users/andrewbaine/received_events",
         "repos_url" : "https://api.github.com/users/andrewbaine/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/andrewbaine/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/andrewbaine/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/andrewbaine"
      }
   },
   {
      "body" : "I think the account argument of listtransactions could simply be re-used as a label argument. As listing transactions to a label has nothing to do with per-label balances there is no need to drop that particular functionality, ",
      "created_at" : "2016-09-24T05:25:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7729#issuecomment-249346342",
      "id" : 249346342,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7729",
      "updated_at" : "2016-09-24T05:25:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/249346342",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "repurposing the \"account\" argument to be \"label\" makes sense to me",
      "created_at" : "2016-10-03T15:00:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7729#issuecomment-251130307",
      "id" : 251130307,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7729",
      "updated_at" : "2016-10-03T15:00:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/251130307",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/101534?v=3",
         "events_url" : "https://api.github.com/users/andrewbaine/events{/privacy}",
         "followers_url" : "https://api.github.com/users/andrewbaine/followers",
         "following_url" : "https://api.github.com/users/andrewbaine/following{/other_user}",
         "gists_url" : "https://api.github.com/users/andrewbaine/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/andrewbaine",
         "id" : 101534,
         "login" : "andrewbaine",
         "organizations_url" : "https://api.github.com/users/andrewbaine/orgs",
         "received_events_url" : "https://api.github.com/users/andrewbaine/received_events",
         "repos_url" : "https://api.github.com/users/andrewbaine/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/andrewbaine/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/andrewbaine/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/andrewbaine"
      }
   },
   {
      "body" : "Fast review ACK (besides needing rebase and the promised tests).\r\nThe API is actually more than I expected but still simple enough, I think.\r\n\r\n > optional: a flag in the wallet to prevent use of both the account and label API\r\n\r\nI'm not sure it's worth to bother. I think we should go ahead and completely remove account functionality within 0.14 instead. But whatever we do, it can be done in a later PR.\r\n",
      "created_at" : "2016-11-17T22:38:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7729#issuecomment-261392305",
      "id" : 261392305,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7729",
      "updated_at" : "2016-11-17T22:38:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/261392305",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "body" : ">labels are associated with addresses, instead of addresses associated with labels\r\n\r\nDescription nit: not sure I catch the distinction here.  \r\n\r\n>Should there be such a thing as a 'label address'?  \r\n\r\nI'd say no unless there is a compelling use-case that can't be replicated another way.",
      "created_at" : "2016-11-18T14:06:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7729#issuecomment-261539197",
      "id" : 261539197,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7729",
      "updated_at" : "2016-11-18T14:11:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/261539197",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=3",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7729#discussion_r88665805"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7729"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/88665805"
         }
      },
      "body" : "would `getnewlabeladdress` be wrong? As-is gave me the impression that this was some static address.\n",
      "commit_id" : "0e3ef241d18593a9f67d4e5f37c22008cd9dc6b7",
      "created_at" : "2016-11-18T14:27:47Z",
      "diff_hunk" : "@@ -2497,6 +2503,216 @@ UniValue fundrawtransaction(const UniValue& params, bool fHelp)\n     return result;\n }\n \n+UniValue getlabeladdress(const UniValue& params, bool fHelp)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7729#discussion_r88665805",
      "id" : 88665805,
      "original_commit_id" : "d036fa44112df0c9faf76a1d69767b45a37e391b",
      "original_position" : 17,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 9233413,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7729",
      "updated_at" : "2017-06-29T18:35:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/88665805",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/5767891?v=3",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7729#discussion_r88665910"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7729"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/88665910"
         }
      },
      "body" : "perhaps mention `latest unused` or something similar. \n",
      "commit_id" : "0e3ef241d18593a9f67d4e5f37c22008cd9dc6b7",
      "created_at" : "2016-11-18T14:28:21Z",
      "diff_hunk" : "@@ -2497,6 +2503,216 @@ UniValue fundrawtransaction(const UniValue& params, bool fHelp)\n     return result;\n }\n \n+UniValue getlabeladdress(const UniValue& params, bool fHelp)\n+{\n+    if (!EnsureWalletIsAvailable(fHelp))\n+        return NullUniValue;\n+\n+    if (fHelp || params.size() != 1)\n+        throw runtime_error(\n+            \"getlabeladdress \\\"label\\\"\\n\"\n+            \"\\nReturns the current 'label address' for this label.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"label\\\"       (string, required) The label for the address. It can also be set to the empty string \\\"\\\" to represent the default label.\\n\"\n+            \"\\nResult:\\n\"\n+            \"\\\"bitcoinaddress\\\"   (string) The 'label address' for the label\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7729#discussion_r88665910",
      "id" : 88665910,
      "original_commit_id" : "d036fa44112df0c9faf76a1d69767b45a37e391b",
      "original_position" : 29,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : 30,
      "pull_request_review_id" : 9233413,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7729",
      "updated_at" : "2017-06-29T18:35:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/88665910",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/5767891?v=3",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7729#discussion_r88668316"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7729"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/88668316"
         }
      },
      "body" : "I'm not as familiar with accounts as others, but is this type of parameter actually going to be used? When would you want to list labels that go certain directions? I have a feeling labels people choose will reflect this already.\n",
      "commit_id" : "0e3ef241d18593a9f67d4e5f37c22008cd9dc6b7",
      "created_at" : "2016-11-18T14:42:10Z",
      "diff_hunk" : "@@ -2497,6 +2503,216 @@ UniValue fundrawtransaction(const UniValue& params, bool fHelp)\n     return result;\n }\n \n+UniValue getlabeladdress(const UniValue& params, bool fHelp)\n+{\n+    if (!EnsureWalletIsAvailable(fHelp))\n+        return NullUniValue;\n+\n+    if (fHelp || params.size() != 1)\n+        throw runtime_error(\n+            \"getlabeladdress \\\"label\\\"\\n\"\n+            \"\\nReturns the current 'label address' for this label.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"label\\\"       (string, required) The label for the address. It can also be set to the empty string \\\"\\\" to represent the default label.\\n\"\n+            \"\\nResult:\\n\"\n+            \"\\\"bitcoinaddress\\\"   (string) The 'label address' for the label\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"getlabeladdress\", \"\")\n+            + HelpExampleCli(\"getlabeladdress\", \"\\\"\\\"\")\n+            + HelpExampleCli(\"getlabeladdress\", \"\\\"mylabel\\\"\")\n+            + HelpExampleRpc(\"getlabeladdress\", \"\\\"mylabel\\\"\")\n+        );\n+\n+    LOCK2(cs_main, pwalletMain->cs_wallet);\n+\n+    // Parse the label first so we don't generate a key if there's an error\n+    string strLabel = AccountFromValue(params[0]);\n+\n+    UniValue ret(UniValue::VSTR);\n+\n+    ret = GetAccountAddress(strLabel).ToString();\n+    return ret;\n+}\n+\n+/** Convert CAddressBookData to JSON record.\n+ * The verbosity of the output is configurable based on the command.\n+ */\n+static UniValue AddressBookDataToJSON(const CAddressBookData& data, bool includeName, bool includeDestData)\n+{\n+    UniValue ret(UniValue::VOBJ);\n+    if (includeName)\n+        ret.push_back(Pair(\"name\", data.name));\n+    ret.push_back(Pair(\"purpose\", data.purpose));\n+    if (includeDestData) {\n+        UniValue ddata(UniValue::VOBJ);\n+        BOOST_FOREACH(const PAIRTYPE(std::string, std::string) &item, data.destdata)\n+            ddata.push_back(Pair(item.first, item.second));\n+        ret.push_back(Pair(\"destdata\", ddata));\n+    }\n+    return ret;\n+}\n+\n+UniValue getlabel(const UniValue& params, bool fHelp)\n+{\n+    if (!EnsureWalletIsAvailable(fHelp))\n+        return NullUniValue;\n+\n+    if (fHelp || params.size() != 1)\n+        throw runtime_error(\n+            \"getlabel \\\"bitcoinaddress\\\"\\n\"\n+            \"\\nReturns the label associated with the given address.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"bitcoinaddress\\\"  (string, required) The bitcoin address for label lookup.\\n\"\n+            \"\\nResult:\\n\"\n+            \"  { (json object with information about address)\\n\"\n+            \"    \\\"name\\\": \\\"labelname\\\" (string) The label\\n\"\n+            \"    \\\"purpose\\\": \\\"string\\\" (string) Purpose of address (\\\"send\\\" for sending address, \\\"receive\\\" for receiving address)\\n\"\n+            \"  },...\\n\"\n+            \"  Result is null if there is no record for this address.\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"getlabel\", \"\\\"1D1ZrZNe3JUo7ZycKEYQQiQAWd9y54F4XZ\\\"\")\n+            + HelpExampleRpc(\"getlabel\", \"\\\"1D1ZrZNe3JUo7ZycKEYQQiQAWd9y54F4XZ\\\"\")\n+        );\n+\n+    LOCK2(cs_main, pwalletMain->cs_wallet);\n+\n+    CBitcoinAddress address(params[0].get_str());\n+    if (!address.IsValid())\n+        throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Invalid Bitcoin address\");\n+\n+    map<CTxDestination, CAddressBookData>::iterator mi = pwalletMain->mapAddressBook.find(address.Get());\n+    if (mi != pwalletMain->mapAddressBook.end())\n+        return AddressBookDataToJSON((*mi).second, true, true);\n+    return NullUniValue;\n+}\n+\n+UniValue getaddressesbylabel(const UniValue& params, bool fHelp)\n+{\n+    if (!EnsureWalletIsAvailable(fHelp))\n+        return NullUniValue;\n+\n+    if (fHelp || params.size() != 1)\n+        throw runtime_error(\n+            \"getaddressesbylabel \\\"label\\\"\\n\"\n+            \"\\nReturns the list of addresses assigned the specified label.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"label\\\"  (string, required) The label.\\n\"\n+            \"\\nResult:\\n\"\n+            \"{ (json object with addresses as keys)\\n\"\n+            \"  \\\"bitcoinaddress\\\": { (json object with information about address)\\n\"\n+            \"    \\\"purpose\\\": \\\"string\\\" (string)  Purpose of address (\\\"send\\\" for sending address, \\\"receive\\\" for receiving address)\\n\"\n+            \"  },...\\n\"\n+            \"}\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"getaddressesbylabel\", \"\\\"tabby\\\"\")\n+            + HelpExampleRpc(\"getaddressesbylabel\", \"\\\"tabby\\\"\")\n+        );\n+\n+    LOCK2(cs_main, pwalletMain->cs_wallet);\n+\n+    string strLabel = AccountFromValue(params[0]);\n+\n+    // Find all addresses that have the given label\n+    UniValue ret(UniValue::VOBJ);\n+    BOOST_FOREACH(const PAIRTYPE(CBitcoinAddress, CAddressBookData)& item, pwalletMain->mapAddressBook)\n+    {\n+        if (item.second.name == strLabel)\n+            ret.push_back(Pair(item.first.ToString(), AddressBookDataToJSON(item.second, false, false)));\n+    }\n+    return ret;\n+}\n+\n+UniValue listlabels(const UniValue& params, bool fHelp)\n+{\n+    if (!EnsureWalletIsAvailable(fHelp))\n+        return NullUniValue;\n+\n+    if (fHelp || params.size() > 1)\n+        throw runtime_error(\n+            \"listlabels ( \\\"purpose\\\" )\\n\"\n+            \"\\nReturns the list of all labels, or labels that are assigned to addresses with a specific purpose.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"purpose\\\"  (string, optional) Address purpose to list labels for ('send','receive'). An empty string is the same as not providing this argument.\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7729#discussion_r88668316",
      "id" : 88668316,
      "original_commit_id" : "d036fa44112df0c9faf76a1d69767b45a37e391b",
      "original_position" : 146,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 9233413,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7729",
      "updated_at" : "2017-06-29T18:35:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/88668316",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/5767891?v=3",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7729#discussion_r88669423"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7729"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/88669423"
         }
      },
      "body" : "it also adds it to the address book if previously unknown, correct?\n",
      "commit_id" : "0e3ef241d18593a9f67d4e5f37c22008cd9dc6b7",
      "created_at" : "2016-11-18T14:46:58Z",
      "diff_hunk" : "@@ -2497,6 +2503,216 @@ UniValue fundrawtransaction(const UniValue& params, bool fHelp)\n     return result;\n }\n \n+UniValue getlabeladdress(const UniValue& params, bool fHelp)\n+{\n+    if (!EnsureWalletIsAvailable(fHelp))\n+        return NullUniValue;\n+\n+    if (fHelp || params.size() != 1)\n+        throw runtime_error(\n+            \"getlabeladdress \\\"label\\\"\\n\"\n+            \"\\nReturns the current 'label address' for this label.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"label\\\"       (string, required) The label for the address. It can also be set to the empty string \\\"\\\" to represent the default label.\\n\"\n+            \"\\nResult:\\n\"\n+            \"\\\"bitcoinaddress\\\"   (string) The 'label address' for the label\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"getlabeladdress\", \"\")\n+            + HelpExampleCli(\"getlabeladdress\", \"\\\"\\\"\")\n+            + HelpExampleCli(\"getlabeladdress\", \"\\\"mylabel\\\"\")\n+            + HelpExampleRpc(\"getlabeladdress\", \"\\\"mylabel\\\"\")\n+        );\n+\n+    LOCK2(cs_main, pwalletMain->cs_wallet);\n+\n+    // Parse the label first so we don't generate a key if there's an error\n+    string strLabel = AccountFromValue(params[0]);\n+\n+    UniValue ret(UniValue::VSTR);\n+\n+    ret = GetAccountAddress(strLabel).ToString();\n+    return ret;\n+}\n+\n+/** Convert CAddressBookData to JSON record.\n+ * The verbosity of the output is configurable based on the command.\n+ */\n+static UniValue AddressBookDataToJSON(const CAddressBookData& data, bool includeName, bool includeDestData)\n+{\n+    UniValue ret(UniValue::VOBJ);\n+    if (includeName)\n+        ret.push_back(Pair(\"name\", data.name));\n+    ret.push_back(Pair(\"purpose\", data.purpose));\n+    if (includeDestData) {\n+        UniValue ddata(UniValue::VOBJ);\n+        BOOST_FOREACH(const PAIRTYPE(std::string, std::string) &item, data.destdata)\n+            ddata.push_back(Pair(item.first, item.second));\n+        ret.push_back(Pair(\"destdata\", ddata));\n+    }\n+    return ret;\n+}\n+\n+UniValue getlabel(const UniValue& params, bool fHelp)\n+{\n+    if (!EnsureWalletIsAvailable(fHelp))\n+        return NullUniValue;\n+\n+    if (fHelp || params.size() != 1)\n+        throw runtime_error(\n+            \"getlabel \\\"bitcoinaddress\\\"\\n\"\n+            \"\\nReturns the label associated with the given address.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"bitcoinaddress\\\"  (string, required) The bitcoin address for label lookup.\\n\"\n+            \"\\nResult:\\n\"\n+            \"  { (json object with information about address)\\n\"\n+            \"    \\\"name\\\": \\\"labelname\\\" (string) The label\\n\"\n+            \"    \\\"purpose\\\": \\\"string\\\" (string) Purpose of address (\\\"send\\\" for sending address, \\\"receive\\\" for receiving address)\\n\"\n+            \"  },...\\n\"\n+            \"  Result is null if there is no record for this address.\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"getlabel\", \"\\\"1D1ZrZNe3JUo7ZycKEYQQiQAWd9y54F4XZ\\\"\")\n+            + HelpExampleRpc(\"getlabel\", \"\\\"1D1ZrZNe3JUo7ZycKEYQQiQAWd9y54F4XZ\\\"\")\n+        );\n+\n+    LOCK2(cs_main, pwalletMain->cs_wallet);\n+\n+    CBitcoinAddress address(params[0].get_str());\n+    if (!address.IsValid())\n+        throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Invalid Bitcoin address\");\n+\n+    map<CTxDestination, CAddressBookData>::iterator mi = pwalletMain->mapAddressBook.find(address.Get());\n+    if (mi != pwalletMain->mapAddressBook.end())\n+        return AddressBookDataToJSON((*mi).second, true, true);\n+    return NullUniValue;\n+}\n+\n+UniValue getaddressesbylabel(const UniValue& params, bool fHelp)\n+{\n+    if (!EnsureWalletIsAvailable(fHelp))\n+        return NullUniValue;\n+\n+    if (fHelp || params.size() != 1)\n+        throw runtime_error(\n+            \"getaddressesbylabel \\\"label\\\"\\n\"\n+            \"\\nReturns the list of addresses assigned the specified label.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"label\\\"  (string, required) The label.\\n\"\n+            \"\\nResult:\\n\"\n+            \"{ (json object with addresses as keys)\\n\"\n+            \"  \\\"bitcoinaddress\\\": { (json object with information about address)\\n\"\n+            \"    \\\"purpose\\\": \\\"string\\\" (string)  Purpose of address (\\\"send\\\" for sending address, \\\"receive\\\" for receiving address)\\n\"\n+            \"  },...\\n\"\n+            \"}\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"getaddressesbylabel\", \"\\\"tabby\\\"\")\n+            + HelpExampleRpc(\"getaddressesbylabel\", \"\\\"tabby\\\"\")\n+        );\n+\n+    LOCK2(cs_main, pwalletMain->cs_wallet);\n+\n+    string strLabel = AccountFromValue(params[0]);\n+\n+    // Find all addresses that have the given label\n+    UniValue ret(UniValue::VOBJ);\n+    BOOST_FOREACH(const PAIRTYPE(CBitcoinAddress, CAddressBookData)& item, pwalletMain->mapAddressBook)\n+    {\n+        if (item.second.name == strLabel)\n+            ret.push_back(Pair(item.first.ToString(), AddressBookDataToJSON(item.second, false, false)));\n+    }\n+    return ret;\n+}\n+\n+UniValue listlabels(const UniValue& params, bool fHelp)\n+{\n+    if (!EnsureWalletIsAvailable(fHelp))\n+        return NullUniValue;\n+\n+    if (fHelp || params.size() > 1)\n+        throw runtime_error(\n+            \"listlabels ( \\\"purpose\\\" )\\n\"\n+            \"\\nReturns the list of all labels, or labels that are assigned to addresses with a specific purpose.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"purpose\\\"  (string, optional) Address purpose to list labels for ('send','receive'). An empty string is the same as not providing this argument.\\n\"\n+            \"\\nResult:\\n\"\n+            \"[                      (json array of string)\\n\"\n+            \"  \\\"label\\\",  (string) Label name\\n\"\n+            \"  ...\\n\"\n+            \"]\\n\"\n+            \"\\nExamples:\\n\"\n+            \"\\nList all labels\\n\"\n+            + HelpExampleCli(\"listlabels\", \"\") +\n+            \"\\nList labels that have receiving addresses\\n\"\n+            + HelpExampleCli(\"listlabels\", \"receive\") +\n+            \"\\nList labels that have sending addresses\\n\"\n+            + HelpExampleCli(\"listlabels\", \"send\") +\n+            \"\\nAs json rpc call\\n\"\n+            + HelpExampleRpc(\"listlabels\", \"receive\")\n+        );\n+\n+    LOCK2(cs_main, pwalletMain->cs_wallet);\n+\n+    std::string purpose;\n+    if (params.size() > 0)\n+        purpose = params[0].get_str();\n+\n+    std::set<std::string> setLabels;\n+    BOOST_FOREACH(const PAIRTYPE(CTxDestination, CAddressBookData)& entry, pwalletMain->mapAddressBook) {\n+        if (purpose.empty() || entry.second.purpose == purpose)\n+            setLabels.insert(entry.second.name);\n+    }\n+    UniValue ret(UniValue::VARR);\n+    BOOST_FOREACH(const std::string &name, setLabels)\n+        ret.push_back(name);\n+\n+    return ret;\n+}\n+\n+UniValue setlabel(const UniValue& params, bool fHelp)\n+{\n+    if (!EnsureWalletIsAvailable(fHelp))\n+        return NullUniValue;\n+\n+    if (fHelp || params.size() < 1 || params.size() > 2)\n+        throw runtime_error(\n+            \"setlabel \\\"bitcoinaddress\\\" \\\"label\\\"\\n\"\n+            \"\\nSets the label associated with the given address.\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7729#discussion_r88669423",
      "id" : 88669423,
      "original_commit_id" : "d036fa44112df0c9faf76a1d69767b45a37e391b",
      "original_position" : 189,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 9233413,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7729",
      "updated_at" : "2017-06-29T18:35:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/88669423",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/5767891?v=3",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7729#discussion_r88887049"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7729"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/88887049"
         }
      },
      "body" : "The goal of this API is to expose exactly the same functionality that the GUI uses. The GUI distinguishes between different kind of labels (to show sending/receiving addresses), so it should be offered here as well.",
      "commit_id" : "0e3ef241d18593a9f67d4e5f37c22008cd9dc6b7",
      "created_at" : "2016-11-21T12:47:16Z",
      "diff_hunk" : "@@ -2497,6 +2503,216 @@ UniValue fundrawtransaction(const UniValue& params, bool fHelp)\n     return result;\n }\n \n+UniValue getlabeladdress(const UniValue& params, bool fHelp)\n+{\n+    if (!EnsureWalletIsAvailable(fHelp))\n+        return NullUniValue;\n+\n+    if (fHelp || params.size() != 1)\n+        throw runtime_error(\n+            \"getlabeladdress \\\"label\\\"\\n\"\n+            \"\\nReturns the current 'label address' for this label.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"label\\\"       (string, required) The label for the address. It can also be set to the empty string \\\"\\\" to represent the default label.\\n\"\n+            \"\\nResult:\\n\"\n+            \"\\\"bitcoinaddress\\\"   (string) The 'label address' for the label\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"getlabeladdress\", \"\")\n+            + HelpExampleCli(\"getlabeladdress\", \"\\\"\\\"\")\n+            + HelpExampleCli(\"getlabeladdress\", \"\\\"mylabel\\\"\")\n+            + HelpExampleRpc(\"getlabeladdress\", \"\\\"mylabel\\\"\")\n+        );\n+\n+    LOCK2(cs_main, pwalletMain->cs_wallet);\n+\n+    // Parse the label first so we don't generate a key if there's an error\n+    string strLabel = AccountFromValue(params[0]);\n+\n+    UniValue ret(UniValue::VSTR);\n+\n+    ret = GetAccountAddress(strLabel).ToString();\n+    return ret;\n+}\n+\n+/** Convert CAddressBookData to JSON record.\n+ * The verbosity of the output is configurable based on the command.\n+ */\n+static UniValue AddressBookDataToJSON(const CAddressBookData& data, bool includeName, bool includeDestData)\n+{\n+    UniValue ret(UniValue::VOBJ);\n+    if (includeName)\n+        ret.push_back(Pair(\"name\", data.name));\n+    ret.push_back(Pair(\"purpose\", data.purpose));\n+    if (includeDestData) {\n+        UniValue ddata(UniValue::VOBJ);\n+        BOOST_FOREACH(const PAIRTYPE(std::string, std::string) &item, data.destdata)\n+            ddata.push_back(Pair(item.first, item.second));\n+        ret.push_back(Pair(\"destdata\", ddata));\n+    }\n+    return ret;\n+}\n+\n+UniValue getlabel(const UniValue& params, bool fHelp)\n+{\n+    if (!EnsureWalletIsAvailable(fHelp))\n+        return NullUniValue;\n+\n+    if (fHelp || params.size() != 1)\n+        throw runtime_error(\n+            \"getlabel \\\"bitcoinaddress\\\"\\n\"\n+            \"\\nReturns the label associated with the given address.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"bitcoinaddress\\\"  (string, required) The bitcoin address for label lookup.\\n\"\n+            \"\\nResult:\\n\"\n+            \"  { (json object with information about address)\\n\"\n+            \"    \\\"name\\\": \\\"labelname\\\" (string) The label\\n\"\n+            \"    \\\"purpose\\\": \\\"string\\\" (string) Purpose of address (\\\"send\\\" for sending address, \\\"receive\\\" for receiving address)\\n\"\n+            \"  },...\\n\"\n+            \"  Result is null if there is no record for this address.\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"getlabel\", \"\\\"1D1ZrZNe3JUo7ZycKEYQQiQAWd9y54F4XZ\\\"\")\n+            + HelpExampleRpc(\"getlabel\", \"\\\"1D1ZrZNe3JUo7ZycKEYQQiQAWd9y54F4XZ\\\"\")\n+        );\n+\n+    LOCK2(cs_main, pwalletMain->cs_wallet);\n+\n+    CBitcoinAddress address(params[0].get_str());\n+    if (!address.IsValid())\n+        throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Invalid Bitcoin address\");\n+\n+    map<CTxDestination, CAddressBookData>::iterator mi = pwalletMain->mapAddressBook.find(address.Get());\n+    if (mi != pwalletMain->mapAddressBook.end())\n+        return AddressBookDataToJSON((*mi).second, true, true);\n+    return NullUniValue;\n+}\n+\n+UniValue getaddressesbylabel(const UniValue& params, bool fHelp)\n+{\n+    if (!EnsureWalletIsAvailable(fHelp))\n+        return NullUniValue;\n+\n+    if (fHelp || params.size() != 1)\n+        throw runtime_error(\n+            \"getaddressesbylabel \\\"label\\\"\\n\"\n+            \"\\nReturns the list of addresses assigned the specified label.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"label\\\"  (string, required) The label.\\n\"\n+            \"\\nResult:\\n\"\n+            \"{ (json object with addresses as keys)\\n\"\n+            \"  \\\"bitcoinaddress\\\": { (json object with information about address)\\n\"\n+            \"    \\\"purpose\\\": \\\"string\\\" (string)  Purpose of address (\\\"send\\\" for sending address, \\\"receive\\\" for receiving address)\\n\"\n+            \"  },...\\n\"\n+            \"}\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"getaddressesbylabel\", \"\\\"tabby\\\"\")\n+            + HelpExampleRpc(\"getaddressesbylabel\", \"\\\"tabby\\\"\")\n+        );\n+\n+    LOCK2(cs_main, pwalletMain->cs_wallet);\n+\n+    string strLabel = AccountFromValue(params[0]);\n+\n+    // Find all addresses that have the given label\n+    UniValue ret(UniValue::VOBJ);\n+    BOOST_FOREACH(const PAIRTYPE(CBitcoinAddress, CAddressBookData)& item, pwalletMain->mapAddressBook)\n+    {\n+        if (item.second.name == strLabel)\n+            ret.push_back(Pair(item.first.ToString(), AddressBookDataToJSON(item.second, false, false)));\n+    }\n+    return ret;\n+}\n+\n+UniValue listlabels(const UniValue& params, bool fHelp)\n+{\n+    if (!EnsureWalletIsAvailable(fHelp))\n+        return NullUniValue;\n+\n+    if (fHelp || params.size() > 1)\n+        throw runtime_error(\n+            \"listlabels ( \\\"purpose\\\" )\\n\"\n+            \"\\nReturns the list of all labels, or labels that are assigned to addresses with a specific purpose.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"purpose\\\"  (string, optional) Address purpose to list labels for ('send','receive'). An empty string is the same as not providing this argument.\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7729#discussion_r88887049",
      "id" : 88887049,
      "original_commit_id" : "d036fa44112df0c9faf76a1d69767b45a37e391b",
      "original_position" : 146,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 9444753,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7729",
      "updated_at" : "2017-06-29T18:35:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/88887049",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7729#discussion_r88887107"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7729"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/88887107"
         }
      },
      "body" : "I still think we should get rid of this.",
      "commit_id" : "0e3ef241d18593a9f67d4e5f37c22008cd9dc6b7",
      "created_at" : "2016-11-21T12:47:43Z",
      "diff_hunk" : "@@ -2497,6 +2503,216 @@ UniValue fundrawtransaction(const UniValue& params, bool fHelp)\n     return result;\n }\n \n+UniValue getlabeladdress(const UniValue& params, bool fHelp)\n+{\n+    if (!EnsureWalletIsAvailable(fHelp))\n+        return NullUniValue;\n+\n+    if (fHelp || params.size() != 1)\n+        throw runtime_error(\n+            \"getlabeladdress \\\"label\\\"\\n\"\n+            \"\\nReturns the current 'label address' for this label.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"label\\\"       (string, required) The label for the address. It can also be set to the empty string \\\"\\\" to represent the default label.\\n\"\n+            \"\\nResult:\\n\"\n+            \"\\\"bitcoinaddress\\\"   (string) The 'label address' for the label\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7729#discussion_r88887107",
      "id" : 88887107,
      "original_commit_id" : "d036fa44112df0c9faf76a1d69767b45a37e391b",
      "original_position" : 29,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : 30,
      "pull_request_review_id" : 9444803,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7729",
      "updated_at" : "2017-06-29T18:35:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/88887107",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "> It also may be helpful to give a brief motivation in the OP. What's wrong with accounts, and what label fixes about that. Currently it's a list of differences without clear motivation.\r\n\r\nSee #3816",
      "created_at" : "2016-11-21T12:48:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7729#issuecomment-261928077",
      "id" : 261928077,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7729",
      "updated_at" : "2016-11-21T12:48:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/261928077",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7729#discussion_r88887646"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7729"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/88887646"
         }
      },
      "body" : "Indeed, that is what setting a label does. If there is no labeling information associated with an address it will create that. We don't want to use the term \"address book\" here I think.\r\n",
      "commit_id" : "0e3ef241d18593a9f67d4e5f37c22008cd9dc6b7",
      "created_at" : "2016-11-21T12:51:30Z",
      "diff_hunk" : "@@ -2497,6 +2503,216 @@ UniValue fundrawtransaction(const UniValue& params, bool fHelp)\n     return result;\n }\n \n+UniValue getlabeladdress(const UniValue& params, bool fHelp)\n+{\n+    if (!EnsureWalletIsAvailable(fHelp))\n+        return NullUniValue;\n+\n+    if (fHelp || params.size() != 1)\n+        throw runtime_error(\n+            \"getlabeladdress \\\"label\\\"\\n\"\n+            \"\\nReturns the current 'label address' for this label.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"label\\\"       (string, required) The label for the address. It can also be set to the empty string \\\"\\\" to represent the default label.\\n\"\n+            \"\\nResult:\\n\"\n+            \"\\\"bitcoinaddress\\\"   (string) The 'label address' for the label\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"getlabeladdress\", \"\")\n+            + HelpExampleCli(\"getlabeladdress\", \"\\\"\\\"\")\n+            + HelpExampleCli(\"getlabeladdress\", \"\\\"mylabel\\\"\")\n+            + HelpExampleRpc(\"getlabeladdress\", \"\\\"mylabel\\\"\")\n+        );\n+\n+    LOCK2(cs_main, pwalletMain->cs_wallet);\n+\n+    // Parse the label first so we don't generate a key if there's an error\n+    string strLabel = AccountFromValue(params[0]);\n+\n+    UniValue ret(UniValue::VSTR);\n+\n+    ret = GetAccountAddress(strLabel).ToString();\n+    return ret;\n+}\n+\n+/** Convert CAddressBookData to JSON record.\n+ * The verbosity of the output is configurable based on the command.\n+ */\n+static UniValue AddressBookDataToJSON(const CAddressBookData& data, bool includeName, bool includeDestData)\n+{\n+    UniValue ret(UniValue::VOBJ);\n+    if (includeName)\n+        ret.push_back(Pair(\"name\", data.name));\n+    ret.push_back(Pair(\"purpose\", data.purpose));\n+    if (includeDestData) {\n+        UniValue ddata(UniValue::VOBJ);\n+        BOOST_FOREACH(const PAIRTYPE(std::string, std::string) &item, data.destdata)\n+            ddata.push_back(Pair(item.first, item.second));\n+        ret.push_back(Pair(\"destdata\", ddata));\n+    }\n+    return ret;\n+}\n+\n+UniValue getlabel(const UniValue& params, bool fHelp)\n+{\n+    if (!EnsureWalletIsAvailable(fHelp))\n+        return NullUniValue;\n+\n+    if (fHelp || params.size() != 1)\n+        throw runtime_error(\n+            \"getlabel \\\"bitcoinaddress\\\"\\n\"\n+            \"\\nReturns the label associated with the given address.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"bitcoinaddress\\\"  (string, required) The bitcoin address for label lookup.\\n\"\n+            \"\\nResult:\\n\"\n+            \"  { (json object with information about address)\\n\"\n+            \"    \\\"name\\\": \\\"labelname\\\" (string) The label\\n\"\n+            \"    \\\"purpose\\\": \\\"string\\\" (string) Purpose of address (\\\"send\\\" for sending address, \\\"receive\\\" for receiving address)\\n\"\n+            \"  },...\\n\"\n+            \"  Result is null if there is no record for this address.\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"getlabel\", \"\\\"1D1ZrZNe3JUo7ZycKEYQQiQAWd9y54F4XZ\\\"\")\n+            + HelpExampleRpc(\"getlabel\", \"\\\"1D1ZrZNe3JUo7ZycKEYQQiQAWd9y54F4XZ\\\"\")\n+        );\n+\n+    LOCK2(cs_main, pwalletMain->cs_wallet);\n+\n+    CBitcoinAddress address(params[0].get_str());\n+    if (!address.IsValid())\n+        throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Invalid Bitcoin address\");\n+\n+    map<CTxDestination, CAddressBookData>::iterator mi = pwalletMain->mapAddressBook.find(address.Get());\n+    if (mi != pwalletMain->mapAddressBook.end())\n+        return AddressBookDataToJSON((*mi).second, true, true);\n+    return NullUniValue;\n+}\n+\n+UniValue getaddressesbylabel(const UniValue& params, bool fHelp)\n+{\n+    if (!EnsureWalletIsAvailable(fHelp))\n+        return NullUniValue;\n+\n+    if (fHelp || params.size() != 1)\n+        throw runtime_error(\n+            \"getaddressesbylabel \\\"label\\\"\\n\"\n+            \"\\nReturns the list of addresses assigned the specified label.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"label\\\"  (string, required) The label.\\n\"\n+            \"\\nResult:\\n\"\n+            \"{ (json object with addresses as keys)\\n\"\n+            \"  \\\"bitcoinaddress\\\": { (json object with information about address)\\n\"\n+            \"    \\\"purpose\\\": \\\"string\\\" (string)  Purpose of address (\\\"send\\\" for sending address, \\\"receive\\\" for receiving address)\\n\"\n+            \"  },...\\n\"\n+            \"}\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"getaddressesbylabel\", \"\\\"tabby\\\"\")\n+            + HelpExampleRpc(\"getaddressesbylabel\", \"\\\"tabby\\\"\")\n+        );\n+\n+    LOCK2(cs_main, pwalletMain->cs_wallet);\n+\n+    string strLabel = AccountFromValue(params[0]);\n+\n+    // Find all addresses that have the given label\n+    UniValue ret(UniValue::VOBJ);\n+    BOOST_FOREACH(const PAIRTYPE(CBitcoinAddress, CAddressBookData)& item, pwalletMain->mapAddressBook)\n+    {\n+        if (item.second.name == strLabel)\n+            ret.push_back(Pair(item.first.ToString(), AddressBookDataToJSON(item.second, false, false)));\n+    }\n+    return ret;\n+}\n+\n+UniValue listlabels(const UniValue& params, bool fHelp)\n+{\n+    if (!EnsureWalletIsAvailable(fHelp))\n+        return NullUniValue;\n+\n+    if (fHelp || params.size() > 1)\n+        throw runtime_error(\n+            \"listlabels ( \\\"purpose\\\" )\\n\"\n+            \"\\nReturns the list of all labels, or labels that are assigned to addresses with a specific purpose.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"purpose\\\"  (string, optional) Address purpose to list labels for ('send','receive'). An empty string is the same as not providing this argument.\\n\"\n+            \"\\nResult:\\n\"\n+            \"[                      (json array of string)\\n\"\n+            \"  \\\"label\\\",  (string) Label name\\n\"\n+            \"  ...\\n\"\n+            \"]\\n\"\n+            \"\\nExamples:\\n\"\n+            \"\\nList all labels\\n\"\n+            + HelpExampleCli(\"listlabels\", \"\") +\n+            \"\\nList labels that have receiving addresses\\n\"\n+            + HelpExampleCli(\"listlabels\", \"receive\") +\n+            \"\\nList labels that have sending addresses\\n\"\n+            + HelpExampleCli(\"listlabels\", \"send\") +\n+            \"\\nAs json rpc call\\n\"\n+            + HelpExampleRpc(\"listlabels\", \"receive\")\n+        );\n+\n+    LOCK2(cs_main, pwalletMain->cs_wallet);\n+\n+    std::string purpose;\n+    if (params.size() > 0)\n+        purpose = params[0].get_str();\n+\n+    std::set<std::string> setLabels;\n+    BOOST_FOREACH(const PAIRTYPE(CTxDestination, CAddressBookData)& entry, pwalletMain->mapAddressBook) {\n+        if (purpose.empty() || entry.second.purpose == purpose)\n+            setLabels.insert(entry.second.name);\n+    }\n+    UniValue ret(UniValue::VARR);\n+    BOOST_FOREACH(const std::string &name, setLabels)\n+        ret.push_back(name);\n+\n+    return ret;\n+}\n+\n+UniValue setlabel(const UniValue& params, bool fHelp)\n+{\n+    if (!EnsureWalletIsAvailable(fHelp))\n+        return NullUniValue;\n+\n+    if (fHelp || params.size() < 1 || params.size() > 2)\n+        throw runtime_error(\n+            \"setlabel \\\"bitcoinaddress\\\" \\\"label\\\"\\n\"\n+            \"\\nSets the label associated with the given address.\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7729#discussion_r88887646",
      "id" : 88887646,
      "original_commit_id" : "d036fa44112df0c9faf76a1d69767b45a37e391b",
      "original_position" : 189,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 9445301,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7729",
      "updated_at" : "2017-06-29T18:35:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/88887646",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "utACK a2557ffb80543af5e92c3db03d257fe594b0d910 needs (trivial) rebase for the new `JSONRPCRequest` object passing.",
      "created_at" : "2016-11-21T12:53:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7729#issuecomment-261929161",
      "id" : 261929161,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7729",
      "updated_at" : "2016-11-21T12:53:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/261929161",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "@laanwj yes I read the issue, but there are some disagreements in that thread about what the actual issue is(malleability being the first issue noted?). I assume it's along the lines of \"people want to watermark addresses, but bitcoind wallet shouldn't try to be an accounting system for those labels\".",
      "created_at" : "2016-11-21T13:09:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7729#issuecomment-261933520",
      "id" : 261933520,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7729",
      "updated_at" : "2016-11-21T13:09:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/261933520",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=3",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "body" : "Hi. When is this new feature expected to be rolled out?",
      "created_at" : "2016-11-22T22:52:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7729#issuecomment-262390221",
      "id" : 262390221,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7729",
      "updated_at" : "2016-11-22T22:52:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/262390221",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1627972?v=3",
         "events_url" : "https://api.github.com/users/motatoes/events{/privacy}",
         "followers_url" : "https://api.github.com/users/motatoes/followers",
         "following_url" : "https://api.github.com/users/motatoes/following{/other_user}",
         "gists_url" : "https://api.github.com/users/motatoes/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/motatoes",
         "id" : 1627972,
         "login" : "motatoes",
         "organizations_url" : "https://api.github.com/users/motatoes/orgs",
         "received_events_url" : "https://api.github.com/users/motatoes/received_events",
         "repos_url" : "https://api.github.com/users/motatoes/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/motatoes/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/motatoes/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/motatoes"
      }
   },
   {
      "body" : "@motatoes Like everything, when it's ready. That may be in 0.14.0 or later.",
      "created_at" : "2016-11-22T22:54:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7729#issuecomment-262390495",
      "id" : 262390495,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7729",
      "updated_at" : "2016-11-22T22:54:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/262390495",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7729#discussion_r92064042"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7729"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/92064042"
         }
      },
      "body" : "This condition should be changed to `if (strOldLabel != strLabel && address == GetAccountAddress(strOldLabel))`, so calling setlabel on an address which already has the same label will just be a no-op, instead of creating an unexpected side effect where the label's default label address gets discarded.",
      "commit_id" : "0e3ef241d18593a9f67d4e5f37c22008cd9dc6b7",
      "created_at" : "2016-12-12T23:17:30Z",
      "diff_hunk" : "@@ -2497,6 +2503,216 @@ UniValue fundrawtransaction(const UniValue& params, bool fHelp)\n     return result;\n }\n \n+UniValue getlabeladdress(const UniValue& params, bool fHelp)\n+{\n+    if (!EnsureWalletIsAvailable(fHelp))\n+        return NullUniValue;\n+\n+    if (fHelp || params.size() != 1)\n+        throw runtime_error(\n+            \"getlabeladdress \\\"label\\\"\\n\"\n+            \"\\nReturns the current 'label address' for this label.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"label\\\"       (string, required) The label for the address. It can also be set to the empty string \\\"\\\" to represent the default label.\\n\"\n+            \"\\nResult:\\n\"\n+            \"\\\"bitcoinaddress\\\"   (string) The 'label address' for the label\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"getlabeladdress\", \"\")\n+            + HelpExampleCli(\"getlabeladdress\", \"\\\"\\\"\")\n+            + HelpExampleCli(\"getlabeladdress\", \"\\\"mylabel\\\"\")\n+            + HelpExampleRpc(\"getlabeladdress\", \"\\\"mylabel\\\"\")\n+        );\n+\n+    LOCK2(cs_main, pwalletMain->cs_wallet);\n+\n+    // Parse the label first so we don't generate a key if there's an error\n+    string strLabel = AccountFromValue(params[0]);\n+\n+    UniValue ret(UniValue::VSTR);\n+\n+    ret = GetAccountAddress(strLabel).ToString();\n+    return ret;\n+}\n+\n+/** Convert CAddressBookData to JSON record.\n+ * The verbosity of the output is configurable based on the command.\n+ */\n+static UniValue AddressBookDataToJSON(const CAddressBookData& data, bool includeName, bool includeDestData)\n+{\n+    UniValue ret(UniValue::VOBJ);\n+    if (includeName)\n+        ret.push_back(Pair(\"name\", data.name));\n+    ret.push_back(Pair(\"purpose\", data.purpose));\n+    if (includeDestData) {\n+        UniValue ddata(UniValue::VOBJ);\n+        BOOST_FOREACH(const PAIRTYPE(std::string, std::string) &item, data.destdata)\n+            ddata.push_back(Pair(item.first, item.second));\n+        ret.push_back(Pair(\"destdata\", ddata));\n+    }\n+    return ret;\n+}\n+\n+UniValue getlabel(const UniValue& params, bool fHelp)\n+{\n+    if (!EnsureWalletIsAvailable(fHelp))\n+        return NullUniValue;\n+\n+    if (fHelp || params.size() != 1)\n+        throw runtime_error(\n+            \"getlabel \\\"bitcoinaddress\\\"\\n\"\n+            \"\\nReturns the label associated with the given address.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"bitcoinaddress\\\"  (string, required) The bitcoin address for label lookup.\\n\"\n+            \"\\nResult:\\n\"\n+            \"  { (json object with information about address)\\n\"\n+            \"    \\\"name\\\": \\\"labelname\\\" (string) The label\\n\"\n+            \"    \\\"purpose\\\": \\\"string\\\" (string) Purpose of address (\\\"send\\\" for sending address, \\\"receive\\\" for receiving address)\\n\"\n+            \"  },...\\n\"\n+            \"  Result is null if there is no record for this address.\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"getlabel\", \"\\\"1D1ZrZNe3JUo7ZycKEYQQiQAWd9y54F4XZ\\\"\")\n+            + HelpExampleRpc(\"getlabel\", \"\\\"1D1ZrZNe3JUo7ZycKEYQQiQAWd9y54F4XZ\\\"\")\n+        );\n+\n+    LOCK2(cs_main, pwalletMain->cs_wallet);\n+\n+    CBitcoinAddress address(params[0].get_str());\n+    if (!address.IsValid())\n+        throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Invalid Bitcoin address\");\n+\n+    map<CTxDestination, CAddressBookData>::iterator mi = pwalletMain->mapAddressBook.find(address.Get());\n+    if (mi != pwalletMain->mapAddressBook.end())\n+        return AddressBookDataToJSON((*mi).second, true, true);\n+    return NullUniValue;\n+}\n+\n+UniValue getaddressesbylabel(const UniValue& params, bool fHelp)\n+{\n+    if (!EnsureWalletIsAvailable(fHelp))\n+        return NullUniValue;\n+\n+    if (fHelp || params.size() != 1)\n+        throw runtime_error(\n+            \"getaddressesbylabel \\\"label\\\"\\n\"\n+            \"\\nReturns the list of addresses assigned the specified label.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"label\\\"  (string, required) The label.\\n\"\n+            \"\\nResult:\\n\"\n+            \"{ (json object with addresses as keys)\\n\"\n+            \"  \\\"bitcoinaddress\\\": { (json object with information about address)\\n\"\n+            \"    \\\"purpose\\\": \\\"string\\\" (string)  Purpose of address (\\\"send\\\" for sending address, \\\"receive\\\" for receiving address)\\n\"\n+            \"  },...\\n\"\n+            \"}\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"getaddressesbylabel\", \"\\\"tabby\\\"\")\n+            + HelpExampleRpc(\"getaddressesbylabel\", \"\\\"tabby\\\"\")\n+        );\n+\n+    LOCK2(cs_main, pwalletMain->cs_wallet);\n+\n+    string strLabel = AccountFromValue(params[0]);\n+\n+    // Find all addresses that have the given label\n+    UniValue ret(UniValue::VOBJ);\n+    BOOST_FOREACH(const PAIRTYPE(CBitcoinAddress, CAddressBookData)& item, pwalletMain->mapAddressBook)\n+    {\n+        if (item.second.name == strLabel)\n+            ret.push_back(Pair(item.first.ToString(), AddressBookDataToJSON(item.second, false, false)));\n+    }\n+    return ret;\n+}\n+\n+UniValue listlabels(const UniValue& params, bool fHelp)\n+{\n+    if (!EnsureWalletIsAvailable(fHelp))\n+        return NullUniValue;\n+\n+    if (fHelp || params.size() > 1)\n+        throw runtime_error(\n+            \"listlabels ( \\\"purpose\\\" )\\n\"\n+            \"\\nReturns the list of all labels, or labels that are assigned to addresses with a specific purpose.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"purpose\\\"  (string, optional) Address purpose to list labels for ('send','receive'). An empty string is the same as not providing this argument.\\n\"\n+            \"\\nResult:\\n\"\n+            \"[                      (json array of string)\\n\"\n+            \"  \\\"label\\\",  (string) Label name\\n\"\n+            \"  ...\\n\"\n+            \"]\\n\"\n+            \"\\nExamples:\\n\"\n+            \"\\nList all labels\\n\"\n+            + HelpExampleCli(\"listlabels\", \"\") +\n+            \"\\nList labels that have receiving addresses\\n\"\n+            + HelpExampleCli(\"listlabels\", \"receive\") +\n+            \"\\nList labels that have sending addresses\\n\"\n+            + HelpExampleCli(\"listlabels\", \"send\") +\n+            \"\\nAs json rpc call\\n\"\n+            + HelpExampleRpc(\"listlabels\", \"receive\")\n+        );\n+\n+    LOCK2(cs_main, pwalletMain->cs_wallet);\n+\n+    std::string purpose;\n+    if (params.size() > 0)\n+        purpose = params[0].get_str();\n+\n+    std::set<std::string> setLabels;\n+    BOOST_FOREACH(const PAIRTYPE(CTxDestination, CAddressBookData)& entry, pwalletMain->mapAddressBook) {\n+        if (purpose.empty() || entry.second.purpose == purpose)\n+            setLabels.insert(entry.second.name);\n+    }\n+    UniValue ret(UniValue::VARR);\n+    BOOST_FOREACH(const std::string &name, setLabels)\n+        ret.push_back(name);\n+\n+    return ret;\n+}\n+\n+UniValue setlabel(const UniValue& params, bool fHelp)\n+{\n+    if (!EnsureWalletIsAvailable(fHelp))\n+        return NullUniValue;\n+\n+    if (fHelp || params.size() < 1 || params.size() > 2)\n+        throw runtime_error(\n+            \"setlabel \\\"bitcoinaddress\\\" \\\"label\\\"\\n\"\n+            \"\\nSets the label associated with the given address.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"bitcoinaddress\\\"  (string, required) The bitcoin address to be associated with an label.\\n\"\n+            \"2. \\\"label\\\"           (string, required) The label to assign to the address.\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"setlabel\", \"\\\"1D1ZrZNe3JUo7ZycKEYQQiQAWd9y54F4XZ\\\" \\\"tabby\\\"\")\n+            + HelpExampleRpc(\"setlabel\", \"\\\"1D1ZrZNe3JUo7ZycKEYQQiQAWd9y54F4XZ\\\", \\\"tabby\\\"\")\n+        );\n+\n+    LOCK2(cs_main, pwalletMain->cs_wallet);\n+\n+    CBitcoinAddress address(params[0].get_str());\n+    if (!address.IsValid())\n+        throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Invalid Bitcoin address\");\n+\n+    string strLabel;\n+    if (params.size() > 1)\n+        strLabel = AccountFromValue(params[1]);\n+\n+    if (IsMine(*pwalletMain, address.Get()))\n+    {\n+        // Detect when changing the label of an address that is the 'label address' of another label:\n+        // If so, delete the account record for it. Labels, unlike addresses can be deleted,\n+        // and we wouldn't do this, the record would stick around forever.\n+        if (pwalletMain->mapAddressBook.count(address.Get()))\n+        {\n+            string strOldLabel = pwalletMain->mapAddressBook[address.Get()].name;\n+            if (address == GetAccountAddress(strOldLabel))",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7729#discussion_r92064042",
      "id" : 92064042,
      "original_commit_id" : "d036fa44112df0c9faf76a1d69767b45a37e391b",
      "original_position" : 216,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 12573775,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7729",
      "updated_at" : "2017-06-29T18:35:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/92064042",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/7133040?v=3",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "body" : "@laanwj , I created an RPC test for this change here: https://github.com/ryanofsky/bitcoin/commit/2dac8eb0d915b4c04764eff100d81718b2cd9a90\r\n\r\nFeel free to incorporate it in this PR, or I could create a separate one.\r\n",
      "created_at" : "2016-12-13T00:00:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7729#issuecomment-266593020",
      "id" : 266593020,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7729",
      "updated_at" : "2016-12-13T00:00:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/266593020",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=3",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "body" : "Needs rebase",
      "created_at" : "2016-12-16T15:52:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7729#issuecomment-267624474",
      "id" : 267624474,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7729",
      "updated_at" : "2016-12-16T15:52:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/267624474",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "body" : "Needs rebase again, sorry for not reviewing after the last rebase.",
      "created_at" : "2017-03-06T22:42:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7729#issuecomment-284558409",
      "id" : 284558409,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7729",
      "updated_at" : "2017-03-06T22:42:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/284558409",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "body" : "Concept reACK",
      "created_at" : "2017-03-16T19:39:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7729#issuecomment-287168649",
      "id" : 287168649,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7729",
      "updated_at" : "2017-03-16T19:39:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/287168649",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Needs rebase. Concept ACK",
      "created_at" : "2017-03-24T21:13:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7729#issuecomment-289144410",
      "id" : 289144410,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7729",
      "updated_at" : "2017-03-24T21:13:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/289144410",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7729#discussion_r108552368"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7729"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108552368"
         }
      },
      "body" : "Is the label optional or required?\r\n\r\nIf it's required update L2675 to `if (fHelp || params.size() != 2)` and L2693-2695 to `std::string strLabel = AccountFromValue(params[1]);`, if optional update the docstring.",
      "commit_id" : "0e3ef241d18593a9f67d4e5f37c22008cd9dc6b7",
      "created_at" : "2017-03-28T22:26:10Z",
      "diff_hunk" : "@@ -2497,6 +2503,216 @@ UniValue fundrawtransaction(const UniValue& params, bool fHelp)\n     return result;\n }\n \n+UniValue getlabeladdress(const UniValue& params, bool fHelp)\n+{\n+    if (!EnsureWalletIsAvailable(fHelp))\n+        return NullUniValue;\n+\n+    if (fHelp || params.size() != 1)\n+        throw runtime_error(\n+            \"getlabeladdress \\\"label\\\"\\n\"\n+            \"\\nReturns the current 'label address' for this label.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"label\\\"       (string, required) The label for the address. It can also be set to the empty string \\\"\\\" to represent the default label.\\n\"\n+            \"\\nResult:\\n\"\n+            \"\\\"bitcoinaddress\\\"   (string) The 'label address' for the label\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"getlabeladdress\", \"\")\n+            + HelpExampleCli(\"getlabeladdress\", \"\\\"\\\"\")\n+            + HelpExampleCli(\"getlabeladdress\", \"\\\"mylabel\\\"\")\n+            + HelpExampleRpc(\"getlabeladdress\", \"\\\"mylabel\\\"\")\n+        );\n+\n+    LOCK2(cs_main, pwalletMain->cs_wallet);\n+\n+    // Parse the label first so we don't generate a key if there's an error\n+    string strLabel = AccountFromValue(params[0]);\n+\n+    UniValue ret(UniValue::VSTR);\n+\n+    ret = GetAccountAddress(strLabel).ToString();\n+    return ret;\n+}\n+\n+/** Convert CAddressBookData to JSON record.\n+ * The verbosity of the output is configurable based on the command.\n+ */\n+static UniValue AddressBookDataToJSON(const CAddressBookData& data, bool includeName, bool includeDestData)\n+{\n+    UniValue ret(UniValue::VOBJ);\n+    if (includeName)\n+        ret.push_back(Pair(\"name\", data.name));\n+    ret.push_back(Pair(\"purpose\", data.purpose));\n+    if (includeDestData) {\n+        UniValue ddata(UniValue::VOBJ);\n+        BOOST_FOREACH(const PAIRTYPE(std::string, std::string) &item, data.destdata)\n+            ddata.push_back(Pair(item.first, item.second));\n+        ret.push_back(Pair(\"destdata\", ddata));\n+    }\n+    return ret;\n+}\n+\n+UniValue getlabel(const UniValue& params, bool fHelp)\n+{\n+    if (!EnsureWalletIsAvailable(fHelp))\n+        return NullUniValue;\n+\n+    if (fHelp || params.size() != 1)\n+        throw runtime_error(\n+            \"getlabel \\\"bitcoinaddress\\\"\\n\"\n+            \"\\nReturns the label associated with the given address.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"bitcoinaddress\\\"  (string, required) The bitcoin address for label lookup.\\n\"\n+            \"\\nResult:\\n\"\n+            \"  { (json object with information about address)\\n\"\n+            \"    \\\"name\\\": \\\"labelname\\\" (string) The label\\n\"\n+            \"    \\\"purpose\\\": \\\"string\\\" (string) Purpose of address (\\\"send\\\" for sending address, \\\"receive\\\" for receiving address)\\n\"\n+            \"  },...\\n\"\n+            \"  Result is null if there is no record for this address.\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"getlabel\", \"\\\"1D1ZrZNe3JUo7ZycKEYQQiQAWd9y54F4XZ\\\"\")\n+            + HelpExampleRpc(\"getlabel\", \"\\\"1D1ZrZNe3JUo7ZycKEYQQiQAWd9y54F4XZ\\\"\")\n+        );\n+\n+    LOCK2(cs_main, pwalletMain->cs_wallet);\n+\n+    CBitcoinAddress address(params[0].get_str());\n+    if (!address.IsValid())\n+        throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Invalid Bitcoin address\");\n+\n+    map<CTxDestination, CAddressBookData>::iterator mi = pwalletMain->mapAddressBook.find(address.Get());\n+    if (mi != pwalletMain->mapAddressBook.end())\n+        return AddressBookDataToJSON((*mi).second, true, true);\n+    return NullUniValue;\n+}\n+\n+UniValue getaddressesbylabel(const UniValue& params, bool fHelp)\n+{\n+    if (!EnsureWalletIsAvailable(fHelp))\n+        return NullUniValue;\n+\n+    if (fHelp || params.size() != 1)\n+        throw runtime_error(\n+            \"getaddressesbylabel \\\"label\\\"\\n\"\n+            \"\\nReturns the list of addresses assigned the specified label.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"label\\\"  (string, required) The label.\\n\"\n+            \"\\nResult:\\n\"\n+            \"{ (json object with addresses as keys)\\n\"\n+            \"  \\\"bitcoinaddress\\\": { (json object with information about address)\\n\"\n+            \"    \\\"purpose\\\": \\\"string\\\" (string)  Purpose of address (\\\"send\\\" for sending address, \\\"receive\\\" for receiving address)\\n\"\n+            \"  },...\\n\"\n+            \"}\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"getaddressesbylabel\", \"\\\"tabby\\\"\")\n+            + HelpExampleRpc(\"getaddressesbylabel\", \"\\\"tabby\\\"\")\n+        );\n+\n+    LOCK2(cs_main, pwalletMain->cs_wallet);\n+\n+    string strLabel = AccountFromValue(params[0]);\n+\n+    // Find all addresses that have the given label\n+    UniValue ret(UniValue::VOBJ);\n+    BOOST_FOREACH(const PAIRTYPE(CBitcoinAddress, CAddressBookData)& item, pwalletMain->mapAddressBook)\n+    {\n+        if (item.second.name == strLabel)\n+            ret.push_back(Pair(item.first.ToString(), AddressBookDataToJSON(item.second, false, false)));\n+    }\n+    return ret;\n+}\n+\n+UniValue listlabels(const UniValue& params, bool fHelp)\n+{\n+    if (!EnsureWalletIsAvailable(fHelp))\n+        return NullUniValue;\n+\n+    if (fHelp || params.size() > 1)\n+        throw runtime_error(\n+            \"listlabels ( \\\"purpose\\\" )\\n\"\n+            \"\\nReturns the list of all labels, or labels that are assigned to addresses with a specific purpose.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"purpose\\\"  (string, optional) Address purpose to list labels for ('send','receive'). An empty string is the same as not providing this argument.\\n\"\n+            \"\\nResult:\\n\"\n+            \"[                      (json array of string)\\n\"\n+            \"  \\\"label\\\",  (string) Label name\\n\"\n+            \"  ...\\n\"\n+            \"]\\n\"\n+            \"\\nExamples:\\n\"\n+            \"\\nList all labels\\n\"\n+            + HelpExampleCli(\"listlabels\", \"\") +\n+            \"\\nList labels that have receiving addresses\\n\"\n+            + HelpExampleCli(\"listlabels\", \"receive\") +\n+            \"\\nList labels that have sending addresses\\n\"\n+            + HelpExampleCli(\"listlabels\", \"send\") +\n+            \"\\nAs json rpc call\\n\"\n+            + HelpExampleRpc(\"listlabels\", \"receive\")\n+        );\n+\n+    LOCK2(cs_main, pwalletMain->cs_wallet);\n+\n+    std::string purpose;\n+    if (params.size() > 0)\n+        purpose = params[0].get_str();\n+\n+    std::set<std::string> setLabels;\n+    BOOST_FOREACH(const PAIRTYPE(CTxDestination, CAddressBookData)& entry, pwalletMain->mapAddressBook) {\n+        if (purpose.empty() || entry.second.purpose == purpose)\n+            setLabels.insert(entry.second.name);\n+    }\n+    UniValue ret(UniValue::VARR);\n+    BOOST_FOREACH(const std::string &name, setLabels)\n+        ret.push_back(name);\n+\n+    return ret;\n+}\n+\n+UniValue setlabel(const UniValue& params, bool fHelp)\n+{\n+    if (!EnsureWalletIsAvailable(fHelp))\n+        return NullUniValue;\n+\n+    if (fHelp || params.size() < 1 || params.size() > 2)\n+        throw runtime_error(\n+            \"setlabel \\\"bitcoinaddress\\\" \\\"label\\\"\\n\"\n+            \"\\nSets the label associated with the given address.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"bitcoinaddress\\\"  (string, required) The bitcoin address to be associated with an label.\\n\"\n+            \"2. \\\"label\\\"           (string, required) The label to assign to the address.\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7729#discussion_r108552368",
      "id" : 108552368,
      "original_commit_id" : "d036fa44112df0c9faf76a1d69767b45a37e391b",
      "original_position" : 192,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : 208,
      "pull_request_review_id" : 29591055,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7729",
      "updated_at" : "2017-06-29T18:35:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108552368",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/886523?v=3",
         "events_url" : "https://api.github.com/users/JeremyRubin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JeremyRubin/followers",
         "following_url" : "https://api.github.com/users/JeremyRubin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JeremyRubin",
         "id" : 886523,
         "login" : "JeremyRubin",
         "organizations_url" : "https://api.github.com/users/JeremyRubin/orgs",
         "received_events_url" : "https://api.github.com/users/JeremyRubin/received_events",
         "repos_url" : "https://api.github.com/users/JeremyRubin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JeremyRubin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JeremyRubin"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7729#discussion_r108553186"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7729"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108553186"
         }
      },
      "body" : "Braces please!",
      "commit_id" : "0e3ef241d18593a9f67d4e5f37c22008cd9dc6b7",
      "created_at" : "2017-03-28T22:31:01Z",
      "diff_hunk" : "@@ -2497,6 +2503,216 @@ UniValue fundrawtransaction(const UniValue& params, bool fHelp)\n     return result;\n }\n \n+UniValue getlabeladdress(const UniValue& params, bool fHelp)\n+{\n+    if (!EnsureWalletIsAvailable(fHelp))\n+        return NullUniValue;\n+\n+    if (fHelp || params.size() != 1)\n+        throw runtime_error(\n+            \"getlabeladdress \\\"label\\\"\\n\"\n+            \"\\nReturns the current 'label address' for this label.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"label\\\"       (string, required) The label for the address. It can also be set to the empty string \\\"\\\" to represent the default label.\\n\"\n+            \"\\nResult:\\n\"\n+            \"\\\"bitcoinaddress\\\"   (string) The 'label address' for the label\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"getlabeladdress\", \"\")\n+            + HelpExampleCli(\"getlabeladdress\", \"\\\"\\\"\")\n+            + HelpExampleCli(\"getlabeladdress\", \"\\\"mylabel\\\"\")\n+            + HelpExampleRpc(\"getlabeladdress\", \"\\\"mylabel\\\"\")\n+        );\n+\n+    LOCK2(cs_main, pwalletMain->cs_wallet);\n+\n+    // Parse the label first so we don't generate a key if there's an error\n+    string strLabel = AccountFromValue(params[0]);\n+\n+    UniValue ret(UniValue::VSTR);\n+\n+    ret = GetAccountAddress(strLabel).ToString();\n+    return ret;\n+}\n+\n+/** Convert CAddressBookData to JSON record.\n+ * The verbosity of the output is configurable based on the command.\n+ */\n+static UniValue AddressBookDataToJSON(const CAddressBookData& data, bool includeName, bool includeDestData)\n+{\n+    UniValue ret(UniValue::VOBJ);\n+    if (includeName)\n+        ret.push_back(Pair(\"name\", data.name));\n+    ret.push_back(Pair(\"purpose\", data.purpose));\n+    if (includeDestData) {\n+        UniValue ddata(UniValue::VOBJ);\n+        BOOST_FOREACH(const PAIRTYPE(std::string, std::string) &item, data.destdata)\n+            ddata.push_back(Pair(item.first, item.second));\n+        ret.push_back(Pair(\"destdata\", ddata));\n+    }\n+    return ret;\n+}\n+\n+UniValue getlabel(const UniValue& params, bool fHelp)\n+{\n+    if (!EnsureWalletIsAvailable(fHelp))\n+        return NullUniValue;\n+\n+    if (fHelp || params.size() != 1)\n+        throw runtime_error(\n+            \"getlabel \\\"bitcoinaddress\\\"\\n\"\n+            \"\\nReturns the label associated with the given address.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"bitcoinaddress\\\"  (string, required) The bitcoin address for label lookup.\\n\"\n+            \"\\nResult:\\n\"\n+            \"  { (json object with information about address)\\n\"\n+            \"    \\\"name\\\": \\\"labelname\\\" (string) The label\\n\"\n+            \"    \\\"purpose\\\": \\\"string\\\" (string) Purpose of address (\\\"send\\\" for sending address, \\\"receive\\\" for receiving address)\\n\"\n+            \"  },...\\n\"\n+            \"  Result is null if there is no record for this address.\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"getlabel\", \"\\\"1D1ZrZNe3JUo7ZycKEYQQiQAWd9y54F4XZ\\\"\")\n+            + HelpExampleRpc(\"getlabel\", \"\\\"1D1ZrZNe3JUo7ZycKEYQQiQAWd9y54F4XZ\\\"\")\n+        );\n+\n+    LOCK2(cs_main, pwalletMain->cs_wallet);\n+\n+    CBitcoinAddress address(params[0].get_str());\n+    if (!address.IsValid())\n+        throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Invalid Bitcoin address\");\n+\n+    map<CTxDestination, CAddressBookData>::iterator mi = pwalletMain->mapAddressBook.find(address.Get());\n+    if (mi != pwalletMain->mapAddressBook.end())\n+        return AddressBookDataToJSON((*mi).second, true, true);\n+    return NullUniValue;\n+}\n+\n+UniValue getaddressesbylabel(const UniValue& params, bool fHelp)\n+{\n+    if (!EnsureWalletIsAvailable(fHelp))\n+        return NullUniValue;\n+\n+    if (fHelp || params.size() != 1)\n+        throw runtime_error(\n+            \"getaddressesbylabel \\\"label\\\"\\n\"\n+            \"\\nReturns the list of addresses assigned the specified label.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"label\\\"  (string, required) The label.\\n\"\n+            \"\\nResult:\\n\"\n+            \"{ (json object with addresses as keys)\\n\"\n+            \"  \\\"bitcoinaddress\\\": { (json object with information about address)\\n\"\n+            \"    \\\"purpose\\\": \\\"string\\\" (string)  Purpose of address (\\\"send\\\" for sending address, \\\"receive\\\" for receiving address)\\n\"\n+            \"  },...\\n\"\n+            \"}\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"getaddressesbylabel\", \"\\\"tabby\\\"\")\n+            + HelpExampleRpc(\"getaddressesbylabel\", \"\\\"tabby\\\"\")\n+        );\n+\n+    LOCK2(cs_main, pwalletMain->cs_wallet);\n+\n+    string strLabel = AccountFromValue(params[0]);\n+\n+    // Find all addresses that have the given label\n+    UniValue ret(UniValue::VOBJ);\n+    BOOST_FOREACH(const PAIRTYPE(CBitcoinAddress, CAddressBookData)& item, pwalletMain->mapAddressBook)\n+    {\n+        if (item.second.name == strLabel)\n+            ret.push_back(Pair(item.first.ToString(), AddressBookDataToJSON(item.second, false, false)));\n+    }\n+    return ret;\n+}\n+\n+UniValue listlabels(const UniValue& params, bool fHelp)\n+{\n+    if (!EnsureWalletIsAvailable(fHelp))\n+        return NullUniValue;\n+\n+    if (fHelp || params.size() > 1)\n+        throw runtime_error(\n+            \"listlabels ( \\\"purpose\\\" )\\n\"\n+            \"\\nReturns the list of all labels, or labels that are assigned to addresses with a specific purpose.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"purpose\\\"  (string, optional) Address purpose to list labels for ('send','receive'). An empty string is the same as not providing this argument.\\n\"\n+            \"\\nResult:\\n\"\n+            \"[                      (json array of string)\\n\"\n+            \"  \\\"label\\\",  (string) Label name\\n\"\n+            \"  ...\\n\"\n+            \"]\\n\"\n+            \"\\nExamples:\\n\"\n+            \"\\nList all labels\\n\"\n+            + HelpExampleCli(\"listlabels\", \"\") +\n+            \"\\nList labels that have receiving addresses\\n\"\n+            + HelpExampleCli(\"listlabels\", \"receive\") +\n+            \"\\nList labels that have sending addresses\\n\"\n+            + HelpExampleCli(\"listlabels\", \"send\") +\n+            \"\\nAs json rpc call\\n\"\n+            + HelpExampleRpc(\"listlabels\", \"receive\")\n+        );\n+\n+    LOCK2(cs_main, pwalletMain->cs_wallet);\n+\n+    std::string purpose;\n+    if (params.size() > 0)\n+        purpose = params[0].get_str();\n+\n+    std::set<std::string> setLabels;\n+    BOOST_FOREACH(const PAIRTYPE(CTxDestination, CAddressBookData)& entry, pwalletMain->mapAddressBook) {\n+        if (purpose.empty() || entry.second.purpose == purpose)\n+            setLabels.insert(entry.second.name);\n+    }\n+    UniValue ret(UniValue::VARR);\n+    BOOST_FOREACH(const std::string &name, setLabels)\n+        ret.push_back(name);\n+\n+    return ret;\n+}\n+\n+UniValue setlabel(const UniValue& params, bool fHelp)\n+{\n+    if (!EnsureWalletIsAvailable(fHelp))\n+        return NullUniValue;\n+\n+    if (fHelp || params.size() < 1 || params.size() > 2)\n+        throw runtime_error(\n+            \"setlabel \\\"bitcoinaddress\\\" \\\"label\\\"\\n\"\n+            \"\\nSets the label associated with the given address.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"bitcoinaddress\\\"  (string, required) The bitcoin address to be associated with an label.\\n\"\n+            \"2. \\\"label\\\"           (string, required) The label to assign to the address.\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"setlabel\", \"\\\"1D1ZrZNe3JUo7ZycKEYQQiQAWd9y54F4XZ\\\" \\\"tabby\\\"\")\n+            + HelpExampleRpc(\"setlabel\", \"\\\"1D1ZrZNe3JUo7ZycKEYQQiQAWd9y54F4XZ\\\", \\\"tabby\\\"\")\n+        );\n+\n+    LOCK2(cs_main, pwalletMain->cs_wallet);\n+\n+    CBitcoinAddress address(params[0].get_str());\n+    if (!address.IsValid())\n+        throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Invalid Bitcoin address\");\n+\n+    string strLabel;\n+    if (params.size() > 1)\n+        strLabel = AccountFromValue(params[1]);\n+\n+    if (IsMine(*pwalletMain, address.Get()))\n+    {\n+        // Detect when changing the label of an address that is the 'label address' of another label:\n+        // If so, delete the account record for it. Labels, unlike addresses can be deleted,\n+        // and we wouldn't do this, the record would stick around forever.\n+        if (pwalletMain->mapAddressBook.count(address.Get()))\n+        {\n+            string strOldLabel = pwalletMain->mapAddressBook[address.Get()].name;\n+            if (address == GetAccountAddress(strOldLabel))\n+                DeleteAccount(strOldLabel);\n+        }\n+        pwalletMain->SetAddressBook(address.Get(), strLabel, \"receive\");\n+    }\n+    else\n+        pwalletMain->SetAddressBook(address.Get(), strLabel, \"send\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7729#discussion_r108553186",
      "id" : 108553186,
      "original_commit_id" : "d036fa44112df0c9faf76a1d69767b45a37e391b",
      "original_position" : 222,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 29591895,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7729",
      "updated_at" : "2017-06-29T18:35:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108553186",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/886523?v=3",
         "events_url" : "https://api.github.com/users/JeremyRubin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JeremyRubin/followers",
         "following_url" : "https://api.github.com/users/JeremyRubin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JeremyRubin",
         "id" : 886523,
         "login" : "JeremyRubin",
         "organizations_url" : "https://api.github.com/users/JeremyRubin/orgs",
         "received_events_url" : "https://api.github.com/users/JeremyRubin/received_events",
         "repos_url" : "https://api.github.com/users/JeremyRubin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JeremyRubin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JeremyRubin"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7729#discussion_r108553757"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7729"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108553757"
         }
      },
      "body" : "Does the order of push_back matter here? Might be cleaner to lump all `if (verbose)` under one branch...",
      "commit_id" : "0e3ef241d18593a9f67d4e5f37c22008cd9dc6b7",
      "created_at" : "2017-03-28T22:34:31Z",
      "diff_hunk" : "@@ -2537,13 +2537,13 @@ UniValue getlabeladdress(const UniValue& params, bool fHelp)\n /** Convert CAddressBookData to JSON record.\n  * The verbosity of the output is configurable based on the command.\n  */\n-static UniValue AddressBookDataToJSON(const CAddressBookData& data, bool includeName, bool includeDestData)\n+static UniValue AddressBookDataToJSON(const CAddressBookData& data, bool verbose)\n {\n     UniValue ret(UniValue::VOBJ);\n-    if (includeName)\n+    if (verbose)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7729#discussion_r108553757",
      "id" : 108553757,
      "original_commit_id" : "e21f890df601ead1169fc2b888202e425d2dff72",
      "original_position" : 9,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 29591895,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7729",
      "updated_at" : "2017-06-29T18:35:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108553757",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/886523?v=3",
         "events_url" : "https://api.github.com/users/JeremyRubin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JeremyRubin/followers",
         "following_url" : "https://api.github.com/users/JeremyRubin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JeremyRubin",
         "id" : 886523,
         "login" : "JeremyRubin",
         "organizations_url" : "https://api.github.com/users/JeremyRubin/orgs",
         "received_events_url" : "https://api.github.com/users/JeremyRubin/received_events",
         "repos_url" : "https://api.github.com/users/JeremyRubin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JeremyRubin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JeremyRubin"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7729#discussion_r108554842"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7729"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108554842"
         }
      },
      "body" : "It seems like L2529-2534 could be a one or two liner, rather than 4 (and maybe get rid of the whitespace).",
      "commit_id" : "0e3ef241d18593a9f67d4e5f37c22008cd9dc6b7",
      "created_at" : "2017-03-28T22:41:28Z",
      "diff_hunk" : "@@ -2497,6 +2503,216 @@ UniValue fundrawtransaction(const UniValue& params, bool fHelp)\n     return result;\n }\n \n+UniValue getlabeladdress(const UniValue& params, bool fHelp)\n+{\n+    if (!EnsureWalletIsAvailable(fHelp))\n+        return NullUniValue;\n+\n+    if (fHelp || params.size() != 1)\n+        throw runtime_error(\n+            \"getlabeladdress \\\"label\\\"\\n\"\n+            \"\\nReturns the current 'label address' for this label.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"label\\\"       (string, required) The label for the address. It can also be set to the empty string \\\"\\\" to represent the default label.\\n\"\n+            \"\\nResult:\\n\"\n+            \"\\\"bitcoinaddress\\\"   (string) The 'label address' for the label\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"getlabeladdress\", \"\")\n+            + HelpExampleCli(\"getlabeladdress\", \"\\\"\\\"\")\n+            + HelpExampleCli(\"getlabeladdress\", \"\\\"mylabel\\\"\")\n+            + HelpExampleRpc(\"getlabeladdress\", \"\\\"mylabel\\\"\")\n+        );\n+\n+    LOCK2(cs_main, pwalletMain->cs_wallet);\n+\n+    // Parse the label first so we don't generate a key if there's an error\n+    string strLabel = AccountFromValue(params[0]);\n+\n+    UniValue ret(UniValue::VSTR);\n+\n+    ret = GetAccountAddress(strLabel).ToString();\n+    return ret;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7729#discussion_r108554842",
      "id" : 108554842,
      "original_commit_id" : "d036fa44112df0c9faf76a1d69767b45a37e391b",
      "original_position" : 45,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 29591895,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7729",
      "updated_at" : "2017-06-29T18:35:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108554842",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/886523?v=3",
         "events_url" : "https://api.github.com/users/JeremyRubin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JeremyRubin/followers",
         "following_url" : "https://api.github.com/users/JeremyRubin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JeremyRubin",
         "id" : 886523,
         "login" : "JeremyRubin",
         "organizations_url" : "https://api.github.com/users/JeremyRubin/orgs",
         "received_events_url" : "https://api.github.com/users/JeremyRubin/received_events",
         "repos_url" : "https://api.github.com/users/JeremyRubin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JeremyRubin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JeremyRubin"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7729#discussion_r108554974"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7729"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108554974"
         }
      },
      "body" : "does a builtin for range loop work here?",
      "commit_id" : "0e3ef241d18593a9f67d4e5f37c22008cd9dc6b7",
      "created_at" : "2017-03-28T22:42:28Z",
      "diff_hunk" : "@@ -2497,6 +2503,216 @@ UniValue fundrawtransaction(const UniValue& params, bool fHelp)\n     return result;\n }\n \n+UniValue getlabeladdress(const UniValue& params, bool fHelp)\n+{\n+    if (!EnsureWalletIsAvailable(fHelp))\n+        return NullUniValue;\n+\n+    if (fHelp || params.size() != 1)\n+        throw runtime_error(\n+            \"getlabeladdress \\\"label\\\"\\n\"\n+            \"\\nReturns the current 'label address' for this label.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"label\\\"       (string, required) The label for the address. It can also be set to the empty string \\\"\\\" to represent the default label.\\n\"\n+            \"\\nResult:\\n\"\n+            \"\\\"bitcoinaddress\\\"   (string) The 'label address' for the label\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"getlabeladdress\", \"\")\n+            + HelpExampleCli(\"getlabeladdress\", \"\\\"\\\"\")\n+            + HelpExampleCli(\"getlabeladdress\", \"\\\"mylabel\\\"\")\n+            + HelpExampleRpc(\"getlabeladdress\", \"\\\"mylabel\\\"\")\n+        );\n+\n+    LOCK2(cs_main, pwalletMain->cs_wallet);\n+\n+    // Parse the label first so we don't generate a key if there's an error\n+    string strLabel = AccountFromValue(params[0]);\n+\n+    UniValue ret(UniValue::VSTR);\n+\n+    ret = GetAccountAddress(strLabel).ToString();\n+    return ret;\n+}\n+\n+/** Convert CAddressBookData to JSON record.\n+ * The verbosity of the output is configurable based on the command.\n+ */\n+static UniValue AddressBookDataToJSON(const CAddressBookData& data, bool includeName, bool includeDestData)\n+{\n+    UniValue ret(UniValue::VOBJ);\n+    if (includeName)\n+        ret.push_back(Pair(\"name\", data.name));\n+    ret.push_back(Pair(\"purpose\", data.purpose));\n+    if (includeDestData) {\n+        UniValue ddata(UniValue::VOBJ);\n+        BOOST_FOREACH(const PAIRTYPE(std::string, std::string) &item, data.destdata)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7729#discussion_r108554974",
      "id" : 108554974,
      "original_commit_id" : "d036fa44112df0c9faf76a1d69767b45a37e391b",
      "original_position" : 59,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 29591895,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7729",
      "updated_at" : "2017-06-29T18:35:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108554974",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/886523?v=3",
         "events_url" : "https://api.github.com/users/JeremyRubin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JeremyRubin/followers",
         "following_url" : "https://api.github.com/users/JeremyRubin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JeremyRubin",
         "id" : 886523,
         "login" : "JeremyRubin",
         "organizations_url" : "https://api.github.com/users/JeremyRubin/orgs",
         "received_events_url" : "https://api.github.com/users/JeremyRubin/received_events",
         "repos_url" : "https://api.github.com/users/JeremyRubin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JeremyRubin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JeremyRubin"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7729#discussion_r108555197"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7729"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108555197"
         }
      },
      "body" : "Can this not be a for range loop?",
      "commit_id" : "0e3ef241d18593a9f67d4e5f37c22008cd9dc6b7",
      "created_at" : "2017-03-28T22:43:56Z",
      "diff_hunk" : "@@ -2497,6 +2503,216 @@ UniValue fundrawtransaction(const UniValue& params, bool fHelp)\n     return result;\n }\n \n+UniValue getlabeladdress(const UniValue& params, bool fHelp)\n+{\n+    if (!EnsureWalletIsAvailable(fHelp))\n+        return NullUniValue;\n+\n+    if (fHelp || params.size() != 1)\n+        throw runtime_error(\n+            \"getlabeladdress \\\"label\\\"\\n\"\n+            \"\\nReturns the current 'label address' for this label.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"label\\\"       (string, required) The label for the address. It can also be set to the empty string \\\"\\\" to represent the default label.\\n\"\n+            \"\\nResult:\\n\"\n+            \"\\\"bitcoinaddress\\\"   (string) The 'label address' for the label\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"getlabeladdress\", \"\")\n+            + HelpExampleCli(\"getlabeladdress\", \"\\\"\\\"\")\n+            + HelpExampleCli(\"getlabeladdress\", \"\\\"mylabel\\\"\")\n+            + HelpExampleRpc(\"getlabeladdress\", \"\\\"mylabel\\\"\")\n+        );\n+\n+    LOCK2(cs_main, pwalletMain->cs_wallet);\n+\n+    // Parse the label first so we don't generate a key if there's an error\n+    string strLabel = AccountFromValue(params[0]);\n+\n+    UniValue ret(UniValue::VSTR);\n+\n+    ret = GetAccountAddress(strLabel).ToString();\n+    return ret;\n+}\n+\n+/** Convert CAddressBookData to JSON record.\n+ * The verbosity of the output is configurable based on the command.\n+ */\n+static UniValue AddressBookDataToJSON(const CAddressBookData& data, bool includeName, bool includeDestData)\n+{\n+    UniValue ret(UniValue::VOBJ);\n+    if (includeName)\n+        ret.push_back(Pair(\"name\", data.name));\n+    ret.push_back(Pair(\"purpose\", data.purpose));\n+    if (includeDestData) {\n+        UniValue ddata(UniValue::VOBJ);\n+        BOOST_FOREACH(const PAIRTYPE(std::string, std::string) &item, data.destdata)\n+            ddata.push_back(Pair(item.first, item.second));\n+        ret.push_back(Pair(\"destdata\", ddata));\n+    }\n+    return ret;\n+}\n+\n+UniValue getlabel(const UniValue& params, bool fHelp)\n+{\n+    if (!EnsureWalletIsAvailable(fHelp))\n+        return NullUniValue;\n+\n+    if (fHelp || params.size() != 1)\n+        throw runtime_error(\n+            \"getlabel \\\"bitcoinaddress\\\"\\n\"\n+            \"\\nReturns the label associated with the given address.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"bitcoinaddress\\\"  (string, required) The bitcoin address for label lookup.\\n\"\n+            \"\\nResult:\\n\"\n+            \"  { (json object with information about address)\\n\"\n+            \"    \\\"name\\\": \\\"labelname\\\" (string) The label\\n\"\n+            \"    \\\"purpose\\\": \\\"string\\\" (string) Purpose of address (\\\"send\\\" for sending address, \\\"receive\\\" for receiving address)\\n\"\n+            \"  },...\\n\"\n+            \"  Result is null if there is no record for this address.\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"getlabel\", \"\\\"1D1ZrZNe3JUo7ZycKEYQQiQAWd9y54F4XZ\\\"\")\n+            + HelpExampleRpc(\"getlabel\", \"\\\"1D1ZrZNe3JUo7ZycKEYQQiQAWd9y54F4XZ\\\"\")\n+        );\n+\n+    LOCK2(cs_main, pwalletMain->cs_wallet);\n+\n+    CBitcoinAddress address(params[0].get_str());\n+    if (!address.IsValid())\n+        throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Invalid Bitcoin address\");\n+\n+    map<CTxDestination, CAddressBookData>::iterator mi = pwalletMain->mapAddressBook.find(address.Get());\n+    if (mi != pwalletMain->mapAddressBook.end())\n+        return AddressBookDataToJSON((*mi).second, true, true);\n+    return NullUniValue;\n+}\n+\n+UniValue getaddressesbylabel(const UniValue& params, bool fHelp)\n+{\n+    if (!EnsureWalletIsAvailable(fHelp))\n+        return NullUniValue;\n+\n+    if (fHelp || params.size() != 1)\n+        throw runtime_error(\n+            \"getaddressesbylabel \\\"label\\\"\\n\"\n+            \"\\nReturns the list of addresses assigned the specified label.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"label\\\"  (string, required) The label.\\n\"\n+            \"\\nResult:\\n\"\n+            \"{ (json object with addresses as keys)\\n\"\n+            \"  \\\"bitcoinaddress\\\": { (json object with information about address)\\n\"\n+            \"    \\\"purpose\\\": \\\"string\\\" (string)  Purpose of address (\\\"send\\\" for sending address, \\\"receive\\\" for receiving address)\\n\"\n+            \"  },...\\n\"\n+            \"}\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"getaddressesbylabel\", \"\\\"tabby\\\"\")\n+            + HelpExampleRpc(\"getaddressesbylabel\", \"\\\"tabby\\\"\")\n+        );\n+\n+    LOCK2(cs_main, pwalletMain->cs_wallet);\n+\n+    string strLabel = AccountFromValue(params[0]);\n+\n+    // Find all addresses that have the given label\n+    UniValue ret(UniValue::VOBJ);\n+    BOOST_FOREACH(const PAIRTYPE(CBitcoinAddress, CAddressBookData)& item, pwalletMain->mapAddressBook)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7729#discussion_r108555197",
      "id" : 108555197,
      "original_commit_id" : "d036fa44112df0c9faf76a1d69767b45a37e391b",
      "original_position" : 128,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 29591895,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7729",
      "updated_at" : "2017-06-29T18:35:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108555197",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/886523?v=3",
         "events_url" : "https://api.github.com/users/JeremyRubin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JeremyRubin/followers",
         "following_url" : "https://api.github.com/users/JeremyRubin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JeremyRubin",
         "id" : 886523,
         "login" : "JeremyRubin",
         "organizations_url" : "https://api.github.com/users/JeremyRubin/orgs",
         "received_events_url" : "https://api.github.com/users/JeremyRubin/received_events",
         "repos_url" : "https://api.github.com/users/JeremyRubin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JeremyRubin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JeremyRubin"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7729#discussion_r108555517"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7729"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108555517"
         }
      },
      "body" : "can use for range?",
      "commit_id" : "0e3ef241d18593a9f67d4e5f37c22008cd9dc6b7",
      "created_at" : "2017-03-28T22:45:55Z",
      "diff_hunk" : "@@ -2497,6 +2503,216 @@ UniValue fundrawtransaction(const UniValue& params, bool fHelp)\n     return result;\n }\n \n+UniValue getlabeladdress(const UniValue& params, bool fHelp)\n+{\n+    if (!EnsureWalletIsAvailable(fHelp))\n+        return NullUniValue;\n+\n+    if (fHelp || params.size() != 1)\n+        throw runtime_error(\n+            \"getlabeladdress \\\"label\\\"\\n\"\n+            \"\\nReturns the current 'label address' for this label.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"label\\\"       (string, required) The label for the address. It can also be set to the empty string \\\"\\\" to represent the default label.\\n\"\n+            \"\\nResult:\\n\"\n+            \"\\\"bitcoinaddress\\\"   (string) The 'label address' for the label\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"getlabeladdress\", \"\")\n+            + HelpExampleCli(\"getlabeladdress\", \"\\\"\\\"\")\n+            + HelpExampleCli(\"getlabeladdress\", \"\\\"mylabel\\\"\")\n+            + HelpExampleRpc(\"getlabeladdress\", \"\\\"mylabel\\\"\")\n+        );\n+\n+    LOCK2(cs_main, pwalletMain->cs_wallet);\n+\n+    // Parse the label first so we don't generate a key if there's an error\n+    string strLabel = AccountFromValue(params[0]);\n+\n+    UniValue ret(UniValue::VSTR);\n+\n+    ret = GetAccountAddress(strLabel).ToString();\n+    return ret;\n+}\n+\n+/** Convert CAddressBookData to JSON record.\n+ * The verbosity of the output is configurable based on the command.\n+ */\n+static UniValue AddressBookDataToJSON(const CAddressBookData& data, bool includeName, bool includeDestData)\n+{\n+    UniValue ret(UniValue::VOBJ);\n+    if (includeName)\n+        ret.push_back(Pair(\"name\", data.name));\n+    ret.push_back(Pair(\"purpose\", data.purpose));\n+    if (includeDestData) {\n+        UniValue ddata(UniValue::VOBJ);\n+        BOOST_FOREACH(const PAIRTYPE(std::string, std::string) &item, data.destdata)\n+            ddata.push_back(Pair(item.first, item.second));\n+        ret.push_back(Pair(\"destdata\", ddata));\n+    }\n+    return ret;\n+}\n+\n+UniValue getlabel(const UniValue& params, bool fHelp)\n+{\n+    if (!EnsureWalletIsAvailable(fHelp))\n+        return NullUniValue;\n+\n+    if (fHelp || params.size() != 1)\n+        throw runtime_error(\n+            \"getlabel \\\"bitcoinaddress\\\"\\n\"\n+            \"\\nReturns the label associated with the given address.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"bitcoinaddress\\\"  (string, required) The bitcoin address for label lookup.\\n\"\n+            \"\\nResult:\\n\"\n+            \"  { (json object with information about address)\\n\"\n+            \"    \\\"name\\\": \\\"labelname\\\" (string) The label\\n\"\n+            \"    \\\"purpose\\\": \\\"string\\\" (string) Purpose of address (\\\"send\\\" for sending address, \\\"receive\\\" for receiving address)\\n\"\n+            \"  },...\\n\"\n+            \"  Result is null if there is no record for this address.\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"getlabel\", \"\\\"1D1ZrZNe3JUo7ZycKEYQQiQAWd9y54F4XZ\\\"\")\n+            + HelpExampleRpc(\"getlabel\", \"\\\"1D1ZrZNe3JUo7ZycKEYQQiQAWd9y54F4XZ\\\"\")\n+        );\n+\n+    LOCK2(cs_main, pwalletMain->cs_wallet);\n+\n+    CBitcoinAddress address(params[0].get_str());\n+    if (!address.IsValid())\n+        throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Invalid Bitcoin address\");\n+\n+    map<CTxDestination, CAddressBookData>::iterator mi = pwalletMain->mapAddressBook.find(address.Get());\n+    if (mi != pwalletMain->mapAddressBook.end())\n+        return AddressBookDataToJSON((*mi).second, true, true);\n+    return NullUniValue;\n+}\n+\n+UniValue getaddressesbylabel(const UniValue& params, bool fHelp)\n+{\n+    if (!EnsureWalletIsAvailable(fHelp))\n+        return NullUniValue;\n+\n+    if (fHelp || params.size() != 1)\n+        throw runtime_error(\n+            \"getaddressesbylabel \\\"label\\\"\\n\"\n+            \"\\nReturns the list of addresses assigned the specified label.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"label\\\"  (string, required) The label.\\n\"\n+            \"\\nResult:\\n\"\n+            \"{ (json object with addresses as keys)\\n\"\n+            \"  \\\"bitcoinaddress\\\": { (json object with information about address)\\n\"\n+            \"    \\\"purpose\\\": \\\"string\\\" (string)  Purpose of address (\\\"send\\\" for sending address, \\\"receive\\\" for receiving address)\\n\"\n+            \"  },...\\n\"\n+            \"}\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"getaddressesbylabel\", \"\\\"tabby\\\"\")\n+            + HelpExampleRpc(\"getaddressesbylabel\", \"\\\"tabby\\\"\")\n+        );\n+\n+    LOCK2(cs_main, pwalletMain->cs_wallet);\n+\n+    string strLabel = AccountFromValue(params[0]);\n+\n+    // Find all addresses that have the given label\n+    UniValue ret(UniValue::VOBJ);\n+    BOOST_FOREACH(const PAIRTYPE(CBitcoinAddress, CAddressBookData)& item, pwalletMain->mapAddressBook)\n+    {\n+        if (item.second.name == strLabel)\n+            ret.push_back(Pair(item.first.ToString(), AddressBookDataToJSON(item.second, false, false)));\n+    }\n+    return ret;\n+}\n+\n+UniValue listlabels(const UniValue& params, bool fHelp)\n+{\n+    if (!EnsureWalletIsAvailable(fHelp))\n+        return NullUniValue;\n+\n+    if (fHelp || params.size() > 1)\n+        throw runtime_error(\n+            \"listlabels ( \\\"purpose\\\" )\\n\"\n+            \"\\nReturns the list of all labels, or labels that are assigned to addresses with a specific purpose.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"purpose\\\"  (string, optional) Address purpose to list labels for ('send','receive'). An empty string is the same as not providing this argument.\\n\"\n+            \"\\nResult:\\n\"\n+            \"[                      (json array of string)\\n\"\n+            \"  \\\"label\\\",  (string) Label name\\n\"\n+            \"  ...\\n\"\n+            \"]\\n\"\n+            \"\\nExamples:\\n\"\n+            \"\\nList all labels\\n\"\n+            + HelpExampleCli(\"listlabels\", \"\") +\n+            \"\\nList labels that have receiving addresses\\n\"\n+            + HelpExampleCli(\"listlabels\", \"receive\") +\n+            \"\\nList labels that have sending addresses\\n\"\n+            + HelpExampleCli(\"listlabels\", \"send\") +\n+            \"\\nAs json rpc call\\n\"\n+            + HelpExampleRpc(\"listlabels\", \"receive\")\n+        );\n+\n+    LOCK2(cs_main, pwalletMain->cs_wallet);\n+\n+    std::string purpose;\n+    if (params.size() > 0)\n+        purpose = params[0].get_str();\n+\n+    std::set<std::string> setLabels;\n+    BOOST_FOREACH(const PAIRTYPE(CTxDestination, CAddressBookData)& entry, pwalletMain->mapAddressBook) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7729#discussion_r108555517",
      "id" : 108555517,
      "original_commit_id" : "d036fa44112df0c9faf76a1d69767b45a37e391b",
      "original_position" : 170,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 29591895,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7729",
      "updated_at" : "2017-06-29T18:35:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108555517",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/886523?v=3",
         "events_url" : "https://api.github.com/users/JeremyRubin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JeremyRubin/followers",
         "following_url" : "https://api.github.com/users/JeremyRubin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JeremyRubin",
         "id" : 886523,
         "login" : "JeremyRubin",
         "organizations_url" : "https://api.github.com/users/JeremyRubin/orgs",
         "received_events_url" : "https://api.github.com/users/JeremyRubin/received_events",
         "repos_url" : "https://api.github.com/users/JeremyRubin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JeremyRubin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JeremyRubin"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7729#discussion_r108555561"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7729"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108555561"
         }
      },
      "body" : "can use for range?",
      "commit_id" : "0e3ef241d18593a9f67d4e5f37c22008cd9dc6b7",
      "created_at" : "2017-03-28T22:46:07Z",
      "diff_hunk" : "@@ -2497,6 +2503,216 @@ UniValue fundrawtransaction(const UniValue& params, bool fHelp)\n     return result;\n }\n \n+UniValue getlabeladdress(const UniValue& params, bool fHelp)\n+{\n+    if (!EnsureWalletIsAvailable(fHelp))\n+        return NullUniValue;\n+\n+    if (fHelp || params.size() != 1)\n+        throw runtime_error(\n+            \"getlabeladdress \\\"label\\\"\\n\"\n+            \"\\nReturns the current 'label address' for this label.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"label\\\"       (string, required) The label for the address. It can also be set to the empty string \\\"\\\" to represent the default label.\\n\"\n+            \"\\nResult:\\n\"\n+            \"\\\"bitcoinaddress\\\"   (string) The 'label address' for the label\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"getlabeladdress\", \"\")\n+            + HelpExampleCli(\"getlabeladdress\", \"\\\"\\\"\")\n+            + HelpExampleCli(\"getlabeladdress\", \"\\\"mylabel\\\"\")\n+            + HelpExampleRpc(\"getlabeladdress\", \"\\\"mylabel\\\"\")\n+        );\n+\n+    LOCK2(cs_main, pwalletMain->cs_wallet);\n+\n+    // Parse the label first so we don't generate a key if there's an error\n+    string strLabel = AccountFromValue(params[0]);\n+\n+    UniValue ret(UniValue::VSTR);\n+\n+    ret = GetAccountAddress(strLabel).ToString();\n+    return ret;\n+}\n+\n+/** Convert CAddressBookData to JSON record.\n+ * The verbosity of the output is configurable based on the command.\n+ */\n+static UniValue AddressBookDataToJSON(const CAddressBookData& data, bool includeName, bool includeDestData)\n+{\n+    UniValue ret(UniValue::VOBJ);\n+    if (includeName)\n+        ret.push_back(Pair(\"name\", data.name));\n+    ret.push_back(Pair(\"purpose\", data.purpose));\n+    if (includeDestData) {\n+        UniValue ddata(UniValue::VOBJ);\n+        BOOST_FOREACH(const PAIRTYPE(std::string, std::string) &item, data.destdata)\n+            ddata.push_back(Pair(item.first, item.second));\n+        ret.push_back(Pair(\"destdata\", ddata));\n+    }\n+    return ret;\n+}\n+\n+UniValue getlabel(const UniValue& params, bool fHelp)\n+{\n+    if (!EnsureWalletIsAvailable(fHelp))\n+        return NullUniValue;\n+\n+    if (fHelp || params.size() != 1)\n+        throw runtime_error(\n+            \"getlabel \\\"bitcoinaddress\\\"\\n\"\n+            \"\\nReturns the label associated with the given address.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"bitcoinaddress\\\"  (string, required) The bitcoin address for label lookup.\\n\"\n+            \"\\nResult:\\n\"\n+            \"  { (json object with information about address)\\n\"\n+            \"    \\\"name\\\": \\\"labelname\\\" (string) The label\\n\"\n+            \"    \\\"purpose\\\": \\\"string\\\" (string) Purpose of address (\\\"send\\\" for sending address, \\\"receive\\\" for receiving address)\\n\"\n+            \"  },...\\n\"\n+            \"  Result is null if there is no record for this address.\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"getlabel\", \"\\\"1D1ZrZNe3JUo7ZycKEYQQiQAWd9y54F4XZ\\\"\")\n+            + HelpExampleRpc(\"getlabel\", \"\\\"1D1ZrZNe3JUo7ZycKEYQQiQAWd9y54F4XZ\\\"\")\n+        );\n+\n+    LOCK2(cs_main, pwalletMain->cs_wallet);\n+\n+    CBitcoinAddress address(params[0].get_str());\n+    if (!address.IsValid())\n+        throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Invalid Bitcoin address\");\n+\n+    map<CTxDestination, CAddressBookData>::iterator mi = pwalletMain->mapAddressBook.find(address.Get());\n+    if (mi != pwalletMain->mapAddressBook.end())\n+        return AddressBookDataToJSON((*mi).second, true, true);\n+    return NullUniValue;\n+}\n+\n+UniValue getaddressesbylabel(const UniValue& params, bool fHelp)\n+{\n+    if (!EnsureWalletIsAvailable(fHelp))\n+        return NullUniValue;\n+\n+    if (fHelp || params.size() != 1)\n+        throw runtime_error(\n+            \"getaddressesbylabel \\\"label\\\"\\n\"\n+            \"\\nReturns the list of addresses assigned the specified label.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"label\\\"  (string, required) The label.\\n\"\n+            \"\\nResult:\\n\"\n+            \"{ (json object with addresses as keys)\\n\"\n+            \"  \\\"bitcoinaddress\\\": { (json object with information about address)\\n\"\n+            \"    \\\"purpose\\\": \\\"string\\\" (string)  Purpose of address (\\\"send\\\" for sending address, \\\"receive\\\" for receiving address)\\n\"\n+            \"  },...\\n\"\n+            \"}\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"getaddressesbylabel\", \"\\\"tabby\\\"\")\n+            + HelpExampleRpc(\"getaddressesbylabel\", \"\\\"tabby\\\"\")\n+        );\n+\n+    LOCK2(cs_main, pwalletMain->cs_wallet);\n+\n+    string strLabel = AccountFromValue(params[0]);\n+\n+    // Find all addresses that have the given label\n+    UniValue ret(UniValue::VOBJ);\n+    BOOST_FOREACH(const PAIRTYPE(CBitcoinAddress, CAddressBookData)& item, pwalletMain->mapAddressBook)\n+    {\n+        if (item.second.name == strLabel)\n+            ret.push_back(Pair(item.first.ToString(), AddressBookDataToJSON(item.second, false, false)));\n+    }\n+    return ret;\n+}\n+\n+UniValue listlabels(const UniValue& params, bool fHelp)\n+{\n+    if (!EnsureWalletIsAvailable(fHelp))\n+        return NullUniValue;\n+\n+    if (fHelp || params.size() > 1)\n+        throw runtime_error(\n+            \"listlabels ( \\\"purpose\\\" )\\n\"\n+            \"\\nReturns the list of all labels, or labels that are assigned to addresses with a specific purpose.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"purpose\\\"  (string, optional) Address purpose to list labels for ('send','receive'). An empty string is the same as not providing this argument.\\n\"\n+            \"\\nResult:\\n\"\n+            \"[                      (json array of string)\\n\"\n+            \"  \\\"label\\\",  (string) Label name\\n\"\n+            \"  ...\\n\"\n+            \"]\\n\"\n+            \"\\nExamples:\\n\"\n+            \"\\nList all labels\\n\"\n+            + HelpExampleCli(\"listlabels\", \"\") +\n+            \"\\nList labels that have receiving addresses\\n\"\n+            + HelpExampleCli(\"listlabels\", \"receive\") +\n+            \"\\nList labels that have sending addresses\\n\"\n+            + HelpExampleCli(\"listlabels\", \"send\") +\n+            \"\\nAs json rpc call\\n\"\n+            + HelpExampleRpc(\"listlabels\", \"receive\")\n+        );\n+\n+    LOCK2(cs_main, pwalletMain->cs_wallet);\n+\n+    std::string purpose;\n+    if (params.size() > 0)\n+        purpose = params[0].get_str();\n+\n+    std::set<std::string> setLabels;\n+    BOOST_FOREACH(const PAIRTYPE(CTxDestination, CAddressBookData)& entry, pwalletMain->mapAddressBook) {\n+        if (purpose.empty() || entry.second.purpose == purpose)\n+            setLabels.insert(entry.second.name);\n+    }\n+    UniValue ret(UniValue::VARR);\n+    BOOST_FOREACH(const std::string &name, setLabels)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7729#discussion_r108555561",
      "id" : 108555561,
      "original_commit_id" : "d036fa44112df0c9faf76a1d69767b45a37e391b",
      "original_position" : 175,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 29591895,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7729",
      "updated_at" : "2017-06-29T18:35:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108555561",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/886523?v=3",
         "events_url" : "https://api.github.com/users/JeremyRubin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JeremyRubin/followers",
         "following_url" : "https://api.github.com/users/JeremyRubin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JeremyRubin",
         "id" : 886523,
         "login" : "JeremyRubin",
         "organizations_url" : "https://api.github.com/users/JeremyRubin/orgs",
         "received_events_url" : "https://api.github.com/users/JeremyRubin/received_events",
         "repos_url" : "https://api.github.com/users/JeremyRubin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JeremyRubin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JeremyRubin"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7729#discussion_r108555711"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7729"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108555711"
         }
      },
      "body" : "validate the purpose string?",
      "commit_id" : "0e3ef241d18593a9f67d4e5f37c22008cd9dc6b7",
      "created_at" : "2017-03-28T22:47:12Z",
      "diff_hunk" : "@@ -2497,6 +2503,216 @@ UniValue fundrawtransaction(const UniValue& params, bool fHelp)\n     return result;\n }\n \n+UniValue getlabeladdress(const UniValue& params, bool fHelp)\n+{\n+    if (!EnsureWalletIsAvailable(fHelp))\n+        return NullUniValue;\n+\n+    if (fHelp || params.size() != 1)\n+        throw runtime_error(\n+            \"getlabeladdress \\\"label\\\"\\n\"\n+            \"\\nReturns the current 'label address' for this label.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"label\\\"       (string, required) The label for the address. It can also be set to the empty string \\\"\\\" to represent the default label.\\n\"\n+            \"\\nResult:\\n\"\n+            \"\\\"bitcoinaddress\\\"   (string) The 'label address' for the label\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"getlabeladdress\", \"\")\n+            + HelpExampleCli(\"getlabeladdress\", \"\\\"\\\"\")\n+            + HelpExampleCli(\"getlabeladdress\", \"\\\"mylabel\\\"\")\n+            + HelpExampleRpc(\"getlabeladdress\", \"\\\"mylabel\\\"\")\n+        );\n+\n+    LOCK2(cs_main, pwalletMain->cs_wallet);\n+\n+    // Parse the label first so we don't generate a key if there's an error\n+    string strLabel = AccountFromValue(params[0]);\n+\n+    UniValue ret(UniValue::VSTR);\n+\n+    ret = GetAccountAddress(strLabel).ToString();\n+    return ret;\n+}\n+\n+/** Convert CAddressBookData to JSON record.\n+ * The verbosity of the output is configurable based on the command.\n+ */\n+static UniValue AddressBookDataToJSON(const CAddressBookData& data, bool includeName, bool includeDestData)\n+{\n+    UniValue ret(UniValue::VOBJ);\n+    if (includeName)\n+        ret.push_back(Pair(\"name\", data.name));\n+    ret.push_back(Pair(\"purpose\", data.purpose));\n+    if (includeDestData) {\n+        UniValue ddata(UniValue::VOBJ);\n+        BOOST_FOREACH(const PAIRTYPE(std::string, std::string) &item, data.destdata)\n+            ddata.push_back(Pair(item.first, item.second));\n+        ret.push_back(Pair(\"destdata\", ddata));\n+    }\n+    return ret;\n+}\n+\n+UniValue getlabel(const UniValue& params, bool fHelp)\n+{\n+    if (!EnsureWalletIsAvailable(fHelp))\n+        return NullUniValue;\n+\n+    if (fHelp || params.size() != 1)\n+        throw runtime_error(\n+            \"getlabel \\\"bitcoinaddress\\\"\\n\"\n+            \"\\nReturns the label associated with the given address.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"bitcoinaddress\\\"  (string, required) The bitcoin address for label lookup.\\n\"\n+            \"\\nResult:\\n\"\n+            \"  { (json object with information about address)\\n\"\n+            \"    \\\"name\\\": \\\"labelname\\\" (string) The label\\n\"\n+            \"    \\\"purpose\\\": \\\"string\\\" (string) Purpose of address (\\\"send\\\" for sending address, \\\"receive\\\" for receiving address)\\n\"\n+            \"  },...\\n\"\n+            \"  Result is null if there is no record for this address.\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"getlabel\", \"\\\"1D1ZrZNe3JUo7ZycKEYQQiQAWd9y54F4XZ\\\"\")\n+            + HelpExampleRpc(\"getlabel\", \"\\\"1D1ZrZNe3JUo7ZycKEYQQiQAWd9y54F4XZ\\\"\")\n+        );\n+\n+    LOCK2(cs_main, pwalletMain->cs_wallet);\n+\n+    CBitcoinAddress address(params[0].get_str());\n+    if (!address.IsValid())\n+        throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Invalid Bitcoin address\");\n+\n+    map<CTxDestination, CAddressBookData>::iterator mi = pwalletMain->mapAddressBook.find(address.Get());\n+    if (mi != pwalletMain->mapAddressBook.end())\n+        return AddressBookDataToJSON((*mi).second, true, true);\n+    return NullUniValue;\n+}\n+\n+UniValue getaddressesbylabel(const UniValue& params, bool fHelp)\n+{\n+    if (!EnsureWalletIsAvailable(fHelp))\n+        return NullUniValue;\n+\n+    if (fHelp || params.size() != 1)\n+        throw runtime_error(\n+            \"getaddressesbylabel \\\"label\\\"\\n\"\n+            \"\\nReturns the list of addresses assigned the specified label.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"label\\\"  (string, required) The label.\\n\"\n+            \"\\nResult:\\n\"\n+            \"{ (json object with addresses as keys)\\n\"\n+            \"  \\\"bitcoinaddress\\\": { (json object with information about address)\\n\"\n+            \"    \\\"purpose\\\": \\\"string\\\" (string)  Purpose of address (\\\"send\\\" for sending address, \\\"receive\\\" for receiving address)\\n\"\n+            \"  },...\\n\"\n+            \"}\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"getaddressesbylabel\", \"\\\"tabby\\\"\")\n+            + HelpExampleRpc(\"getaddressesbylabel\", \"\\\"tabby\\\"\")\n+        );\n+\n+    LOCK2(cs_main, pwalletMain->cs_wallet);\n+\n+    string strLabel = AccountFromValue(params[0]);\n+\n+    // Find all addresses that have the given label\n+    UniValue ret(UniValue::VOBJ);\n+    BOOST_FOREACH(const PAIRTYPE(CBitcoinAddress, CAddressBookData)& item, pwalletMain->mapAddressBook)\n+    {\n+        if (item.second.name == strLabel)\n+            ret.push_back(Pair(item.first.ToString(), AddressBookDataToJSON(item.second, false, false)));\n+    }\n+    return ret;\n+}\n+\n+UniValue listlabels(const UniValue& params, bool fHelp)\n+{\n+    if (!EnsureWalletIsAvailable(fHelp))\n+        return NullUniValue;\n+\n+    if (fHelp || params.size() > 1)\n+        throw runtime_error(\n+            \"listlabels ( \\\"purpose\\\" )\\n\"\n+            \"\\nReturns the list of all labels, or labels that are assigned to addresses with a specific purpose.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"purpose\\\"  (string, optional) Address purpose to list labels for ('send','receive'). An empty string is the same as not providing this argument.\\n\"\n+            \"\\nResult:\\n\"\n+            \"[                      (json array of string)\\n\"\n+            \"  \\\"label\\\",  (string) Label name\\n\"\n+            \"  ...\\n\"\n+            \"]\\n\"\n+            \"\\nExamples:\\n\"\n+            \"\\nList all labels\\n\"\n+            + HelpExampleCli(\"listlabels\", \"\") +\n+            \"\\nList labels that have receiving addresses\\n\"\n+            + HelpExampleCli(\"listlabels\", \"receive\") +\n+            \"\\nList labels that have sending addresses\\n\"\n+            + HelpExampleCli(\"listlabels\", \"send\") +\n+            \"\\nAs json rpc call\\n\"\n+            + HelpExampleRpc(\"listlabels\", \"receive\")\n+        );\n+\n+    LOCK2(cs_main, pwalletMain->cs_wallet);\n+\n+    std::string purpose;\n+    if (params.size() > 0)\n+        purpose = params[0].get_str();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7729#discussion_r108555711",
      "id" : 108555711,
      "original_commit_id" : "d036fa44112df0c9faf76a1d69767b45a37e391b",
      "original_position" : 167,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 29591895,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7729",
      "updated_at" : "2017-06-29T18:35:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108555711",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/886523?v=3",
         "events_url" : "https://api.github.com/users/JeremyRubin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JeremyRubin/followers",
         "following_url" : "https://api.github.com/users/JeremyRubin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JeremyRubin",
         "id" : 886523,
         "login" : "JeremyRubin",
         "organizations_url" : "https://api.github.com/users/JeremyRubin/orgs",
         "received_events_url" : "https://api.github.com/users/JeremyRubin/received_events",
         "repos_url" : "https://api.github.com/users/JeremyRubin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JeremyRubin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JeremyRubin"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7729#discussion_r108556412"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7729"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108556412"
         }
      },
      "body" : "This behavior is probably just to mirror prior behavior, but perhaps a better alternative would be to create a fresh address for the account & allow deleting of account via another mechanism.",
      "commit_id" : "0e3ef241d18593a9f67d4e5f37c22008cd9dc6b7",
      "created_at" : "2017-03-28T22:51:51Z",
      "diff_hunk" : "@@ -2497,6 +2503,216 @@ UniValue fundrawtransaction(const UniValue& params, bool fHelp)\n     return result;\n }\n \n+UniValue getlabeladdress(const UniValue& params, bool fHelp)\n+{\n+    if (!EnsureWalletIsAvailable(fHelp))\n+        return NullUniValue;\n+\n+    if (fHelp || params.size() != 1)\n+        throw runtime_error(\n+            \"getlabeladdress \\\"label\\\"\\n\"\n+            \"\\nReturns the current 'label address' for this label.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"label\\\"       (string, required) The label for the address. It can also be set to the empty string \\\"\\\" to represent the default label.\\n\"\n+            \"\\nResult:\\n\"\n+            \"\\\"bitcoinaddress\\\"   (string) The 'label address' for the label\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"getlabeladdress\", \"\")\n+            + HelpExampleCli(\"getlabeladdress\", \"\\\"\\\"\")\n+            + HelpExampleCli(\"getlabeladdress\", \"\\\"mylabel\\\"\")\n+            + HelpExampleRpc(\"getlabeladdress\", \"\\\"mylabel\\\"\")\n+        );\n+\n+    LOCK2(cs_main, pwalletMain->cs_wallet);\n+\n+    // Parse the label first so we don't generate a key if there's an error\n+    string strLabel = AccountFromValue(params[0]);\n+\n+    UniValue ret(UniValue::VSTR);\n+\n+    ret = GetAccountAddress(strLabel).ToString();\n+    return ret;\n+}\n+\n+/** Convert CAddressBookData to JSON record.\n+ * The verbosity of the output is configurable based on the command.\n+ */\n+static UniValue AddressBookDataToJSON(const CAddressBookData& data, bool verbose)\n+{\n+    UniValue ret(UniValue::VOBJ);\n+    if (verbose)\n+        ret.push_back(Pair(\"name\", data.name));\n+    ret.push_back(Pair(\"purpose\", data.purpose));\n+    if (verbose) {\n+        UniValue ddata(UniValue::VOBJ);\n+        BOOST_FOREACH(const PAIRTYPE(std::string, std::string) &item, data.destdata)\n+            ddata.push_back(Pair(item.first, item.second));\n+        ret.push_back(Pair(\"destdata\", ddata));\n+    }\n+    return ret;\n+}\n+\n+UniValue getlabel(const UniValue& params, bool fHelp)\n+{\n+    if (!EnsureWalletIsAvailable(fHelp))\n+        return NullUniValue;\n+\n+    if (fHelp || params.size() != 1)\n+        throw runtime_error(\n+            \"getlabel \\\"bitcoinaddress\\\"\\n\"\n+            \"\\nReturns the label associated with the given address.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"bitcoinaddress\\\"  (string, required) The bitcoin address for label lookup.\\n\"\n+            \"\\nResult:\\n\"\n+            \"  { (json object with information about address)\\n\"\n+            \"    \\\"name\\\": \\\"labelname\\\" (string) The label\\n\"\n+            \"    \\\"purpose\\\": \\\"string\\\" (string) Purpose of address (\\\"send\\\" for sending address, \\\"receive\\\" for receiving address)\\n\"\n+            \"  },...\\n\"\n+            \"  Result is null if there is no record for this address.\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"getlabel\", \"\\\"1D1ZrZNe3JUo7ZycKEYQQiQAWd9y54F4XZ\\\"\")\n+            + HelpExampleRpc(\"getlabel\", \"\\\"1D1ZrZNe3JUo7ZycKEYQQiQAWd9y54F4XZ\\\"\")\n+        );\n+\n+    LOCK2(cs_main, pwalletMain->cs_wallet);\n+\n+    CBitcoinAddress address(params[0].get_str());\n+    if (!address.IsValid())\n+        throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Invalid Bitcoin address\");\n+\n+    map<CTxDestination, CAddressBookData>::iterator mi = pwalletMain->mapAddressBook.find(address.Get());\n+    if (mi != pwalletMain->mapAddressBook.end())\n+        return AddressBookDataToJSON((*mi).second, true);\n+    return NullUniValue;\n+}\n+\n+UniValue getaddressesbylabel(const UniValue& params, bool fHelp)\n+{\n+    if (!EnsureWalletIsAvailable(fHelp))\n+        return NullUniValue;\n+\n+    if (fHelp || params.size() != 1)\n+        throw runtime_error(\n+            \"getaddressesbylabel \\\"label\\\"\\n\"\n+            \"\\nReturns the list of addresses assigned the specified label.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"label\\\"  (string, required) The label.\\n\"\n+            \"\\nResult:\\n\"\n+            \"{ (json object with addresses as keys)\\n\"\n+            \"  \\\"bitcoinaddress\\\": { (json object with information about address)\\n\"\n+            \"    \\\"purpose\\\": \\\"string\\\" (string)  Purpose of address (\\\"send\\\" for sending address, \\\"receive\\\" for receiving address)\\n\"\n+            \"  },...\\n\"\n+            \"}\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"getaddressesbylabel\", \"\\\"tabby\\\"\")\n+            + HelpExampleRpc(\"getaddressesbylabel\", \"\\\"tabby\\\"\")\n+        );\n+\n+    LOCK2(cs_main, pwalletMain->cs_wallet);\n+\n+    string strLabel = AccountFromValue(params[0]);\n+\n+    // Find all addresses that have the given label\n+    UniValue ret(UniValue::VOBJ);\n+    BOOST_FOREACH(const PAIRTYPE(CBitcoinAddress, CAddressBookData)& item, pwalletMain->mapAddressBook)\n+    {\n+        if (item.second.name == strLabel)\n+            ret.push_back(Pair(item.first.ToString(), AddressBookDataToJSON(item.second, false)));\n+    }\n+    return ret;\n+}\n+\n+UniValue listlabels(const UniValue& params, bool fHelp)\n+{\n+    if (!EnsureWalletIsAvailable(fHelp))\n+        return NullUniValue;\n+\n+    if (fHelp || params.size() > 1)\n+        throw runtime_error(\n+            \"listlabels ( \\\"purpose\\\" )\\n\"\n+            \"\\nReturns the list of all labels, or labels that are assigned to addresses with a specific purpose.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"purpose\\\"  (string, optional) Address purpose to list labels for ('send','receive'). An empty string is the same as not providing this argument.\\n\"\n+            \"\\nResult:\\n\"\n+            \"[                      (json array of string)\\n\"\n+            \"  \\\"label\\\",  (string) Label name\\n\"\n+            \"  ...\\n\"\n+            \"]\\n\"\n+            \"\\nExamples:\\n\"\n+            \"\\nList all labels\\n\"\n+            + HelpExampleCli(\"listlabels\", \"\") +\n+            \"\\nList labels that have receiving addresses\\n\"\n+            + HelpExampleCli(\"listlabels\", \"receive\") +\n+            \"\\nList labels that have sending addresses\\n\"\n+            + HelpExampleCli(\"listlabels\", \"send\") +\n+            \"\\nAs json rpc call\\n\"\n+            + HelpExampleRpc(\"listlabels\", \"receive\")\n+        );\n+\n+    LOCK2(cs_main, pwalletMain->cs_wallet);\n+\n+    std::string purpose;\n+    if (params.size() > 0)\n+        purpose = params[0].get_str();\n+\n+    std::set<std::string> setLabels;\n+    BOOST_FOREACH(const PAIRTYPE(CTxDestination, CAddressBookData)& entry, pwalletMain->mapAddressBook) {\n+        if (purpose.empty() || entry.second.purpose == purpose)\n+            setLabels.insert(entry.second.name);\n+    }\n+    UniValue ret(UniValue::VARR);\n+    BOOST_FOREACH(const std::string &name, setLabels)\n+        ret.push_back(name);\n+\n+    return ret;\n+}\n+\n+UniValue setlabel(const UniValue& params, bool fHelp)\n+{\n+    if (!EnsureWalletIsAvailable(fHelp))\n+        return NullUniValue;\n+\n+    if (fHelp || params.size() < 1 || params.size() > 2)\n+        throw runtime_error(\n+            \"setlabel \\\"bitcoinaddress\\\" \\\"label\\\"\\n\"\n+            \"\\nSets the label associated with the given address.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"bitcoinaddress\\\"  (string, required) The bitcoin address to be associated with an label.\\n\"\n+            \"2. \\\"label\\\"           (string, required) The label to assign to the address.\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"setlabel\", \"\\\"1D1ZrZNe3JUo7ZycKEYQQiQAWd9y54F4XZ\\\" \\\"tabby\\\"\")\n+            + HelpExampleRpc(\"setlabel\", \"\\\"1D1ZrZNe3JUo7ZycKEYQQiQAWd9y54F4XZ\\\", \\\"tabby\\\"\")\n+        );\n+\n+    LOCK2(cs_main, pwalletMain->cs_wallet);\n+\n+    CBitcoinAddress address(params[0].get_str());\n+    if (!address.IsValid())\n+        throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Invalid Bitcoin address\");\n+\n+    string strLabel;\n+    if (params.size() > 1)\n+        strLabel = AccountFromValue(params[1]);\n+\n+    if (IsMine(*pwalletMain, address.Get()))\n+    {\n+        // Detect when changing the label of an address that is the 'label address' of another label:",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7729#discussion_r108556412",
      "id" : 108556412,
      "original_commit_id" : "a2557ffb80543af5e92c3db03d257fe594b0d910",
      "original_position" : 210,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 29591895,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7729",
      "updated_at" : "2017-06-29T18:35:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108556412",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/886523?v=3",
         "events_url" : "https://api.github.com/users/JeremyRubin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JeremyRubin/followers",
         "following_url" : "https://api.github.com/users/JeremyRubin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JeremyRubin",
         "id" : 886523,
         "login" : "JeremyRubin",
         "organizations_url" : "https://api.github.com/users/JeremyRubin/orgs",
         "received_events_url" : "https://api.github.com/users/JeremyRubin/received_events",
         "repos_url" : "https://api.github.com/users/JeremyRubin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JeremyRubin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JeremyRubin"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7729#discussion_r108556848"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7729"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108556848"
         }
      },
      "body" : "What's the correct behavior when address is watchonly?",
      "commit_id" : "0e3ef241d18593a9f67d4e5f37c22008cd9dc6b7",
      "created_at" : "2017-03-28T22:54:19Z",
      "diff_hunk" : "@@ -2497,6 +2503,216 @@ UniValue fundrawtransaction(const UniValue& params, bool fHelp)\n     return result;\n }\n \n+UniValue getlabeladdress(const UniValue& params, bool fHelp)\n+{\n+    if (!EnsureWalletIsAvailable(fHelp))\n+        return NullUniValue;\n+\n+    if (fHelp || params.size() != 1)\n+        throw runtime_error(\n+            \"getlabeladdress \\\"label\\\"\\n\"\n+            \"\\nReturns the current 'label address' for this label.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"label\\\"       (string, required) The label for the address. It can also be set to the empty string \\\"\\\" to represent the default label.\\n\"\n+            \"\\nResult:\\n\"\n+            \"\\\"bitcoinaddress\\\"   (string) The 'label address' for the label\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"getlabeladdress\", \"\")\n+            + HelpExampleCli(\"getlabeladdress\", \"\\\"\\\"\")\n+            + HelpExampleCli(\"getlabeladdress\", \"\\\"mylabel\\\"\")\n+            + HelpExampleRpc(\"getlabeladdress\", \"\\\"mylabel\\\"\")\n+        );\n+\n+    LOCK2(cs_main, pwalletMain->cs_wallet);\n+\n+    // Parse the label first so we don't generate a key if there's an error\n+    string strLabel = AccountFromValue(params[0]);\n+\n+    UniValue ret(UniValue::VSTR);\n+\n+    ret = GetAccountAddress(strLabel).ToString();\n+    return ret;\n+}\n+\n+/** Convert CAddressBookData to JSON record.\n+ * The verbosity of the output is configurable based on the command.\n+ */\n+static UniValue AddressBookDataToJSON(const CAddressBookData& data, bool verbose)\n+{\n+    UniValue ret(UniValue::VOBJ);\n+    if (verbose)\n+        ret.push_back(Pair(\"name\", data.name));\n+    ret.push_back(Pair(\"purpose\", data.purpose));\n+    if (verbose) {\n+        UniValue ddata(UniValue::VOBJ);\n+        BOOST_FOREACH(const PAIRTYPE(std::string, std::string) &item, data.destdata)\n+            ddata.push_back(Pair(item.first, item.second));\n+        ret.push_back(Pair(\"destdata\", ddata));\n+    }\n+    return ret;\n+}\n+\n+UniValue getlabel(const UniValue& params, bool fHelp)\n+{\n+    if (!EnsureWalletIsAvailable(fHelp))\n+        return NullUniValue;\n+\n+    if (fHelp || params.size() != 1)\n+        throw runtime_error(\n+            \"getlabel \\\"bitcoinaddress\\\"\\n\"\n+            \"\\nReturns the label associated with the given address.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"bitcoinaddress\\\"  (string, required) The bitcoin address for label lookup.\\n\"\n+            \"\\nResult:\\n\"\n+            \"  { (json object with information about address)\\n\"\n+            \"    \\\"name\\\": \\\"labelname\\\" (string) The label\\n\"\n+            \"    \\\"purpose\\\": \\\"string\\\" (string) Purpose of address (\\\"send\\\" for sending address, \\\"receive\\\" for receiving address)\\n\"\n+            \"  },...\\n\"\n+            \"  Result is null if there is no record for this address.\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"getlabel\", \"\\\"1D1ZrZNe3JUo7ZycKEYQQiQAWd9y54F4XZ\\\"\")\n+            + HelpExampleRpc(\"getlabel\", \"\\\"1D1ZrZNe3JUo7ZycKEYQQiQAWd9y54F4XZ\\\"\")\n+        );\n+\n+    LOCK2(cs_main, pwalletMain->cs_wallet);\n+\n+    CBitcoinAddress address(params[0].get_str());\n+    if (!address.IsValid())\n+        throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Invalid Bitcoin address\");\n+\n+    map<CTxDestination, CAddressBookData>::iterator mi = pwalletMain->mapAddressBook.find(address.Get());\n+    if (mi != pwalletMain->mapAddressBook.end())\n+        return AddressBookDataToJSON((*mi).second, true);\n+    return NullUniValue;\n+}\n+\n+UniValue getaddressesbylabel(const UniValue& params, bool fHelp)\n+{\n+    if (!EnsureWalletIsAvailable(fHelp))\n+        return NullUniValue;\n+\n+    if (fHelp || params.size() != 1)\n+        throw runtime_error(\n+            \"getaddressesbylabel \\\"label\\\"\\n\"\n+            \"\\nReturns the list of addresses assigned the specified label.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"label\\\"  (string, required) The label.\\n\"\n+            \"\\nResult:\\n\"\n+            \"{ (json object with addresses as keys)\\n\"\n+            \"  \\\"bitcoinaddress\\\": { (json object with information about address)\\n\"\n+            \"    \\\"purpose\\\": \\\"string\\\" (string)  Purpose of address (\\\"send\\\" for sending address, \\\"receive\\\" for receiving address)\\n\"\n+            \"  },...\\n\"\n+            \"}\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"getaddressesbylabel\", \"\\\"tabby\\\"\")\n+            + HelpExampleRpc(\"getaddressesbylabel\", \"\\\"tabby\\\"\")\n+        );\n+\n+    LOCK2(cs_main, pwalletMain->cs_wallet);\n+\n+    string strLabel = AccountFromValue(params[0]);\n+\n+    // Find all addresses that have the given label\n+    UniValue ret(UniValue::VOBJ);\n+    BOOST_FOREACH(const PAIRTYPE(CBitcoinAddress, CAddressBookData)& item, pwalletMain->mapAddressBook)\n+    {\n+        if (item.second.name == strLabel)\n+            ret.push_back(Pair(item.first.ToString(), AddressBookDataToJSON(item.second, false)));\n+    }\n+    return ret;\n+}\n+\n+UniValue listlabels(const UniValue& params, bool fHelp)\n+{\n+    if (!EnsureWalletIsAvailable(fHelp))\n+        return NullUniValue;\n+\n+    if (fHelp || params.size() > 1)\n+        throw runtime_error(\n+            \"listlabels ( \\\"purpose\\\" )\\n\"\n+            \"\\nReturns the list of all labels, or labels that are assigned to addresses with a specific purpose.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"purpose\\\"  (string, optional) Address purpose to list labels for ('send','receive'). An empty string is the same as not providing this argument.\\n\"\n+            \"\\nResult:\\n\"\n+            \"[                      (json array of string)\\n\"\n+            \"  \\\"label\\\",  (string) Label name\\n\"\n+            \"  ...\\n\"\n+            \"]\\n\"\n+            \"\\nExamples:\\n\"\n+            \"\\nList all labels\\n\"\n+            + HelpExampleCli(\"listlabels\", \"\") +\n+            \"\\nList labels that have receiving addresses\\n\"\n+            + HelpExampleCli(\"listlabels\", \"receive\") +\n+            \"\\nList labels that have sending addresses\\n\"\n+            + HelpExampleCli(\"listlabels\", \"send\") +\n+            \"\\nAs json rpc call\\n\"\n+            + HelpExampleRpc(\"listlabels\", \"receive\")\n+        );\n+\n+    LOCK2(cs_main, pwalletMain->cs_wallet);\n+\n+    std::string purpose;\n+    if (params.size() > 0)\n+        purpose = params[0].get_str();\n+\n+    std::set<std::string> setLabels;\n+    BOOST_FOREACH(const PAIRTYPE(CTxDestination, CAddressBookData)& entry, pwalletMain->mapAddressBook) {\n+        if (purpose.empty() || entry.second.purpose == purpose)\n+            setLabels.insert(entry.second.name);\n+    }\n+    UniValue ret(UniValue::VARR);\n+    BOOST_FOREACH(const std::string &name, setLabels)\n+        ret.push_back(name);\n+\n+    return ret;\n+}\n+\n+UniValue setlabel(const UniValue& params, bool fHelp)\n+{\n+    if (!EnsureWalletIsAvailable(fHelp))\n+        return NullUniValue;\n+\n+    if (fHelp || params.size() < 1 || params.size() > 2)\n+        throw runtime_error(\n+            \"setlabel \\\"bitcoinaddress\\\" \\\"label\\\"\\n\"\n+            \"\\nSets the label associated with the given address.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"bitcoinaddress\\\"  (string, required) The bitcoin address to be associated with an label.\\n\"\n+            \"2. \\\"label\\\"           (string, required) The label to assign to the address.\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"setlabel\", \"\\\"1D1ZrZNe3JUo7ZycKEYQQiQAWd9y54F4XZ\\\" \\\"tabby\\\"\")\n+            + HelpExampleRpc(\"setlabel\", \"\\\"1D1ZrZNe3JUo7ZycKEYQQiQAWd9y54F4XZ\\\", \\\"tabby\\\"\")\n+        );\n+\n+    LOCK2(cs_main, pwalletMain->cs_wallet);\n+\n+    CBitcoinAddress address(params[0].get_str());\n+    if (!address.IsValid())\n+        throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Invalid Bitcoin address\");\n+\n+    string strLabel;\n+    if (params.size() > 1)\n+        strLabel = AccountFromValue(params[1]);\n+\n+    if (IsMine(*pwalletMain, address.Get()))",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7729#discussion_r108556848",
      "id" : 108556848,
      "original_commit_id" : "a2557ffb80543af5e92c3db03d257fe594b0d910",
      "original_position" : 208,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 29591895,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7729",
      "updated_at" : "2017-06-29T18:35:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108556848",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/886523?v=3",
         "events_url" : "https://api.github.com/users/JeremyRubin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JeremyRubin/followers",
         "following_url" : "https://api.github.com/users/JeremyRubin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JeremyRubin",
         "id" : 886523,
         "login" : "JeremyRubin",
         "organizations_url" : "https://api.github.com/users/JeremyRubin/orgs",
         "received_events_url" : "https://api.github.com/users/JeremyRubin/received_events",
         "repos_url" : "https://api.github.com/users/JeremyRubin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JeremyRubin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JeremyRubin"
      }
   },
   {
      "body" : "@laanwj, do you want to cherry pick my unit test into this PR? (https://github.com/ryanofsky/bitcoin/commit/2dac8eb0d915b4c04764eff100d81718b2cd9a90)\r\n\r\nIn [IRC recently](https://botbot.me/freenode/bitcoin-core-dev/msg/83565594/), you requested that people \"please review the *API*, not the code,\" and I think the unit test can help with this, because it demonstrates the API in action, covers various subtleties, and is also well commented.",
      "created_at" : "2017-04-07T12:25:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7729#issuecomment-292522820",
      "id" : 292522820,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7729",
      "updated_at" : "2017-04-07T12:25:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/292522820",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/7133040?v=3",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "body" : "> @laanwj, do you want to cherry pick my unit test into this PR? (ryanofsky@2dac8eb)\r\n\r\nYes, I will, thank you!",
      "created_at" : "2017-04-07T16:03:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7729#issuecomment-292577814",
      "id" : 292577814,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7729",
      "updated_at" : "2017-04-07T16:03:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/292577814",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "API ACK. Still needs rebase :(",
      "created_at" : "2017-04-23T16:26:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7729#issuecomment-296454888",
      "id" : 296454888,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7729",
      "updated_at" : "2017-04-23T16:26:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/296454888",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "I expected to be able to attach multiple labels to a single address.",
      "created_at" : "2017-05-19T21:58:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7729#issuecomment-302820825",
      "id" : 302820825,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7729",
      "updated_at" : "2017-05-19T21:58:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/302820825",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "> I expected to be able to attach multiple labels to a single address.\r\n\r\nThat is not possible in the GUI either, in the OP I've defined the scope as:\r\n\r\n> The general idea is to offer the same functionality as the GUI label system\r\n\r\nSuch functionality could be added in the future.",
      "created_at" : "2017-05-20T06:43:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7729#issuecomment-302854998",
      "id" : 302854998,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7729",
      "updated_at" : "2017-05-20T06:43:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/302854998",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Nobody seems to have big problems with the API for a while. Perhaps it's time to rebase and start reviewing the code itself",
      "created_at" : "2017-05-20T09:26:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7729#issuecomment-302862044",
      "id" : 302862044,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7729",
      "updated_at" : "2017-05-20T09:26:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/302862044",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "body" : "I wanted to test this so I rebased on master and cherry-picked Russ's test. I've pushed it here: https://github.com/jnewbery/bitcoin/tree/pr7729 . Feel free to reset onto that commit. Note that there were quite a few refactors (multiwallet, namespaces, database wrapper, JSONRPC request, rpc names args), so someone else should probably review the rebase to make sure I haven't missed anything.\r\n\r\nNote that the final test in Russ's test script currently fails. I added some trace to the script and see that the address returned by `getlabeladdress` isn't included in the list of addresses returned by `getaddressesbylabel`:\r\n\r\n```\r\n-146-> getaddressesbylabel [\"c\"]\r\n<-146- [0.000135] {\"n1HsWg6ANV5Z8SLojKNyjqCRf5saqQKQed\": {\"purpose\": \"receive\"}, \"mfYMvaXrHp2RUxe1q1PwRgS8AokYjgUSmf\": {\"purpose\": \"receive\"}, \"mhVHLa9KCHGMXHBNpyfAHNZXmwKaaTg6Fj\": {\"purpose\": \"receive\"}}\r\n-147-> getlabeladdress [\"c\"]\r\n<-147- [0.001559] \"mnvNe2eG3hmderC3y5E4SYLNnwWsYrSg1c\"\r\n-148-> getlabel [\"mnvNe2eG3hmderC3y5E4SYLNnwWsYrSg1c\"]\r\n<-148- [0.000136] {\"name\": \"c\", \"destdata\": {}, \"purpose\": \"receive\"}\r\n```\r\n\r\nI haven't yet dug into why that's the case.",
      "created_at" : "2017-06-12T15:25:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7729#issuecomment-307823982",
      "id" : 307823982,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7729",
      "updated_at" : "2017-06-12T15:25:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/307823982",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "body" : "I've made a few more changes to rpcwallet.cpp to reflect more recent style guidelines (no `BOOST_FOREACH` and braces for if statements. I've also committed a fixup commit for the failing test case. @laanwj feel free to squash that if you're happy with it.\r\n\r\nOnce you've taken the changes I'll add my review comments.",
      "created_at" : "2017-06-12T18:40:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7729#issuecomment-307881106",
      "id" : 307881106,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7729",
      "updated_at" : "2017-06-12T18:40:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/307881106",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "body" : "@jnewbery Thanks so much! Updated this pull to that branch.",
      "created_at" : "2017-06-14T09:19:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7729#issuecomment-308374415",
      "id" : 308374415,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7729",
      "updated_at" : "2017-06-14T09:19:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/308374415",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "needs rebase again! (although this one should be easier - just fixing the `BASE_SCRIPTS` list in test_runner.py)",
      "created_at" : "2017-06-14T14:45:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7729#issuecomment-308454179",
      "id" : 308454179,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7729",
      "updated_at" : "2017-06-14T14:45:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/308454179",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7729#discussion_r121975430"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7729"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/121975430"
         }
      },
      "body" : "I think the comment above may need updating to:\r\n- remove comments about accounting entries (or say they're deprecated)\r\n- comment that 'acc' database entries are for labels.",
      "commit_id" : "0e3ef241d18593a9f67d4e5f37c22008cd9dc6b7",
      "created_at" : "2017-06-14T15:08:15Z",
      "diff_hunk" : "@@ -204,6 +204,7 @@ class CWalletDB\n     bool WriteAccountingEntry(const uint64_t nAccEntryNum, const CAccountingEntry& acentry);\n     bool ReadAccount(const std::string& strAccount, CAccount& account);\n     bool WriteAccount(const std::string& strAccount, const CAccount& account);\n+    bool EraseAccount(const std::string& strAccount);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7729#discussion_r121975430",
      "id" : 121975430,
      "original_commit_id" : "21a49c206f839984c9cab3e1dd67aea63f9c2a9c",
      "original_position" : 4,
      "path" : "src/wallet/walletdb.h",
      "position" : 4,
      "pull_request_review_id" : 44049432,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7729",
      "updated_at" : "2017-06-29T18:35:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/121975430",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7729#discussion_r121986789"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7729"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/121986789"
         }
      },
      "body" : "If I'm understanding `AddressBookDataToJSON()` correctly, then the result will also include an array of destdata.",
      "commit_id" : "0e3ef241d18593a9f67d4e5f37c22008cd9dc6b7",
      "created_at" : "2017-06-14T15:47:11Z",
      "diff_hunk" : "@@ -2923,6 +2928,236 @@ UniValue bumpfee(const JSONRPCRequest& request)\n     return result;\n }\n \n+UniValue getlabeladdress(const JSONRPCRequest& request)\n+{\n+    CWallet * const pwallet = GetWalletForJSONRPCRequest(request);\n+    if (!EnsureWalletIsAvailable(pwallet, request.fHelp)) {\n+        return NullUniValue;\n+    }\n+\n+    if (request.fHelp || request.params.size() != 1)\n+        throw std::runtime_error(\n+            \"getlabeladdress \\\"label\\\"\\n\"\n+            \"\\nReturns the current 'label address' for this label.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"label\\\"       (string, required) The label for the address. It can also be set to the empty string \\\"\\\" to represent the default label.\\n\"\n+            \"\\nResult:\\n\"\n+            \"\\\"bitcoinaddress\\\"   (string) The 'label address' for the label\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"getlabeladdress\", \"\")\n+            + HelpExampleCli(\"getlabeladdress\", \"\\\"\\\"\")\n+            + HelpExampleCli(\"getlabeladdress\", \"\\\"mylabel\\\"\")\n+            + HelpExampleRpc(\"getlabeladdress\", \"\\\"mylabel\\\"\")\n+        );\n+\n+    LOCK2(cs_main, pwallet->cs_wallet);\n+\n+    // Parse the label first so we don't generate a key if there's an error\n+    std::string strLabel = AccountFromValue(request.params[0]);\n+\n+    UniValue ret(UniValue::VSTR);\n+\n+    ret = GetAccountAddress(pwallet, strLabel).ToString();\n+    return ret;\n+}\n+\n+/** Convert CAddressBookData to JSON record.\n+ * The verbosity of the output is configurable based on the command.\n+ */\n+static UniValue AddressBookDataToJSON(const CAddressBookData& data, bool verbose)\n+{\n+    UniValue ret(UniValue::VOBJ);\n+    if (verbose) {\n+        ret.push_back(Pair(\"name\", data.name));\n+    }\n+    ret.push_back(Pair(\"purpose\", data.purpose));\n+    if (verbose) {\n+        UniValue ddata(UniValue::VOBJ);\n+        for (const std::pair<std::string, std::string>& item : data.destdata) {\n+            ddata.push_back(Pair(item.first, item.second));\n+        }\n+        ret.push_back(Pair(\"destdata\", ddata));\n+    }\n+    return ret;\n+}\n+\n+UniValue getlabel(const JSONRPCRequest& request)\n+{\n+    CWallet * const pwallet = GetWalletForJSONRPCRequest(request);\n+    if (!EnsureWalletIsAvailable(pwallet, request.fHelp)) {\n+        return NullUniValue;\n+    }\n+\n+    if (request.fHelp || request.params.size() != 1)\n+        throw std::runtime_error(\n+            \"getlabel \\\"bitcoinaddress\\\"\\n\"\n+            \"\\nReturns the label associated with the given address.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"bitcoinaddress\\\"  (string, required) The bitcoin address for label lookup.\\n\"\n+            \"\\nResult:\\n\"\n+            \"  { (json object with information about address)\\n\"\n+            \"    \\\"name\\\": \\\"labelname\\\" (string) The label\\n\"\n+            \"    \\\"purpose\\\": \\\"string\\\" (string) Purpose of address (\\\"send\\\" for sending address, \\\"receive\\\" for receiving address)\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7729#discussion_r121986789",
      "id" : 121986789,
      "original_commit_id" : "21a49c206f839984c9cab3e1dd67aea63f9c2a9c",
      "original_position" : 85,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : 85,
      "pull_request_review_id" : 44049432,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7729",
      "updated_at" : "2017-06-29T18:35:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/121986789",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7729#discussion_r121998036"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7729"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/121998036"
         }
      },
      "body" : "It'd be nice to eventually rename this function `LabelFromValue()`. That can be done in a follow-up PR.",
      "commit_id" : "0e3ef241d18593a9f67d4e5f37c22008cd9dc6b7",
      "created_at" : "2017-06-14T16:29:40Z",
      "diff_hunk" : "@@ -2923,6 +2928,236 @@ UniValue bumpfee(const JSONRPCRequest& request)\n     return result;\n }\n \n+UniValue getlabeladdress(const JSONRPCRequest& request)\n+{\n+    CWallet * const pwallet = GetWalletForJSONRPCRequest(request);\n+    if (!EnsureWalletIsAvailable(pwallet, request.fHelp)) {\n+        return NullUniValue;\n+    }\n+\n+    if (request.fHelp || request.params.size() != 1)\n+        throw std::runtime_error(\n+            \"getlabeladdress \\\"label\\\"\\n\"\n+            \"\\nReturns the current 'label address' for this label.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"label\\\"       (string, required) The label for the address. It can also be set to the empty string \\\"\\\" to represent the default label.\\n\"\n+            \"\\nResult:\\n\"\n+            \"\\\"bitcoinaddress\\\"   (string) The 'label address' for the label\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"getlabeladdress\", \"\")\n+            + HelpExampleCli(\"getlabeladdress\", \"\\\"\\\"\")\n+            + HelpExampleCli(\"getlabeladdress\", \"\\\"mylabel\\\"\")\n+            + HelpExampleRpc(\"getlabeladdress\", \"\\\"mylabel\\\"\")\n+        );\n+\n+    LOCK2(cs_main, pwallet->cs_wallet);\n+\n+    // Parse the label first so we don't generate a key if there's an error\n+    std::string strLabel = AccountFromValue(request.params[0]);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7729#discussion_r121998036",
      "id" : 121998036,
      "original_commit_id" : "21a49c206f839984c9cab3e1dd67aea63f9c2a9c",
      "original_position" : 41,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : 41,
      "pull_request_review_id" : 44049432,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7729",
      "updated_at" : "2017-06-29T18:35:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/121998036",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7729#discussion_r121998484"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7729"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/121998484"
         }
      },
      "body" : "nit: I don't think `An empty string is the same as not providing this argument.` is required",
      "commit_id" : "0e3ef241d18593a9f67d4e5f37c22008cd9dc6b7",
      "created_at" : "2017-06-14T16:31:36Z",
      "diff_hunk" : "@@ -2923,6 +2928,236 @@ UniValue bumpfee(const JSONRPCRequest& request)\n     return result;\n }\n \n+UniValue getlabeladdress(const JSONRPCRequest& request)\n+{\n+    CWallet * const pwallet = GetWalletForJSONRPCRequest(request);\n+    if (!EnsureWalletIsAvailable(pwallet, request.fHelp)) {\n+        return NullUniValue;\n+    }\n+\n+    if (request.fHelp || request.params.size() != 1)\n+        throw std::runtime_error(\n+            \"getlabeladdress \\\"label\\\"\\n\"\n+            \"\\nReturns the current 'label address' for this label.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"label\\\"       (string, required) The label for the address. It can also be set to the empty string \\\"\\\" to represent the default label.\\n\"\n+            \"\\nResult:\\n\"\n+            \"\\\"bitcoinaddress\\\"   (string) The 'label address' for the label\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"getlabeladdress\", \"\")\n+            + HelpExampleCli(\"getlabeladdress\", \"\\\"\\\"\")\n+            + HelpExampleCli(\"getlabeladdress\", \"\\\"mylabel\\\"\")\n+            + HelpExampleRpc(\"getlabeladdress\", \"\\\"mylabel\\\"\")\n+        );\n+\n+    LOCK2(cs_main, pwallet->cs_wallet);\n+\n+    // Parse the label first so we don't generate a key if there's an error\n+    std::string strLabel = AccountFromValue(request.params[0]);\n+\n+    UniValue ret(UniValue::VSTR);\n+\n+    ret = GetAccountAddress(pwallet, strLabel).ToString();\n+    return ret;\n+}\n+\n+/** Convert CAddressBookData to JSON record.\n+ * The verbosity of the output is configurable based on the command.\n+ */\n+static UniValue AddressBookDataToJSON(const CAddressBookData& data, bool verbose)\n+{\n+    UniValue ret(UniValue::VOBJ);\n+    if (verbose) {\n+        ret.push_back(Pair(\"name\", data.name));\n+    }\n+    ret.push_back(Pair(\"purpose\", data.purpose));\n+    if (verbose) {\n+        UniValue ddata(UniValue::VOBJ);\n+        for (const std::pair<std::string, std::string>& item : data.destdata) {\n+            ddata.push_back(Pair(item.first, item.second));\n+        }\n+        ret.push_back(Pair(\"destdata\", ddata));\n+    }\n+    return ret;\n+}\n+\n+UniValue getlabel(const JSONRPCRequest& request)\n+{\n+    CWallet * const pwallet = GetWalletForJSONRPCRequest(request);\n+    if (!EnsureWalletIsAvailable(pwallet, request.fHelp)) {\n+        return NullUniValue;\n+    }\n+\n+    if (request.fHelp || request.params.size() != 1)\n+        throw std::runtime_error(\n+            \"getlabel \\\"bitcoinaddress\\\"\\n\"\n+            \"\\nReturns the label associated with the given address.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"bitcoinaddress\\\"  (string, required) The bitcoin address for label lookup.\\n\"\n+            \"\\nResult:\\n\"\n+            \"  { (json object with information about address)\\n\"\n+            \"    \\\"name\\\": \\\"labelname\\\" (string) The label\\n\"\n+            \"    \\\"purpose\\\": \\\"string\\\" (string) Purpose of address (\\\"send\\\" for sending address, \\\"receive\\\" for receiving address)\\n\"\n+            \"  },...\\n\"\n+            \"  Result is null if there is no record for this address.\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"getlabel\", \"\\\"1D1ZrZNe3JUo7ZycKEYQQiQAWd9y54F4XZ\\\"\")\n+            + HelpExampleRpc(\"getlabel\", \"\\\"1D1ZrZNe3JUo7ZycKEYQQiQAWd9y54F4XZ\\\"\")\n+        );\n+\n+    LOCK2(cs_main, pwallet->cs_wallet);\n+\n+    CBitcoinAddress address(request.params[0].get_str());\n+    if (!address.IsValid()) {\n+        throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Invalid Bitcoin address\");\n+    }\n+\n+    std::map<CTxDestination, CAddressBookData>::iterator mi = pwallet->mapAddressBook.find(address.Get());\n+    if (mi != pwallet->mapAddressBook.end()) {\n+        return AddressBookDataToJSON((*mi).second, true);\n+    }\n+    return NullUniValue;\n+}\n+\n+UniValue getaddressesbylabel(const JSONRPCRequest& request)\n+{\n+    CWallet * const pwallet = GetWalletForJSONRPCRequest(request);\n+    if (!EnsureWalletIsAvailable(pwallet, request.fHelp)) {\n+        return NullUniValue;\n+    }\n+\n+    if (request.fHelp || request.params.size() != 1)\n+        throw std::runtime_error(\n+            \"getaddressesbylabel \\\"label\\\"\\n\"\n+            \"\\nReturns the list of addresses assigned the specified label.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"label\\\"  (string, required) The label.\\n\"\n+            \"\\nResult:\\n\"\n+            \"{ (json object with addresses as keys)\\n\"\n+            \"  \\\"bitcoinaddress\\\": { (json object with information about address)\\n\"\n+            \"    \\\"purpose\\\": \\\"string\\\" (string)  Purpose of address (\\\"send\\\" for sending address, \\\"receive\\\" for receiving address)\\n\"\n+            \"  },...\\n\"\n+            \"}\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"getaddressesbylabel\", \"\\\"tabby\\\"\")\n+            + HelpExampleRpc(\"getaddressesbylabel\", \"\\\"tabby\\\"\")\n+        );\n+\n+    LOCK2(cs_main, pwallet->cs_wallet);\n+\n+    std::string strLabel = AccountFromValue(request.params[0]);\n+\n+    // Find all addresses that have the given label\n+    UniValue ret(UniValue::VOBJ);\n+    for (const std::pair<CBitcoinAddress, CAddressBookData>& item : pwallet->mapAddressBook) {\n+        if (item.second.name == strLabel) {\n+            ret.push_back(Pair(item.first.ToString(), AddressBookDataToJSON(item.second, false)));\n+        }\n+    }\n+    return ret;\n+}\n+\n+UniValue listlabels(const JSONRPCRequest& request)\n+{\n+    CWallet * const pwallet = GetWalletForJSONRPCRequest(request);\n+    if (!EnsureWalletIsAvailable(pwallet, request.fHelp)) {\n+        return NullUniValue;\n+    }\n+\n+    if (request.fHelp || request.params.size() > 1)\n+        throw std::runtime_error(\n+            \"listlabels ( \\\"purpose\\\" )\\n\"\n+            \"\\nReturns the list of all labels, or labels that are assigned to addresses with a specific purpose.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"purpose\\\"  (string, optional) Address purpose to list labels for ('send','receive'). An empty string is the same as not providing this argument.\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7729#discussion_r121998484",
      "id" : 121998484,
      "original_commit_id" : "21a49c206f839984c9cab3e1dd67aea63f9c2a9c",
      "original_position" : 157,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : 157,
      "pull_request_review_id" : 44049432,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7729",
      "updated_at" : "2017-06-29T18:35:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/121998484",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7729#discussion_r121999853"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7729"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/121999853"
         }
      },
      "body" : "I think we should remove the concept of 'label address' and change this section to delete the label when removing the final address from that label.",
      "commit_id" : "0e3ef241d18593a9f67d4e5f37c22008cd9dc6b7",
      "created_at" : "2017-06-14T16:37:41Z",
      "diff_hunk" : "@@ -2923,6 +2928,236 @@ UniValue bumpfee(const JSONRPCRequest& request)\n     return result;\n }\n \n+UniValue getlabeladdress(const JSONRPCRequest& request)\n+{\n+    CWallet * const pwallet = GetWalletForJSONRPCRequest(request);\n+    if (!EnsureWalletIsAvailable(pwallet, request.fHelp)) {\n+        return NullUniValue;\n+    }\n+\n+    if (request.fHelp || request.params.size() != 1)\n+        throw std::runtime_error(\n+            \"getlabeladdress \\\"label\\\"\\n\"\n+            \"\\nReturns the current 'label address' for this label.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"label\\\"       (string, required) The label for the address. It can also be set to the empty string \\\"\\\" to represent the default label.\\n\"\n+            \"\\nResult:\\n\"\n+            \"\\\"bitcoinaddress\\\"   (string) The 'label address' for the label\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"getlabeladdress\", \"\")\n+            + HelpExampleCli(\"getlabeladdress\", \"\\\"\\\"\")\n+            + HelpExampleCli(\"getlabeladdress\", \"\\\"mylabel\\\"\")\n+            + HelpExampleRpc(\"getlabeladdress\", \"\\\"mylabel\\\"\")\n+        );\n+\n+    LOCK2(cs_main, pwallet->cs_wallet);\n+\n+    // Parse the label first so we don't generate a key if there's an error\n+    std::string strLabel = AccountFromValue(request.params[0]);\n+\n+    UniValue ret(UniValue::VSTR);\n+\n+    ret = GetAccountAddress(pwallet, strLabel).ToString();\n+    return ret;\n+}\n+\n+/** Convert CAddressBookData to JSON record.\n+ * The verbosity of the output is configurable based on the command.\n+ */\n+static UniValue AddressBookDataToJSON(const CAddressBookData& data, bool verbose)\n+{\n+    UniValue ret(UniValue::VOBJ);\n+    if (verbose) {\n+        ret.push_back(Pair(\"name\", data.name));\n+    }\n+    ret.push_back(Pair(\"purpose\", data.purpose));\n+    if (verbose) {\n+        UniValue ddata(UniValue::VOBJ);\n+        for (const std::pair<std::string, std::string>& item : data.destdata) {\n+            ddata.push_back(Pair(item.first, item.second));\n+        }\n+        ret.push_back(Pair(\"destdata\", ddata));\n+    }\n+    return ret;\n+}\n+\n+UniValue getlabel(const JSONRPCRequest& request)\n+{\n+    CWallet * const pwallet = GetWalletForJSONRPCRequest(request);\n+    if (!EnsureWalletIsAvailable(pwallet, request.fHelp)) {\n+        return NullUniValue;\n+    }\n+\n+    if (request.fHelp || request.params.size() != 1)\n+        throw std::runtime_error(\n+            \"getlabel \\\"bitcoinaddress\\\"\\n\"\n+            \"\\nReturns the label associated with the given address.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"bitcoinaddress\\\"  (string, required) The bitcoin address for label lookup.\\n\"\n+            \"\\nResult:\\n\"\n+            \"  { (json object with information about address)\\n\"\n+            \"    \\\"name\\\": \\\"labelname\\\" (string) The label\\n\"\n+            \"    \\\"purpose\\\": \\\"string\\\" (string) Purpose of address (\\\"send\\\" for sending address, \\\"receive\\\" for receiving address)\\n\"\n+            \"  },...\\n\"\n+            \"  Result is null if there is no record for this address.\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"getlabel\", \"\\\"1D1ZrZNe3JUo7ZycKEYQQiQAWd9y54F4XZ\\\"\")\n+            + HelpExampleRpc(\"getlabel\", \"\\\"1D1ZrZNe3JUo7ZycKEYQQiQAWd9y54F4XZ\\\"\")\n+        );\n+\n+    LOCK2(cs_main, pwallet->cs_wallet);\n+\n+    CBitcoinAddress address(request.params[0].get_str());\n+    if (!address.IsValid()) {\n+        throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Invalid Bitcoin address\");\n+    }\n+\n+    std::map<CTxDestination, CAddressBookData>::iterator mi = pwallet->mapAddressBook.find(address.Get());\n+    if (mi != pwallet->mapAddressBook.end()) {\n+        return AddressBookDataToJSON((*mi).second, true);\n+    }\n+    return NullUniValue;\n+}\n+\n+UniValue getaddressesbylabel(const JSONRPCRequest& request)\n+{\n+    CWallet * const pwallet = GetWalletForJSONRPCRequest(request);\n+    if (!EnsureWalletIsAvailable(pwallet, request.fHelp)) {\n+        return NullUniValue;\n+    }\n+\n+    if (request.fHelp || request.params.size() != 1)\n+        throw std::runtime_error(\n+            \"getaddressesbylabel \\\"label\\\"\\n\"\n+            \"\\nReturns the list of addresses assigned the specified label.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"label\\\"  (string, required) The label.\\n\"\n+            \"\\nResult:\\n\"\n+            \"{ (json object with addresses as keys)\\n\"\n+            \"  \\\"bitcoinaddress\\\": { (json object with information about address)\\n\"\n+            \"    \\\"purpose\\\": \\\"string\\\" (string)  Purpose of address (\\\"send\\\" for sending address, \\\"receive\\\" for receiving address)\\n\"\n+            \"  },...\\n\"\n+            \"}\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"getaddressesbylabel\", \"\\\"tabby\\\"\")\n+            + HelpExampleRpc(\"getaddressesbylabel\", \"\\\"tabby\\\"\")\n+        );\n+\n+    LOCK2(cs_main, pwallet->cs_wallet);\n+\n+    std::string strLabel = AccountFromValue(request.params[0]);\n+\n+    // Find all addresses that have the given label\n+    UniValue ret(UniValue::VOBJ);\n+    for (const std::pair<CBitcoinAddress, CAddressBookData>& item : pwallet->mapAddressBook) {\n+        if (item.second.name == strLabel) {\n+            ret.push_back(Pair(item.first.ToString(), AddressBookDataToJSON(item.second, false)));\n+        }\n+    }\n+    return ret;\n+}\n+\n+UniValue listlabels(const JSONRPCRequest& request)\n+{\n+    CWallet * const pwallet = GetWalletForJSONRPCRequest(request);\n+    if (!EnsureWalletIsAvailable(pwallet, request.fHelp)) {\n+        return NullUniValue;\n+    }\n+\n+    if (request.fHelp || request.params.size() > 1)\n+        throw std::runtime_error(\n+            \"listlabels ( \\\"purpose\\\" )\\n\"\n+            \"\\nReturns the list of all labels, or labels that are assigned to addresses with a specific purpose.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"purpose\\\"  (string, optional) Address purpose to list labels for ('send','receive'). An empty string is the same as not providing this argument.\\n\"\n+            \"\\nResult:\\n\"\n+            \"[                      (json array of string)\\n\"\n+            \"  \\\"label\\\",  (string) Label name\\n\"\n+            \"  ...\\n\"\n+            \"]\\n\"\n+            \"\\nExamples:\\n\"\n+            \"\\nList all labels\\n\"\n+            + HelpExampleCli(\"listlabels\", \"\") +\n+            \"\\nList labels that have receiving addresses\\n\"\n+            + HelpExampleCli(\"listlabels\", \"receive\") +\n+            \"\\nList labels that have sending addresses\\n\"\n+            + HelpExampleCli(\"listlabels\", \"send\") +\n+            \"\\nAs json rpc call\\n\"\n+            + HelpExampleRpc(\"listlabels\", \"receive\")\n+        );\n+\n+    LOCK2(cs_main, pwallet->cs_wallet);\n+\n+    std::string purpose;\n+    if (request.params.size() > 0) {\n+        purpose = request.params[0].get_str();\n+    }\n+\n+    std::set<std::string> setLabels;\n+    for (const std::pair<CTxDestination, CAddressBookData>& entry : pwallet->mapAddressBook) {\n+        if (purpose.empty() || entry.second.purpose == purpose){\n+            setLabels.insert(entry.second.name);\n+        }\n+    }\n+    UniValue ret(UniValue::VARR);\n+    for (const std::string &name : setLabels) {\n+        ret.push_back(name);\n+    }\n+\n+    return ret;\n+}\n+\n+UniValue setlabel(const JSONRPCRequest& request)\n+{\n+    CWallet * const pwallet = GetWalletForJSONRPCRequest(request);\n+    if (!EnsureWalletIsAvailable(pwallet, request.fHelp)) {\n+        return NullUniValue;\n+    }\n+\n+    if (request.fHelp || request.params.size() < 1 || request.params.size() > 2)\n+        throw std::runtime_error(\n+            \"setlabel \\\"bitcoinaddress\\\" \\\"label\\\"\\n\"\n+            \"\\nSets the label associated with the given address.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"bitcoinaddress\\\"  (string, required) The bitcoin address to be associated with an label.\\n\"\n+            \"2. \\\"label\\\"           (string, required) The label to assign to the address.\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"setlabel\", \"\\\"1D1ZrZNe3JUo7ZycKEYQQiQAWd9y54F4XZ\\\" \\\"tabby\\\"\")\n+            + HelpExampleRpc(\"setlabel\", \"\\\"1D1ZrZNe3JUo7ZycKEYQQiQAWd9y54F4XZ\\\", \\\"tabby\\\"\")\n+        );\n+\n+    LOCK2(cs_main, pwallet->cs_wallet);\n+\n+    CBitcoinAddress address(request.params[0].get_str());\n+    if (!address.IsValid()) {\n+        throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Invalid Bitcoin address\");\n+    }\n+\n+    std::string strLabel;\n+    if (request.params.size() > 1){\n+        strLabel = AccountFromValue(request.params[1]);\n+    }\n+\n+    if (IsMine(*pwallet, address.Get()))\n+    {\n+        // Detect when changing the label of an address that is the 'label address' of another label:",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7729#discussion_r121999853",
      "id" : 121999853,
      "original_commit_id" : "21a49c206f839984c9cab3e1dd67aea63f9c2a9c",
      "original_position" : 228,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : 228,
      "pull_request_review_id" : 44049432,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7729",
      "updated_at" : "2017-06-29T18:35:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/121999853",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7729#discussion_r122002514"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7729"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/122002514"
         }
      },
      "body" : "What happens if `request.params.size() == 1`? Are you supposed to be able to remove a label using this rpc without a second argument? If so, I think you want to call `pwallet->DelAddressBook`.",
      "commit_id" : "0e3ef241d18593a9f67d4e5f37c22008cd9dc6b7",
      "created_at" : "2017-06-14T16:48:55Z",
      "diff_hunk" : "@@ -2923,6 +2928,236 @@ UniValue bumpfee(const JSONRPCRequest& request)\n     return result;\n }\n \n+UniValue getlabeladdress(const JSONRPCRequest& request)\n+{\n+    CWallet * const pwallet = GetWalletForJSONRPCRequest(request);\n+    if (!EnsureWalletIsAvailable(pwallet, request.fHelp)) {\n+        return NullUniValue;\n+    }\n+\n+    if (request.fHelp || request.params.size() != 1)\n+        throw std::runtime_error(\n+            \"getlabeladdress \\\"label\\\"\\n\"\n+            \"\\nReturns the current 'label address' for this label.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"label\\\"       (string, required) The label for the address. It can also be set to the empty string \\\"\\\" to represent the default label.\\n\"\n+            \"\\nResult:\\n\"\n+            \"\\\"bitcoinaddress\\\"   (string) The 'label address' for the label\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"getlabeladdress\", \"\")\n+            + HelpExampleCli(\"getlabeladdress\", \"\\\"\\\"\")\n+            + HelpExampleCli(\"getlabeladdress\", \"\\\"mylabel\\\"\")\n+            + HelpExampleRpc(\"getlabeladdress\", \"\\\"mylabel\\\"\")\n+        );\n+\n+    LOCK2(cs_main, pwallet->cs_wallet);\n+\n+    // Parse the label first so we don't generate a key if there's an error\n+    std::string strLabel = AccountFromValue(request.params[0]);\n+\n+    UniValue ret(UniValue::VSTR);\n+\n+    ret = GetAccountAddress(pwallet, strLabel).ToString();\n+    return ret;\n+}\n+\n+/** Convert CAddressBookData to JSON record.\n+ * The verbosity of the output is configurable based on the command.\n+ */\n+static UniValue AddressBookDataToJSON(const CAddressBookData& data, bool verbose)\n+{\n+    UniValue ret(UniValue::VOBJ);\n+    if (verbose) {\n+        ret.push_back(Pair(\"name\", data.name));\n+    }\n+    ret.push_back(Pair(\"purpose\", data.purpose));\n+    if (verbose) {\n+        UniValue ddata(UniValue::VOBJ);\n+        for (const std::pair<std::string, std::string>& item : data.destdata) {\n+            ddata.push_back(Pair(item.first, item.second));\n+        }\n+        ret.push_back(Pair(\"destdata\", ddata));\n+    }\n+    return ret;\n+}\n+\n+UniValue getlabel(const JSONRPCRequest& request)\n+{\n+    CWallet * const pwallet = GetWalletForJSONRPCRequest(request);\n+    if (!EnsureWalletIsAvailable(pwallet, request.fHelp)) {\n+        return NullUniValue;\n+    }\n+\n+    if (request.fHelp || request.params.size() != 1)\n+        throw std::runtime_error(\n+            \"getlabel \\\"bitcoinaddress\\\"\\n\"\n+            \"\\nReturns the label associated with the given address.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"bitcoinaddress\\\"  (string, required) The bitcoin address for label lookup.\\n\"\n+            \"\\nResult:\\n\"\n+            \"  { (json object with information about address)\\n\"\n+            \"    \\\"name\\\": \\\"labelname\\\" (string) The label\\n\"\n+            \"    \\\"purpose\\\": \\\"string\\\" (string) Purpose of address (\\\"send\\\" for sending address, \\\"receive\\\" for receiving address)\\n\"\n+            \"  },...\\n\"\n+            \"  Result is null if there is no record for this address.\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"getlabel\", \"\\\"1D1ZrZNe3JUo7ZycKEYQQiQAWd9y54F4XZ\\\"\")\n+            + HelpExampleRpc(\"getlabel\", \"\\\"1D1ZrZNe3JUo7ZycKEYQQiQAWd9y54F4XZ\\\"\")\n+        );\n+\n+    LOCK2(cs_main, pwallet->cs_wallet);\n+\n+    CBitcoinAddress address(request.params[0].get_str());\n+    if (!address.IsValid()) {\n+        throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Invalid Bitcoin address\");\n+    }\n+\n+    std::map<CTxDestination, CAddressBookData>::iterator mi = pwallet->mapAddressBook.find(address.Get());\n+    if (mi != pwallet->mapAddressBook.end()) {\n+        return AddressBookDataToJSON((*mi).second, true);\n+    }\n+    return NullUniValue;\n+}\n+\n+UniValue getaddressesbylabel(const JSONRPCRequest& request)\n+{\n+    CWallet * const pwallet = GetWalletForJSONRPCRequest(request);\n+    if (!EnsureWalletIsAvailable(pwallet, request.fHelp)) {\n+        return NullUniValue;\n+    }\n+\n+    if (request.fHelp || request.params.size() != 1)\n+        throw std::runtime_error(\n+            \"getaddressesbylabel \\\"label\\\"\\n\"\n+            \"\\nReturns the list of addresses assigned the specified label.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"label\\\"  (string, required) The label.\\n\"\n+            \"\\nResult:\\n\"\n+            \"{ (json object with addresses as keys)\\n\"\n+            \"  \\\"bitcoinaddress\\\": { (json object with information about address)\\n\"\n+            \"    \\\"purpose\\\": \\\"string\\\" (string)  Purpose of address (\\\"send\\\" for sending address, \\\"receive\\\" for receiving address)\\n\"\n+            \"  },...\\n\"\n+            \"}\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"getaddressesbylabel\", \"\\\"tabby\\\"\")\n+            + HelpExampleRpc(\"getaddressesbylabel\", \"\\\"tabby\\\"\")\n+        );\n+\n+    LOCK2(cs_main, pwallet->cs_wallet);\n+\n+    std::string strLabel = AccountFromValue(request.params[0]);\n+\n+    // Find all addresses that have the given label\n+    UniValue ret(UniValue::VOBJ);\n+    for (const std::pair<CBitcoinAddress, CAddressBookData>& item : pwallet->mapAddressBook) {\n+        if (item.second.name == strLabel) {\n+            ret.push_back(Pair(item.first.ToString(), AddressBookDataToJSON(item.second, false)));\n+        }\n+    }\n+    return ret;\n+}\n+\n+UniValue listlabels(const JSONRPCRequest& request)\n+{\n+    CWallet * const pwallet = GetWalletForJSONRPCRequest(request);\n+    if (!EnsureWalletIsAvailable(pwallet, request.fHelp)) {\n+        return NullUniValue;\n+    }\n+\n+    if (request.fHelp || request.params.size() > 1)\n+        throw std::runtime_error(\n+            \"listlabels ( \\\"purpose\\\" )\\n\"\n+            \"\\nReturns the list of all labels, or labels that are assigned to addresses with a specific purpose.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"purpose\\\"  (string, optional) Address purpose to list labels for ('send','receive'). An empty string is the same as not providing this argument.\\n\"\n+            \"\\nResult:\\n\"\n+            \"[                      (json array of string)\\n\"\n+            \"  \\\"label\\\",  (string) Label name\\n\"\n+            \"  ...\\n\"\n+            \"]\\n\"\n+            \"\\nExamples:\\n\"\n+            \"\\nList all labels\\n\"\n+            + HelpExampleCli(\"listlabels\", \"\") +\n+            \"\\nList labels that have receiving addresses\\n\"\n+            + HelpExampleCli(\"listlabels\", \"receive\") +\n+            \"\\nList labels that have sending addresses\\n\"\n+            + HelpExampleCli(\"listlabels\", \"send\") +\n+            \"\\nAs json rpc call\\n\"\n+            + HelpExampleRpc(\"listlabels\", \"receive\")\n+        );\n+\n+    LOCK2(cs_main, pwallet->cs_wallet);\n+\n+    std::string purpose;\n+    if (request.params.size() > 0) {\n+        purpose = request.params[0].get_str();\n+    }\n+\n+    std::set<std::string> setLabels;\n+    for (const std::pair<CTxDestination, CAddressBookData>& entry : pwallet->mapAddressBook) {\n+        if (purpose.empty() || entry.second.purpose == purpose){\n+            setLabels.insert(entry.second.name);\n+        }\n+    }\n+    UniValue ret(UniValue::VARR);\n+    for (const std::string &name : setLabels) {\n+        ret.push_back(name);\n+    }\n+\n+    return ret;\n+}\n+\n+UniValue setlabel(const JSONRPCRequest& request)\n+{\n+    CWallet * const pwallet = GetWalletForJSONRPCRequest(request);\n+    if (!EnsureWalletIsAvailable(pwallet, request.fHelp)) {\n+        return NullUniValue;\n+    }\n+\n+    if (request.fHelp || request.params.size() < 1 || request.params.size() > 2)\n+        throw std::runtime_error(\n+            \"setlabel \\\"bitcoinaddress\\\" \\\"label\\\"\\n\"\n+            \"\\nSets the label associated with the given address.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"bitcoinaddress\\\"  (string, required) The bitcoin address to be associated with an label.\\n\"\n+            \"2. \\\"label\\\"           (string, required) The label to assign to the address.\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"setlabel\", \"\\\"1D1ZrZNe3JUo7ZycKEYQQiQAWd9y54F4XZ\\\" \\\"tabby\\\"\")\n+            + HelpExampleRpc(\"setlabel\", \"\\\"1D1ZrZNe3JUo7ZycKEYQQiQAWd9y54F4XZ\\\", \\\"tabby\\\"\")\n+        );\n+\n+    LOCK2(cs_main, pwallet->cs_wallet);\n+\n+    CBitcoinAddress address(request.params[0].get_str());\n+    if (!address.IsValid()) {\n+        throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Invalid Bitcoin address\");\n+    }\n+\n+    std::string strLabel;\n+    if (request.params.size() > 1){",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7729#discussion_r122002514",
      "id" : 122002514,
      "original_commit_id" : "21a49c206f839984c9cab3e1dd67aea63f9c2a9c",
      "original_position" : 222,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : 222,
      "pull_request_review_id" : 44049432,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7729",
      "updated_at" : "2017-06-29T18:35:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/122002514",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7729#discussion_r122259021"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7729"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/122259021"
         }
      },
      "body" : "Note: This change makes calling setlabel on an address which already has the same label a no-op, see https://github.com/bitcoin/bitcoin/pull/7729#discussion_r92064042.",
      "commit_id" : "0e3ef241d18593a9f67d4e5f37c22008cd9dc6b7",
      "created_at" : "2017-06-15T17:12:29Z",
      "diff_hunk" : "@@ -3146,7 +3146,7 @@ UniValue setlabel(const JSONRPCRequest& request)\n         if (pwallet->mapAddressBook.count(address.Get()))\n         {\n             std::string strOldLabel = pwallet->mapAddressBook[address.Get()].name;\n-            if (address == GetAccountAddress(pwallet, strOldLabel)) {\n+            if (strOldLabel != strLabel && address == GetAccountAddress(pwallet, strOldLabel)) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7729#discussion_r122259021",
      "id" : 122259021,
      "original_commit_id" : "54a9b2d94a3ee59d60a10408d84276609ed5e661",
      "original_position" : 5,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 44358863,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7729",
      "updated_at" : "2017-06-29T18:35:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/122259021",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/7133040?v=3",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "body" : "So to summarize above discussion, the following changes should be made:\r\n- Add `listreceivedbylabel`, listing transactions to addresses that have a certain label\r\n- Remove the default label address. Discussion confirms my intuition that it's better to get rid of this. \r\n  - 'acc' database entries, as well as CAccount, would not be necessary for labels. After this change, labels have no metadata, so a lot of code can be simplified.\r\n- `setlabel` on an address that already has the same label should be a no-op\r\n- Documentation changes / nits\r\n\r\n>  RPC which upgrades the wallet to a new version, and on the new version, hide the account RPCs. The enablelabels RPC should describe the implications of moving from accounts to labels. I think this requires a bit more thought and discussion.\r\n\r\nAgree re: versioning. We already have a command line argument to upgrade the wallet version, `-upgradewallet`. Wouldn't that be enough?\r\nEither label or account RPCs could be usable based on the wallet version.\r\nI don't see why a RPC to do the upgrade would be preferable, it's something that will be done at most once.\r\n",
      "created_at" : "2017-06-25T11:18:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7729#issuecomment-310896931",
      "id" : 310896931,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7729",
      "updated_at" : "2017-06-25T11:18:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/310896931",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7729#discussion_r126163817"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7729"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/126163817"
         }
      },
      "body" : "Nit, rename `ddata` to `dest_data`.",
      "commit_id" : "0e3ef241d18593a9f67d4e5f37c22008cd9dc6b7",
      "created_at" : "2017-07-07T14:42:15Z",
      "diff_hunk" : "@@ -2922,6 +2927,236 @@ UniValue bumpfee(const JSONRPCRequest& request)\n     return result;\n }\n \n+UniValue getlabeladdress(const JSONRPCRequest& request)\n+{\n+    CWallet * const pwallet = GetWalletForJSONRPCRequest(request);\n+    if (!EnsureWalletIsAvailable(pwallet, request.fHelp)) {\n+        return NullUniValue;\n+    }\n+\n+    if (request.fHelp || request.params.size() != 1)\n+        throw std::runtime_error(\n+            \"getlabeladdress \\\"label\\\"\\n\"\n+            \"\\nReturns the current 'label address' for this label.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"label\\\"       (string, required) The label for the address. It can also be set to the empty string \\\"\\\" to represent the default label.\\n\"\n+            \"\\nResult:\\n\"\n+            \"\\\"bitcoinaddress\\\"   (string) The 'label address' for the label\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"getlabeladdress\", \"\")\n+            + HelpExampleCli(\"getlabeladdress\", \"\\\"\\\"\")\n+            + HelpExampleCli(\"getlabeladdress\", \"\\\"mylabel\\\"\")\n+            + HelpExampleRpc(\"getlabeladdress\", \"\\\"mylabel\\\"\")\n+        );\n+\n+    LOCK2(cs_main, pwallet->cs_wallet);\n+\n+    // Parse the label first so we don't generate a key if there's an error\n+    std::string strLabel = AccountFromValue(request.params[0]);\n+\n+    UniValue ret(UniValue::VSTR);\n+\n+    ret = GetAccountAddress(pwallet, strLabel).ToString();\n+    return ret;\n+}\n+\n+/** Convert CAddressBookData to JSON record.\n+ * The verbosity of the output is configurable based on the command.\n+ */\n+static UniValue AddressBookDataToJSON(const CAddressBookData& data, bool verbose)\n+{\n+    UniValue ret(UniValue::VOBJ);\n+    if (verbose) {\n+        ret.push_back(Pair(\"name\", data.name));\n+    }\n+    ret.push_back(Pair(\"purpose\", data.purpose));\n+    if (verbose) {\n+        UniValue ddata(UniValue::VOBJ);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7729#discussion_r126163817",
      "id" : 126163817,
      "original_commit_id" : "0e3ef241d18593a9f67d4e5f37c22008cd9dc6b7",
      "original_position" : 60,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : 60,
      "pull_request_review_id" : 48625551,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7729",
      "updated_at" : "2017-07-07T15:01:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/126163817",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/3534524?v=3",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7729#discussion_r126164658"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7729"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/126164658"
         }
      },
      "body" : "Nit, shouldn't we follow the convention in new code in favor of consistency? In that case rename `strAccount` to `account_name` for instance?",
      "commit_id" : "0e3ef241d18593a9f67d4e5f37c22008cd9dc6b7",
      "created_at" : "2017-07-07T14:45:19Z",
      "diff_hunk" : "@@ -152,6 +152,11 @@ UniValue getnewaddress(const JSONRPCRequest& request)\n     return CBitcoinAddress(keyID).ToString();\n }\n \n+void DeleteAccount(CWallet * const pwallet, std::string strAccount)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7729#discussion_r126164658",
      "id" : 126164658,
      "original_commit_id" : "0e3ef241d18593a9f67d4e5f37c22008cd9dc6b7",
      "original_position" : 4,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : 4,
      "pull_request_review_id" : 48625551,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7729",
      "updated_at" : "2017-07-07T15:01:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/126164658",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/3534524?v=3",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7729#discussion_r126165814"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7729"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/126165814"
         }
      },
      "body" : "Agree with @jnewbery, empty value should be an error then.",
      "commit_id" : "0e3ef241d18593a9f67d4e5f37c22008cd9dc6b7",
      "created_at" : "2017-07-07T14:49:50Z",
      "diff_hunk" : "@@ -2923,6 +2928,236 @@ UniValue bumpfee(const JSONRPCRequest& request)\n     return result;\n }\n \n+UniValue getlabeladdress(const JSONRPCRequest& request)\n+{\n+    CWallet * const pwallet = GetWalletForJSONRPCRequest(request);\n+    if (!EnsureWalletIsAvailable(pwallet, request.fHelp)) {\n+        return NullUniValue;\n+    }\n+\n+    if (request.fHelp || request.params.size() != 1)\n+        throw std::runtime_error(\n+            \"getlabeladdress \\\"label\\\"\\n\"\n+            \"\\nReturns the current 'label address' for this label.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"label\\\"       (string, required) The label for the address. It can also be set to the empty string \\\"\\\" to represent the default label.\\n\"\n+            \"\\nResult:\\n\"\n+            \"\\\"bitcoinaddress\\\"   (string) The 'label address' for the label\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"getlabeladdress\", \"\")\n+            + HelpExampleCli(\"getlabeladdress\", \"\\\"\\\"\")\n+            + HelpExampleCli(\"getlabeladdress\", \"\\\"mylabel\\\"\")\n+            + HelpExampleRpc(\"getlabeladdress\", \"\\\"mylabel\\\"\")\n+        );\n+\n+    LOCK2(cs_main, pwallet->cs_wallet);\n+\n+    // Parse the label first so we don't generate a key if there's an error\n+    std::string strLabel = AccountFromValue(request.params[0]);\n+\n+    UniValue ret(UniValue::VSTR);\n+\n+    ret = GetAccountAddress(pwallet, strLabel).ToString();\n+    return ret;\n+}\n+\n+/** Convert CAddressBookData to JSON record.\n+ * The verbosity of the output is configurable based on the command.\n+ */\n+static UniValue AddressBookDataToJSON(const CAddressBookData& data, bool verbose)\n+{\n+    UniValue ret(UniValue::VOBJ);\n+    if (verbose) {\n+        ret.push_back(Pair(\"name\", data.name));\n+    }\n+    ret.push_back(Pair(\"purpose\", data.purpose));\n+    if (verbose) {\n+        UniValue ddata(UniValue::VOBJ);\n+        for (const std::pair<std::string, std::string>& item : data.destdata) {\n+            ddata.push_back(Pair(item.first, item.second));\n+        }\n+        ret.push_back(Pair(\"destdata\", ddata));\n+    }\n+    return ret;\n+}\n+\n+UniValue getlabel(const JSONRPCRequest& request)\n+{\n+    CWallet * const pwallet = GetWalletForJSONRPCRequest(request);\n+    if (!EnsureWalletIsAvailable(pwallet, request.fHelp)) {\n+        return NullUniValue;\n+    }\n+\n+    if (request.fHelp || request.params.size() != 1)\n+        throw std::runtime_error(\n+            \"getlabel \\\"bitcoinaddress\\\"\\n\"\n+            \"\\nReturns the label associated with the given address.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"bitcoinaddress\\\"  (string, required) The bitcoin address for label lookup.\\n\"\n+            \"\\nResult:\\n\"\n+            \"  { (json object with information about address)\\n\"\n+            \"    \\\"name\\\": \\\"labelname\\\" (string) The label\\n\"\n+            \"    \\\"purpose\\\": \\\"string\\\" (string) Purpose of address (\\\"send\\\" for sending address, \\\"receive\\\" for receiving address)\\n\"\n+            \"  },...\\n\"\n+            \"  Result is null if there is no record for this address.\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"getlabel\", \"\\\"1D1ZrZNe3JUo7ZycKEYQQiQAWd9y54F4XZ\\\"\")\n+            + HelpExampleRpc(\"getlabel\", \"\\\"1D1ZrZNe3JUo7ZycKEYQQiQAWd9y54F4XZ\\\"\")\n+        );\n+\n+    LOCK2(cs_main, pwallet->cs_wallet);\n+\n+    CBitcoinAddress address(request.params[0].get_str());\n+    if (!address.IsValid()) {\n+        throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Invalid Bitcoin address\");\n+    }\n+\n+    std::map<CTxDestination, CAddressBookData>::iterator mi = pwallet->mapAddressBook.find(address.Get());\n+    if (mi != pwallet->mapAddressBook.end()) {\n+        return AddressBookDataToJSON((*mi).second, true);\n+    }\n+    return NullUniValue;\n+}\n+\n+UniValue getaddressesbylabel(const JSONRPCRequest& request)\n+{\n+    CWallet * const pwallet = GetWalletForJSONRPCRequest(request);\n+    if (!EnsureWalletIsAvailable(pwallet, request.fHelp)) {\n+        return NullUniValue;\n+    }\n+\n+    if (request.fHelp || request.params.size() != 1)\n+        throw std::runtime_error(\n+            \"getaddressesbylabel \\\"label\\\"\\n\"\n+            \"\\nReturns the list of addresses assigned the specified label.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"label\\\"  (string, required) The label.\\n\"\n+            \"\\nResult:\\n\"\n+            \"{ (json object with addresses as keys)\\n\"\n+            \"  \\\"bitcoinaddress\\\": { (json object with information about address)\\n\"\n+            \"    \\\"purpose\\\": \\\"string\\\" (string)  Purpose of address (\\\"send\\\" for sending address, \\\"receive\\\" for receiving address)\\n\"\n+            \"  },...\\n\"\n+            \"}\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"getaddressesbylabel\", \"\\\"tabby\\\"\")\n+            + HelpExampleRpc(\"getaddressesbylabel\", \"\\\"tabby\\\"\")\n+        );\n+\n+    LOCK2(cs_main, pwallet->cs_wallet);\n+\n+    std::string strLabel = AccountFromValue(request.params[0]);\n+\n+    // Find all addresses that have the given label\n+    UniValue ret(UniValue::VOBJ);\n+    for (const std::pair<CBitcoinAddress, CAddressBookData>& item : pwallet->mapAddressBook) {\n+        if (item.second.name == strLabel) {\n+            ret.push_back(Pair(item.first.ToString(), AddressBookDataToJSON(item.second, false)));\n+        }\n+    }\n+    return ret;\n+}\n+\n+UniValue listlabels(const JSONRPCRequest& request)\n+{\n+    CWallet * const pwallet = GetWalletForJSONRPCRequest(request);\n+    if (!EnsureWalletIsAvailable(pwallet, request.fHelp)) {\n+        return NullUniValue;\n+    }\n+\n+    if (request.fHelp || request.params.size() > 1)\n+        throw std::runtime_error(\n+            \"listlabels ( \\\"purpose\\\" )\\n\"\n+            \"\\nReturns the list of all labels, or labels that are assigned to addresses with a specific purpose.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"purpose\\\"  (string, optional) Address purpose to list labels for ('send','receive'). An empty string is the same as not providing this argument.\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7729#discussion_r126165814",
      "id" : 126165814,
      "original_commit_id" : "21a49c206f839984c9cab3e1dd67aea63f9c2a9c",
      "original_position" : 157,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : 157,
      "pull_request_review_id" : 48625551,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7729",
      "updated_at" : "2017-07-07T15:01:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/126165814",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/3534524?v=3",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7729#discussion_r126167993"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7729"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/126167993"
         }
      },
      "body" : "BTW, why is this argument needed? I mean, the client can filter the result. IMO pagination is more interesting.",
      "commit_id" : "0e3ef241d18593a9f67d4e5f37c22008cd9dc6b7",
      "created_at" : "2017-07-07T14:58:14Z",
      "diff_hunk" : "@@ -2923,6 +2928,236 @@ UniValue bumpfee(const JSONRPCRequest& request)\n     return result;\n }\n \n+UniValue getlabeladdress(const JSONRPCRequest& request)\n+{\n+    CWallet * const pwallet = GetWalletForJSONRPCRequest(request);\n+    if (!EnsureWalletIsAvailable(pwallet, request.fHelp)) {\n+        return NullUniValue;\n+    }\n+\n+    if (request.fHelp || request.params.size() != 1)\n+        throw std::runtime_error(\n+            \"getlabeladdress \\\"label\\\"\\n\"\n+            \"\\nReturns the current 'label address' for this label.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"label\\\"       (string, required) The label for the address. It can also be set to the empty string \\\"\\\" to represent the default label.\\n\"\n+            \"\\nResult:\\n\"\n+            \"\\\"bitcoinaddress\\\"   (string) The 'label address' for the label\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"getlabeladdress\", \"\")\n+            + HelpExampleCli(\"getlabeladdress\", \"\\\"\\\"\")\n+            + HelpExampleCli(\"getlabeladdress\", \"\\\"mylabel\\\"\")\n+            + HelpExampleRpc(\"getlabeladdress\", \"\\\"mylabel\\\"\")\n+        );\n+\n+    LOCK2(cs_main, pwallet->cs_wallet);\n+\n+    // Parse the label first so we don't generate a key if there's an error\n+    std::string strLabel = AccountFromValue(request.params[0]);\n+\n+    UniValue ret(UniValue::VSTR);\n+\n+    ret = GetAccountAddress(pwallet, strLabel).ToString();\n+    return ret;\n+}\n+\n+/** Convert CAddressBookData to JSON record.\n+ * The verbosity of the output is configurable based on the command.\n+ */\n+static UniValue AddressBookDataToJSON(const CAddressBookData& data, bool verbose)\n+{\n+    UniValue ret(UniValue::VOBJ);\n+    if (verbose) {\n+        ret.push_back(Pair(\"name\", data.name));\n+    }\n+    ret.push_back(Pair(\"purpose\", data.purpose));\n+    if (verbose) {\n+        UniValue ddata(UniValue::VOBJ);\n+        for (const std::pair<std::string, std::string>& item : data.destdata) {\n+            ddata.push_back(Pair(item.first, item.second));\n+        }\n+        ret.push_back(Pair(\"destdata\", ddata));\n+    }\n+    return ret;\n+}\n+\n+UniValue getlabel(const JSONRPCRequest& request)\n+{\n+    CWallet * const pwallet = GetWalletForJSONRPCRequest(request);\n+    if (!EnsureWalletIsAvailable(pwallet, request.fHelp)) {\n+        return NullUniValue;\n+    }\n+\n+    if (request.fHelp || request.params.size() != 1)\n+        throw std::runtime_error(\n+            \"getlabel \\\"bitcoinaddress\\\"\\n\"\n+            \"\\nReturns the label associated with the given address.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"bitcoinaddress\\\"  (string, required) The bitcoin address for label lookup.\\n\"\n+            \"\\nResult:\\n\"\n+            \"  { (json object with information about address)\\n\"\n+            \"    \\\"name\\\": \\\"labelname\\\" (string) The label\\n\"\n+            \"    \\\"purpose\\\": \\\"string\\\" (string) Purpose of address (\\\"send\\\" for sending address, \\\"receive\\\" for receiving address)\\n\"\n+            \"  },...\\n\"\n+            \"  Result is null if there is no record for this address.\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"getlabel\", \"\\\"1D1ZrZNe3JUo7ZycKEYQQiQAWd9y54F4XZ\\\"\")\n+            + HelpExampleRpc(\"getlabel\", \"\\\"1D1ZrZNe3JUo7ZycKEYQQiQAWd9y54F4XZ\\\"\")\n+        );\n+\n+    LOCK2(cs_main, pwallet->cs_wallet);\n+\n+    CBitcoinAddress address(request.params[0].get_str());\n+    if (!address.IsValid()) {\n+        throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Invalid Bitcoin address\");\n+    }\n+\n+    std::map<CTxDestination, CAddressBookData>::iterator mi = pwallet->mapAddressBook.find(address.Get());\n+    if (mi != pwallet->mapAddressBook.end()) {\n+        return AddressBookDataToJSON((*mi).second, true);\n+    }\n+    return NullUniValue;\n+}\n+\n+UniValue getaddressesbylabel(const JSONRPCRequest& request)\n+{\n+    CWallet * const pwallet = GetWalletForJSONRPCRequest(request);\n+    if (!EnsureWalletIsAvailable(pwallet, request.fHelp)) {\n+        return NullUniValue;\n+    }\n+\n+    if (request.fHelp || request.params.size() != 1)\n+        throw std::runtime_error(\n+            \"getaddressesbylabel \\\"label\\\"\\n\"\n+            \"\\nReturns the list of addresses assigned the specified label.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"label\\\"  (string, required) The label.\\n\"\n+            \"\\nResult:\\n\"\n+            \"{ (json object with addresses as keys)\\n\"\n+            \"  \\\"bitcoinaddress\\\": { (json object with information about address)\\n\"\n+            \"    \\\"purpose\\\": \\\"string\\\" (string)  Purpose of address (\\\"send\\\" for sending address, \\\"receive\\\" for receiving address)\\n\"\n+            \"  },...\\n\"\n+            \"}\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"getaddressesbylabel\", \"\\\"tabby\\\"\")\n+            + HelpExampleRpc(\"getaddressesbylabel\", \"\\\"tabby\\\"\")\n+        );\n+\n+    LOCK2(cs_main, pwallet->cs_wallet);\n+\n+    std::string strLabel = AccountFromValue(request.params[0]);\n+\n+    // Find all addresses that have the given label\n+    UniValue ret(UniValue::VOBJ);\n+    for (const std::pair<CBitcoinAddress, CAddressBookData>& item : pwallet->mapAddressBook) {\n+        if (item.second.name == strLabel) {\n+            ret.push_back(Pair(item.first.ToString(), AddressBookDataToJSON(item.second, false)));\n+        }\n+    }\n+    return ret;\n+}\n+\n+UniValue listlabels(const JSONRPCRequest& request)\n+{\n+    CWallet * const pwallet = GetWalletForJSONRPCRequest(request);\n+    if (!EnsureWalletIsAvailable(pwallet, request.fHelp)) {\n+        return NullUniValue;\n+    }\n+\n+    if (request.fHelp || request.params.size() > 1)\n+        throw std::runtime_error(\n+            \"listlabels ( \\\"purpose\\\" )\\n\"\n+            \"\\nReturns the list of all labels, or labels that are assigned to addresses with a specific purpose.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"purpose\\\"  (string, optional) Address purpose to list labels for ('send','receive'). An empty string is the same as not providing this argument.\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7729#discussion_r126167993",
      "id" : 126167993,
      "original_commit_id" : "21a49c206f839984c9cab3e1dd67aea63f9c2a9c",
      "original_position" : 157,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : 157,
      "pull_request_review_id" : 48625551,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7729",
      "updated_at" : "2017-07-07T15:01:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/126167993",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/3534524?v=3",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "body" : "> We already have a command line argument to upgrade the wallet version, -upgradewallet. Wouldn't that be enough\r\n\r\nACK - yes this is enough.\r\n\r\nThe wallet startup command line arguments always seemed strange to me, and if we were building this from scratch we might implement upgradewallet as an RPC or an external tool. However, it makes sense to use the existing infrastructure.\r\n\r\n> Either label or account RPCs could be usable based on the wallet version.\r\n\r\nÃ¢ÂÂ sounds good to me.\r\n\r\nTwo additional points:\r\n\r\n1. Obviously documentation is key here. The wallet upgrade will effectively remove the accounts from the wallet, so we need to make sure users understand the implication before upgrading.\r\n2. When will we be able to remove the account code entirely? At that point will bitcoind no longer support wallets older than the new version? Is there precedence for how we deprecate wallet features like this?\r\n\r\n> Is this going forward?\r\n\r\nIt feels like we've missed the boat for 0.15. @laanwj - it'd be great to get this in early in the next cycle. I'll have some spare time in the next few weeks. Let me know if there's anything I can do to help here. I'm happy to help write and test the upgrade code.",
      "created_at" : "2017-07-07T15:52:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7729#issuecomment-313720486",
      "id" : 313720486,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7729",
      "updated_at" : "2017-07-07T15:52:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/313720486",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "body" : "@laanwj `importaddress`, `importpubkey` and `importprivkey` have \"label\" arguments that currently set the account for an address. (To delete the old account for an address and create a new one, it's enough to just re-import the address.)  Won't these calls need to be updated as well? I don't see them in your patch.",
      "created_at" : "2017-07-23T11:27:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7729#issuecomment-317246483",
      "id" : 317246483,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7729",
      "updated_at" : "2017-07-25T10:46:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/317246483",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/6071028?v=4",
         "events_url" : "https://api.github.com/users/mmgen/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mmgen/followers",
         "following_url" : "https://api.github.com/users/mmgen/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mmgen/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mmgen",
         "id" : 6071028,
         "login" : "mmgen",
         "organizations_url" : "https://api.github.com/users/mmgen/orgs",
         "received_events_url" : "https://api.github.com/users/mmgen/received_events",
         "repos_url" : "https://api.github.com/users/mmgen/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mmgen/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mmgen/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mmgen"
      }
   },
   {
      "body" : "@jnewbery Since I got no reponse from @laanwj, I'll refer you to my above comment. The behavior I mentioned can be easily demonstrated with the following:\r\n\r\n\t$ bitcoin-cli importaddress n2FgXPKwuFkCXF946EnoxWJDWF2VwQ6q8J 'Label 1'\r\n\t$ bitcoin-cli listaccounts 0 true | grep 'Label 1'\r\n\t \"Label 1\": 0.00000000,\r\n\t$ bitcoin-cli importaddress n2FgXPKwuFkCXF946EnoxWJDWF2VwQ6q8J 'Label 2'\r\n\t$ bitcoin-cli listaccounts 0 true | grep 'Label 1'\r\n\t$ bitcoin-cli listaccounts 0 true | grep 'Label 2'\r\n\t \"Label 2\": 0.00000000,\r\n",
      "created_at" : "2017-07-29T09:39:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7729#issuecomment-318817191",
      "id" : 318817191,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7729",
      "updated_at" : "2017-07-29T09:41:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/318817191",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/6071028?v=4",
         "events_url" : "https://api.github.com/users/mmgen/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mmgen/followers",
         "following_url" : "https://api.github.com/users/mmgen/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mmgen/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mmgen",
         "id" : 6071028,
         "login" : "mmgen",
         "organizations_url" : "https://api.github.com/users/mmgen/orgs",
         "received_events_url" : "https://api.github.com/users/mmgen/received_events",
         "repos_url" : "https://api.github.com/users/mmgen/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mmgen/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mmgen/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mmgen"
      }
   },
   {
      "body" : "@mmgen : @laanwj is very busy with the 0.15 release right now, so I'm not surprised he hasn't updated this PR. I'm planning on picking this up early in 0.16 and I'll review your comments then. Any help with review/testing then will be very much appreciated!",
      "created_at" : "2017-07-30T02:39:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7729#issuecomment-318873687",
      "id" : 318873687,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7729",
      "updated_at" : "2017-07-30T02:39:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/318873687",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "body" : "@jnewbery Thanks! Will be ready to help when needed.",
      "created_at" : "2017-07-30T10:59:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7729#issuecomment-318894146",
      "id" : 318894146,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7729",
      "updated_at" : "2017-07-30T10:59:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/318894146",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/6071028?v=4",
         "events_url" : "https://api.github.com/users/mmgen/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mmgen/followers",
         "following_url" : "https://api.github.com/users/mmgen/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mmgen/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mmgen",
         "id" : 6071028,
         "login" : "mmgen",
         "organizations_url" : "https://api.github.com/users/mmgen/orgs",
         "received_events_url" : "https://api.github.com/users/mmgen/received_events",
         "repos_url" : "https://api.github.com/users/mmgen/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mmgen/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mmgen/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mmgen"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK, needs rebase.\r\n\r\nMaybe this and #11497 should be done together?\r\n\r\nEarlier in this thread, it was suggested that the version number be bumped to distinguish between whether to use accounts or wallets. Because of the HD wallets thing with the optional features in the version number, would we want to bump the version number (which would then mean only HD wallets can use labels) or do something else?",
      "created_at" : "2017-10-14T19:12:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7729#issuecomment-336660069",
      "id" : 336660069,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7729",
      "updated_at" : "2017-10-14T19:12:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/336660069",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Should probably just drop the version number idea now that we have the `-deprecatedrpc` mechanism. Seems like adding versioning to the decision of which rpcs to enable would make the transition more complicated without providing a clear benefit.",
      "created_at" : "2017-10-16T14:51:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7729#issuecomment-336911546",
      "id" : 336911546,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7729",
      "updated_at" : "2017-10-16T14:51:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/336911546",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7729#discussion_r145885606"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7729"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/145885606"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Is there any difference between setting an empty label vs deleting the label?",
      "commit_id" : "0e3ef241d18593a9f67d4e5f37c22008cd9dc6b7",
      "created_at" : "2017-10-20T06:19:21Z",
      "diff_hunk" : "@@ -2923,6 +2928,236 @@ UniValue bumpfee(const JSONRPCRequest& request)\n     return result;\n }\n \n+UniValue getlabeladdress(const JSONRPCRequest& request)\n+{\n+    CWallet * const pwallet = GetWalletForJSONRPCRequest(request);\n+    if (!EnsureWalletIsAvailable(pwallet, request.fHelp)) {\n+        return NullUniValue;\n+    }\n+\n+    if (request.fHelp || request.params.size() != 1)\n+        throw std::runtime_error(\n+            \"getlabeladdress \\\"label\\\"\\n\"\n+            \"\\nReturns the current 'label address' for this label.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"label\\\"       (string, required) The label for the address. It can also be set to the empty string \\\"\\\" to represent the default label.\\n\"\n+            \"\\nResult:\\n\"\n+            \"\\\"bitcoinaddress\\\"   (string) The 'label address' for the label\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"getlabeladdress\", \"\")\n+            + HelpExampleCli(\"getlabeladdress\", \"\\\"\\\"\")\n+            + HelpExampleCli(\"getlabeladdress\", \"\\\"mylabel\\\"\")\n+            + HelpExampleRpc(\"getlabeladdress\", \"\\\"mylabel\\\"\")\n+        );\n+\n+    LOCK2(cs_main, pwallet->cs_wallet);\n+\n+    // Parse the label first so we don't generate a key if there's an error\n+    std::string strLabel = AccountFromValue(request.params[0]);\n+\n+    UniValue ret(UniValue::VSTR);\n+\n+    ret = GetAccountAddress(pwallet, strLabel).ToString();\n+    return ret;\n+}\n+\n+/** Convert CAddressBookData to JSON record.\n+ * The verbosity of the output is configurable based on the command.\n+ */\n+static UniValue AddressBookDataToJSON(const CAddressBookData& data, bool verbose)\n+{\n+    UniValue ret(UniValue::VOBJ);\n+    if (verbose) {\n+        ret.push_back(Pair(\"name\", data.name));\n+    }\n+    ret.push_back(Pair(\"purpose\", data.purpose));\n+    if (verbose) {\n+        UniValue ddata(UniValue::VOBJ);\n+        for (const std::pair<std::string, std::string>& item : data.destdata) {\n+            ddata.push_back(Pair(item.first, item.second));\n+        }\n+        ret.push_back(Pair(\"destdata\", ddata));\n+    }\n+    return ret;\n+}\n+\n+UniValue getlabel(const JSONRPCRequest& request)\n+{\n+    CWallet * const pwallet = GetWalletForJSONRPCRequest(request);\n+    if (!EnsureWalletIsAvailable(pwallet, request.fHelp)) {\n+        return NullUniValue;\n+    }\n+\n+    if (request.fHelp || request.params.size() != 1)\n+        throw std::runtime_error(\n+            \"getlabel \\\"bitcoinaddress\\\"\\n\"\n+            \"\\nReturns the label associated with the given address.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"bitcoinaddress\\\"  (string, required) The bitcoin address for label lookup.\\n\"\n+            \"\\nResult:\\n\"\n+            \"  { (json object with information about address)\\n\"\n+            \"    \\\"name\\\": \\\"labelname\\\" (string) The label\\n\"\n+            \"    \\\"purpose\\\": \\\"string\\\" (string) Purpose of address (\\\"send\\\" for sending address, \\\"receive\\\" for receiving address)\\n\"\n+            \"  },...\\n\"\n+            \"  Result is null if there is no record for this address.\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"getlabel\", \"\\\"1D1ZrZNe3JUo7ZycKEYQQiQAWd9y54F4XZ\\\"\")\n+            + HelpExampleRpc(\"getlabel\", \"\\\"1D1ZrZNe3JUo7ZycKEYQQiQAWd9y54F4XZ\\\"\")\n+        );\n+\n+    LOCK2(cs_main, pwallet->cs_wallet);\n+\n+    CBitcoinAddress address(request.params[0].get_str());\n+    if (!address.IsValid()) {\n+        throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Invalid Bitcoin address\");\n+    }\n+\n+    std::map<CTxDestination, CAddressBookData>::iterator mi = pwallet->mapAddressBook.find(address.Get());\n+    if (mi != pwallet->mapAddressBook.end()) {\n+        return AddressBookDataToJSON((*mi).second, true);\n+    }\n+    return NullUniValue;\n+}\n+\n+UniValue getaddressesbylabel(const JSONRPCRequest& request)\n+{\n+    CWallet * const pwallet = GetWalletForJSONRPCRequest(request);\n+    if (!EnsureWalletIsAvailable(pwallet, request.fHelp)) {\n+        return NullUniValue;\n+    }\n+\n+    if (request.fHelp || request.params.size() != 1)\n+        throw std::runtime_error(\n+            \"getaddressesbylabel \\\"label\\\"\\n\"\n+            \"\\nReturns the list of addresses assigned the specified label.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"label\\\"  (string, required) The label.\\n\"\n+            \"\\nResult:\\n\"\n+            \"{ (json object with addresses as keys)\\n\"\n+            \"  \\\"bitcoinaddress\\\": { (json object with information about address)\\n\"\n+            \"    \\\"purpose\\\": \\\"string\\\" (string)  Purpose of address (\\\"send\\\" for sending address, \\\"receive\\\" for receiving address)\\n\"\n+            \"  },...\\n\"\n+            \"}\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"getaddressesbylabel\", \"\\\"tabby\\\"\")\n+            + HelpExampleRpc(\"getaddressesbylabel\", \"\\\"tabby\\\"\")\n+        );\n+\n+    LOCK2(cs_main, pwallet->cs_wallet);\n+\n+    std::string strLabel = AccountFromValue(request.params[0]);\n+\n+    // Find all addresses that have the given label\n+    UniValue ret(UniValue::VOBJ);\n+    for (const std::pair<CBitcoinAddress, CAddressBookData>& item : pwallet->mapAddressBook) {\n+        if (item.second.name == strLabel) {\n+            ret.push_back(Pair(item.first.ToString(), AddressBookDataToJSON(item.second, false)));\n+        }\n+    }\n+    return ret;\n+}\n+\n+UniValue listlabels(const JSONRPCRequest& request)\n+{\n+    CWallet * const pwallet = GetWalletForJSONRPCRequest(request);\n+    if (!EnsureWalletIsAvailable(pwallet, request.fHelp)) {\n+        return NullUniValue;\n+    }\n+\n+    if (request.fHelp || request.params.size() > 1)\n+        throw std::runtime_error(\n+            \"listlabels ( \\\"purpose\\\" )\\n\"\n+            \"\\nReturns the list of all labels, or labels that are assigned to addresses with a specific purpose.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"purpose\\\"  (string, optional) Address purpose to list labels for ('send','receive'). An empty string is the same as not providing this argument.\\n\"\n+            \"\\nResult:\\n\"\n+            \"[                      (json array of string)\\n\"\n+            \"  \\\"label\\\",  (string) Label name\\n\"\n+            \"  ...\\n\"\n+            \"]\\n\"\n+            \"\\nExamples:\\n\"\n+            \"\\nList all labels\\n\"\n+            + HelpExampleCli(\"listlabels\", \"\") +\n+            \"\\nList labels that have receiving addresses\\n\"\n+            + HelpExampleCli(\"listlabels\", \"receive\") +\n+            \"\\nList labels that have sending addresses\\n\"\n+            + HelpExampleCli(\"listlabels\", \"send\") +\n+            \"\\nAs json rpc call\\n\"\n+            + HelpExampleRpc(\"listlabels\", \"receive\")\n+        );\n+\n+    LOCK2(cs_main, pwallet->cs_wallet);\n+\n+    std::string purpose;\n+    if (request.params.size() > 0) {\n+        purpose = request.params[0].get_str();\n+    }\n+\n+    std::set<std::string> setLabels;\n+    for (const std::pair<CTxDestination, CAddressBookData>& entry : pwallet->mapAddressBook) {\n+        if (purpose.empty() || entry.second.purpose == purpose){\n+            setLabels.insert(entry.second.name);\n+        }\n+    }\n+    UniValue ret(UniValue::VARR);\n+    for (const std::string &name : setLabels) {\n+        ret.push_back(name);\n+    }\n+\n+    return ret;\n+}\n+\n+UniValue setlabel(const JSONRPCRequest& request)\n+{\n+    CWallet * const pwallet = GetWalletForJSONRPCRequest(request);\n+    if (!EnsureWalletIsAvailable(pwallet, request.fHelp)) {\n+        return NullUniValue;\n+    }\n+\n+    if (request.fHelp || request.params.size() < 1 || request.params.size() > 2)\n+        throw std::runtime_error(\n+            \"setlabel \\\"bitcoinaddress\\\" \\\"label\\\"\\n\"\n+            \"\\nSets the label associated with the given address.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"bitcoinaddress\\\"  (string, required) The bitcoin address to be associated with an label.\\n\"\n+            \"2. \\\"label\\\"           (string, required) The label to assign to the address.\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"setlabel\", \"\\\"1D1ZrZNe3JUo7ZycKEYQQiQAWd9y54F4XZ\\\" \\\"tabby\\\"\")\n+            + HelpExampleRpc(\"setlabel\", \"\\\"1D1ZrZNe3JUo7ZycKEYQQiQAWd9y54F4XZ\\\", \\\"tabby\\\"\")\n+        );\n+\n+    LOCK2(cs_main, pwallet->cs_wallet);\n+\n+    CBitcoinAddress address(request.params[0].get_str());\n+    if (!address.IsValid()) {\n+        throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Invalid Bitcoin address\");\n+    }\n+\n+    std::string strLabel;\n+    if (request.params.size() > 1){",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7729#discussion_r145885606",
      "id" : 145885606,
      "in_reply_to_id" : 122002514,
      "original_commit_id" : "21a49c206f839984c9cab3e1dd67aea63f9c2a9c",
      "original_position" : 222,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : 222,
      "pull_request_review_id" : 70751893,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7729",
      "updated_at" : "2017-10-20T06:19:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/145885606",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/3211283?v=4",
         "events_url" : "https://api.github.com/users/MeshCollider/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MeshCollider/followers",
         "following_url" : "https://api.github.com/users/MeshCollider/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MeshCollider/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MeshCollider",
         "id" : 3211283,
         "login" : "MeshCollider",
         "organizations_url" : "https://api.github.com/users/MeshCollider/orgs",
         "received_events_url" : "https://api.github.com/users/MeshCollider/received_events",
         "repos_url" : "https://api.github.com/users/MeshCollider/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MeshCollider/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MeshCollider/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MeshCollider"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I've rebased this on current master here, as well as fixed a few of the nits above: https://github.com/MeshCollider/bitcoin/tree/201710_labels_rebased\r\nFeel free to use that if it helps, and squash my commits into yours if needed :)\r\n\r\nStill to-do summary from comments:\r\n- Remove `getlabeladdress` RPC\r\n- Add `listreceivedbylabel` RPC\r\n- Incorporate #11497 to disable accounts at the same time (including renaming of `account` params to `label`)",
      "created_at" : "2017-10-20T09:12:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7729#issuecomment-338151842",
      "id" : 338151842,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7729",
      "updated_at" : "2017-10-20T09:17:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/338151842",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/3211283?v=4",
         "events_url" : "https://api.github.com/users/MeshCollider/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MeshCollider/followers",
         "following_url" : "https://api.github.com/users/MeshCollider/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MeshCollider/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MeshCollider",
         "id" : 3211283,
         "login" : "MeshCollider",
         "organizations_url" : "https://api.github.com/users/MeshCollider/orgs",
         "received_events_url" : "https://api.github.com/users/MeshCollider/received_events",
         "repos_url" : "https://api.github.com/users/MeshCollider/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MeshCollider/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MeshCollider/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MeshCollider"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "`importaddress`, `importpubkey` and `importprivkey` have 'label' arguments (see my note above) that currently set the account for the address. After the label API is introduced, will these now set the label, or the account? Since both APIs will continue to exist side-by-side for a time, this could be a source of potential confusion for users. My wallet uses `importaddress` to set the account, which I use as an alias for a given address.",
      "created_at" : "2017-10-20T10:07:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7729#issuecomment-338164777",
      "id" : 338164777,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7729",
      "updated_at" : "2017-10-20T10:07:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/338164777",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/6071028?v=4",
         "events_url" : "https://api.github.com/users/mmgen/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mmgen/followers",
         "following_url" : "https://api.github.com/users/mmgen/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mmgen/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mmgen",
         "id" : 6071028,
         "login" : "mmgen",
         "organizations_url" : "https://api.github.com/users/mmgen/orgs",
         "received_events_url" : "https://api.github.com/users/mmgen/received_events",
         "repos_url" : "https://api.github.com/users/mmgen/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mmgen/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mmgen/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mmgen"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7729#discussion_r145927297"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7729"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/145927297"
         }
      },
      "author_association" : "OWNER",
      "body" : "Well if you set all addresses with a certain label to the empty label, that label is effectively deleted. Deleting the label is a shortcut to remove it from all addresses.",
      "commit_id" : "0e3ef241d18593a9f67d4e5f37c22008cd9dc6b7",
      "created_at" : "2017-10-20T10:17:41Z",
      "diff_hunk" : "@@ -2923,6 +2928,236 @@ UniValue bumpfee(const JSONRPCRequest& request)\n     return result;\n }\n \n+UniValue getlabeladdress(const JSONRPCRequest& request)\n+{\n+    CWallet * const pwallet = GetWalletForJSONRPCRequest(request);\n+    if (!EnsureWalletIsAvailable(pwallet, request.fHelp)) {\n+        return NullUniValue;\n+    }\n+\n+    if (request.fHelp || request.params.size() != 1)\n+        throw std::runtime_error(\n+            \"getlabeladdress \\\"label\\\"\\n\"\n+            \"\\nReturns the current 'label address' for this label.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"label\\\"       (string, required) The label for the address. It can also be set to the empty string \\\"\\\" to represent the default label.\\n\"\n+            \"\\nResult:\\n\"\n+            \"\\\"bitcoinaddress\\\"   (string) The 'label address' for the label\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"getlabeladdress\", \"\")\n+            + HelpExampleCli(\"getlabeladdress\", \"\\\"\\\"\")\n+            + HelpExampleCli(\"getlabeladdress\", \"\\\"mylabel\\\"\")\n+            + HelpExampleRpc(\"getlabeladdress\", \"\\\"mylabel\\\"\")\n+        );\n+\n+    LOCK2(cs_main, pwallet->cs_wallet);\n+\n+    // Parse the label first so we don't generate a key if there's an error\n+    std::string strLabel = AccountFromValue(request.params[0]);\n+\n+    UniValue ret(UniValue::VSTR);\n+\n+    ret = GetAccountAddress(pwallet, strLabel).ToString();\n+    return ret;\n+}\n+\n+/** Convert CAddressBookData to JSON record.\n+ * The verbosity of the output is configurable based on the command.\n+ */\n+static UniValue AddressBookDataToJSON(const CAddressBookData& data, bool verbose)\n+{\n+    UniValue ret(UniValue::VOBJ);\n+    if (verbose) {\n+        ret.push_back(Pair(\"name\", data.name));\n+    }\n+    ret.push_back(Pair(\"purpose\", data.purpose));\n+    if (verbose) {\n+        UniValue ddata(UniValue::VOBJ);\n+        for (const std::pair<std::string, std::string>& item : data.destdata) {\n+            ddata.push_back(Pair(item.first, item.second));\n+        }\n+        ret.push_back(Pair(\"destdata\", ddata));\n+    }\n+    return ret;\n+}\n+\n+UniValue getlabel(const JSONRPCRequest& request)\n+{\n+    CWallet * const pwallet = GetWalletForJSONRPCRequest(request);\n+    if (!EnsureWalletIsAvailable(pwallet, request.fHelp)) {\n+        return NullUniValue;\n+    }\n+\n+    if (request.fHelp || request.params.size() != 1)\n+        throw std::runtime_error(\n+            \"getlabel \\\"bitcoinaddress\\\"\\n\"\n+            \"\\nReturns the label associated with the given address.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"bitcoinaddress\\\"  (string, required) The bitcoin address for label lookup.\\n\"\n+            \"\\nResult:\\n\"\n+            \"  { (json object with information about address)\\n\"\n+            \"    \\\"name\\\": \\\"labelname\\\" (string) The label\\n\"\n+            \"    \\\"purpose\\\": \\\"string\\\" (string) Purpose of address (\\\"send\\\" for sending address, \\\"receive\\\" for receiving address)\\n\"\n+            \"  },...\\n\"\n+            \"  Result is null if there is no record for this address.\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"getlabel\", \"\\\"1D1ZrZNe3JUo7ZycKEYQQiQAWd9y54F4XZ\\\"\")\n+            + HelpExampleRpc(\"getlabel\", \"\\\"1D1ZrZNe3JUo7ZycKEYQQiQAWd9y54F4XZ\\\"\")\n+        );\n+\n+    LOCK2(cs_main, pwallet->cs_wallet);\n+\n+    CBitcoinAddress address(request.params[0].get_str());\n+    if (!address.IsValid()) {\n+        throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Invalid Bitcoin address\");\n+    }\n+\n+    std::map<CTxDestination, CAddressBookData>::iterator mi = pwallet->mapAddressBook.find(address.Get());\n+    if (mi != pwallet->mapAddressBook.end()) {\n+        return AddressBookDataToJSON((*mi).second, true);\n+    }\n+    return NullUniValue;\n+}\n+\n+UniValue getaddressesbylabel(const JSONRPCRequest& request)\n+{\n+    CWallet * const pwallet = GetWalletForJSONRPCRequest(request);\n+    if (!EnsureWalletIsAvailable(pwallet, request.fHelp)) {\n+        return NullUniValue;\n+    }\n+\n+    if (request.fHelp || request.params.size() != 1)\n+        throw std::runtime_error(\n+            \"getaddressesbylabel \\\"label\\\"\\n\"\n+            \"\\nReturns the list of addresses assigned the specified label.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"label\\\"  (string, required) The label.\\n\"\n+            \"\\nResult:\\n\"\n+            \"{ (json object with addresses as keys)\\n\"\n+            \"  \\\"bitcoinaddress\\\": { (json object with information about address)\\n\"\n+            \"    \\\"purpose\\\": \\\"string\\\" (string)  Purpose of address (\\\"send\\\" for sending address, \\\"receive\\\" for receiving address)\\n\"\n+            \"  },...\\n\"\n+            \"}\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"getaddressesbylabel\", \"\\\"tabby\\\"\")\n+            + HelpExampleRpc(\"getaddressesbylabel\", \"\\\"tabby\\\"\")\n+        );\n+\n+    LOCK2(cs_main, pwallet->cs_wallet);\n+\n+    std::string strLabel = AccountFromValue(request.params[0]);\n+\n+    // Find all addresses that have the given label\n+    UniValue ret(UniValue::VOBJ);\n+    for (const std::pair<CBitcoinAddress, CAddressBookData>& item : pwallet->mapAddressBook) {\n+        if (item.second.name == strLabel) {\n+            ret.push_back(Pair(item.first.ToString(), AddressBookDataToJSON(item.second, false)));\n+        }\n+    }\n+    return ret;\n+}\n+\n+UniValue listlabels(const JSONRPCRequest& request)\n+{\n+    CWallet * const pwallet = GetWalletForJSONRPCRequest(request);\n+    if (!EnsureWalletIsAvailable(pwallet, request.fHelp)) {\n+        return NullUniValue;\n+    }\n+\n+    if (request.fHelp || request.params.size() > 1)\n+        throw std::runtime_error(\n+            \"listlabels ( \\\"purpose\\\" )\\n\"\n+            \"\\nReturns the list of all labels, or labels that are assigned to addresses with a specific purpose.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"purpose\\\"  (string, optional) Address purpose to list labels for ('send','receive'). An empty string is the same as not providing this argument.\\n\"\n+            \"\\nResult:\\n\"\n+            \"[                      (json array of string)\\n\"\n+            \"  \\\"label\\\",  (string) Label name\\n\"\n+            \"  ...\\n\"\n+            \"]\\n\"\n+            \"\\nExamples:\\n\"\n+            \"\\nList all labels\\n\"\n+            + HelpExampleCli(\"listlabels\", \"\") +\n+            \"\\nList labels that have receiving addresses\\n\"\n+            + HelpExampleCli(\"listlabels\", \"receive\") +\n+            \"\\nList labels that have sending addresses\\n\"\n+            + HelpExampleCli(\"listlabels\", \"send\") +\n+            \"\\nAs json rpc call\\n\"\n+            + HelpExampleRpc(\"listlabels\", \"receive\")\n+        );\n+\n+    LOCK2(cs_main, pwallet->cs_wallet);\n+\n+    std::string purpose;\n+    if (request.params.size() > 0) {\n+        purpose = request.params[0].get_str();\n+    }\n+\n+    std::set<std::string> setLabels;\n+    for (const std::pair<CTxDestination, CAddressBookData>& entry : pwallet->mapAddressBook) {\n+        if (purpose.empty() || entry.second.purpose == purpose){\n+            setLabels.insert(entry.second.name);\n+        }\n+    }\n+    UniValue ret(UniValue::VARR);\n+    for (const std::string &name : setLabels) {\n+        ret.push_back(name);\n+    }\n+\n+    return ret;\n+}\n+\n+UniValue setlabel(const JSONRPCRequest& request)\n+{\n+    CWallet * const pwallet = GetWalletForJSONRPCRequest(request);\n+    if (!EnsureWalletIsAvailable(pwallet, request.fHelp)) {\n+        return NullUniValue;\n+    }\n+\n+    if (request.fHelp || request.params.size() < 1 || request.params.size() > 2)\n+        throw std::runtime_error(\n+            \"setlabel \\\"bitcoinaddress\\\" \\\"label\\\"\\n\"\n+            \"\\nSets the label associated with the given address.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"bitcoinaddress\\\"  (string, required) The bitcoin address to be associated with an label.\\n\"\n+            \"2. \\\"label\\\"           (string, required) The label to assign to the address.\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"setlabel\", \"\\\"1D1ZrZNe3JUo7ZycKEYQQiQAWd9y54F4XZ\\\" \\\"tabby\\\"\")\n+            + HelpExampleRpc(\"setlabel\", \"\\\"1D1ZrZNe3JUo7ZycKEYQQiQAWd9y54F4XZ\\\", \\\"tabby\\\"\")\n+        );\n+\n+    LOCK2(cs_main, pwallet->cs_wallet);\n+\n+    CBitcoinAddress address(request.params[0].get_str());\n+    if (!address.IsValid()) {\n+        throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Invalid Bitcoin address\");\n+    }\n+\n+    std::string strLabel;\n+    if (request.params.size() > 1){",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7729#discussion_r145927297",
      "id" : 145927297,
      "in_reply_to_id" : 122002514,
      "original_commit_id" : "21a49c206f839984c9cab3e1dd67aea63f9c2a9c",
      "original_position" : 222,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : 222,
      "pull_request_review_id" : 70800087,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7729",
      "updated_at" : "2017-10-20T10:17:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/145927297",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "OWNER",
      "body" : "@mmgen \r\n> importaddress, importpubkey and importprivkey have 'label' arguments (see my note above) that currently set the account for the address. After the label API is introduced, will these now set the label, or the account?\r\n\r\nThe same arguments will be used for label (where it makes sense) to ease the transition and avoid unused holes in the argument list. This is mentioned in the OP.\r\nFor 0.16 it will be possible to switch between label and account API with a command line argument, but will default to labels. 0.17 will likely drop suppport for accounts completely.\r\n\r\n@MeshCollider \r\n> I've rebased this on current master here, as well as fixed a few of the nits above: \r\n\r\nThanks! Will take that over.",
      "created_at" : "2017-10-20T10:19:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7729#issuecomment-338167442",
      "id" : 338167442,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7729",
      "updated_at" : "2017-10-20T10:20:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/338167442",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Rebased this on top of #11536 in 1dbfe49c48077ee752c6851b411f89ccf679cb2e (https://github.com/ryanofsky/bitcoin/commits/pr/label)",
      "created_at" : "2017-10-21T17:04:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7729#issuecomment-338417139",
      "id" : 338417139,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7729",
      "updated_at" : "2017-10-21T17:04:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/338417139",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   }
]
