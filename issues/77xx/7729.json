{
   "assignee" : null,
   "assignees" : [],
   "body" : "Add label API to wallet RPC.\r\n\r\nThis is one step towards #3816 (\"Remove bolt-on account system\") although it doesn't actually remove anything yet (that would be a follow-up pull).\r\n\r\nThese initially mirror the account functions, with the following differences:\r\n- These functions aren't DEPRECATED in the help\r\n- Help mentions 'label' instead of accounts. In the language used, labels are associated with addresses, instead of addresses associated with labels. (in contrast to accounts.)\r\n- Labels have no balance\r\n  - No `getreceivedbylabel`\r\n  - No `listreceivedbylabel`\r\n  - No balances in `listlabels`\r\n  - `listlabels` has no minconf or watchonly argument\r\n  - No `move`\r\n- Like in the GUI, labels can be set on any address, not just receiving addreses\r\n- Unlike accounts, labels can be deleted. Being unable to delete them is a common annoyance (see #1231).  Currently only by reassigning all addresses using `setlabel`, but an explicit call `deletelabel` which assigns all address to the default label may make sense.\r\n## API\r\n\r\nShort description of every RPC call: for detailed information check RPC help. The general idea is to offer the same functionality as the GUI label system. Labels are simply a name for an address, or a group of addresses.\r\n\r\n**Do not use the deprecated account system and the label system with the same wallet at the same time**. These APIs use the same underlying data in the database for (slightly) different purposes, using them interchangeably will give unexpected results. (Just like using the GUI labels and account system at the same time. Using the GUI labels and the label API at the same time, however, is no problem)\r\n- `getlabel`: returns the label (and other address book data) associated with an address\r\n  - This exposes the fields in the CAddressBookData structure, which is currently the 'purpose' (sending address, receiving address) and 'destdata' (used for storing payment requests IIRC)\r\n- `getaddressesbylabel`: get addresses labelled with one label\r\n- `listlabels`: list all labels (or labels with a certain purpose, such as receive/send)\r\n- `setlabel`: assign a label to an address\r\n- `getlabeladdress`: get the 'label address' for the specified label. This gets an unused address with the label, creating one if necessary.\r\n\r\nThese calls have a deprecated account parameter, which can be turned into a label-parameter as is:\r\n- `listtransactions`\r\n## Open questions\r\n- Should there be such a thing as a 'label address'? My initial feeling about this was\r\n  'no', labels are just a name for one or more addresses, intuitively there is no \"default address\",\r\n  and it also isn't a GUI feature.\r\n  - but at least @luke-jr is relying on this behavior in his miner.\r\n  - this would greatly simplify the code though - it would be impossible to get rid of the `CAccount` structure due to this.\r\n## TODO\r\n- [ ] Needs RPC tests\r\n- [ ] Needs mention in release notes\r\n- [ ] optional: a flag in the wallet to prevent use of both the account and label API\r\n",
   "closed_at" : null,
   "closed_by" : null,
   "comments" : 43,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7729/comments",
   "created_at" : "2016-03-21T16:02:09Z",
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7729/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/pull/7729",
   "id" : 142394163,
   "labels" : [
      {
         "color" : "0052cc",
         "default" : false,
         "id" : 98279177,
         "name" : "RPC/REST/ZMQ",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/RPC/REST/ZMQ"
      },
      {
         "color" : "02d7e1",
         "default" : false,
         "id" : 149424,
         "name" : "Wallet",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/Wallet"
      }
   ],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7729/labels{/name}",
   "locked" : false,
   "milestone" : {
      "closed_at" : null,
      "closed_issues" : 21,
      "created_at" : "2016-12-04T13:31:14Z",
      "creator" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/6399679?v=3",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      },
      "description" : "",
      "due_on" : null,
      "html_url" : "https://github.com/bitcoin/bitcoin/milestone/25",
      "id" : 2174061,
      "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/milestones/25/labels",
      "number" : 25,
      "open_issues" : 25,
      "state" : "open",
      "title" : "0.15.0",
      "updated_at" : "2017-06-15T00:29:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/milestones/25"
   },
   "number" : 7729,
   "pull_request" : {
      "diff_url" : "https://github.com/bitcoin/bitcoin/pull/7729.diff",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7729",
      "patch_url" : "https://github.com/bitcoin/bitcoin/pull/7729.patch",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7729"
   },
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "open",
   "title" : "rpc: introduce 'label' API for wallet",
   "updated_at" : "2017-06-14T17:10:38Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7729",
   "user" : {
      "avatar_url" : "https://avatars3.githubusercontent.com/u/126646?v=3",
      "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
      "followers_url" : "https://api.github.com/users/laanwj/followers",
      "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/laanwj",
      "id" : 126646,
      "login" : "laanwj",
      "organizations_url" : "https://api.github.com/users/laanwj/orgs",
      "received_events_url" : "https://api.github.com/users/laanwj/received_events",
      "repos_url" : "https://api.github.com/users/laanwj/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/laanwj"
   }
}
