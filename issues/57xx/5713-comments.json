[
   {
      "body" : "Cool, looks good to me.\r\nI'll have a try at filing in the TODOs in the RPC test.",
      "created_at" : "2015-01-27T12:05:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5713#issuecomment-71637250",
      "id" : 71637250,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5713",
      "updated_at" : "2015-01-27T12:05:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/71637250",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "@laanwj That'd be awesome, but I don't see how to easily do that without adding functionality to the RPC framework to build its own blocks. Bitcoin Core won't mine blocks with transactions that violate the rules it wants. I guess there could be a -overridemempoolvalidationflags or something, but that gets really ugly.",
      "created_at" : "2015-01-27T14:08:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5713#issuecomment-71652628",
      "id" : 71652628,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5713",
      "updated_at" : "2015-01-27T14:08:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/71652628",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "@sipa Bleh, yes, I just noticed; added python code to fuzz a transaction into non-canonical-DER, but it's impossible to get it into the mempool.\r\nBuilding blocks from the test framework would be neat, of course.",
      "created_at" : "2015-01-27T15:13:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5713#issuecomment-71663623",
      "id" : 71663623,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5713",
      "updated_at" : "2015-01-27T15:13:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/71663623",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5713#discussion_r23633409"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5713"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/23633409"
         }
      },
      "body" : "s/AssertionFailure/AssertionError/",
      "commit_id" : "864913e0bbf466d13bbdf8c66810ce2ba7510eb2",
      "created_at" : "2015-01-27T19:11:07Z",
      "diff_hunk" : "@@ -0,0 +1,90 @@\n+#!/usr/bin/env python2\n+# Copyright (c) 2014 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#\n+# Test the BIP66 changeover logic\n+#\n+\n+from test_framework import BitcoinTestFramework\n+from bitcoinrpc.authproxy import AuthServiceProxy, JSONRPCException\n+from util import *\n+import os\n+import shutil\n+\n+class BIP66Test(BitcoinTestFramework):\n+\n+    def setup_network(self):\n+        self.nodes = []\n+        self.nodes.append(start_node(0, self.options.tmpdir, []))\n+        self.nodes.append(start_node(1, self.options.tmpdir, [\"-blockversion=2\"]))\n+        self.nodes.append(start_node(2, self.options.tmpdir, [\"-blockversion=3\"]))\n+        connect_nodes(self.nodes[1], 0)\n+        connect_nodes(self.nodes[2], 0)\n+        self.is_network_split = False\n+        self.sync_all()\n+\n+    def run_test(self):\n+        cnt = self.nodes[0].getblockcount()\n+\n+        # Mine some old-version blocks\n+        self.nodes[1].setgenerate(True, 100)\n+        self.sync_all()\n+        if (self.nodes[0].getblockcount() != cnt + 100):\n+            raise AssertionError(\"Failed to mine 100 version=2 blocks\")\n+\n+        # Mine 750 new-version blocks\n+        for i in xrange(15):\n+            self.nodes[2].setgenerate(True, 50)\n+        self.sync_all()\n+        if (self.nodes[0].getblockcount() != cnt + 850):\n+            raise AssertionError(\"Failed to mine 750 version=3 blocks\")\n+\n+        # TODO: check that new DERSIG rules are not enforced\n+\n+        # Mine 1 new-version block\n+        self.nodes[2].setgenerate(True, 1)\n+        self.sync_all()\n+        if (self.nodes[0].getblockcount() != cnt + 851):\n+            raise AssertionFailure(\"Failed to mine a version=3 blocks\")\n+\n+        # TODO: check that new DERSIG rules are enforced\n+\n+        # Mine 198 new-version blocks\n+        for i in xrange(2):\n+            self.nodes[2].setgenerate(True, 99)\n+        self.sync_all()\n+        if (self.nodes[0].getblockcount() != cnt + 1049):\n+            raise AssertionError(\"Failed to mine 198 version=3 blocks\")\n+\n+        # Mine 1 old-version block\n+        self.nodes[1].setgenerate(True, 1)\n+        self.sync_all()\n+        if (self.nodes[0].getblockcount() != cnt + 1050):\n+            raise AssertionFailure(\"Failed to mine a version=2 block after 949 version=3 blocks\")",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5713#discussion_r23633409",
      "id" : 23633409,
      "original_commit_id" : "864913e0bbf466d13bbdf8c66810ce2ba7510eb2",
      "original_position" : 65,
      "path" : "qa/rpc-tests/bipdersig.py",
      "position" : 65,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5713",
      "updated_at" : "2015-01-27T19:11:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/23633409",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "tested ACK. Verified that the deployment behavior as mentioned in BIP66 is indeed what is enforced.",
      "created_at" : "2015-01-28T06:07:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5713#issuecomment-71785959",
      "id" : 71785959,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5713",
      "updated_at" : "2015-01-28T06:07:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/71785959",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Addressed comments and rebased.",
      "created_at" : "2015-02-01T22:02:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5713#issuecomment-72386929",
      "id" : 72386929,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5713",
      "updated_at" : "2015-02-01T22:02:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/72386929",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "utACK: read over non-test commits (80ad135a5e54e8a065fee5ef36e57034679111ab and 5a47811da5158df763aa2fca09ce646ee0c51e7b), looks reasonable (I did not compare to DER spec).\r\n",
      "created_at" : "2015-02-01T23:34:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5713#issuecomment-72391463",
      "id" : 72391463,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5713",
      "updated_at" : "2015-02-01T23:34:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/72391463",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "I was able to test deployment behavior, submitting regtest blocks with a couple kinds of non-DER signatures over the p2p network to a node running the new code -- worked as expected.",
      "created_at" : "2015-02-02T21:23:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5713#issuecomment-72540648",
      "id" : 72540648,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5713",
      "updated_at" : "2015-02-02T21:23:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/72540648",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7463573?v=3",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "body" : "Why BIP66 not checked that `r` or `s` <s>less</s> more than 33 bytes?\r\nrelated: https://github.com/bitcoinjs/bip66/pull/2\r\n\r\nInvalid DER signature for secp256k1 (but still valid by BIP66):\r\n```\r\n3044021458a2f39bd87f0000000506030000000000050603022c402dde9afe7f0000010000000100000004000000040000000000000000000000000000000a00000000000000\r\n```",
      "created_at" : "2016-03-17T05:38:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5713#issuecomment-197715788",
      "id" : 197715788,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5713",
      "updated_at" : "2016-03-23T06:37:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/197715788",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2633065?v=3",
         "events_url" : "https://api.github.com/users/fanatid/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanatid/followers",
         "following_url" : "https://api.github.com/users/fanatid/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanatid/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanatid",
         "id" : 2633065,
         "login" : "fanatid",
         "organizations_url" : "https://api.github.com/users/fanatid/orgs",
         "received_events_url" : "https://api.github.com/users/fanatid/received_events",
         "repos_url" : "https://api.github.com/users/fanatid/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanatid/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanatid/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanatid"
      }
   }
]
