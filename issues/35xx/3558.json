{
   "assignee" : null,
   "body" : "Summary\r\n--------\r\n\r\nBitcoin-qt 0.8.6-beta new install gets stuck on clock 212774 for 6 hours (at 100 % CPU of 1 core) before I attempted to exit the client, and it then throws an exception on shutdown.\r\n\r\nDetails\r\n--------\r\n\r\n- Seeded with `bitcoin_blockchain_170000.zip` from `http://sourceforge.net/projects/bitcoin/files/Bitcoin/blockchain/`\r\n    - SHA hashes and PGP signatures verified\r\n    - file extracted to local SSD\r\n    - client launched with command `bitcoin-qt -dbcache=2000 -loadblock=T:\\blk0001.dat -checkblock`\r\n\r\nJust before this block is reached, the client logs an exception in debug.log:\r\n\r\n    2014-01-19 07:16:07 Pre-allocating up to position 0x200000 in rev00033.dat\r\n    2014-01-19 07:16:07 SetBestChain: new best=00000000000004c355f43d74100ef5092c19acd5092baa3c328c5313e47d98d7  height=212772  log2_work=69.181827  tx=10075575  date=2012-12-19 10:20:11 progress=0.139697\r\n    2014-01-19 07:16:07 SetBestChain: new best=000000000000022007d622102a4f5679fc38a13cfd6401623fbdb033e229db7e  height=212773  log2_work=69.181859  tx=10076027  date=2012-12-19 10:25:10 progress=0.139703\r\n    2014-01-19 07:16:07 SetBestChain: new best=00000000000000f03fda17bedd0162a0a24722f5b696c80bc43286638de15094  height=212774  log2_work=69.18189  tx=10076334  date=2012-12-19 10:35:07 progress=0.139708\r\n    2014-01-19 07:16:07 Committing 3492216 changed transactions to coin database...\r\n    2014-01-19 07:16:10 \r\n    \r\n    ************************\r\n    EXCEPTION: St9bad_alloc       \r\n    std::bad_alloc       \r\n    C:\\Program Files (x86)\\Bitcoin\\bitcoin-qt.exe in ProcessMessages() \r\n    2014-01-19 07:16:10 ProcessMessage(block, 248972 bytes) FAILED\r\n    2014-01-19 07:16:10 received block 00000000000004efa82bf49ae01cf8b98074bea53e8adb07fa051b9d2e015319\r\n    2014-01-19 07:16:10 ERROR: ProcessBlock() : already have block 212198 00000000000004efa82bf49ae01cf8b98074bea53e8adb07fa051b9d2e015319\r\n\r\nDebug log then shows repeated `send version message: version 70001, blocks=212774` along with other messages\r\n\r\nWhen attempting to gracefully exit, client shows error, and debug.log records the same exception:\r\n\r\n    2014-01-19 13:25:20 Committing 3492218 changed transactions to coin database...\r\n    2014-01-19 13:25:20 \r\n    ************************\r\n    EXCEPTION: St9bad_alloc       \r\n    std::bad_alloc       \r\n    C:\\Program Files (x86)\\Bitcoin\\bitcoin-qt.exe in Runaway exception       \r\n    2014-01-19 13:29:46 EnvShutdown exception: Invalid argument (22)\r\n\r\nDebug.log file is 65 MB uncompressed, 10 MB fully compressed with 7zip, can email it with compression and PGP encryption and signing on request (my key id 361BE7AA).\r\n\r\nResult of reopening\r\n--------\r\n\r\nRelaunching the client with the command `bitcoin-qt -dbcache=2000` then allows it to proceed past the stuck block, reporting this towards the top of the new debug.log entries:\r\n\r\n    ....more lines...\r\n    2014-01-19 14:21:08 Committing 3491948 changed transactions to coin database...\r\n    2014-01-19 14:21:22 SetBestChain: new best=000000000000048cbc4da968ee11f52e806e10c705a63305f09f6babf66c163d  height=212757  log2_work=69.181359  tx=10070075  date=2012-12-19 07:34:10 progress=0.139450\r\n    2014-01-19 14:21:22 SetBestChain: new best=00000000000003e3b74cfad77a6ffbd9f38b223b24520132ff7aa5375c84c4b8  height=212758  log2_work=69.181391  tx=10070628  date=2012-12-19 07:59:50 progress=0.139457\r\n    2014-01-19 14:21:22 SetBestChain: new best=00000000000000069e2f417ffec478c271839639c438963bbfd77b1045774de3  height=212759  log2_work=69.181422  tx=10070957  date=2012-12-19 08:10:09 progress=0.139462\r\n    2014-01-19 14:21:22 SetBestChain: new best=0000000000000339c967b9812b87b7a68751b30f63ebf2a4d195fa82f725f077  height=212760  log2_work=69.181453  tx=10071010  date=2012-12-19 08:10:42 progress=0.139463\r\n    2014-01-19 14:21:23 SetBestChain: new best=00000000000001edeb60805681d3f6b83e67925403d98db09f617536a6c5315b  height=212761  log2_work=69.181484  tx=10071128  date=2012-12-19 08:34:35 progress=0.139464\r\n    2014-01-19 14:21:23 SetBestChain: new best=00000000000004614b32332918a8d198e147b439aa697b6b7ed142a98a57a98d  height=212762  log2_work=69.181515  tx=10071748  date=2012-12-19 08:41:07 progress=0.139473\r\n    2014-01-19 14:21:23 SetBestChain: new best=0000000000000203d0904121da04c99f2d7f5b1579aa13f10a62c545a13819ee  height=212763  log2_work=69.181547  tx=10072011  date=2012-12-19 08:41:42 progress=0.139476\r\n    2014-01-19 14:21:23 SetBestChain: new best=00000000000003096a214fd7251994d7bb7c55603fe3ad51ed1388e7f011d1bf  height=212764  log2_work=69.181578  tx=10072485  date=2012-12-19 09:03:01 progress=0.139483\r\n    2014-01-19 14:21:23 SetBestChain: new best=000000000000028474e9d3d0ccddf4edb2ec038eb564320de7f01f03f845ffe7  height=212765  log2_work=69.181609  tx=10072831  date=2012-12-19 09:06:36 progress=0.139488\r\n    2014-01-19 14:21:23 SetBestChain: new best=0000000000000390b0c8a637970bae0a35e2262c0a056287fe20fcd9cf9d9c3b  height=212766  log2_work=69.18164  tx=10073611  date=2012-12-19 09:40:49 progress=0.139499\r\n    2014-01-19 14:21:23 SetBestChain: new best=0000000000000454ce0d9379eee8acd8193748161cd63dab76860ead1c489a9b  height=212767  log2_work=69.181671  tx=10074102  date=2012-12-19 09:44:29 progress=0.139505\r\n    2014-01-19 14:21:23 SetBestChain: new best=00000000000000d33d9e55a5ef5beff11df314147052a1aaacdd70cd3ce47465  height=212768  log2_work=69.181703  tx=10074472  date=2012-12-19 09:52:47 progress=0.139511\r\n    2014-01-19 14:21:23 SetBestChain: new best=0000000000000396f35ab33e42d00544184401647c9aed455b61a341d260f8f1  height=212769  log2_work=69.181734  tx=10074623  date=2012-12-19 10:02:09 progress=0.139513\r\n    2014-01-19 14:21:23 SetBestChain: new best=000000000000022da79f2be8e500b85d2a5b4f7268edf301ec9e21bcf4c5d776  height=212770  log2_work=69.181765  tx=10074663  date=2012-12-19 09:57:51 progress=0.139513\r\n    2014-01-19 14:21:23 SetBestChain: new best=0000000000000431f51ea7dd5584a9ea9e5e94a0b06dde3e2f8cb1d9d1e52435  height=212771  log2_work=69.181796  tx=10074807  date=2012-12-19 10:08:31 progress=0.139515\r\n    2014-01-19 14:21:23 SetBestChain: new best=00000000000004c355f43d74100ef5092c19acd5092baa3c328c5313e47d98d7  height=212772  log2_work=69.181827  tx=10075575  date=2012-12-19 10:20:11 progress=0.139526\r\n    2014-01-19 14:21:23 SetBestChain: new best=000000000000022007d622102a4f5679fc38a13cfd6401623fbdb033e229db7e  height=212773  log2_work=69.181859  tx=10076027  date=2012-12-19 10:25:10 progress=0.139532\r\n    2014-01-19 14:21:23 SetBestChain: new best=00000000000000f03fda17bedd0162a0a24722f5b696c80bc43286638de15094  height=212774  log2_work=69.18189  tx=10076334  date=2012-12-19 10:35:07 progress=0.139536\r\n    2014-01-19 14:21:23 SetBestChain: new best=00000000000003b66d1c40bff01e485c3de0184dd11fad99af502304d7505c7c  height=212775  log2_work=69.181921  tx=10076958  date=2012-12-19 10:52:09 progress=0.139545\r\n    2014-01-19 14:21:23 init message: Loading addresses...\r\n    ...more lines...\r\n\r\nEnvironment\r\n--------\r\n\r\n- Bitcoin-qt client 0.8.6-beta\r\n- Windows 7 x64 SP1, fully patched to 2014-01-19\r\n- Core i7 2600K CPU, 16 GB RAM\r\n- AMD HD Radeon 6450",
   "closed_at" : "2014-01-19T16:47:29Z",
   "closed_by" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/128166?v=3",
      "events_url" : "https://api.github.com/users/AGBrown/events{/privacy}",
      "followers_url" : "https://api.github.com/users/AGBrown/followers",
      "following_url" : "https://api.github.com/users/AGBrown/following{/other_user}",
      "gists_url" : "https://api.github.com/users/AGBrown/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/AGBrown",
      "id" : 128166,
      "login" : "AGBrown",
      "organizations_url" : "https://api.github.com/users/AGBrown/orgs",
      "received_events_url" : "https://api.github.com/users/AGBrown/received_events",
      "repos_url" : "https://api.github.com/users/AGBrown/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/AGBrown/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/AGBrown/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/AGBrown"
   },
   "comments" : 6,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3558/comments",
   "created_at" : "2014-01-19T13:48:12Z",
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3558/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/issues/3558",
   "id" : 25880582,
   "labels" : [],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3558/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "number" : 3558,
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "closed",
   "title" : "Stuck on block 212774",
   "updated_at" : "2014-01-19T16:47:29Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3558",
   "user" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/128166?v=3",
      "events_url" : "https://api.github.com/users/AGBrown/events{/privacy}",
      "followers_url" : "https://api.github.com/users/AGBrown/followers",
      "following_url" : "https://api.github.com/users/AGBrown/following{/other_user}",
      "gists_url" : "https://api.github.com/users/AGBrown/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/AGBrown",
      "id" : 128166,
      "login" : "AGBrown",
      "organizations_url" : "https://api.github.com/users/AGBrown/orgs",
      "received_events_url" : "https://api.github.com/users/AGBrown/received_events",
      "repos_url" : "https://api.github.com/users/AGBrown/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/AGBrown/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/AGBrown/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/AGBrown"
   }
}
