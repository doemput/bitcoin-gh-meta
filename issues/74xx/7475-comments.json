[
   {
      "body" : "Unless you get an exact match, the coin selection algorithm will iterate over the whole unspent coin set at least a thousand times.\r\n\r\nYou can get the size of the coin set with `$ src/bitcoin-cli  listunspent 0 | grep -c spendable`. Also, you can `grep ` for the `amount` and see if there is a bunch of small coins.\r\n\r\nCould you share the output of `$ src/bitcoin-cli  listunspent 0 | grep -c spendable`? (Make sure you don't post any amounts or txids to the public if you care about privacy)",
      "created_at" : "2016-02-06T17:55:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7475#issuecomment-180820950",
      "id" : 180820950,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7475",
      "updated_at" : "2016-02-08T14:16:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/180820950",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=3",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "body" : "$ bitcoin-cli listunspent 0 | grep -c spendable\r\n412",
      "created_at" : "2016-02-06T18:14:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7475#issuecomment-180827480",
      "id" : 180827480,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7475",
      "updated_at" : "2016-02-06T18:14:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/180827480",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/70926?v=3",
         "events_url" : "https://api.github.com/users/JokerCatz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JokerCatz/followers",
         "following_url" : "https://api.github.com/users/JokerCatz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JokerCatz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JokerCatz",
         "id" : 70926,
         "login" : "JokerCatz",
         "organizations_url" : "https://api.github.com/users/JokerCatz/orgs",
         "received_events_url" : "https://api.github.com/users/JokerCatz/received_events",
         "repos_url" : "https://api.github.com/users/JokerCatz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JokerCatz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JokerCatz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JokerCatz"
      }
   },
   {
      "body" : "Iterating over 412 coins is done in less than a second. This sounds more like #2511\r\n\r\nYou can add the `-debug=db` option to see how long it takes to flush the wallet.\r\n\r\n```\r\n2016-02-07 23:00:17 Flushing wallet.dat\r\n2016-02-07 23:00:17 Flushed wallet.dat 8ms\r\n",
      "created_at" : "2016-02-07T23:03:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7475#issuecomment-181138258",
      "id" : 181138258,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7475",
      "updated_at" : "2016-02-07T23:03:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/181138258",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=3",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "body" : "    2016-02-08 03:52:41 Flushing wallet.dat\r\n    2016-02-08 03:52:50 Flushed wallet.dat 9252ms\r\n\r\n... 7xxx ~ 93xx ms\r\nand another logs\r\n\r\n    2016-02-08 03:58:40 AddToWallet {{hash}}  new\r\n    2016-02-08 03:58:42 Flushing wallet.dat\r\n    2016-02-08 03:58:50 Flushed wallet.dat 7960ms\r\n    2016-02-08 03:59:30 keypool added key {{int}}, size=301\r\n    2016-02-08 03:59:30 keypool reserve {{int}}\r\n    2016-02-08 03:59:32 Flushing wallet.dat\r\n    2016-02-08 03:59:40 Flushed wallet.dat 7964ms\r\n    ...\r\n\r\nand\r\n\r\n    bitcoin-cli listunspent 0 | grep -c spendable\r\n    534\r\n\r\nokay...so? how to fix this? like change to non-BDB ? or just loading balance add more node ? I think I can use docker to loading balance it ... (NFS share old blk00xxx.dat to save hd space , all node keep last 2 blk00xxx.dat file , and export / import wallet to another node......)",
      "created_at" : "2016-02-08T04:07:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7475#issuecomment-181188121",
      "id" : 181188121,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7475",
      "updated_at" : "2016-02-08T04:10:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/181188121",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/70926?v=3",
         "events_url" : "https://api.github.com/users/JokerCatz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JokerCatz/followers",
         "following_url" : "https://api.github.com/users/JokerCatz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JokerCatz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JokerCatz",
         "id" : 70926,
         "login" : "JokerCatz",
         "organizations_url" : "https://api.github.com/users/JokerCatz/orgs",
         "received_events_url" : "https://api.github.com/users/JokerCatz/received_events",
         "repos_url" : "https://api.github.com/users/JokerCatz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JokerCatz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JokerCatz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JokerCatz"
      }
   },
   {
      "body" : "> how to fix this?\r\n\r\n* You could switch to a SSD (replacing your HDD) to reduce the time of a flush to about one second\r\n* You could generate a new wallet if you don't reuse your addresses:\r\n\r\nThe steps could be roughly like this:\r\n\r\n```\r\nADD=getnewaddress\r\nsendtoadderess $ADD $balance\r\nKEY=dumpprivkey $ADD\r\n[stop node]\r\nmv wallet.dat wallet.dat_2016_02_08\r\n[restart node]\r\nimportprivkey $KEY\r\n",
      "created_at" : "2016-02-08T12:23:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7475#issuecomment-181343679",
      "id" : 181343679,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7475",
      "updated_at" : "2016-02-08T12:23:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/181343679",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=3",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "body" : "I know how to export / import keys , but customer use our wallet solution & has (user <=> wallet) relation in DB , I can't change/cancel customer wallet , so I will make more node to loading balance it (export / import wallets to 2+ nodes) & split receive and sender wallet be different node , daily transfer receive node BTCs to sender node , I think will be okay for this (( and sorry my poor english...:x , and Happy Chinese New Year , Dev team : )",
      "created_at" : "2016-02-08T17:27:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7475#issuecomment-181486604",
      "id" : 181486604,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7475",
      "updated_at" : "2016-02-08T17:32:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/181486604",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/70926?v=3",
         "events_url" : "https://api.github.com/users/JokerCatz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JokerCatz/followers",
         "following_url" : "https://api.github.com/users/JokerCatz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JokerCatz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JokerCatz",
         "id" : 70926,
         "login" : "JokerCatz",
         "organizations_url" : "https://api.github.com/users/JokerCatz/orgs",
         "received_events_url" : "https://api.github.com/users/JokerCatz/received_events",
         "repos_url" : "https://api.github.com/users/JokerCatz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JokerCatz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JokerCatz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JokerCatz"
      }
   },
   {
      "body" : "@JokerCatz are you using the \"account\" functions?\r\n\r\nNote that they are deprecated and will be removed in a future release.",
      "created_at" : "2016-02-08T19:48:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7475#issuecomment-181537647",
      "id" : 181537647,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7475",
      "updated_at" : "2016-02-08T19:48:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/181537647",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/620611?v=3",
         "events_url" : "https://api.github.com/users/pstratem/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pstratem/followers",
         "following_url" : "https://api.github.com/users/pstratem/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pstratem/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pstratem",
         "id" : 620611,
         "login" : "pstratem",
         "organizations_url" : "https://api.github.com/users/pstratem/orgs",
         "received_events_url" : "https://api.github.com/users/pstratem/received_events",
         "repos_url" : "https://api.github.com/users/pstratem/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pstratem/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pstratem/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pstratem"
      }
   },
   {
      "body" : "^ you mean `bitcoin-cli` like `sendfrom` or like `listaccounts` , the \"account\" command will be remove?\r\n& we use JSON-RPC to call node command...",
      "created_at" : "2016-02-09T14:03:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7475#issuecomment-181875475",
      "id" : 181875475,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7475",
      "updated_at" : "2016-02-09T14:03:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/181875475",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/70926?v=3",
         "events_url" : "https://api.github.com/users/JokerCatz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JokerCatz/followers",
         "following_url" : "https://api.github.com/users/JokerCatz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JokerCatz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JokerCatz",
         "id" : 70926,
         "login" : "JokerCatz",
         "organizations_url" : "https://api.github.com/users/JokerCatz/orgs",
         "received_events_url" : "https://api.github.com/users/JokerCatz/received_events",
         "repos_url" : "https://api.github.com/users/JokerCatz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JokerCatz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JokerCatz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JokerCatz"
      }
   },
   {
      "body" : "@JokerCatz https://github.com/bitcoin/bitcoin/pull/5575",
      "created_at" : "2016-02-10T04:13:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7475#issuecomment-182187716",
      "id" : 182187716,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7475",
      "updated_at" : "2016-02-10T04:13:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/182187716",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/620611?v=3",
         "events_url" : "https://api.github.com/users/pstratem/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pstratem/followers",
         "following_url" : "https://api.github.com/users/pstratem/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pstratem/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pstratem",
         "id" : 620611,
         "login" : "pstratem",
         "organizations_url" : "https://api.github.com/users/pstratem/orgs",
         "received_events_url" : "https://api.github.com/users/pstratem/received_events",
         "repos_url" : "https://api.github.com/users/pstratem/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pstratem/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pstratem/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pstratem"
      }
   },
   {
      "body" : "okay~ I got it , thanx : )",
      "created_at" : "2016-02-10T09:05:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7475#issuecomment-182265474",
      "id" : 182265474,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7475",
      "updated_at" : "2016-02-10T09:05:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/182265474",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/70926?v=3",
         "events_url" : "https://api.github.com/users/JokerCatz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JokerCatz/followers",
         "following_url" : "https://api.github.com/users/JokerCatz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JokerCatz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JokerCatz",
         "id" : 70926,
         "login" : "JokerCatz",
         "organizations_url" : "https://api.github.com/users/JokerCatz/orgs",
         "received_events_url" : "https://api.github.com/users/JokerCatz/received_events",
         "repos_url" : "https://api.github.com/users/JokerCatz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JokerCatz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JokerCatz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JokerCatz"
      }
   },
   {
      "body" : "@JokerCatz I previously encountered the same issue.\r\nWhat i did was dump all needed private keys to a text file, create new wallet, import needed private keys, rescan. \r\n\r\nThis got rid of a ton of change addresses.",
      "created_at" : "2016-02-27T07:17:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7475#issuecomment-189599528",
      "id" : 189599528,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7475",
      "updated_at" : "2016-02-27T07:17:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/189599528",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5078381?v=3",
         "events_url" : "https://api.github.com/users/GamerSg/events{/privacy}",
         "followers_url" : "https://api.github.com/users/GamerSg/followers",
         "following_url" : "https://api.github.com/users/GamerSg/following{/other_user}",
         "gists_url" : "https://api.github.com/users/GamerSg/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/GamerSg",
         "id" : 5078381,
         "login" : "GamerSg",
         "organizations_url" : "https://api.github.com/users/GamerSg/orgs",
         "received_events_url" : "https://api.github.com/users/GamerSg/received_events",
         "repos_url" : "https://api.github.com/users/GamerSg/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/GamerSg/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/GamerSg/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/GamerSg"
      }
   },
   {
      "body" : "I wonder if, for wallets with very large numbers of UTXOs, we can't just\ntake a random subset of them to fund with...\n",
      "created_at" : "2016-02-27T07:25:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7475#issuecomment-189599856",
      "id" : 189599856,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7475",
      "updated_at" : "2016-02-27T07:25:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/189599856",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "@sipa I think this issue is more about the delay caused by flushing the wallet after using a change address for creating the transaction and less about the performance of the coin selection code.",
      "created_at" : "2016-02-27T08:39:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7475#issuecomment-189606220",
      "id" : 189606220,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7475",
      "updated_at" : "2016-02-27T08:39:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/189606220",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=3",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "body" : "yep , I dump and import all customer address private key ...... wallet.dat from 480 MB change to 12 MB(20k plus wallet and split one to send / receive BTC node) ,  and very fast to send BTC now :)\r\n\r\nbut I miss some txid between old and new node (old can be find) , but it's okay , just report my env and many thanx dev team : )",
      "created_at" : "2016-02-27T08:50:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7475#issuecomment-189607719",
      "id" : 189607719,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7475",
      "updated_at" : "2016-02-27T08:51:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/189607719",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/70926?v=3",
         "events_url" : "https://api.github.com/users/JokerCatz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JokerCatz/followers",
         "following_url" : "https://api.github.com/users/JokerCatz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JokerCatz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JokerCatz",
         "id" : 70926,
         "login" : "JokerCatz",
         "organizations_url" : "https://api.github.com/users/JokerCatz/orgs",
         "received_events_url" : "https://api.github.com/users/JokerCatz/received_events",
         "repos_url" : "https://api.github.com/users/JokerCatz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JokerCatz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JokerCatz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JokerCatz"
      }
   },
   {
      "body" : "Flushing wallet take a long time when the wallet is large.\r\nIt seems like BerkeIeyDB lsn_reset function will rewrite the whole `wallet.dat`.\r\nI wonder why we need to call `dbenv->lsn_reset(strFile.c_str(), 0);` in `ThreadFlushWalletDB`.\r\nIs there any concern?\r\nWhy not call `lsn_reset` when shutting down bitcoind or reduce the frenquency. ",
      "created_at" : "2016-06-03T17:37:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7475#issuecomment-223643747",
      "id" : 223643747,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7475",
      "updated_at" : "2016-06-03T17:37:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/223643747",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5877528?v=3",
         "events_url" : "https://api.github.com/users/Jsying/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Jsying/followers",
         "following_url" : "https://api.github.com/users/Jsying/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Jsying/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Jsying",
         "id" : 5877528,
         "login" : "Jsying",
         "organizations_url" : "https://api.github.com/users/Jsying/orgs",
         "received_events_url" : "https://api.github.com/users/Jsying/received_events",
         "repos_url" : "https://api.github.com/users/Jsying/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Jsying/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Jsying/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Jsying"
      }
   },
   {
      "body" : "@Jsying I'm working on significantly improving the wallet performance, but it's going to take some time.",
      "created_at" : "2016-06-03T17:48:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7475#issuecomment-223646564",
      "id" : 223646564,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7475",
      "updated_at" : "2016-06-03T17:48:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/223646564",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/620611?v=3",
         "events_url" : "https://api.github.com/users/pstratem/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pstratem/followers",
         "following_url" : "https://api.github.com/users/pstratem/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pstratem/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pstratem",
         "id" : 620611,
         "login" : "pstratem",
         "organizations_url" : "https://api.github.com/users/pstratem/orgs",
         "received_events_url" : "https://api.github.com/users/pstratem/received_events",
         "repos_url" : "https://api.github.com/users/pstratem/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pstratem/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pstratem/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pstratem"
      }
   },
   {
      "body" : "@GSPP \r\nI have used strace to see the write_bytes before and after flushing db (lsn_reset) and It's seems like it really rewrite the whole wallet.dat\r\nAccording to BDB docs:\r\n> Because database pages contain references to the database environment log records (LSNs), databases cannot be copied or moved from one transactional database environment to another without first clearing the LSNs. Note that this is not a concern for non-transactional database environments and applications, and can be ignored if the database is not being used transactionally.\r\n\r\nand the comment `// Flush wallet file so it's self contained` https://github.com/bitcoin/bitcoin/blob/master/src/wallet/walletdb.cpp#L893\r\n\r\nI guess lsn_reset will rewrite the whole wallet.dat so that it can be moved to other environment.\r\nBut I curious why so frequently...\r\n\r\n@pstratem @sipa \r\nThanks. I am not going to duplicate your works. I just observe the phenomenon and very curious about the reason...",
      "created_at" : "2016-06-05T10:06:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7475#issuecomment-223803583",
      "id" : 223803583,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7475",
      "updated_at" : "2016-06-05T10:06:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/223803583",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5877528?v=3",
         "events_url" : "https://api.github.com/users/Jsying/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Jsying/followers",
         "following_url" : "https://api.github.com/users/Jsying/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Jsying/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Jsying",
         "id" : 5877528,
         "login" : "Jsying",
         "organizations_url" : "https://api.github.com/users/Jsying/orgs",
         "received_events_url" : "https://api.github.com/users/Jsying/received_events",
         "repos_url" : "https://api.github.com/users/Jsying/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Jsying/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Jsying/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Jsying"
      }
   },
   {
      "body" : "@pstratem Can you confirm you thing you fixed this?",
      "created_at" : "2016-07-14T01:51:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7475#issuecomment-232535644",
      "id" : 232535644,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7475",
      "updated_at" : "2016-07-14T01:51:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/232535644",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "@gmaxwell \r\nI've been working my way towards improving wallet performance in general.\r\n\r\nUnfortunately to do so safely requires a number of re-factors on the way the wallet accesses the database.\r\n\r\nThese have been merged:\r\nhttps://github.com/bitcoin/bitcoin/pull/8137\r\nhttps://github.com/bitcoin/bitcoin/pull/8142\r\n\r\nWaiting for this one before doing the final pass:\r\nhttps://github.com/bitcoin/bitcoin/pull/8152",
      "created_at" : "2016-07-14T03:51:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7475#issuecomment-232550165",
      "id" : 232550165,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7475",
      "updated_at" : "2016-07-14T03:51:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/232550165",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/620611?v=3",
         "events_url" : "https://api.github.com/users/pstratem/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pstratem/followers",
         "following_url" : "https://api.github.com/users/pstratem/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pstratem/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pstratem",
         "id" : 620611,
         "login" : "pstratem",
         "organizations_url" : "https://api.github.com/users/pstratem/orgs",
         "received_events_url" : "https://api.github.com/users/pstratem/received_events",
         "repos_url" : "https://api.github.com/users/pstratem/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pstratem/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pstratem/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pstratem"
      }
   }
]
