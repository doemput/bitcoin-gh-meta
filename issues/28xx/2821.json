{
   "assignee" : null,
   "body" : "This seems similar to Issue #2570 even though that is closed.  Interestingly, it still happens in the bitcoin-qt 0.8.3 client, v0.8.3.0-g40809ae-beta version.\r\n\r\nThis was a clean compile from source, running on Gentoo Linux (64-bit).  I compiled this independently of the Gentoo system, so no unusual compiler options or anything like that should have been used.\r\n\r\nI believe it also happens during a block reorganization.  Here is the debug log:\r\n\r\n````\r\nsending: addr (31 bytes)\r\nsending: inv (37 bytes)\r\nreceived: inv (37 bytes)\r\n  got inventory: tx 0a740a5544620f9b89bb14abf077f8624835bbb5ee65e45f319f9c3e5f8ee6c8  have\r\nreceived: addr (31 bytes)\r\nsending: inv (37 bytes)\r\nreceived: inv (37 bytes)\r\n  got inventory: tx 0a740a5544620f9b89bb14abf077f8624835bbb5ee65e45f319f9c3e5f8ee6c8  have\r\nreceived: inv (37 bytes)\r\n  got inventory: tx 0a740a5544620f9b89bb14abf077f8624835bbb5ee65e45f319f9c3e5f8ee6c8  have\r\nsending: inv (73 bytes)\r\nreceived: inv (37 bytes)\r\n  got inventory: block 000000000000001aa6707204b2d1887089a860eceaf8a893a7c2d08dfe6ac525  have\r\nsending: getblocks (965 bytes)\r\nreceived: inv (73 bytes)\r\n  got inventory: tx 53b325cd548867df032b8879a18abd9c1b97638b3a3c380c38cd8546626d36c5  have\r\n  got inventory: tx 0a740a5544620f9b89bb14abf077f8624835bbb5ee65e45f319f9c3e5f8ee6c8  have\r\nreceived: inv (37 bytes)\r\n  got inventory: tx 53b325cd548867df032b8879a18abd9c1b97638b3a3c380c38cd8546626d36c5  have\r\nsending: addr (31 bytes)\r\nsending: inv (73 bytes)\r\nreceived: inv (37 bytes)\r\n  got inventory: block 000000000000000dd0d039cf7c7e006d79a915b0ee76180bb300dc74ed3308a2  new\r\naskfor block 000000000000000dd0d039cf7c7e006d79a915b0ee76180bb300dc74ed3308a2   1373479424000000 (18:03:44)\r\nreceived: inv (37 bytes)\r\n  got inventory: block 000000000000001aa6707204b2d1887089a860eceaf8a893a7c2d08dfe6ac525  have\r\nsending: getblocks (965 bytes)\r\nreceived: getblocks (965 bytes)\r\ngetblocks 194158 to 0000000000000000000000000000000000000000000000000000000000000000 limit 500\r\n  getblocks stopping at limit 194657 00000000000000a13f6a1b564b6ef5bc06067da0374e181f4acf7f3c4d9caf37\r\nsending: inv (18003 bytes)\r\nreceived: inv (73 bytes)\r\n  got inventory: block 000000000000001aa6707204b2d1887089a860eceaf8a893a7c2d08dfe6ac525  have\r\nsending: getblocks (965 bytes)\r\n  got inventory: tx 0a740a5544620f9b89bb14abf077f8624835bbb5ee65e45f319f9c3e5f8ee6c8  have\r\nreceived: inv (37 bytes)\r\n  got inventory: block 000000000000001aa6707204b2d1887089a860eceaf8a893a7c2d08dfe6ac525  have\r\nsending: getblocks (965 bytes)\r\nreceived: block (101786 bytes)\r\nreceived block 000000000000000dd0d039cf7c7e006d79a915b0ee76180bb300dc74ed3308a2\r\nREORGANIZE: Disconnect 1 blocks; 000000000000009fd60babdec39b4e49feb4ec17497c0b341e05beb7e692304a..\r\nREORGANIZE: Connect 2 blocks; ..000000000000001aa6707204b2d1887089a860eceaf8a893a7c2d08dfe6ac525\r\nCommitting 2146 changed transactions to coin database...\r\nERROR: Non-canonical signature: R value negative\r\nERROR: CScriptCheck() : ac0bed4e30581eecf567e9a96ca7b97e5721532b097250c2eb2a5df2c625ad15 VerifySignature failed\r\nERROR: CTxMemPool::accept() : ConnectInputs failed ac0bed4e30581eecf567e9a96ca7b97e5721532b097250c2eb2a5df2c625ad15\r\nERROR: CTxMemPool::accept() : nonstandard transaction type\r\nERROR: Non-canonical signature: R value negative\r\nERROR: CScriptCheck() : 8a25c7ea809620294d5562026133e3a94f1a3ca429579f9280485e50853b5546 VerifySignature failed\r\nERROR: CTxMemPool::accept() : ConnectInputs failed 8a25c7ea809620294d5562026133e3a94f1a3ca429579f9280485e50853b5546\r\nERROR: Non-canonical signature: R value negative\r\nERROR: CScriptCheck() : 5d8bbdfa6f215f7b33bfcb9608e5e6dd739cc563daf0fc0c591edfd73a8d17ae VerifySignature failed\r\nERROR: CTxMemPool::accept() : ConnectInputs failed 5d8bbdfa6f215f7b33bfcb9608e5e6dd739cc563daf0fc0c591edfd73a8d17ae\r\nERROR: CTxMemPool::accept() : nonstandard transaction type\r\nERROR: CTxMemPool::accept() : nonstandard transaction type\r\nERROR: CTxMemPool::accept() : nonstandard transaction type\r\nERROR: CTxMemPool::accept() : inputs already spent\r\nERROR: CTxMemPool::accept() : inputs already spent\r\nERROR: CTxMemPool::accept() : inputs already spent\r\nERROR: CTxMemPool::accept() : inputs already spent\r\nERROR: CTxMemPool::accept() : nonstandard transaction type\r\nERROR: CTxMemPool::accept() : inputs already spent\r\nERROR: CTxMemPool::accept() : inputs already spent\r\nERROR: CTxMemPool::accept() : inputs already spent\r\nERROR: CTxMemPool::accept() : inputs already spent\r\nERROR: Non-canonical signature: S value negative\r\nERROR: CScriptCheck() : 3b33366cf854d9046678fffadde8dac3435431a33c217ee1a25826502a3ef569 VerifySignature failed\r\nERROR: CTxMemPool::accept() : ConnectInputs failed 3b33366cf854d9046678fffadde8dac3435431a33c217ee1a25826502a3ef569\r\nCTxMemPool::accept() : accepted cc4668b4f417e12492b384d22e081843da52875ecb072f2c39efc982a9fa9a4e (poolsz 1304)\r\nSetBestChain: new best=000000000000001aa6707204b2d1887089a860eceaf8a893a7c2d08dfe6ac525  height=245886  log2_work=70.667529  tx=20513801  date=2013-07-10 17:47:29 progress=0.999999\r\nProcessBlock: ACCEPTED\r\nsending: inv (37 bytes)\r\nsending: inv (37 bytes)\r\nsending: inv (37 bytes)\r\nreceived: inv (37 bytes)\r\n  got inventory: tx 0a740a5544620f9b89bb14abf077f8624835bbb5ee65e45f319f9c3e5f8ee6c8  have\r\nreceived: inv (37 bytes)\r\n  got inventory: block 000000000000000dd0d039cf7c7e006d79a915b0ee76180bb300dc74ed3308a2  have\r\nsending: getblocks (965 bytes)\r\nforce request: block 000000000000000dd0d039cf7c7e006d79a915b0ee76180bb300dc74ed3308a2\r\nsending: inv (37 bytes)\r\nsending: inv (73 bytes)\r\nsending: inv (37 bytes)\r\nsending: inv (37 bytes)\r\nreceived: inv (37 bytes)\r\n  got inventory: tx 0a740a5544620f9b89bb14abf077f8624835bbb5ee65e45f319f9c3e5f8ee6c8  have\r\nsending getdata: tx 86a417868917ef04aa7762df4e9d8e8e2d289000e269ebd60787a92f1ab50b25\r\nsending: getdata (37 bytes)\r\nsending: inv (37 bytes)\r\nsending: block (248889 bytes)\r\nsending: block (98904 bytes)\r\nsending: block (113210 bytes)\r\nsending: block (77749 bytes)\r\nsending: block (63716 bytes)\r\nsending: inv (37 bytes)\r\nsending: inv (37 bytes)\r\nsending: inv (37 bytes)\r\nsending: inv (37 bytes)\r\nsending: inv (37 bytes)\r\nsending: inv (37 bytes)\r\nsending: inv (37 bytes)\r\nreceived: inv (37 bytes)\r\n  got inventory: tx 0a740a5544620f9b89bb14abf077f8624835bbb5ee65e45f319f9c3e5f8ee6c8  have\r\nsending: inv (37 bytes)\r\nreceived: inv (37 bytes)\r\n  got inventory: block 000000000000000dd0d039cf7c7e006d79a915b0ee76180bb300dc74ed3308a2  have\r\nsending: getblocks (965 bytes)\r\nforce request: block 000000000000000dd0d039cf7c7e006d79a915b0ee76180bb300dc74ed3308a2\r\nERROR: mempool transaction missing input\r\nbitcoin-qt: src/main.cpp:4251: CBlockTemplate* CreateNewBlock(CReserveKey&): Assertion `\"mempool transaction missing input\" == 0' failed.\r\n````\r\n\r\nAfter this, I restarted the client again, and it came right back up and running without incident.\r\n\r\nJosh\r\n",
   "closed_at" : "2016-02-16T17:27:57Z",
   "closed_by" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
      "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
      "followers_url" : "https://api.github.com/users/laanwj/followers",
      "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/laanwj",
      "id" : 126646,
      "login" : "laanwj",
      "organizations_url" : "https://api.github.com/users/laanwj/orgs",
      "received_events_url" : "https://api.github.com/users/laanwj/received_events",
      "repos_url" : "https://api.github.com/users/laanwj/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/laanwj"
   },
   "comments" : 1,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2821/comments",
   "created_at" : "2013-07-10T18:40:01Z",
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2821/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/issues/2821",
   "id" : 16593382,
   "labels" : [
      {
         "color" : "FBBAAB",
         "name" : "Bug",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/Bug"
      }
   ],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2821/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "number" : 2821,
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "closed",
   "title" : "Assertion mempool transaction missing input",
   "updated_at" : "2016-02-16T17:27:57Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2821",
   "user" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/4563817?v=3",
      "events_url" : "https://api.github.com/users/Krellan/events{/privacy}",
      "followers_url" : "https://api.github.com/users/Krellan/followers",
      "following_url" : "https://api.github.com/users/Krellan/following{/other_user}",
      "gists_url" : "https://api.github.com/users/Krellan/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/Krellan",
      "id" : 4563817,
      "login" : "Krellan",
      "organizations_url" : "https://api.github.com/users/Krellan/orgs",
      "received_events_url" : "https://api.github.com/users/Krellan/received_events",
      "repos_url" : "https://api.github.com/users/Krellan/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/Krellan/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/Krellan/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/Krellan"
   }
}
