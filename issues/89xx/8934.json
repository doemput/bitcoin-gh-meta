{
   "assignee" : null,
   "assignees" : [],
   "body" : "Running latest master (with some debug tweaks). My node is sending headers to a peer, but when the peer asks for the blocks, they do not send due to historical block limiting. Ideally the block invs  should not have been sent, which triggered the request for the headers....? \r\n\r\ndebug.log extract:-\r\n\r\n2016-10-17 02:18:43 recv version: /Satoshi:0.12.1/: version 70012, blocks=427842, relay=1, services=00000005 us=4u6qerer3ra2ag2z.onion:8333, them=127.0.0.1:50691, peer=573\r\n2016-10-17 02:19:12 send inv block 0000000000000000024ab1ddba71eee85ca86dfd0b4b34fd69403f1508ba4770 (434646) peer=573\r\n2016-10-17 02:24:13 send inv block 00000000000000000099d92a3e8889a7c898325e91b6de75c104fe36e6a941cd (434647) peer=573\r\n2016-10-17 02:24:53 recv getheaders to end. send 5 headers (height 434643 to 434647) peer=573\r\n2016-10-17 02:24:53 recv getheaders to 0000000000000000024ab1ddba71eee85ca86dfd0b4b34fd69403f1508ba4770. send 3 headers (height 434644 to 434646) peer=573\r\n2016-10-17 02:24:53 recv getheaders to 00000000000000000099d92a3e8889a7c898325e91b6de75c104fe36e6a941cd. send 4 headers (height 434644 to 434647) peer=573\r\n2016-10-17 02:24:53 historical block serving limit reached, disconnect peer=573\r\n\r\nworking on a fix.",
   "closed_at" : "2016-10-17T03:17:53Z",
   "closed_by" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/1530283?v=3",
      "events_url" : "https://api.github.com/users/rebroad/events{/privacy}",
      "followers_url" : "https://api.github.com/users/rebroad/followers",
      "following_url" : "https://api.github.com/users/rebroad/following{/other_user}",
      "gists_url" : "https://api.github.com/users/rebroad/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/rebroad",
      "id" : 1530283,
      "login" : "rebroad",
      "organizations_url" : "https://api.github.com/users/rebroad/orgs",
      "received_events_url" : "https://api.github.com/users/rebroad/received_events",
      "repos_url" : "https://api.github.com/users/rebroad/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/rebroad/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/rebroad/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/rebroad"
   },
   "comments" : 2,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8934/comments",
   "created_at" : "2016-10-17T03:00:28Z",
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8934/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/issues/8934",
   "id" : 183315115,
   "labels" : [],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8934/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "number" : 8934,
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "closed",
   "title" : "block teasing",
   "updated_at" : "2016-10-17T03:20:11Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8934",
   "user" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/1530283?v=3",
      "events_url" : "https://api.github.com/users/rebroad/events{/privacy}",
      "followers_url" : "https://api.github.com/users/rebroad/followers",
      "following_url" : "https://api.github.com/users/rebroad/following{/other_user}",
      "gists_url" : "https://api.github.com/users/rebroad/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/rebroad",
      "id" : 1530283,
      "login" : "rebroad",
      "organizations_url" : "https://api.github.com/users/rebroad/orgs",
      "received_events_url" : "https://api.github.com/users/rebroad/received_events",
      "repos_url" : "https://api.github.com/users/rebroad/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/rebroad/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/rebroad/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/rebroad"
   }
}
