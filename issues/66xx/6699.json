{
   "assignee" : null,
   "body" : "In before: this is all new territory for me, so I'll just describe what I think that might be relevant.\r\n\r\nI'm [experimenting](https://github.com/bitcoinj/bitcoinj/compare/c2a67aaa59c04b0287de38050dcb14db1c40ed1a...dexX7:2e77ad276adbe3cb7c213d6bee1954cbd18b153c) with BitcoinJ and libbitcoinconsensus.\r\n\r\nWhen using the compiled libbitcoinconsensus of the 0.11 release/Gitian build, it seems to work as expected, and the BitcoinJ tests (`mvn test`) pass. \r\n\r\nHowever, when I use a locally build library, based on the current master (d5d1d2e65a1c3b91452d2428410f701bca1e53cc), then there seems to be some kind of conflict, and the tests break, followed by a core dump:\r\n\r\n```\r\nTests run: 5, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.002 sec - in org.bitcoinj.core.DumpedPrivateKeyTest\r\nRunning org.bitcoinj.core.ECKeyTest\r\n#\r\n# A fatal error has been detected by the Java Runtime Environment:\r\n#\r\nSUREFIRE-859: #  SIGSEGV (0xb) at pc=0x00007f7d9c823d17, pid=16103, tid=140177711195904\r\n#\r\n# JRE version: Java(TM) SE Runtime Environment (7.0_80-b15) (build 1.7.0_80-b15)\r\n# Java VM: Java HotSpot(TM) 64-Bit Server VM (24.80-b11 mixed mode linux-amd64 compressed oops)\r\n# Problematic frame:\r\n# C  [libcrypto.so.1.0.0+0x67d17]  SHA256_Update+0x157\r\n#\r\n# Core dump written. Default location: /home/dexx/Projects/Java/bitcoinj/core/core or core.16103\r\n#\r\n# An error report file with more information is saved as:\r\n# /home/dexx/Projects/Java/bitcoinj/core/hs_err_pid16103.log\r\n#\r\nSUREFIRE-859: # If you would like to submit a bug report, please visit:\r\n#   http://bugreport.java.com/bugreport/crash.jsp\r\n# The crash happened outside the Java Virtual Machine in native code.\r\n# See problematic frame for where to report the bug.\r\n#\r\nAborted (core dumped)\r\n```\r\n\r\nFull error report: http://pastebin.com/raw.php?i=ycUcKdM0\r\n\r\nThis also happens, when I use the 0.10 branch.\r\n\r\nBitcoinJ currently uses [Spongy Castle 1.51](http://mvnrepository.com/artifact/com.madgag.spongycastle/core/1.51.0.0), which is a stripped down version of Bouncy Castle.\r\n\r\nI assume this might be related to the OpenSSL version I currently use:\r\n```\r\n$ openssl version -a\r\nOpenSSL 1.0.1f 6 Jan 2014\r\nbuilt on: Thu Jun 11 15:26:38 UTC 2015\r\nplatform: debian-amd64\r\noptions:  bn(64,64) rc4(16x,int) des(idx,cisc,16,int) blowfish(idx) \r\ncompiler: cc -fPIC -DOPENSSL_PIC -DOPENSSL_THREADS -D_REENTRANT -DDSO_DLFCN -DHAVE_DLFCN_H -m64 -DL_ENDIAN -DTERMIO -g -O2 -fstack-protector-strong -Wformat -Werror=format-security -D_FORTIFY_SOURCE=2 -Wl,-Bsymbolic-functions -Wl,-z,relro -Wa,--noexecstack -Wall -DMD32_REG_T=int -DOPENSSL_IA32_SSE2 -DOPENSSL_BN_ASM_MONT -DOPENSSL_BN_ASM_MONT5 -DOPENSSL_BN_ASM_GF2m -DSHA1_ASM -DSHA256_ASM -DSHA512_ASM -DMD5_ASM -DAES_ASM -DVPAES_ASM -DBSAES_ASM -DWHIRLPOOL_ASM -DGHASH_ASM\r\nOPENSSLDIR: \"/usr/lib/ssl\"\r\n```\r\nOn:\r\n```\r\n$ lsb_release -a\r\nNo LSB modules are available.\r\nDistributor ID:\tUbuntu\r\nDescription:\tUbuntu 14.10\r\nRelease:\t14.10\r\nCodename:\tutopic\r\n```\r\n\r\nIf this is indeed related to OpenSSL, and basically out of scope of Bitcoin Core, then I'm wondering, whether there might be a check during the build process, to reject incompatible versions.",
   "closed_at" : "2015-11-18T14:48:21Z",
   "closed_by" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/5836089?v=3",
      "events_url" : "https://api.github.com/users/dexX7/events{/privacy}",
      "followers_url" : "https://api.github.com/users/dexX7/followers",
      "following_url" : "https://api.github.com/users/dexX7/following{/other_user}",
      "gists_url" : "https://api.github.com/users/dexX7/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/dexX7",
      "id" : 5836089,
      "login" : "dexX7",
      "organizations_url" : "https://api.github.com/users/dexX7/orgs",
      "received_events_url" : "https://api.github.com/users/dexX7/received_events",
      "repos_url" : "https://api.github.com/users/dexX7/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/dexX7/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/dexX7/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/dexX7"
   },
   "comments" : 13,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6699/comments",
   "created_at" : "2015-09-19T10:13:04Z",
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6699/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/issues/6699",
   "id" : 107323097,
   "labels" : [
      {
         "color" : "5319e7",
         "name" : "Build system",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/Build%20system"
      }
   ],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6699/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "number" : 6699,
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "closed",
   "title" : "libbitcoinconsensus issue with libcrypto.so.1.0.0 and spongycastle",
   "updated_at" : "2015-11-19T17:44:25Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6699",
   "user" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/5836089?v=3",
      "events_url" : "https://api.github.com/users/dexX7/events{/privacy}",
      "followers_url" : "https://api.github.com/users/dexX7/followers",
      "following_url" : "https://api.github.com/users/dexX7/following{/other_user}",
      "gists_url" : "https://api.github.com/users/dexX7/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/dexX7",
      "id" : 5836089,
      "login" : "dexX7",
      "organizations_url" : "https://api.github.com/users/dexX7/orgs",
      "received_events_url" : "https://api.github.com/users/dexX7/received_events",
      "repos_url" : "https://api.github.com/users/dexX7/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/dexX7/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/dexX7/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/dexX7"
   }
}
