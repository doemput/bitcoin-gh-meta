{
   "assignee" : null,
   "body" : "OpenDiskFile was always opening files in \"rb+\" mode (read-write binary), and if that failed and fReadOnly was false, trying to truncate the file. Truncate would always fail (AFAIK) unless a race condition set the file read-write between the two attempts.\n\nThis changes it to actually honour fReadOnly. The truncate race ''is not'' fixed, and cannot easily be fixed (fopen lacks a \"open read-write, random access, but don't truncate\" mode).\nIf we want to actually try truncating in !fReadOnly mode, I'm pretty sure we need to unlink first.\n\nThis bug was introduced as part of ultraprune, so does not affect any released versions.",
   "closed_at" : "2013-01-30T16:54:34Z",
   "closed_by" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
      "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
      "followers_url" : "https://api.github.com/users/luke-jr/followers",
      "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
      "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/luke-jr",
      "id" : 1095675,
      "login" : "luke-jr",
      "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
      "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
      "repos_url" : "https://api.github.com/users/luke-jr/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/luke-jr"
   },
   "comments" : 5,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2042/comments",
   "created_at" : "2012-11-26T21:48:52Z",
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2042/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/pull/2042",
   "id" : 8695636,
   "labels" : [],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2042/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "number" : 2042,
   "pull_request" : {
      "diff_url" : "https://github.com/bitcoin/bitcoin/pull/2042.diff",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2042",
      "patch_url" : "https://github.com/bitcoin/bitcoin/pull/2042.patch",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/2042"
   },
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "closed",
   "title" : "Fix OpenDiskFile's fReadOnly flag to work, as well as other problems importing read-only block files",
   "updated_at" : "2014-07-12T18:24:53Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2042",
   "user" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
      "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
      "followers_url" : "https://api.github.com/users/luke-jr/followers",
      "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
      "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/luke-jr",
      "id" : 1095675,
      "login" : "luke-jr",
      "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
      "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
      "repos_url" : "https://api.github.com/users/luke-jr/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/luke-jr"
   }
}
