{
   "assignee" : null,
   "body" : "This is a two-patch patch against 0.3.24 (since master has a lot of churn in rpc.cpp and I don't want to do all the work merging until I know that this patch has community support).\r\n\r\nThe first commit adds RPC versioning support.  As things need to be changed, older clients still need to be supported in some way.  This has been done by taking a numeric token from the URL and using that to determine the version.  So if the API is accessed at `http://localhost:8332/` then it will use version 0.  If `http://localhost:8332/bitcoin.v1` then it will use version 1.  And of course, `http://localhost:8332/bitcoin.v2` would be version 2.  For the purposes of versioning, I am declaring versions 0 and 1 identical, to avoid confusion.\r\n\r\nThe second commit does two things:\r\n\r\n1. Instead of requiring a JSON number, BTC amounts may now be sent as strings.\r\n2. If the service is accessed using version 2 or higher, BTC amounts will be returned as strings instead of numbers.\r\n\r\nThis is an important change, because not all JSON libraries store numbers in a format with 16 decimal digits of precision.  I've tested, and when I set bitcoind's paytxfee setting to 10000000.00000001, Python is unable to handle this many significant digits; it represents the number as 10000000.000000009.  While not off by much, it does seem to indicate that representing amounts as pure numbers in JSON data may cause some clients to have accuracy issues.\r\n\r\nBy taking the amounts directly from int64s to strings, the client is free to convert the values to whatever high-precision format it wants (like the `Decimal` type in Python).\r\n\r\nHowever, while many languages will convert strings to numbers automatically, many will not, so this change won't be backwards-compatible; hence the new API versioning feature.\r\n\r\nHere are the effects of this branch, using Python:\r\n\r\n    >>> bitcoindv0 = jsonrpclib.Server(\"http://chris:testing@localhost:8332/\")\r\n    >>> bitcoindv1 = jsonrpclib.Server(\"http://chris:testing@localhost:8332/bitcoin.v1\")\r\n    >>> bitcoindv2 = jsonrpclib.Server(\"http://chris:testing@localhost:8332/bitcoin.v2\")\r\n    >>> bitcoindv0.getinfo()[u'balance'];\r\n    0.10000000000000001\r\n    >>> bitcoindv1.getinfo()[u'balance'];\r\n    0.10000000000000001\r\n    >>> bitcoindv2.getinfo()[u'balance'];\r\n    u'0.10000000'",
   "closed_at" : "2011-10-12T21:22:59Z",
   "closed_by" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/331997?v=3",
      "events_url" : "https://api.github.com/users/gavinandresen/events{/privacy}",
      "followers_url" : "https://api.github.com/users/gavinandresen/followers",
      "following_url" : "https://api.github.com/users/gavinandresen/following{/other_user}",
      "gists_url" : "https://api.github.com/users/gavinandresen/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/gavinandresen",
      "id" : 331997,
      "login" : "gavinandresen",
      "organizations_url" : "https://api.github.com/users/gavinandresen/orgs",
      "received_events_url" : "https://api.github.com/users/gavinandresen/received_events",
      "repos_url" : "https://api.github.com/users/gavinandresen/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/gavinandresen/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/gavinandresen/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/gavinandresen"
   },
   "comments" : 13,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/431/comments",
   "created_at" : "2011-07-26T03:23:10Z",
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/431/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/pull/431",
   "id" : 1286332,
   "labels" : [
      {
         "color" : "7cf575",
         "name" : "Feature",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/Feature"
      },
      {
         "color" : "ededed",
         "name" : "Priority Low",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/Priority%20Low"
      }
   ],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/431/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "number" : 431,
   "pull_request" : {
      "diff_url" : "https://github.com/bitcoin/bitcoin/pull/431.diff",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/431",
      "patch_url" : "https://github.com/bitcoin/bitcoin/pull/431.patch",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/431"
   },
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "closed",
   "title" : "API versioning; represent and accept amounts as strings",
   "updated_at" : "2014-07-15T05:31:11Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/431",
   "user" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/354641?v=3",
      "events_url" : "https://api.github.com/users/cdhowie/events{/privacy}",
      "followers_url" : "https://api.github.com/users/cdhowie/followers",
      "following_url" : "https://api.github.com/users/cdhowie/following{/other_user}",
      "gists_url" : "https://api.github.com/users/cdhowie/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/cdhowie",
      "id" : 354641,
      "login" : "cdhowie",
      "organizations_url" : "https://api.github.com/users/cdhowie/orgs",
      "received_events_url" : "https://api.github.com/users/cdhowie/received_events",
      "repos_url" : "https://api.github.com/users/cdhowie/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/cdhowie/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/cdhowie/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/cdhowie"
   }
}
