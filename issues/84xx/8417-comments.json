[
   {
      "body" : "Fixes https://github.com/bitcoin/bitcoin/issues/8410",
      "created_at" : "2016-07-28T13:07:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8417#issuecomment-235888988",
      "id" : 235888988,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8417",
      "updated_at" : "2016-07-28T13:07:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/235888988",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "Thanks for adding helpful comments!\n\nLooks good utACK 54af51d98d0b38f08c58dd589bff81883aee2854\n\nOn Thu, Jul 28, 2016 at 3:07 PM, Jonas Schnelli <notifications@github.com>\nwrote:\n\n> Fixes #8410 <https://github.com/bitcoin/bitcoin/issues/8410>\n>\n> Ã¢ÂÂ\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/bitcoin/bitcoin/pull/8417#issuecomment-235888988>, or mute\n> the thread\n> <https://github.com/notifications/unsubscribe-auth/AGGmv4IYRv6WKzvpt7bGCNrIuD9M8rNoks5qaKmtgaJpZM4JXMQj>\n> .\n>\n",
      "created_at" : "2016-07-28T13:15:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8417#issuecomment-235890956",
      "id" : 235890956,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8417",
      "updated_at" : "2016-07-28T13:15:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/235890956",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=3",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "body" : "Thanks, a test for this is very welcome, test code looks good to me\r\nutACK 54af51d",
      "created_at" : "2016-07-29T15:39:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8417#issuecomment-236214704",
      "id" : 236214704,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8417",
      "updated_at" : "2016-07-29T15:39:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/236214704",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/8417#discussion_r72957452"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/8417"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/72957452"
         }
      },
      "body" : "Unused import",
      "commit_id" : "54af51d98d0b38f08c58dd589bff81883aee2854",
      "created_at" : "2016-08-01T10:40:07Z",
      "diff_hunk" : "@@ -0,0 +1,120 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2016 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import *\n+import os\n+import shutil",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8417#discussion_r72957452",
      "id" : 72957452,
      "original_commit_id" : "54af51d98d0b38f08c58dd589bff81883aee2854",
      "original_position" : 9,
      "path" : "qa/rpc-tests/wallet-dump.py",
      "position" : 9,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/8417",
      "updated_at" : "2016-08-01T10:40:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/72957452",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=3",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/8417#discussion_r72957532"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/8417"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/72957532"
         }
      },
      "body" : "No need to duplicate this huge for loop",
      "commit_id" : "54af51d98d0b38f08c58dd589bff81883aee2854",
      "created_at" : "2016-08-01T10:40:48Z",
      "diff_hunk" : "@@ -0,0 +1,120 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2016 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import *\n+import os\n+import shutil\n+\n+\n+class WalletDumpTest(BitcoinTestFramework):\n+\n+    def __init__(self):\n+        super().__init__()\n+        self.setup_clean_chain = False\n+        self.num_nodes = 1\n+\n+    def setup_network(self, split=False):\n+        extra_args = [[\"-keypool=100\"]]\n+        self.nodes = start_nodes(self.num_nodes, self.options.tmpdir, extra_args)\n+\n+    def run_test (self):\n+        tmpdir = self.options.tmpdir\n+\n+        #generate 20 addresses to compare against the dump\n+        test_addr_count = 20\n+        addrs = []\n+        for i in range(0,test_addr_count):\n+            addr = self.nodes[0].getnewaddress()\n+            vaddr= self.nodes[0].validateaddress(addr) #required to get hd keypath\n+            addrs.append(vaddr)\n+\n+        # dump unencrypted wallet\n+        self.nodes[0].dumpwallet(tmpdir + \"/node0/wallet.unencrypted.dump\")\n+\n+        #open file\n+        inputfile = open(tmpdir + \"/node0/wallet.unencrypted.dump\")\n+        found_addr = 0\n+        found_addr_chg = 0\n+        found_addr_rsv = 0\n+        hdmasteraddr = \"\"\n+        for line in inputfile:",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8417#discussion_r72957532",
      "id" : 72957532,
      "original_commit_id" : "54af51d98d0b38f08c58dd589bff81883aee2854",
      "original_position" : 43,
      "path" : "qa/rpc-tests/wallet-dump.py",
      "position" : 43,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/8417",
      "updated_at" : "2016-08-01T10:40:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/72957532",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=3",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/8417#discussion_r72957676"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/8417"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/72957676"
         }
      },
      "body" : "Please use `assert_equal`, otherwise it is harder to track down when an issue arises",
      "commit_id" : "54af51d98d0b38f08c58dd589bff81883aee2854",
      "created_at" : "2016-08-01T10:41:22Z",
      "diff_hunk" : "@@ -0,0 +1,120 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2016 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import *\n+import os\n+import shutil\n+\n+\n+class WalletDumpTest(BitcoinTestFramework):\n+\n+    def __init__(self):\n+        super().__init__()\n+        self.setup_clean_chain = False\n+        self.num_nodes = 1\n+\n+    def setup_network(self, split=False):\n+        extra_args = [[\"-keypool=100\"]]\n+        self.nodes = start_nodes(self.num_nodes, self.options.tmpdir, extra_args)\n+\n+    def run_test (self):\n+        tmpdir = self.options.tmpdir\n+\n+        #generate 20 addresses to compare against the dump\n+        test_addr_count = 20\n+        addrs = []\n+        for i in range(0,test_addr_count):\n+            addr = self.nodes[0].getnewaddress()\n+            vaddr= self.nodes[0].validateaddress(addr) #required to get hd keypath\n+            addrs.append(vaddr)\n+\n+        # dump unencrypted wallet\n+        self.nodes[0].dumpwallet(tmpdir + \"/node0/wallet.unencrypted.dump\")\n+\n+        #open file\n+        inputfile = open(tmpdir + \"/node0/wallet.unencrypted.dump\")\n+        found_addr = 0\n+        found_addr_chg = 0\n+        found_addr_rsv = 0\n+        hdmasteraddr = \"\"\n+        for line in inputfile:\n+            #only read non comment lines\n+            if line[0] != \"#\" and len(line) > 10:\n+                #split out some data\n+                keyLabel, comment = line.split(\"#\")\n+                key = keyLabel.split(\" \")[0]\n+                keytype = keyLabel.split(\" \")[2]\n+                if len(comment) > 1:\n+                    addrKeypath = comment.split(\" addr=\")[1]\n+                    addr = addrKeypath.split(\" \")[0]\n+                    keypath = \"\"\n+                    if keytype != \"hdmaster=1\":\n+                        keypath = addrKeypath.rstrip().split(\"hdkeypath=\")[1]\n+                    else:\n+                        #keep hd master for later comp.\n+                        hdmasteraddr = addr\n+\n+                    #count key types\n+                    for addrObj in addrs:\n+                        if (addrObj['address'] == addr and addrObj['hdkeypath'] == keypath and keytype == \"label=\"):\n+                            found_addr+=1\n+                            break\n+                        elif (keytype == \"change=1\"):\n+                            found_addr_chg+=1\n+                            break\n+                        elif (keytype == \"reserve=1\"):\n+                            found_addr_rsv+=1\n+                            break\n+        assert(found_addr == test_addr_count) #all keys must be in the dump\n+        assert(found_addr_chg == 50) #50 blocks where mined\n+        assert(found_addr_rsv == 100) #100 reserve keys (keypool)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8417#discussion_r72957676",
      "id" : 72957676,
      "original_commit_id" : "54af51d98d0b38f08c58dd589bff81883aee2854",
      "original_position" : 73,
      "path" : "qa/rpc-tests/wallet-dump.py",
      "position" : 73,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/8417",
      "updated_at" : "2016-08-01T10:41:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/72957676",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=3",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/8417#discussion_r72957897"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/8417"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/72957897"
         }
      },
      "body" : "You are starting with the default keypool of `1` (for the test framework). This may cause issues in the future.",
      "commit_id" : "54af51d98d0b38f08c58dd589bff81883aee2854",
      "created_at" : "2016-08-01T10:42:43Z",
      "diff_hunk" : "@@ -0,0 +1,120 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2016 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import *\n+import os\n+import shutil\n+\n+\n+class WalletDumpTest(BitcoinTestFramework):\n+\n+    def __init__(self):\n+        super().__init__()\n+        self.setup_clean_chain = False\n+        self.num_nodes = 1\n+\n+    def setup_network(self, split=False):\n+        extra_args = [[\"-keypool=100\"]]\n+        self.nodes = start_nodes(self.num_nodes, self.options.tmpdir, extra_args)\n+\n+    def run_test (self):\n+        tmpdir = self.options.tmpdir\n+\n+        #generate 20 addresses to compare against the dump\n+        test_addr_count = 20\n+        addrs = []\n+        for i in range(0,test_addr_count):\n+            addr = self.nodes[0].getnewaddress()\n+            vaddr= self.nodes[0].validateaddress(addr) #required to get hd keypath\n+            addrs.append(vaddr)\n+\n+        # dump unencrypted wallet\n+        self.nodes[0].dumpwallet(tmpdir + \"/node0/wallet.unencrypted.dump\")\n+\n+        #open file\n+        inputfile = open(tmpdir + \"/node0/wallet.unencrypted.dump\")\n+        found_addr = 0\n+        found_addr_chg = 0\n+        found_addr_rsv = 0\n+        hdmasteraddr = \"\"\n+        for line in inputfile:\n+            #only read non comment lines\n+            if line[0] != \"#\" and len(line) > 10:\n+                #split out some data\n+                keyLabel, comment = line.split(\"#\")\n+                key = keyLabel.split(\" \")[0]\n+                keytype = keyLabel.split(\" \")[2]\n+                if len(comment) > 1:\n+                    addrKeypath = comment.split(\" addr=\")[1]\n+                    addr = addrKeypath.split(\" \")[0]\n+                    keypath = \"\"\n+                    if keytype != \"hdmaster=1\":\n+                        keypath = addrKeypath.rstrip().split(\"hdkeypath=\")[1]\n+                    else:\n+                        #keep hd master for later comp.\n+                        hdmasteraddr = addr\n+\n+                    #count key types\n+                    for addrObj in addrs:\n+                        if (addrObj['address'] == addr and addrObj['hdkeypath'] == keypath and keytype == \"label=\"):\n+                            found_addr+=1\n+                            break\n+                        elif (keytype == \"change=1\"):\n+                            found_addr_chg+=1\n+                            break\n+                        elif (keytype == \"reserve=1\"):\n+                            found_addr_rsv+=1\n+                            break\n+        assert(found_addr == test_addr_count) #all keys must be in the dump\n+        assert(found_addr_chg == 50) #50 blocks where mined\n+        assert(found_addr_rsv == 100) #100 reserve keys (keypool)\n+\n+        #encrypt wallet, restart, unlock and dump\n+        self.nodes[0].encryptwallet('test')\n+        bitcoind_processes[0].wait()\n+        self.nodes[0] = start_node(0, self.options.tmpdir)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8417#discussion_r72957897",
      "id" : 72957897,
      "original_commit_id" : "54af51d98d0b38f08c58dd589bff81883aee2854",
      "original_position" : 78,
      "path" : "qa/rpc-tests/wallet-dump.py",
      "position" : 78,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/8417",
      "updated_at" : "2016-08-01T10:42:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/72957897",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=3",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/8417#discussion_r72957937"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/8417"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/72957937"
         }
      },
      "body" : "Nit: `use_lowercase_and_underscore`",
      "commit_id" : "54af51d98d0b38f08c58dd589bff81883aee2854",
      "created_at" : "2016-08-01T10:43:08Z",
      "diff_hunk" : "@@ -0,0 +1,120 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2016 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import *\n+import os\n+import shutil\n+\n+\n+class WalletDumpTest(BitcoinTestFramework):\n+\n+    def __init__(self):\n+        super().__init__()\n+        self.setup_clean_chain = False\n+        self.num_nodes = 1\n+\n+    def setup_network(self, split=False):\n+        extra_args = [[\"-keypool=100\"]]\n+        self.nodes = start_nodes(self.num_nodes, self.options.tmpdir, extra_args)\n+\n+    def run_test (self):\n+        tmpdir = self.options.tmpdir\n+\n+        #generate 20 addresses to compare against the dump\n+        test_addr_count = 20\n+        addrs = []\n+        for i in range(0,test_addr_count):\n+            addr = self.nodes[0].getnewaddress()\n+            vaddr= self.nodes[0].validateaddress(addr) #required to get hd keypath\n+            addrs.append(vaddr)\n+\n+        # dump unencrypted wallet\n+        self.nodes[0].dumpwallet(tmpdir + \"/node0/wallet.unencrypted.dump\")\n+\n+        #open file\n+        inputfile = open(tmpdir + \"/node0/wallet.unencrypted.dump\")\n+        found_addr = 0\n+        found_addr_chg = 0\n+        found_addr_rsv = 0\n+        hdmasteraddr = \"\"\n+        for line in inputfile:\n+            #only read non comment lines\n+            if line[0] != \"#\" and len(line) > 10:\n+                #split out some data\n+                keyLabel, comment = line.split(\"#\")\n+                key = keyLabel.split(\" \")[0]\n+                keytype = keyLabel.split(\" \")[2]",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8417#discussion_r72957937",
      "id" : 72957937,
      "original_commit_id" : "54af51d98d0b38f08c58dd589bff81883aee2854",
      "original_position" : 49,
      "path" : "qa/rpc-tests/wallet-dump.py",
      "position" : 49,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/8417",
      "updated_at" : "2016-08-01T10:43:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/72957937",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=3",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/8417#discussion_r72957977"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/8417"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/72957977"
         }
      },
      "body" : "Unused variable",
      "commit_id" : "54af51d98d0b38f08c58dd589bff81883aee2854",
      "created_at" : "2016-08-01T10:43:24Z",
      "diff_hunk" : "@@ -0,0 +1,120 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2016 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import *\n+import os\n+import shutil\n+\n+\n+class WalletDumpTest(BitcoinTestFramework):\n+\n+    def __init__(self):\n+        super().__init__()\n+        self.setup_clean_chain = False\n+        self.num_nodes = 1\n+\n+    def setup_network(self, split=False):\n+        extra_args = [[\"-keypool=100\"]]\n+        self.nodes = start_nodes(self.num_nodes, self.options.tmpdir, extra_args)\n+\n+    def run_test (self):\n+        tmpdir = self.options.tmpdir\n+\n+        #generate 20 addresses to compare against the dump\n+        test_addr_count = 20\n+        addrs = []\n+        for i in range(0,test_addr_count):\n+            addr = self.nodes[0].getnewaddress()\n+            vaddr= self.nodes[0].validateaddress(addr) #required to get hd keypath\n+            addrs.append(vaddr)\n+\n+        # dump unencrypted wallet\n+        self.nodes[0].dumpwallet(tmpdir + \"/node0/wallet.unencrypted.dump\")\n+\n+        #open file\n+        inputfile = open(tmpdir + \"/node0/wallet.unencrypted.dump\")\n+        found_addr = 0\n+        found_addr_chg = 0\n+        found_addr_rsv = 0\n+        hdmasteraddr = \"\"\n+        for line in inputfile:\n+            #only read non comment lines\n+            if line[0] != \"#\" and len(line) > 10:\n+                #split out some data\n+                keyLabel, comment = line.split(\"#\")\n+                key = keyLabel.split(\" \")[0]",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8417#discussion_r72957977",
      "id" : 72957977,
      "original_commit_id" : "54af51d98d0b38f08c58dd589bff81883aee2854",
      "original_position" : 48,
      "path" : "qa/rpc-tests/wallet-dump.py",
      "position" : 48,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/8417",
      "updated_at" : "2016-08-01T10:43:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/72957977",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=3",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "body" : "Sorry for the delayed feedback. I will try to create another pull to address those.",
      "created_at" : "2016-08-01T10:43:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8417#issuecomment-236548164",
      "id" : 236548164,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8417",
      "updated_at" : "2016-08-01T10:43:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/236548164",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=3",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   }
]
