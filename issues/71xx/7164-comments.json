[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7164#discussion_r46555484"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7164"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/46555484"
         }
      },
      "body" : "No need to check IsInitialBlockDownload() every iteration of the while loop.\r\n",
      "commit_id" : "39a525c21fd1b34df63ab30868423b97b708ee49",
      "created_at" : "2015-12-03T14:18:43Z",
      "diff_hunk" : "@@ -5653,7 +5653,7 @@ bool SendMessages(CNode* pto, bool fSendTrickle)\n         //\n         // Message: getdata (non-blocks)\n         //\n-        while (!pto->fDisconnect && !pto->mapAskFor.empty() && (*pto->mapAskFor.begin()).first <= nNow)\n+        while (!pto->fDisconnect && !pto->mapAskFor.empty() && (*pto->mapAskFor.begin()).first <= nNow && !IsInitialBlockDownload())",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7164#discussion_r46555484",
      "id" : 46555484,
      "original_commit_id" : "bdfdce1f2a92e4018d13a9646d0b672a860e6591",
      "original_position" : 14,
      "path" : "src/main.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7164",
      "updated_at" : "2015-12-15T15:42:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/46555484",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Despite not liking how more and more depends on IsInitialBlockDownload(), I think this makes sense. Downloading transactions during initial sync just gets a long list of \"Rejected: Non-final\" and wastes bandwidth and verification overhead.\r\n",
      "created_at" : "2015-12-03T14:50:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7164#issuecomment-161661818",
      "id" : 161661818,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7164",
      "updated_at" : "2015-12-03T15:02:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/161661818",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7164#discussion_r46559844"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7164"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/46559844"
         }
      },
      "body" : "made the change and pushed.\n\nOn 03/12/2015 6:19 AM, Wladimir J. van der Laan wrote:\n>\n> In src/main.cpp\n> <https://github.com/bitcoin/bitcoin/pull/7164#discussion_r46555484>:\n>\n> > @@ -5653,7 +5653,7 @@ bool SendMessages(CNode* pto, bool fSendTrickle)\n> >          //\n> >          // Message: getdata (non-blocks)\n> >          //\n> > -        while (!pto->fDisconnect && !pto->mapAskFor.empty() && (*pto->mapAskFor.begin()).first <= nNow)\n> > +        while (!pto->fDisconnect && !pto->mapAskFor.empty() && (*pto->mapAskFor.begin()).first <= nNow && !IsInitialBlockDownload())\n>\n> No need to check IsInitialBlockDownload() every iteration of the while\n> loop.\n>\n> Ã¢ÂÂ\n> Reply to this email directly or view it on GitHub\n> <https://github.com/bitcoin/bitcoin/pull/7164/files#r46555484>.\n>\n\n",
      "commit_id" : "39a525c21fd1b34df63ab30868423b97b708ee49",
      "created_at" : "2015-12-03T14:51:49Z",
      "diff_hunk" : "@@ -5653,7 +5653,7 @@ bool SendMessages(CNode* pto, bool fSendTrickle)\n         //\n         // Message: getdata (non-blocks)\n         //\n-        while (!pto->fDisconnect && !pto->mapAskFor.empty() && (*pto->mapAskFor.begin()).first <= nNow)\n+        while (!pto->fDisconnect && !pto->mapAskFor.empty() && (*pto->mapAskFor.begin()).first <= nNow && !IsInitialBlockDownload())",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7164#discussion_r46559844",
      "id" : 46559844,
      "original_commit_id" : "bdfdce1f2a92e4018d13a9646d0b672a860e6591",
      "original_position" : 14,
      "path" : "src/main.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7164",
      "updated_at" : "2015-12-15T15:42:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/46559844",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/12862928?v=3",
         "events_url" : "https://api.github.com/users/ptschip/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ptschip/followers",
         "following_url" : "https://api.github.com/users/ptschip/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ptschip/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ptschip",
         "id" : 12862928,
         "login" : "ptschip",
         "organizations_url" : "https://api.github.com/users/ptschip/orgs",
         "received_events_url" : "https://api.github.com/users/ptschip/received_events",
         "repos_url" : "https://api.github.com/users/ptschip/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ptschip/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ptschip/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ptschip"
      }
   },
   {
      "body" : "utACK",
      "created_at" : "2015-12-03T15:10:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7164#issuecomment-161669800",
      "id" : 161669800,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7164",
      "updated_at" : "2015-12-03T15:10:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/161669800",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "body" : "Concept ACK",
      "created_at" : "2015-12-03T17:10:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7164#issuecomment-161718924",
      "id" : 161718924,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7164",
      "updated_at" : "2015-12-03T17:10:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/161718924",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7042?v=3",
         "events_url" : "https://api.github.com/users/petertodd/events{/privacy}",
         "followers_url" : "https://api.github.com/users/petertodd/followers",
         "following_url" : "https://api.github.com/users/petertodd/following{/other_user}",
         "gists_url" : "https://api.github.com/users/petertodd/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/petertodd",
         "id" : 7042,
         "login" : "petertodd",
         "organizations_url" : "https://api.github.com/users/petertodd/orgs",
         "received_events_url" : "https://api.github.com/users/petertodd/received_events",
         "repos_url" : "https://api.github.com/users/petertodd/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/petertodd/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/petertodd/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/petertodd"
      }
   },
   {
      "body" : "conceptACK/utACK",
      "created_at" : "2015-12-03T20:13:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7164#issuecomment-161769866",
      "id" : 161769866,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7164",
      "updated_at" : "2015-12-03T20:14:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/161769866",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/413395?v=3",
         "events_url" : "https://api.github.com/users/dcousens/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dcousens/followers",
         "following_url" : "https://api.github.com/users/dcousens/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dcousens/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dcousens",
         "id" : 413395,
         "login" : "dcousens",
         "organizations_url" : "https://api.github.com/users/dcousens/orgs",
         "received_events_url" : "https://api.github.com/users/dcousens/received_events",
         "repos_url" : "https://api.github.com/users/dcousens/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dcousens/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dcousens/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dcousens"
      }
   },
   {
      "body" : "acutally please don't merge this yet, there is a problem with the\nregression tests, i think something to do with mocktime...it appears\nthat the tests always think that we are syncing the blockchain...i'm\ninvestigating\n\nOn 03/12/2015 12:14 PM, Daniel Cousens wrote:\n>\n> ACK\n>\n> Ã¢ÂÂ\n> Reply to this email directly or view it on GitHub\n> <https://github.com/bitcoin/bitcoin/pull/7164#issuecomment-161769866>.\n>\n\n",
      "created_at" : "2015-12-03T20:33:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7164#issuecomment-161774440",
      "id" : 161774440,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7164",
      "updated_at" : "2015-12-03T20:33:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/161774440",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/12862928?v=3",
         "events_url" : "https://api.github.com/users/ptschip/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ptschip/followers",
         "following_url" : "https://api.github.com/users/ptschip/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ptschip/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ptschip",
         "id" : 12862928,
         "login" : "ptschip",
         "organizations_url" : "https://api.github.com/users/ptschip/orgs",
         "received_events_url" : "https://api.github.com/users/ptschip/received_events",
         "repos_url" : "https://api.github.com/users/ptschip/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ptschip/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ptschip/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ptschip"
      }
   },
   {
      "body" : "Travis is happy now...during running the regression tests, the block\ntimestamps in the cache were too old and so the memory pools would not\nsync thinking that an initial block download was happening.  The last\nblock needs to be within the last 24 hours.   But, I think I need to add\none more thing, if the cache folder is more than 1 day old it needs to\nautomatically be rebuilt otherwise the regression tests will fail again.\n\nin util.py:\n\n       -block_time = 1388534400\n       +block_time = int(round(time.time() - (200 * 10 * 60) ))\n\n\n\nOn 03/12/2015 12:14 PM, Daniel Cousens wrote:\n>\n> ACK\n>\n> Ã¢ÂÂ\n> Reply to this email directly or view it on GitHub\n> <https://github.com/bitcoin/bitcoin/pull/7164#issuecomment-161769866>.\n>\n\n",
      "created_at" : "2015-12-03T23:10:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7164#issuecomment-161818468",
      "id" : 161818468,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7164",
      "updated_at" : "2015-12-03T23:10:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/161818468",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/12862928?v=3",
         "events_url" : "https://api.github.com/users/ptschip/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ptschip/followers",
         "following_url" : "https://api.github.com/users/ptschip/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ptschip/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ptschip",
         "id" : 12862928,
         "login" : "ptschip",
         "organizations_url" : "https://api.github.com/users/ptschip/orgs",
         "received_events_url" : "https://api.github.com/users/ptschip/received_events",
         "repos_url" : "https://api.github.com/users/ptschip/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ptschip/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ptschip/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ptschip"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7164#discussion_r46629519"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7164"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/46629519"
         }
      },
      "body" : "Nit: \", starting 2000 minutes in the past\"?",
      "commit_id" : "39a525c21fd1b34df63ab30868423b97b708ee49",
      "created_at" : "2015-12-03T23:34:13Z",
      "diff_hunk" : "@@ -154,9 +154,9 @@ def initialize_chain(test_dir):\n \n         # Create a 200-block-long chain; each of the 4 nodes\n         # gets 25 mature blocks and 25 immature.\n-        # blocks are created with timestamps 10 minutes apart, starting\n-        # at 1 Jan 2014\n-        block_time = 1388534400\n+        # blocks are created with timestamps 10 minutes apart\n+        # going backwards in time from now",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7164#discussion_r46629519",
      "id" : 46629519,
      "original_commit_id" : "3c1546242b4ad7086ecc583ee5fef8cbfbde4c98",
      "original_position" : 8,
      "path" : "qa/rpc-tests/test_framework/util.py",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7164",
      "updated_at" : "2015-12-15T15:42:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/46629519",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=3",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7164#discussion_r46636417"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7164"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/46636417"
         }
      },
      "body" : "sure, that sounds better\n\n(and it's 2000 minutes in the past).\n\nI'll push it up with the changes for updating the cache every 24hours.\n\n\nOn 03/12/2015 3:34 PM, MarcoFalke wrote:\n>\n> In qa/rpc-tests/test_framework/util.py\n> <https://github.com/bitcoin/bitcoin/pull/7164#discussion_r46629519>:\n>\n> > @@ -154,9 +154,9 @@ def initialize_chain(test_dir):\n> >  \n> >          # Create a 200-block-long chain; each of the 4 nodes\n> >          # gets 25 mature blocks and 25 immature.\n> > -        # blocks are created with timestamps 10 minutes apart, starting\n> > -        # at 1 Jan 2014\n> > -        block_time = 1388534400\n> > +        # blocks are created with timestamps 10 minutes apart\n> > +        # going backwards in time from now\n>\n> Nit: \", starting 200 minutes in the past\"?\n>\n> Ã¢ÂÂ\n> Reply to this email directly or view it on GitHub\n> <https://github.com/bitcoin/bitcoin/pull/7164/files#r46629519>.\n>\n\n",
      "commit_id" : "39a525c21fd1b34df63ab30868423b97b708ee49",
      "created_at" : "2015-12-04T00:57:35Z",
      "diff_hunk" : "@@ -154,9 +154,9 @@ def initialize_chain(test_dir):\n \n         # Create a 200-block-long chain; each of the 4 nodes\n         # gets 25 mature blocks and 25 immature.\n-        # blocks are created with timestamps 10 minutes apart, starting\n-        # at 1 Jan 2014\n-        block_time = 1388534400\n+        # blocks are created with timestamps 10 minutes apart\n+        # going backwards in time from now",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7164#discussion_r46636417",
      "id" : 46636417,
      "original_commit_id" : "3c1546242b4ad7086ecc583ee5fef8cbfbde4c98",
      "original_position" : 8,
      "path" : "qa/rpc-tests/test_framework/util.py",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7164",
      "updated_at" : "2015-12-15T15:42:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/46636417",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/12862928?v=3",
         "events_url" : "https://api.github.com/users/ptschip/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ptschip/followers",
         "following_url" : "https://api.github.com/users/ptschip/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ptschip/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ptschip",
         "id" : 12862928,
         "login" : "ptschip",
         "organizations_url" : "https://api.github.com/users/ptschip/orgs",
         "received_events_url" : "https://api.github.com/users/ptschip/received_events",
         "repos_url" : "https://api.github.com/users/ptschip/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ptschip/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ptschip/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ptschip"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7164#discussion_r46640247"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7164"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/46640247"
         }
      },
      "body" : "Ok that should do it,\n\npushed and travis is good\n\nhave a look when you can.\n\n On 03/12/2015 3:34 PM, MarcoFalke wrote:\n>\n> In qa/rpc-tests/test_framework/util.py\n> <https://github.com/bitcoin/bitcoin/pull/7164#discussion_r46629519>:\n>\n> > @@ -154,9 +154,9 @@ def initialize_chain(test_dir):\n> >  \n> >          # Create a 200-block-long chain; each of the 4 nodes\n> >          # gets 25 mature blocks and 25 immature.\n> > -        # blocks are created with timestamps 10 minutes apart, starting\n> > -        # at 1 Jan 2014\n> > -        block_time = 1388534400\n> > +        # blocks are created with timestamps 10 minutes apart\n> > +        # going backwards in time from now\n>\n> Nit: \", starting 200 minutes in the past\"?\n>\n> Ã¢ÂÂ\n> Reply to this email directly or view it on GitHub\n> <https://github.com/bitcoin/bitcoin/pull/7164/files#r46629519>.\n>\n\n",
      "commit_id" : "39a525c21fd1b34df63ab30868423b97b708ee49",
      "created_at" : "2015-12-04T01:52:10Z",
      "diff_hunk" : "@@ -154,9 +154,9 @@ def initialize_chain(test_dir):\n \n         # Create a 200-block-long chain; each of the 4 nodes\n         # gets 25 mature blocks and 25 immature.\n-        # blocks are created with timestamps 10 minutes apart, starting\n-        # at 1 Jan 2014\n-        block_time = 1388534400\n+        # blocks are created with timestamps 10 minutes apart\n+        # going backwards in time from now",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7164#discussion_r46640247",
      "id" : 46640247,
      "original_commit_id" : "3c1546242b4ad7086ecc583ee5fef8cbfbde4c98",
      "original_position" : 8,
      "path" : "qa/rpc-tests/test_framework/util.py",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7164",
      "updated_at" : "2015-12-15T15:42:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/46640247",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/12862928?v=3",
         "events_url" : "https://api.github.com/users/ptschip/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ptschip/followers",
         "following_url" : "https://api.github.com/users/ptschip/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ptschip/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ptschip",
         "id" : 12862928,
         "login" : "ptschip",
         "organizations_url" : "https://api.github.com/users/ptschip/orgs",
         "received_events_url" : "https://api.github.com/users/ptschip/received_events",
         "repos_url" : "https://api.github.com/users/ptschip/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ptschip/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ptschip/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ptschip"
      }
   },
   {
      "body" : "@MarcoFalke Fixed that nit.  Also added refreshing the cache every twelve hours which will prevent any very very long running regression tests from going over the 24hr limit for the age of the cache and subsequently preventing the mempools from syncing.",
      "created_at" : "2015-12-04T06:13:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7164#issuecomment-161886690",
      "id" : 161886690,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7164",
      "updated_at" : "2015-12-04T06:13:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/161886690",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/12862928?v=3",
         "events_url" : "https://api.github.com/users/ptschip/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ptschip/followers",
         "following_url" : "https://api.github.com/users/ptschip/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ptschip/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ptschip",
         "id" : 12862928,
         "login" : "ptschip",
         "organizations_url" : "https://api.github.com/users/ptschip/orgs",
         "received_events_url" : "https://api.github.com/users/ptschip/received_events",
         "repos_url" : "https://api.github.com/users/ptschip/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ptschip/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ptschip/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ptschip"
      }
   },
   {
      "body" : "Ugh that \"maximum 24 hours\" check has tripped us up multiple times. \r\n\r\nAnother option to avoid the cache invalid issue would be to change `nMaxTipAge` to `0x7fffffff`, as it is also for regtest, as it is for testnet (see  #5987)\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/master/src/chainparams.cpp#L172\r\n\r\nI'd prefer that myself to having to expire the cache every 12 hours just to avoid this check. Although there's something to be said for testing `IsInitialBlockDownload` itself as well... so not sure\r\n\r\nYet another option would be to set a mock time, but this isn't easy to do consistently.\r\n",
      "created_at" : "2015-12-04T08:02:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7164#issuecomment-161903846",
      "id" : 161903846,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7164",
      "updated_at" : "2015-12-04T08:35:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/161903846",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "@laanwj Changing nmaxtipage certainly is an easy fix but I never like the idea of changing the behaviour of an app before regression testing, it sometimes bites down the road. I used mocktime instead but then had issues with nodehandling because GetTime() doesn't increment properly once you set mocktime.  Made some edits there to make GetTime() increment correctly if mocktime is set. \r\n\r\nAlso needed a small edit to p2pfullblocktest to set the time base to MOCKTIME.\r\n\r\nPushed and travis is happy...\r\n\r\n\r\n",
      "created_at" : "2015-12-04T20:48:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7164#issuecomment-162078187",
      "id" : 162078187,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7164",
      "updated_at" : "2015-12-04T20:48:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/162078187",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/12862928?v=3",
         "events_url" : "https://api.github.com/users/ptschip/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ptschip/followers",
         "following_url" : "https://api.github.com/users/ptschip/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ptschip/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ptschip",
         "id" : 12862928,
         "login" : "ptschip",
         "organizations_url" : "https://api.github.com/users/ptschip/orgs",
         "received_events_url" : "https://api.github.com/users/ptschip/received_events",
         "repos_url" : "https://api.github.com/users/ptschip/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ptschip/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ptschip/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ptschip"
      }
   },
   {
      "body" : "re-utACK",
      "created_at" : "2015-12-04T22:23:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7164#issuecomment-162098963",
      "id" : 162098963,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7164",
      "updated_at" : "2015-12-04T22:23:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/162098963",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "body" : "Oops there is one last thing, there are a few of extended tests that might need the mocktime.  I can't execute them because of ndbm which doesn't run on windows so I'll have to try things out on Travis.  I think about 4 scripts that might need fixing up.  Shouldn't take too long...I'll let you know when it's done.",
      "created_at" : "2015-12-05T01:25:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7164#issuecomment-162123697",
      "id" : 162123697,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7164",
      "updated_at" : "2015-12-05T01:25:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/162123697",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/12862928?v=3",
         "events_url" : "https://api.github.com/users/ptschip/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ptschip/followers",
         "following_url" : "https://api.github.com/users/ptschip/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ptschip/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ptschip",
         "id" : 12862928,
         "login" : "ptschip",
         "organizations_url" : "https://api.github.com/users/ptschip/orgs",
         "received_events_url" : "https://api.github.com/users/ptschip/received_events",
         "repos_url" : "https://api.github.com/users/ptschip/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ptschip/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ptschip/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ptschip"
      }
   },
   {
      "body" : "Rebase needed.",
      "created_at" : "2015-12-05T09:49:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7164#issuecomment-162167905",
      "id" : 162167905,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7164",
      "updated_at" : "2015-12-05T09:49:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/162167905",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6848764?v=3",
         "events_url" : "https://api.github.com/users/paveljanik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/paveljanik/followers",
         "following_url" : "https://api.github.com/users/paveljanik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/paveljanik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/paveljanik",
         "id" : 6848764,
         "login" : "paveljanik",
         "organizations_url" : "https://api.github.com/users/paveljanik/orgs",
         "received_events_url" : "https://api.github.com/users/paveljanik/received_events",
         "repos_url" : "https://api.github.com/users/paveljanik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/paveljanik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/paveljanik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/paveljanik"
      }
   },
   {
      "body" : "I like the overall goal here, but I'm not sure I follow the reasoning for changing the behavior of `SetMockTime`.  One advantage of the way mocktime works now is that for the places in the code that call `GetTime()`, the behavior is deterministic -- the time will always be whatever the last mocktime call set it to.  I think this determinism can be a useful feature for testing, and making it an offset of the current system time will eliminate the determinism.\r\n\r\nCan we work around this problem differently in the tests?  I don't actually understand why the time would need to advance but I haven't yet poked into the problems you ran into.  But for instance, one workaround I've used in tests I've previously written is to just mine a single block at the beginning of the test to ensure that the nodes are out of IBD (I recognize this workaround may not easily apply to all testing scenarios though).\r\n",
      "created_at" : "2015-12-05T14:39:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7164#issuecomment-162197858",
      "id" : 162197858,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7164",
      "updated_at" : "2015-12-05T14:39:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/162197858",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7463573?v=3",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "body" : "Mocktime needs to advance otherwise banning and unbanning doesn't work\nso scripts such as nodehandling end up failing.  I think having mocktime\nadvance, gives us a more realisitic functionality for testing as it\nbehaves in the same way as the application does in the real world.\n\n\nOn 05/12/2015 6:40 AM, Suhas Daftuar wrote:\n>\n> I like the overall goal here, but I'm not sure I follow the reasoning\n> for changing the behavior of |SetMockTime|. One advantage of the way\n> mocktime works now is that for the places in the code that call\n> |GetTime()|, the behavior is deterministic -- the time will always be\n> whatever the last mocktime call set it to. I think this determinism\n> can be a useful feature for testing, and making it an offset of the\n> current system time will eliminate the determinism.\n>\n> Can we work around this problem differently in the tests? I don't\n> actually understand why the time would need to advance but I haven't\n> yet poked into the problems you ran into. But for instance, one\n> workaround I've used in tests I've previously written is to just mine\n> a single block at the beginning of the test to ensure that the nodes\n> are out of IBD (I recognize this workaround may not easily apply to\n> all testing scenarios though).\n>\n> Ã¢ÂÂ\n> Reply to this email directly or view it on GitHub\n> <https://github.com/bitcoin/bitcoin/pull/7164#issuecomment-162197858>.\n>\n\n",
      "created_at" : "2015-12-05T16:07:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7164#issuecomment-162216533",
      "id" : 162216533,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7164",
      "updated_at" : "2015-12-05T16:07:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/162216533",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/12862928?v=3",
         "events_url" : "https://api.github.com/users/ptschip/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ptschip/followers",
         "following_url" : "https://api.github.com/users/ptschip/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ptschip/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ptschip",
         "id" : 12862928,
         "login" : "ptschip",
         "organizations_url" : "https://api.github.com/users/ptschip/orgs",
         "received_events_url" : "https://api.github.com/users/ptschip/received_events",
         "repos_url" : "https://api.github.com/users/ptschip/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ptschip/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ptschip/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ptschip"
      }
   },
   {
      "body" : "@sdaftuar   Thinking about this some more perhaps you are right, but maybe we can have both.  We can have the mocktime we have now and also have a mocktime that will advance for those that need it.    It would certainly be easier than having to fix up these python scripts. ",
      "created_at" : "2015-12-05T18:06:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7164#issuecomment-162231634",
      "id" : 162231634,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7164",
      "updated_at" : "2015-12-05T18:06:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/162231634",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/12862928?v=3",
         "events_url" : "https://api.github.com/users/ptschip/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ptschip/followers",
         "following_url" : "https://api.github.com/users/ptschip/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ptschip/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ptschip",
         "id" : 12862928,
         "login" : "ptschip",
         "organizations_url" : "https://api.github.com/users/ptschip/orgs",
         "received_events_url" : "https://api.github.com/users/ptschip/received_events",
         "repos_url" : "https://api.github.com/users/ptschip/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ptschip/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ptschip/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ptschip"
      }
   },
   {
      "body" : "@sdaftuar  And then if we go with a more complex mocktime it probably needs to be in a separate PR.  I think I'm going to go back to the way the original mocktime was and see if I can get that nodehandling script to work.  That would be much simpler and more within the scope of this PR.",
      "created_at" : "2015-12-05T18:31:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7164#issuecomment-162232916",
      "id" : 162232916,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7164",
      "updated_at" : "2015-12-05T18:31:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/162232916",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/12862928?v=3",
         "events_url" : "https://api.github.com/users/ptschip/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ptschip/followers",
         "following_url" : "https://api.github.com/users/ptschip/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ptschip/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ptschip",
         "id" : 12862928,
         "login" : "ptschip",
         "organizations_url" : "https://api.github.com/users/ptschip/orgs",
         "received_events_url" : "https://api.github.com/users/ptschip/received_events",
         "repos_url" : "https://api.github.com/users/ptschip/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ptschip/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ptschip/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ptschip"
      }
   },
   {
      "body" : "@laanwj @sdaftuar  I reverted back to the original mocktime which doesn't increment GetTime().  Instead, I made edits to a few of the python scripts to get them to work with mocktime and checked both the regular and extended scripts to make sure they all work.  Pushed and Travis is happy.\r\n\r\nPerhaps in the future we should have a mocktime that is both deterministic as well as one that allows GetTime() to increment.  I think having a more realistic test scenario is always best but I agree with @sdaftuar that we need to keep the current deterministic behavior of mocktime as well.",
      "created_at" : "2015-12-06T01:40:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7164#issuecomment-162262403",
      "id" : 162262403,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7164",
      "updated_at" : "2015-12-06T01:40:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/162262403",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/12862928?v=3",
         "events_url" : "https://api.github.com/users/ptschip/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ptschip/followers",
         "following_url" : "https://api.github.com/users/ptschip/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ptschip/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ptschip",
         "id" : 12862928,
         "login" : "ptschip",
         "organizations_url" : "https://api.github.com/users/ptschip/orgs",
         "received_events_url" : "https://api.github.com/users/ptschip/received_events",
         "repos_url" : "https://api.github.com/users/ptschip/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ptschip/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ptschip/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ptschip"
      }
   },
   {
      "body" : "It seems reasonable to have 2 different setmocktime functions if they're both useful for testing.",
      "created_at" : "2015-12-06T02:26:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7164#issuecomment-162264397",
      "id" : 162264397,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7164",
      "updated_at" : "2015-12-06T02:26:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/162264397",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "body" : "utACK 233fe56",
      "created_at" : "2015-12-06T09:52:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7164#issuecomment-162292704",
      "id" : 162292704,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7164",
      "updated_at" : "2015-12-06T09:52:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/162292704",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=3",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "body" : "@ptschip I agree that an advancing mocktime can be useful too, and yeah probably makes sense to add that support in a separate PR.\r\n\r\nI'm not sure it's a good idea for the default test behavior to be to enable mocktime for all tests (which changes the behavior of the code being tested).  I guess the issue is that if you're using `initialize_chain` which can give you an old cached datadir, then you probably want a mocktime that goes with it?  Many of the tests now use `initialize_chain_clean` to avoid the issue of an old blockchain, and I think for tests that don't need to use a mocktime (because of the way they are written) it'd be best to not change the behavior they're testing by introducing use of mocktime.\r\n\r\nIt looks like running bitcoind with a mocktime of 0 is a no-op, so could we do something where the default mocktime used by `start_node` is only set to a non-zero value if the code that tries to generate a cached datadir is invoked?",
      "created_at" : "2015-12-06T10:54:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7164#issuecomment-162303010",
      "id" : 162303010,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7164",
      "updated_at" : "2015-12-06T10:54:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/162303010",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7463573?v=3",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "body" : "I think another option would be to just have the tests that don't need to use mocktime change their invocations of start_node to include `-mocktime=0` as one of the arguments to bitcoind.  That should override the argument that's being added to `util.py`, and the test writer is likely aware if they're not using the cached directory.\r\n\r\nIf others are fine with an extra argument being needed to avoid invoking mocktime that is fine with me, but I do think we should go back and make sure that we're only using non-zero mocktimes on the tests that need them.",
      "created_at" : "2015-12-06T11:01:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7164#issuecomment-162303568",
      "id" : 162303568,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7164",
      "updated_at" : "2015-12-06T11:01:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/162303568",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7463573?v=3",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "body" : "As said, having 2 mocktime functions may be useful, but I completely agree with not using it in the tests that don't need it. I think being explicit in the tests you need it may be more verbose than having it set implicitly for all tests, but is also clearer and more easily modifiable (if \"explicit is better than implicit\" is not enough).",
      "created_at" : "2015-12-06T17:18:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7164#issuecomment-162330096",
      "id" : 162330096,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7164",
      "updated_at" : "2015-12-06T17:18:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/162330096",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "body" : "On 06/12/2015 3:02 AM, Suhas Daftuar wrote:\n>\n> I think another option would be to just have the tests that don't need\n> to use mocktime change their invocations of start_node to include\n> |-mocktime=0| as one of the arguments to bitcoind. That should\n> override the argument that's being added to |util.py|,\n>\nYes, you can override mocktime in that way.  In fact I had to do that in\nthe maxuploadtarget.py to get it to work, although in that case I had to\nstart_node with mocktime set to the current time, but it does work if\none wants to use it that way.  So for now I would think that would be\nsufficient for those that don't want to use mocktime in their scripting?\n\n",
      "created_at" : "2015-12-06T18:10:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7164#issuecomment-162333241",
      "id" : 162333241,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7164",
      "updated_at" : "2015-12-06T18:10:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/162333241",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/12862928?v=3",
         "events_url" : "https://api.github.com/users/ptschip/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ptschip/followers",
         "following_url" : "https://api.github.com/users/ptschip/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ptschip/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ptschip",
         "id" : 12862928,
         "login" : "ptschip",
         "organizations_url" : "https://api.github.com/users/ptschip/orgs",
         "received_events_url" : "https://api.github.com/users/ptschip/received_events",
         "repos_url" : "https://api.github.com/users/ptschip/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ptschip/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ptschip/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ptschip"
      }
   },
   {
      "body" : "Another simple solution for those that don't want to use or need to use\nmocktime in their scripts is simply to set  MOCKTIME=0 at the very\nbeginning.\n\nOn 06/12/2015 3:02 AM, Suhas Daftuar wrote:\n>\n> I think another option would be to just have the tests that don't need\n> to use mocktime change their invocations of start_node to include\n> |-mocktime=0| as one of the arguments to bitcoind. That should\n> override the argument that's being added to |util.py|, and the test\n> writer is likely aware if they're not using the cached directory.\n>\n> If others are fine with an extra argument being needed to avoid\n> invoking mocktime that is fine with me, but I do think we should go\n> back and make sure that we're only using non-zero mocktimes on the\n> tests that need them.\n>\n> Ã¢ÂÂ\n> Reply to this email directly or view it on GitHub\n> <https://github.com/bitcoin/bitcoin/pull/7164#issuecomment-162303568>.\n>\n\n",
      "created_at" : "2015-12-06T18:31:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7164#issuecomment-162334899",
      "id" : 162334899,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7164",
      "updated_at" : "2015-12-06T18:31:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/162334899",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/12862928?v=3",
         "events_url" : "https://api.github.com/users/ptschip/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ptschip/followers",
         "following_url" : "https://api.github.com/users/ptschip/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ptschip/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ptschip",
         "id" : 12862928,
         "login" : "ptschip",
         "organizations_url" : "https://api.github.com/users/ptschip/orgs",
         "received_events_url" : "https://api.github.com/users/ptschip/received_events",
         "repos_url" : "https://api.github.com/users/ptschip/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ptschip/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ptschip/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ptschip"
      }
   },
   {
      "body" : "> Changing nmaxtipage certainly is an easy fix but I never like the idea of changing the behaviour of an app before regression testing\r\n\r\nI tend to agree. I also think the max tip age should never have been a chain parameter in the first place, but an option separately specified.\r\n\r\nI like the new approach.\r\n\r\nEdit: simulated time in tests is great, if it avoids sleep()s it speeds up the tests!",
      "created_at" : "2015-12-07T16:34:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7164#issuecomment-162582069",
      "id" : 162582069,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7164",
      "updated_at" : "2015-12-08T12:37:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/162582069",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "@ptschip please do the mocktime fix as a separate commit possibly even a separate pr? (someone argue with me on that))",
      "created_at" : "2015-12-08T00:26:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7164#issuecomment-162714414",
      "id" : 162714414,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7164",
      "updated_at" : "2015-12-08T00:26:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/162714414",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/620611?v=3",
         "events_url" : "https://api.github.com/users/pstratem/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pstratem/followers",
         "following_url" : "https://api.github.com/users/pstratem/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pstratem/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pstratem",
         "id" : 620611,
         "login" : "pstratem",
         "organizations_url" : "https://api.github.com/users/pstratem/orgs",
         "received_events_url" : "https://api.github.com/users/pstratem/received_events",
         "repos_url" : "https://api.github.com/users/pstratem/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pstratem/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pstratem/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pstratem"
      }
   },
   {
      "body" : "@pstratem  I already had taken the changes out of GetTime() and mocktime , reverting back to the current master branch version, and only updated the py scripts.instead so that they use mocktime correctly.  The py scripts need those changes otherwise this PR will break them. \r\n\r\n I have no additional changes to this PR, I think it's complete.",
      "created_at" : "2015-12-08T04:32:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7164#issuecomment-162760114",
      "id" : 162760114,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7164",
      "updated_at" : "2015-12-08T04:32:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/162760114",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/12862928?v=3",
         "events_url" : "https://api.github.com/users/ptschip/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ptschip/followers",
         "following_url" : "https://api.github.com/users/ptschip/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ptschip/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ptschip",
         "id" : 12862928,
         "login" : "ptschip",
         "organizations_url" : "https://api.github.com/users/ptschip/orgs",
         "received_events_url" : "https://api.github.com/users/ptschip/received_events",
         "repos_url" : "https://api.github.com/users/ptschip/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ptschip/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ptschip/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ptschip"
      }
   },
   {
      "body" : "Testing.\r\n- [x] No transactions received during IBD\r\n- [ ] Transactions received after IBD\r\n\r\n(... waiting on IBD to finish)",
      "created_at" : "2015-12-08T07:33:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7164#issuecomment-162800774",
      "id" : 162800774,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7164",
      "updated_at" : "2015-12-08T07:35:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/162800774",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/413395?v=3",
         "events_url" : "https://api.github.com/users/dcousens/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dcousens/followers",
         "following_url" : "https://api.github.com/users/dcousens/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dcousens/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dcousens",
         "id" : 413395,
         "login" : "dcousens",
         "organizations_url" : "https://api.github.com/users/dcousens/orgs",
         "received_events_url" : "https://api.github.com/users/dcousens/received_events",
         "repos_url" : "https://api.github.com/users/dcousens/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dcousens/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dcousens/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dcousens"
      }
   },
   {
      "body" : "Tested ACK.\r\n- [x] No transactions received during IBD\r\n- [x] Transactions received after IBD\r\n\r\n(that was the extent of my testing)",
      "created_at" : "2015-12-08T23:56:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7164#issuecomment-163060593",
      "id" : 163060593,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7164",
      "updated_at" : "2015-12-08T23:56:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/163060593",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/413395?v=3",
         "events_url" : "https://api.github.com/users/dcousens/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dcousens/followers",
         "following_url" : "https://api.github.com/users/dcousens/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dcousens/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dcousens",
         "id" : 413395,
         "login" : "dcousens",
         "organizations_url" : "https://api.github.com/users/dcousens/orgs",
         "received_events_url" : "https://api.github.com/users/dcousens/received_events",
         "repos_url" : "https://api.github.com/users/dcousens/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dcousens/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dcousens/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dcousens"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7164#discussion_r47034673"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7164"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/47034673"
         }
      },
      "body" : "Nit: Shouldn't this say `MOCKTIME + 14*60*60*24`?",
      "commit_id" : "39a525c21fd1b34df63ab30868423b97b708ee49",
      "created_at" : "2015-12-09T00:06:07Z",
      "diff_hunk" : "@@ -248,7 +247,7 @@ def run_test(self):\n         #stop and start node 0 with 1MB maxuploadtarget, whitelist 127.0.0.1\n         print \"Restarting nodes with -whitelist=127.0.0.1\"\n         stop_node(self.nodes[0], 0)\n-        self.nodes[0] = start_node(0, self.options.tmpdir, [\"-debug\", \"-whitelist=127.0.0.1\", \"-maxuploadtarget=1\", \"-blockmaxsize=999000\"])\n+        self.nodes[0] = start_node(0, self.options.tmpdir, [\"-debug\", \"-whitelist=127.0.0.1\", \"-maxuploadtarget=1\", \"-blockmaxsize=999000\" , \"-mocktime=\"+str(int(time.time()))])",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7164#discussion_r47034673",
      "id" : 47034673,
      "original_commit_id" : "233fe563b57a4f8251bc47552eb06da796030eb6",
      "original_position" : 38,
      "path" : "qa/rpc-tests/maxuploadtarget.py",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7164",
      "updated_at" : "2015-12-15T15:42:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/47034673",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=3",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "body" : "I really don't think we should change any tests to be invoking mocktime unless we actually need to (ie because the test only makes sense in such a context).  If we go with the approach this PR suggests, so that we're defaulting to use a mocktime unless the test explicitly sets MOCKTIME=0 or invokes start_nodes with a \"-mocktime=0\" command line argument, then I think we should go back through all the tests and explicitly turn off mocktime, unless the test's behavior actually needs changing as a result of this PR.\r\n\r\nIt doesn't seem like good practice to make a blanket change to the code path being exercised across all the tests without careful consideration of each test to ensure that the new test behavior is correct.  That level of review seems out of scope for what this PR is trying to accomplish, so I think it makes more sense to be conservative and not change the behavior of any tests, except if there are any specific ones that need changing and can be called out for review as part of this PR.\r\n\r\nI started to go through the list of tests alphabetically and the first two I looked at, `bip65-cltv-p2p.py` and `bip65-cltv.py` can both be made to work simply by disabling mocktime (I tried passing `-mocktime=0` as an argument to `start_nodes`), which is consistent with my understanding of what those tests are doing.",
      "created_at" : "2015-12-09T00:45:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7164#issuecomment-163069866",
      "id" : 163069866,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7164",
      "updated_at" : "2015-12-09T00:45:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/163069866",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7463573?v=3",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "body" : "No thoughts on having two different SetMockTime functions for now?\r\nWe can discuss their unification in another PR.",
      "created_at" : "2015-12-09T01:47:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7164#issuecomment-163080078",
      "id" : 163080078,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7164",
      "updated_at" : "2015-12-09T01:47:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/163080078",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7164#discussion_r47044614"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7164"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/47044614"
         }
      },
      "body" : "@MarcoFalke It works either way but I suppose for consistency it makes sense, I pushed up the change to maxuploadtarget.",
      "commit_id" : "39a525c21fd1b34df63ab30868423b97b708ee49",
      "created_at" : "2015-12-09T02:23:26Z",
      "diff_hunk" : "@@ -248,7 +247,7 @@ def run_test(self):\n         #stop and start node 0 with 1MB maxuploadtarget, whitelist 127.0.0.1\n         print \"Restarting nodes with -whitelist=127.0.0.1\"\n         stop_node(self.nodes[0], 0)\n-        self.nodes[0] = start_node(0, self.options.tmpdir, [\"-debug\", \"-whitelist=127.0.0.1\", \"-maxuploadtarget=1\", \"-blockmaxsize=999000\"])\n+        self.nodes[0] = start_node(0, self.options.tmpdir, [\"-debug\", \"-whitelist=127.0.0.1\", \"-maxuploadtarget=1\", \"-blockmaxsize=999000\" , \"-mocktime=\"+str(int(time.time()))])",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7164#discussion_r47044614",
      "id" : 47044614,
      "original_commit_id" : "233fe563b57a4f8251bc47552eb06da796030eb6",
      "original_position" : 38,
      "path" : "qa/rpc-tests/maxuploadtarget.py",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7164",
      "updated_at" : "2015-12-15T15:42:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/47044614",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/12862928?v=3",
         "events_url" : "https://api.github.com/users/ptschip/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ptschip/followers",
         "following_url" : "https://api.github.com/users/ptschip/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ptschip/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ptschip",
         "id" : 12862928,
         "login" : "ptschip",
         "organizations_url" : "https://api.github.com/users/ptschip/orgs",
         "received_events_url" : "https://api.github.com/users/ptschip/received_events",
         "repos_url" : "https://api.github.com/users/ptschip/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ptschip/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ptschip/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ptschip"
      }
   },
   {
      "body" : "@sdaftuar I agree with you.  I didn't realize at the beginning of all this where it was going and now with the realization that it's very easy to turn off mocktime just by setting MOCKTIME=0 at the beginning of a script then it does make sense to turn it off where we don't need it.  I'll go through the scripts tomorrow and turn off mocktime where it makes sense to do so.\r\n",
      "created_at" : "2015-12-09T02:35:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7164#issuecomment-163087717",
      "id" : 163087717,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7164",
      "updated_at" : "2015-12-09T02:35:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/163087717",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/12862928?v=3",
         "events_url" : "https://api.github.com/users/ptschip/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ptschip/followers",
         "following_url" : "https://api.github.com/users/ptschip/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ptschip/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ptschip",
         "id" : 12862928,
         "login" : "ptschip",
         "organizations_url" : "https://api.github.com/users/ptschip/orgs",
         "received_events_url" : "https://api.github.com/users/ptschip/received_events",
         "repos_url" : "https://api.github.com/users/ptschip/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ptschip/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ptschip/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ptschip"
      }
   },
   {
      "body" : "@ptschip I'm not fully aware of the context around `MOCKTIME`, however, is it possible to 'opt-in' rather than out?",
      "created_at" : "2015-12-09T02:44:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7164#issuecomment-163088770",
      "id" : 163088770,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7164",
      "updated_at" : "2015-12-09T02:44:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/163088770",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/413395?v=3",
         "events_url" : "https://api.github.com/users/dcousens/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dcousens/followers",
         "following_url" : "https://api.github.com/users/dcousens/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dcousens/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dcousens",
         "id" : 413395,
         "login" : "dcousens",
         "organizations_url" : "https://api.github.com/users/dcousens/orgs",
         "received_events_url" : "https://api.github.com/users/dcousens/received_events",
         "repos_url" : "https://api.github.com/users/dcousens/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dcousens/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dcousens/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dcousens"
      }
   },
   {
      "body" : "@dcousens  Now that we've gone through this whole exercise in mocktime, I think it's becoming more clear as far as what we need in the py scripts. I suppose, Yes, we should be able opt-in rather than out and maybe that's in the end the cleanest and most intuitive approach. \r\n\r\nHopefully we're getting to the light at the end of this tunnel.  I'll go ahead and make make mocktime an opt-in and also use @sdaftuar suggestion and only apply it to scripts that need it while keeping the current deterministic behaviour of mocktime.  I think this is starting to make sense.  ",
      "created_at" : "2015-12-09T14:42:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7164#issuecomment-163267248",
      "id" : 163267248,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7164",
      "updated_at" : "2015-12-09T14:42:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/163267248",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/12862928?v=3",
         "events_url" : "https://api.github.com/users/ptschip/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ptschip/followers",
         "following_url" : "https://api.github.com/users/ptschip/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ptschip/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ptschip",
         "id" : 12862928,
         "login" : "ptschip",
         "organizations_url" : "https://api.github.com/users/ptschip/orgs",
         "received_events_url" : "https://api.github.com/users/ptschip/received_events",
         "repos_url" : "https://api.github.com/users/ptschip/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ptschip/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ptschip/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ptschip"
      }
   },
   {
      "body" : "@sdaftuar @dcousens I Made these changes.  Mocktime stays deterministic as it always has been, mocktime is opt in now for the py scripts, and only 5 scripts needed to be changed. I tested all scripts including the extended ones. \r\n\r\nPushed and Travis is happy.  Comments?",
      "created_at" : "2015-12-09T21:16:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7164#issuecomment-163394042",
      "id" : 163394042,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7164",
      "updated_at" : "2015-12-09T21:16:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/163394042",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/12862928?v=3",
         "events_url" : "https://api.github.com/users/ptschip/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ptschip/followers",
         "following_url" : "https://api.github.com/users/ptschip/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ptschip/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ptschip",
         "id" : 12862928,
         "login" : "ptschip",
         "organizations_url" : "https://api.github.com/users/ptschip/orgs",
         "received_events_url" : "https://api.github.com/users/ptschip/received_events",
         "repos_url" : "https://api.github.com/users/ptschip/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ptschip/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ptschip/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ptschip"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7164#discussion_r47215231"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7164"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/47215231"
         }
      },
      "body" : "I think this comment is extraneous now?",
      "commit_id" : "39a525c21fd1b34df63ab30868423b97b708ee49",
      "created_at" : "2015-12-10T11:27:00Z",
      "diff_hunk" : "@@ -117,6 +135,7 @@ def initialize_chain(test_dir):\n     bitcoind and bitcoin-cli must be in search path.\n     \"\"\"\n \n+    #Refresh the cache if cache files are missing or are > 12 hours old",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7164#discussion_r47215231",
      "id" : 47215231,
      "original_commit_id" : "aa55bb29e1a69df83a1ae61188e6b77b0c50710d",
      "original_position" : 29,
      "path" : "qa/rpc-tests/test_framework/util.py",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7164",
      "updated_at" : "2015-12-15T15:42:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/47215231",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7463573?v=3",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7164#discussion_r47216325"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7164"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/47216325"
         }
      },
      "body" : "I don't understand why this test requires mocktime -- I just tested locally and it runs fine if I remove the changes you made to this file.  And logically I don't understand how this test can fail based on the code change in this PR?  I don't believe any transactions are sent over the network in this test (only put into blocks).",
      "commit_id" : "39a525c21fd1b34df63ab30868423b97b708ee49",
      "created_at" : "2015-12-10T11:39:50Z",
      "diff_hunk" : "@@ -42,6 +42,9 @@ def __init__(self):\n         self.num_nodes = 1\n \n     def setup_network(self):\n+        #This test requires mocktime",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7164#discussion_r47216325",
      "id" : 47216325,
      "original_commit_id" : "aa55bb29e1a69df83a1ae61188e6b77b0c50710d",
      "original_position" : 4,
      "path" : "qa/rpc-tests/bip65-cltv-p2p.py",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7164",
      "updated_at" : "2015-12-15T15:42:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/47216325",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7463573?v=3",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7164#discussion_r47216438"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7164"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/47216438"
         }
      },
      "body" : "Same comments as above apply to this test; it works fine for me without any changes.",
      "commit_id" : "39a525c21fd1b34df63ab30868423b97b708ee49",
      "created_at" : "2015-12-10T11:41:08Z",
      "diff_hunk" : "@@ -50,6 +50,9 @@ def __init__(self):\n         self.num_nodes = 1\n \n     def setup_network(self):\n+        #This test requires mocktime",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7164#discussion_r47216438",
      "id" : 47216438,
      "original_commit_id" : "aa55bb29e1a69df83a1ae61188e6b77b0c50710d",
      "original_position" : 4,
      "path" : "qa/rpc-tests/bipdersig-p2p.py",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7164",
      "updated_at" : "2015-12-15T15:42:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/47216438",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7463573?v=3",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7164#discussion_r47216556"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7164"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/47216556"
         }
      },
      "body" : "This test also doesn't seem to do anything with transactions and works fine for me locally without any changes.",
      "commit_id" : "39a525c21fd1b34df63ab30868423b97b708ee49",
      "created_at" : "2015-12-10T11:42:40Z",
      "diff_hunk" : "@@ -25,9 +25,12 @@\n # Use the ComparisonTestFramework with 1 node: only use --testbinary.\n class InvalidBlockRequestTest(ComparisonTestFramework):\n \n+\n     ''' Can either run this test as 1 node with expected answers, or two and compare them. \n         Change the \"outcome\" variable from each TestInstance object to only do the comparison. '''\n     def __init__(self):\n+        #This test requires mocktime\n+        enable_mocktime()",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7164#discussion_r47216556",
      "id" : 47216556,
      "original_commit_id" : "aa55bb29e1a69df83a1ae61188e6b77b0c50710d",
      "original_position" : 9,
      "path" : "qa/rpc-tests/invalidblockrequest.py",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7164",
      "updated_at" : "2015-12-15T15:42:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/47216556",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7463573?v=3",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7164#discussion_r47216626"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7164"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/47216626"
         }
      },
      "body" : "Same for this test, no changes needed.",
      "commit_id" : "39a525c21fd1b34df63ab30868423b97b708ee49",
      "created_at" : "2015-12-10T11:43:36Z",
      "diff_hunk" : "@@ -35,12 +35,15 @@ class FullBlockTest(ComparisonTestFramework):\n     ''' Can either run this test as 1 node with expected answers, or two and compare them. \n         Change the \"outcome\" variable from each TestInstance object to only do the comparison. '''\n     def __init__(self):\n+        #This test requires mocktime\n+        enable_mocktime()",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7164#discussion_r47216626",
      "id" : 47216626,
      "original_commit_id" : "aa55bb29e1a69df83a1ae61188e6b77b0c50710d",
      "original_position" : 5,
      "path" : "qa/rpc-tests/p2p-fullblocktest.py",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7164",
      "updated_at" : "2015-12-15T15:42:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/47216626",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7463573?v=3",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7164#discussion_r47217023"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7164"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/47217023"
         }
      },
      "body" : "For this test I agree that something is needed to fix the test to work with this PR.  Enabling mocktime as you do does the trick; alternatively, it would also be sufficient to insert `self.nodes[0].generate(1)` at line 36 below, as that would cause the nodes to leave IBD.\r\n\r\nI don't feel strongly about which workaround is better (mocktime or generating a block to leave IBD), just mentioning it in case anyone else has an opinion.",
      "commit_id" : "39a525c21fd1b34df63ab30868423b97b708ee49",
      "created_at" : "2015-12-10T11:48:49Z",
      "diff_hunk" : "@@ -32,6 +32,11 @@ def check_array_result(object_array, to_match, expected):\n \n class ListTransactionsTest(BitcoinTestFramework):\n \n+    def setup_nodes(self):\n+        #This test requires mocktime\n+        enable_mocktime()\n+        return start_nodes(4, self.options.tmpdir)\n+",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7164#discussion_r47217023",
      "id" : 47217023,
      "original_commit_id" : "aa55bb29e1a69df83a1ae61188e6b77b0c50710d",
      "original_position" : 8,
      "path" : "qa/rpc-tests/listtransactions.py",
      "position" : 8,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7164",
      "updated_at" : "2015-12-15T15:42:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/47217023",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7463573?v=3",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "body" : "@ptschip Thanks for incorporating the feedback and updating the PR.  I left a few comments on the individual tests, I think several don't need to be updated (looks to me that of the tests you changed, just `listtransactions.py` and `receivedby.py` require a fix, because the first thing they do is send a transaction).",
      "created_at" : "2015-12-10T11:55:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7164#issuecomment-163590193",
      "id" : 163590193,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7164",
      "updated_at" : "2015-12-10T11:55:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/163590193",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7463573?v=3",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "body" : "@sdaftuar  You were right, thanks for doing a thorough job of testing. \nI dont remember why I put those changes in there, probably when I was\nreverting to opt in, at any rate it's pushed and travis is finished.  It\nlooks much cleaner and with minimal code changes.\n\nOn 10/12/2015 3:56 AM, Suhas Daftuar wrote:\n>\n> @ptschip <https://github.com/ptschip> Thanks for incorporating the\n> feedback and updating the PR. I left a few comments on the individual\n> tests, I think several don't need to be updated (looks to me that of\n> the tests you changed, just |listtransactions.py| and |receivedby.py|\n> require a fix, because the first thing they do is send a transaction).\n>\n> Ã¢ÂÂ\n> Reply to this email directly or view it on GitHub\n> <https://github.com/bitcoin/bitcoin/pull/7164#issuecomment-163590193>.\n>\n\n",
      "created_at" : "2015-12-10T18:55:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7164#issuecomment-163716699",
      "id" : 163716699,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7164",
      "updated_at" : "2015-12-10T18:55:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/163716699",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/12862928?v=3",
         "events_url" : "https://api.github.com/users/ptschip/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ptschip/followers",
         "following_url" : "https://api.github.com/users/ptschip/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ptschip/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ptschip",
         "id" : 12862928,
         "login" : "ptschip",
         "organizations_url" : "https://api.github.com/users/ptschip/orgs",
         "received_events_url" : "https://api.github.com/users/ptschip/received_events",
         "repos_url" : "https://api.github.com/users/ptschip/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ptschip/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ptschip/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ptschip"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7164#discussion_r47273008"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7164"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/47273008"
         }
      },
      "body" : "never mind: initial block download",
      "commit_id" : "39a525c21fd1b34df63ab30868423b97b708ee49",
      "created_at" : "2015-12-10T19:32:41Z",
      "diff_hunk" : "@@ -32,6 +32,11 @@ def check_array_result(object_array, to_match, expected):\n \n class ListTransactionsTest(BitcoinTestFramework):\n \n+    def setup_nodes(self):\n+        #This test requires mocktime\n+        enable_mocktime()\n+        return start_nodes(4, self.options.tmpdir)\n+",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7164#discussion_r47273008",
      "id" : 47273008,
      "original_commit_id" : "aa55bb29e1a69df83a1ae61188e6b77b0c50710d",
      "original_position" : 8,
      "path" : "qa/rpc-tests/listtransactions.py",
      "position" : 8,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7164",
      "updated_at" : "2015-12-15T15:42:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/47273008",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "body" : "ACK a06f106c8a942b0b2a2aeaa3d39d673feb432c69",
      "created_at" : "2015-12-11T18:47:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7164#issuecomment-164015299",
      "id" : 164015299,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7164",
      "updated_at" : "2015-12-11T18:47:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/164015299",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7463573?v=3",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "body" : "ACK a06f106",
      "created_at" : "2015-12-14T00:30:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7164#issuecomment-164314393",
      "id" : 164314393,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7164",
      "updated_at" : "2015-12-14T00:30:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/164314393",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/413395?v=3",
         "events_url" : "https://api.github.com/users/dcousens/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dcousens/followers",
         "following_url" : "https://api.github.com/users/dcousens/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dcousens/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dcousens",
         "id" : 413395,
         "login" : "dcousens",
         "organizations_url" : "https://api.github.com/users/dcousens/orgs",
         "received_events_url" : "https://api.github.com/users/dcousens/received_events",
         "repos_url" : "https://api.github.com/users/dcousens/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dcousens/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dcousens/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dcousens"
      }
   },
   {
      "body" : "Needs rebase",
      "created_at" : "2015-12-14T12:11:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7164#issuecomment-164421806",
      "id" : 164421806,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7164",
      "updated_at" : "2015-12-14T12:11:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/164421806",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Rebase Done.\n\nOn 14/12/2015 4:12 AM, Wladimir J. van der Laan wrote:\n>\n> Needs rebase\n>\n> Ã¢ÂÂ\n> Reply to this email directly or view it on GitHub\n> <https://github.com/bitcoin/bitcoin/pull/7164#issuecomment-164421806>.\n>\n\n",
      "created_at" : "2015-12-14T14:27:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7164#issuecomment-164450895",
      "id" : 164450895,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7164",
      "updated_at" : "2015-12-14T14:27:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/164450895",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/12862928?v=3",
         "events_url" : "https://api.github.com/users/ptschip/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ptschip/followers",
         "following_url" : "https://api.github.com/users/ptschip/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ptschip/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ptschip",
         "id" : 12862928,
         "login" : "ptschip",
         "organizations_url" : "https://api.github.com/users/ptschip/orgs",
         "received_events_url" : "https://api.github.com/users/ptschip/received_events",
         "repos_url" : "https://api.github.com/users/ptschip/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ptschip/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ptschip/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ptschip"
      }
   },
   {
      "body" : "utACK cee6674",
      "created_at" : "2015-12-14T14:47:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7164#issuecomment-164455552",
      "id" : 164455552,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7164",
      "updated_at" : "2015-12-14T14:47:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/164455552",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=3",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7164#discussion_r47519739"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7164"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/47519739"
         }
      },
      "body" : "Seems like we don't actually need this guard here, do we?",
      "commit_id" : "39a525c21fd1b34df63ab30868423b97b708ee49",
      "created_at" : "2015-12-14T16:31:53Z",
      "diff_hunk" : "@@ -5654,24 +5654,26 @@ bool SendMessages(CNode* pto)\n         //\n         // Message: getdata (non-blocks)\n         //\n-        while (!pto->fDisconnect && !pto->mapAskFor.empty() && (*pto->mapAskFor.begin()).first <= nNow)\n+        if(!IsInitialBlockDownload())",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7164#discussion_r47519739",
      "id" : 47519739,
      "original_commit_id" : "cee667418fd4dc86ca4f00fb181fbcd9ff5bd347",
      "original_position" : 14,
      "path" : "src/main.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7164",
      "updated_at" : "2015-12-15T15:42:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/47519739",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7463573?v=3",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7164#discussion_r47548539"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7164"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/47548539"
         }
      },
      "body" : "What do you mean? adding this condition is the whol point of the PR, isn't it?",
      "commit_id" : "39a525c21fd1b34df63ab30868423b97b708ee49",
      "created_at" : "2015-12-14T19:53:28Z",
      "diff_hunk" : "@@ -5654,24 +5654,26 @@ bool SendMessages(CNode* pto)\n         //\n         // Message: getdata (non-blocks)\n         //\n-        while (!pto->fDisconnect && !pto->mapAskFor.empty() && (*pto->mapAskFor.begin()).first <= nNow)\n+        if(!IsInitialBlockDownload())",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7164#discussion_r47548539",
      "id" : 47548539,
      "original_commit_id" : "cee667418fd4dc86ca4f00fb181fbcd9ff5bd347",
      "original_position" : 14,
      "path" : "src/main.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7164",
      "updated_at" : "2015-12-15T15:42:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/47548539",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7164#discussion_r47548846"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7164"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/47548846"
         }
      },
      "body" : "I think the guard on line 4566 is sufficient, from my reading of the code and a quick test.  Is there a case I'm missing?",
      "commit_id" : "39a525c21fd1b34df63ab30868423b97b708ee49",
      "created_at" : "2015-12-14T19:55:22Z",
      "diff_hunk" : "@@ -5654,24 +5654,26 @@ bool SendMessages(CNode* pto)\n         //\n         // Message: getdata (non-blocks)\n         //\n-        while (!pto->fDisconnect && !pto->mapAskFor.empty() && (*pto->mapAskFor.begin()).first <= nNow)\n+        if(!IsInitialBlockDownload())",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7164#discussion_r47548846",
      "id" : 47548846,
      "original_commit_id" : "cee667418fd4dc86ca4f00fb181fbcd9ff5bd347",
      "original_position" : 14,
      "path" : "src/main.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7164",
      "updated_at" : "2015-12-15T15:42:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/47548846",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7463573?v=3",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7164#discussion_r47649828"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7164"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/47649828"
         }
      },
      "body" : "Yes, you're right.  I made the change and tested it out.\n\nI pushed it, if you want to take a look before I squash.\n\n\n\nOn 14/12/2015 11:56 AM, Suhas Daftuar wrote:\n>\n> In src/main.cpp\n> <https://github.com/bitcoin/bitcoin/pull/7164#discussion_r47548846>:\n>\n> > @@ -5654,24 +5654,26 @@ bool SendMessages(CNode* pto)\n> >          //\n> >          // Message: getdata (non-blocks)\n> >          //\n> > -        while (!pto->fDisconnect && !pto->mapAskFor.empty() && (*pto->mapAskFor.begin()).first <= nNow)\n> > +        if(!IsInitialBlockDownload())\n>\n> I think the guard on line 4566 is sufficient, from my reading of the\n> code and a quick test. Is there a case I'm missing?\n>\n> Ã¢ÂÂ\n> Reply to this email directly or view it on GitHub\n> <https://github.com/bitcoin/bitcoin/pull/7164/files#r47548846>.\n>\n\n",
      "commit_id" : "39a525c21fd1b34df63ab30868423b97b708ee49",
      "created_at" : "2015-12-15T15:25:07Z",
      "diff_hunk" : "@@ -5654,24 +5654,26 @@ bool SendMessages(CNode* pto)\n         //\n         // Message: getdata (non-blocks)\n         //\n-        while (!pto->fDisconnect && !pto->mapAskFor.empty() && (*pto->mapAskFor.begin()).first <= nNow)\n+        if(!IsInitialBlockDownload())",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7164#discussion_r47649828",
      "id" : 47649828,
      "original_commit_id" : "cee667418fd4dc86ca4f00fb181fbcd9ff5bd347",
      "original_position" : 14,
      "path" : "src/main.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7164",
      "updated_at" : "2015-12-15T15:42:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/47649828",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/12862928?v=3",
         "events_url" : "https://api.github.com/users/ptschip/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ptschip/followers",
         "following_url" : "https://api.github.com/users/ptschip/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ptschip/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ptschip",
         "id" : 12862928,
         "login" : "ptschip",
         "organizations_url" : "https://api.github.com/users/ptschip/orgs",
         "received_events_url" : "https://api.github.com/users/ptschip/received_events",
         "repos_url" : "https://api.github.com/users/ptschip/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ptschip/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ptschip/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ptschip"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7164#discussion_r47651822"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7164"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/47651822"
         }
      },
      "body" : "Looks good, feel free to squash",
      "commit_id" : "39a525c21fd1b34df63ab30868423b97b708ee49",
      "created_at" : "2015-12-15T15:37:05Z",
      "diff_hunk" : "@@ -5654,24 +5654,26 @@ bool SendMessages(CNode* pto)\n         //\n         // Message: getdata (non-blocks)\n         //\n-        while (!pto->fDisconnect && !pto->mapAskFor.empty() && (*pto->mapAskFor.begin()).first <= nNow)\n+        if(!IsInitialBlockDownload())",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7164#discussion_r47651822",
      "id" : 47651822,
      "original_commit_id" : "cee667418fd4dc86ca4f00fb181fbcd9ff5bd347",
      "original_position" : 14,
      "path" : "src/main.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7164",
      "updated_at" : "2015-12-15T15:42:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/47651822",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7463573?v=3",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7164#discussion_r47652970"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7164"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/47652970"
         }
      },
      "body" : "Squashed.\n\nWell there you go, just one line of code :)\n\nOn 15/12/2015 7:38 AM, Suhas Daftuar wrote:\n>\n> In src/main.cpp\n> <https://github.com/bitcoin/bitcoin/pull/7164#discussion_r47651822>:\n>\n> > @@ -5654,24 +5654,26 @@ bool SendMessages(CNode* pto)\n> >          //\n> >          // Message: getdata (non-blocks)\n> >          //\n> > -        while (!pto->fDisconnect && !pto->mapAskFor.empty() && (*pto->mapAskFor.begin()).first <= nNow)\n> > +        if(!IsInitialBlockDownload())\n>\n> Looks good, feel free to squash\n>\n> Ã¢ÂÂ\n> Reply to this email directly or view it on GitHub\n> <https://github.com/bitcoin/bitcoin/pull/7164/files#r47651822>.\n>\n\n",
      "commit_id" : "39a525c21fd1b34df63ab30868423b97b708ee49",
      "created_at" : "2015-12-15T15:44:31Z",
      "diff_hunk" : "@@ -5654,24 +5654,26 @@ bool SendMessages(CNode* pto)\n         //\n         // Message: getdata (non-blocks)\n         //\n-        while (!pto->fDisconnect && !pto->mapAskFor.empty() && (*pto->mapAskFor.begin()).first <= nNow)\n+        if(!IsInitialBlockDownload())",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7164#discussion_r47652970",
      "id" : 47652970,
      "original_commit_id" : "cee667418fd4dc86ca4f00fb181fbcd9ff5bd347",
      "original_position" : 14,
      "path" : "src/main.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7164",
      "updated_at" : "2015-12-15T15:44:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/47652970",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/12862928?v=3",
         "events_url" : "https://api.github.com/users/ptschip/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ptschip/followers",
         "following_url" : "https://api.github.com/users/ptschip/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ptschip/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ptschip",
         "id" : 12862928,
         "login" : "ptschip",
         "organizations_url" : "https://api.github.com/users/ptschip/orgs",
         "received_events_url" : "https://api.github.com/users/ptschip/received_events",
         "repos_url" : "https://api.github.com/users/ptschip/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ptschip/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ptschip/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ptschip"
      }
   },
   {
      "body" : "ACK 39a525c21fd1b34df63ab30868423b97b708ee49",
      "created_at" : "2015-12-15T16:01:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7164#issuecomment-164808050",
      "id" : 164808050,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7164",
      "updated_at" : "2015-12-15T16:01:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/164808050",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7463573?v=3",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "body" : "re-utACK 39a525c21fd1b34df63ab30868423b97b708ee49",
      "created_at" : "2015-12-15T18:53:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7164#issuecomment-164854868",
      "id" : 164854868,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7164",
      "updated_at" : "2015-12-19T00:38:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/164854868",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "body" : "@laanwj I think this should be ready to be merged.",
      "created_at" : "2015-12-18T00:43:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7164#issuecomment-165625818",
      "id" : 165625818,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7164",
      "updated_at" : "2015-12-18T00:43:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/165625818",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/12862928?v=3",
         "events_url" : "https://api.github.com/users/ptschip/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ptschip/followers",
         "following_url" : "https://api.github.com/users/ptschip/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ptschip/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ptschip",
         "id" : 12862928,
         "login" : "ptschip",
         "organizations_url" : "https://api.github.com/users/ptschip/orgs",
         "received_events_url" : "https://api.github.com/users/ptschip/received_events",
         "repos_url" : "https://api.github.com/users/ptschip/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ptschip/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ptschip/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ptschip"
      }
   },
   {
      "body" : "@laanwj any reason not to merge?\r\nre-tested ACK 39a525c",
      "created_at" : "2016-01-15T00:36:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7164#issuecomment-171829560",
      "id" : 171829560,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7164",
      "updated_at" : "2016-01-15T00:36:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/171829560",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/413395?v=3",
         "events_url" : "https://api.github.com/users/dcousens/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dcousens/followers",
         "following_url" : "https://api.github.com/users/dcousens/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dcousens/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dcousens",
         "id" : 413395,
         "login" : "dcousens",
         "organizations_url" : "https://api.github.com/users/dcousens/orgs",
         "received_events_url" : "https://api.github.com/users/dcousens/received_events",
         "repos_url" : "https://api.github.com/users/dcousens/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dcousens/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dcousens/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dcousens"
      }
   }
]
