{
   "assignee" : null,
   "assignees" : [],
   "author_association" : "CONTRIBUTOR",
   "body" : "### Describe the issue\r\n\r\nWhen running two pruned nodes, one for mainnet and one for testnet3, the memory usage of the testnet3 daemon is much higher than the mainnet node.\r\n\r\n### Can you reliably reproduce the issue?\r\n#### If so, please list the steps to reproduce below:\r\n\r\nRelevant entries in bitcoin.conf:\r\n```\r\ndisablewallet=1\r\nlisten=1\r\nrest=1\r\n```\r\nmainnet\r\n```\r\nprune=6480\r\n```\r\ntestnet3\r\n```\r\nprune=1024\r\n```\r\n\r\nSteps to reproduce:\r\n\r\nrun `bitcoind -maxmempool=100 -dbcache=16`\r\nrun `bitcoind -testnet -maxmempool=100 -dbcache=16`\r\n\r\n### Expected behaviour\r\n\r\nI would expect memory usage to be relatively equivalent across the two instances.\r\n\r\n### Actual behaviour\r\n\r\nImmediately after start, mainnet has approx. 250M resident whilst testnet has approx 450M resident.\r\n\r\nBoth nodes are synced to the latest height (484225 main, 1181354 test).\r\n\r\n### What version of bitcoin-core are you using?\r\n\r\nv0.15.0rc3 verified signed binaries from bitcoin.org/bin.\r\n\r\n### Machine specs:\r\n\r\nLinode 1024 VPS, Ubuntu 16.04 LTS with 1GB RAM, 20GB SSD.",
   "closed_at" : "2017-10-07T13:37:35Z",
   "closed_by" : {
      "avatar_url" : "https://avatars2.githubusercontent.com/u/863730?v=4",
      "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
      "followers_url" : "https://api.github.com/users/fanquake/followers",
      "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
      "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/fanquake",
      "id" : 863730,
      "login" : "fanquake",
      "organizations_url" : "https://api.github.com/users/fanquake/orgs",
      "received_events_url" : "https://api.github.com/users/fanquake/received_events",
      "repos_url" : "https://api.github.com/users/fanquake/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/fanquake"
   },
   "comments" : 2,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11290/comments",
   "created_at" : "2017-09-08T19:42:27Z",
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11290/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/issues/11290",
   "id" : 256352405,
   "labels" : [
      {
         "color" : "981023",
         "default" : false,
         "id" : 326918230,
         "name" : "Resource usage",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/Resource%20usage"
      }
   ],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11290/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "number" : 11290,
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "closed",
   "title" : "Testnet memory usage ~double that of mainnet (bitcoind v0.15.0rc3)",
   "updated_at" : "2017-10-07T13:37:35Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11290",
   "user" : {
      "avatar_url" : "https://avatars0.githubusercontent.com/u/7999704?v=4",
      "events_url" : "https://api.github.com/users/esotericnonsense/events{/privacy}",
      "followers_url" : "https://api.github.com/users/esotericnonsense/followers",
      "following_url" : "https://api.github.com/users/esotericnonsense/following{/other_user}",
      "gists_url" : "https://api.github.com/users/esotericnonsense/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/esotericnonsense",
      "id" : 7999704,
      "login" : "esotericnonsense",
      "organizations_url" : "https://api.github.com/users/esotericnonsense/orgs",
      "received_events_url" : "https://api.github.com/users/esotericnonsense/received_events",
      "repos_url" : "https://api.github.com/users/esotericnonsense/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/esotericnonsense/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/esotericnonsense/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/esotericnonsense"
   }
}
