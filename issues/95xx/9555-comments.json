[
   {
      "body" : "It is set one line before use, no?\n\nOn Sat, Jan 14, 2017 at 8:45 PM, practicalswift <notifications@github.com>\nwrote:\n\n> Prior to this commit the err variable was not guaranteed to set prior to\n> the check ...\n>\n> BOOST_CHECK_MESSAGE(err != SCRIPT_ERR_OK, ScriptErrorString(err));\n>\n> ... triggering UB.\n> ------------------------------\n> You can view, comment on, or merge this pull request online at:\n>\n>   https://github.com/bitcoin/bitcoin/pull/9555\n> Commit Summary\n>\n>    - [test] Avoid undefined behaviour in tx_invalid-test\n>    (transaction_tests.cpp)\n>\n> File Changes\n>\n>    - *M* src/test/transaction_tests.cpp\n>    <https://github.com/bitcoin/bitcoin/pull/9555/files#diff-0> (2)\n>\n> Patch Links:\n>\n>    - https://github.com/bitcoin/bitcoin/pull/9555.patch\n>    - https://github.com/bitcoin/bitcoin/pull/9555.diff\n>\n> Ã¢ÂÂ\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/bitcoin/bitcoin/pull/9555>, or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AGGmvxdY6fMunnH-S0n2t9WF7XiZ_BQhks5rSSXkgaJpZM4LjuLa>\n> .\n>\n",
      "created_at" : "2017-01-14T23:18:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9555#issuecomment-272660752",
      "id" : 272660752,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9555",
      "updated_at" : "2017-01-14T23:18:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/272660752",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=3",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "body" : "@MarcoFalke Not in the cases ...\r\n\r\n* `tx.vin.size() == 0`, or\r\n* `!(CheckTransaction(tx, state) && state.IsValid())`\r\n\r\n... right? :-)",
      "created_at" : "2017-01-14T23:48:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9555#issuecomment-272662288",
      "id" : 272662288,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9555",
      "updated_at" : "2017-01-14T23:48:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/272662288",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7826565?v=3",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "body" : "@MarcoFalke After re-reading your comment I think that you might be referring to `err` in the context of [lines 172-175](https://github.com/practicalswift/bitcoin/blob/dbb285a9dcc6fcd71097831a0ddb70fc2d826082/src/test/transaction_tests.cpp#L172-L175) whereas my PR is referring to `err` on [lines 242-260](https://github.com/practicalswift/bitcoin/blob/dbb285a9dcc6fcd71097831a0ddb70fc2d826082/src/test/transaction_tests.cpp#L242-L260). Is my interpretation correct? :-)",
      "created_at" : "2017-01-15T21:33:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9555#issuecomment-272725531",
      "id" : 272725531,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9555",
      "updated_at" : "2017-01-15T21:33:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/272725531",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7826565?v=3",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "body" : "It may be better to leave this be, so memory sanitizers and static analysis can detect cases where we fail to set it?",
      "created_at" : "2017-01-20T23:03:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9555#issuecomment-274203206",
      "id" : 274203206,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9555",
      "updated_at" : "2017-01-20T23:03:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/274203206",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "@luke-jr Good point about catching cases where we fail to set it. My suggestion is that we initialize to `SCRIPT_ERR_OK`. That will make sure that failures to set `err` are always detected since the test asserts that `err != SCRIPT_ERR_OK`. See updated version. Looks OK? :-)",
      "created_at" : "2017-01-21T09:50:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9555#issuecomment-274251511",
      "id" : 274251511,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9555",
      "updated_at" : "2017-01-21T09:50:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/274251511",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7826565?v=3",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "body" : "Indeed, I was reading the wrong lines of the file.\n\nutACK 8455e367fe79ff53ea81d283f3435e74b1633c88\n",
      "created_at" : "2017-01-22T17:43:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9555#issuecomment-274345968",
      "id" : 274345968,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9555",
      "updated_at" : "2017-01-22T17:43:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/274345968",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=3",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "body" : "That will still suppress compiler and analyser warnings of using unassigned values. Is there a way we can initialise it, yet tell the compiler/etc to treat the value as uninitialised still?",
      "created_at" : "2017-02-02T20:46:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9555#issuecomment-277078237",
      "id" : 277078237,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9555",
      "updated_at" : "2017-02-02T20:46:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/277078237",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "@luke-jr I don't know if that is possible and/or how to do it, but if possible I'll add such an annotation :-)  Let me know if you find any info on how to achieve that",
      "created_at" : "2017-02-02T22:21:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9555#issuecomment-277103530",
      "id" : 277103530,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9555",
      "updated_at" : "2017-02-02T22:21:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/277103530",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7826565?v=3",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "body" : "As long as the tests fail when the variable is not assigned the correct value in the code, all is fine.",
      "created_at" : "2017-03-06T09:54:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9555#issuecomment-284350807",
      "id" : 284350807,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9555",
      "updated_at" : "2017-03-06T09:55:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/284350807",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/6399679?v=3",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "body" : "@MarcoFalke Yes, that should be the case now :-)\r\n",
      "created_at" : "2017-03-06T09:56:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9555#issuecomment-284351291",
      "id" : 284351291,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9555",
      "updated_at" : "2017-03-06T09:56:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/284351291",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/7826565?v=3",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   }
]
