[
   {
      "body" : "fundrawtransaction.py fails on travis",
      "created_at" : "2017-01-12T10:01:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9522#issuecomment-272122413",
      "id" : 272122413,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9522",
      "updated_at" : "2017-01-12T10:01:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/272122413",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=3",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "body" : "It is failing because the transaction is a 0 input transaction which is being interpreted as a segwit transaction. As per the discussion on IRC, not being able to decode 0 input transactions is acceptable behavior.",
      "created_at" : "2017-01-12T15:16:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9522#issuecomment-272189545",
      "id" : 272189545,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9522",
      "updated_at" : "2017-01-12T15:16:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/272189545",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=3",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "body" : "I know I suggested on IRC that we just let decoderawtransaction() fail on transactions with no inputs, but perhaps not working at all on 0-input transactions is a bigger regression than necessary?\r\n\r\nI believe we only have ambiguity in the case where something might deserialize into a 0-input, 1-output transaction when witness serialization is disabled.  So perhaps we should just assume the segwit deserialization if a transaction can be decoded both ways (not perfect, but the best we can do for now, I think), and otherwise allow for 0-input transactions?\r\n\r\nSpecifically: I think we can leave the existing call to DecodeHexTx unchanged (ie, pass in `true` as the last argument), and then add an additional check that, if mtx is a 0-input transaction, try to decode again with that last boolean set to `false` (to force segwit deserialization), and if it succeeds, prefer the segwit deserialization over the 0-input one.\r\n\r\nWe should document this behavior as well...",
      "created_at" : "2017-02-07T20:39:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9522#issuecomment-278132685",
      "id" : 278132685,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9522",
      "updated_at" : "2017-02-07T20:39:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/278132685",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7463573?v=3",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "body" : "I suppose that would work as well. It wouldn't actually be checking for just 0 inputs but rather the `0x0001` flag that signals for segwit, so not all 0-input txs would have to go through both desers.",
      "created_at" : "2017-02-07T21:06:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9522#issuecomment-278139817",
      "id" : 278139817,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9522",
      "updated_at" : "2017-02-07T21:06:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/278139817",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=3",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "body" : " I rebased and made @sdaftuar 's suggestion. I can squash if this will be merged as this may not yet be the best solution.\r\n\r\nAlso, it still fails fundrawtransaction.py, at this test: https://github.com/bitcoin/bitcoin/blob/master/qa/rpc-tests/fundrawtransaction.py#L588. I don't know what to do about that.",
      "created_at" : "2017-02-07T22:06:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9522#issuecomment-278157180",
      "id" : 278157180,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9522",
      "updated_at" : "2017-02-07T22:06:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/278157180",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=3",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "body" : "What does this actually fix? `DecodeHexTx` *already* tries both deserializations, and only accepts them if the entire data is consumed...",
      "created_at" : "2017-02-16T09:34:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9522#issuecomment-280280288",
      "id" : 280280288,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9522",
      "updated_at" : "2017-02-16T09:34:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/280280288",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "I've tested this and it doesn't appear to solve the originally reported problem in https://bitcointalk.org/index.php?topic=1748353.msg17477509#msg17477509 :\r\n\r\n```\r\nbitcoin-cli decoderawtransaction \"02000000000101c564a62f94c025ac80137817d8658aabceaaad30412facecba1bd2255182e1c40000000000ffffffff01ca124c000000000016001443aac20a116e09ea4f7914be1c55e4c17aa600b7024730440220679eaf5e41eee49b38f3112ec90b49a655db21677db4d7fa80de67aeb987161102204024b85730fc106d0b870623fc221946e624413363eb627fe90eb5047d35565c012103335134d7414e1d1a154600b124a96f5ef2c6ca21434d2622469a96bd5262fd5600000000\"\r\n{\r\n  \"txid\": \"54ad9b3b24064c4033814ddc712a393cfa4e011eb7ac24374687511cd056eac5\",\r\n  \"hash\": \"54ad9b3b24064c4033814ddc712a393cfa4e011eb7ac24374687511cd056eac5\",\r\n  \"size\": 191,\r\n  \"vsize\": 191,\r\n  \"version\": 2,\r\n  \"locktime\": 0,\r\n  \"vin\": [\r\n  ],\r\n  \"vout\": [\r\n    {\r\n      \"value\": 27203371073.07775233,\r\n      \"n\": 0,\r\n      \"scriptPubKey\": {\r\n        \"asm\": \"OP_LEFT 7817d8658aabceaaad30412facecba1bd22551 OP_SIZE OP_UNKNOWN OP_UNKNOWN 0 0 0 0 0 OP_INVALIDOPCODE OP_INVALIDOPCODE OP_INVALIDOPCODE OP_INVALIDOPCODE -74 4c000000000016001443aac20a116e09ea4f OP_PICK be1c55e4c17aa600b7024730440220679eaf5e41 OP_UNKNOWN OP_UNKNOWN OP_BOOLOR f3112ec90b49a655db21677db4d7fa80de67aeb987161102204024b85730fc106d0b870623fc221946e624413363eb627fe90eb5047d3556 12 33 3428659 OP_UNKNOWN [error]\",\r\n        \"hex\": \"80137817d8658aabceaaad30412facecba1bd2255182e1c40000000000ffffffff01ca124c000000000016001443aac20a116e09ea4f7914be1c55e4c17aa600b7024730440220679eaf5e41eee49b38f3112ec90b49a655db21677db4d7fa80de67aeb987161102204024b85730fc106d0b870623fc221946e624413363eb627fe90eb5047d35565c012103335134d7414e1d1a154600b124a96f5ef2c6ca21434d2622469a96bd5262fd56\",\r\n        \"type\": \"nonstandard\"\r\n      }\r\n    }\r\n  ]\r\n}\r\n```\r\n\r\nam I doing something wrong?",
      "created_at" : "2017-02-16T23:40:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9522#issuecomment-280500926",
      "id" : 280500926,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9522",
      "updated_at" : "2017-02-16T23:40:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/280500926",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "body" : "You definitely did something wrong. It worked fine for me:\r\n\r\n```Ã¯Â¿Â¼\r\ndecoderawtransaction 02000000000101c564a62f94c025ac80137817d8658aabceaaad30412facecba1bd2255182e1c40000000000ffffffff01ca124c000000000016001443aac20a116e09ea4f7914be1c55e4c17aa600b7024730440220679eaf5e41eee49b38f3112ec90b49a655db21677db4d7fa80de67aeb987161102204024b85730fc106d0b870623fc221946e624413363eb627fe90eb5047d35565c012103335134d7414e1d1a154600b124a96f5ef2c6ca21434d2622469a96bd5262fd5600000000\r\nÃ¯Â¿Â¼\r\n{\r\n  \"txid\": \"a24cec50d5cf861d1af4b634f8ed1968c0e9484724bfef5af7f8c383605978c8\",\r\n  \"hash\": \"54ad9b3b24064c4033814ddc712a393cfa4e011eb7ac24374687511cd056eac5\",\r\n  \"size\": 191,\r\n  \"vsize\": 110,\r\n  \"version\": 2,\r\n  \"locktime\": 0,\r\n  \"vin\": [\r\n    {\r\n      \"txid\": \"c4e1825125d21bbaecac2f4130adaaceab8a65d817781380ac25c0942fa664c5\",\r\n      \"vout\": 0,\r\n      \"scriptSig\": {\r\n        \"asm\": \"\",\r\n        \"hex\": \"\"\r\n      },\r\n      \"txinwitness\": [\r\n        \"30440220679eaf5e41eee49b38f3112ec90b49a655db21677db4d7fa80de67aeb987161102204024b85730fc106d0b870623fc221946e624413363eb627fe90eb5047d35565c01\", \r\n        \"03335134d7414e1d1a154600b124a96f5ef2c6ca21434d2622469a96bd5262fd56\"\r\n      ],\r\n      \"sequence\": 4294967295\r\n    }\r\n  ],\r\n  \"vout\": [\r\n    {\r\n      \"value\": 0.04985546,\r\n      \"n\": 0,\r\n      \"scriptPubKey\": {\r\n        \"asm\": \"0 43aac20a116e09ea4f7914be1c55e4c17aa600b7\",\r\n        \"hex\": \"001443aac20a116e09ea4f7914be1c55e4c17aa600b7\",\r\n        \"type\": \"witness_v0_keyhash\"\r\n      }\r\n    }\r\n  ]\r\n}\r\n```",
      "created_at" : "2017-02-17T00:26:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9522#issuecomment-280510800",
      "id" : 280510800,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9522",
      "updated_at" : "2017-02-17T00:26:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/280510800",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=3",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "body" : "I don't understand what this PR is doing. As @luke-jr points out, `DecodeHexTx` always tries both deserializations (in fact, everything always tries both)... but it prefers the non-witness one when `fTryNoWitness` is passed, which is the case. If we want it to prefer the witness version in case of ambiguity, we should just pass false.",
      "created_at" : "2017-02-17T00:46:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9522#issuecomment-280514261",
      "id" : 280514261,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9522",
      "updated_at" : "2017-02-17T00:46:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/280514261",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Oh, I see... you're looking at the hex code in order to determine the number of txins. Can you instead look at tx.vin.size() of the decode?",
      "created_at" : "2017-02-17T00:55:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9522#issuecomment-280515797",
      "id" : 280515797,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9522",
      "updated_at" : "2017-02-17T00:55:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/280515797",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "We discussed this on IRC a while ago. The issue is with 0-input transactions, specifically with witness transactions being interpreted as non-withess 0 input transactions. This PR is to make it prefer the witness serialization over a non-witness for 0-input transactions but maintain the original behavior for other transactions.",
      "created_at" : "2017-02-17T01:42:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9522#issuecomment-280523897",
      "id" : 280523897,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9522",
      "updated_at" : "2017-02-17T01:42:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/280523897",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=3",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "body" : "@achow101 Isn't that just identical to passing `false` to DecodeHexTx? The only case in which the decoding is ambiguous is where the non-witness transaction has 0 inputs.",
      "created_at" : "2017-02-17T01:56:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9522#issuecomment-280526181",
      "id" : 280526181,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9522",
      "updated_at" : "2017-02-17T01:56:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/280526181",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "@sipa I don't think so. As I understand it, when you pass `false` to `DecodeHexTx` it will interpret a non-witness 0-input transaction as a witness transaction and thus fail to decode it. What this does is that such transactions will be decoded properly on the first pass with `true` being passed in so as to still be able to decode non-witness 0-input transactions instead of failing with decoding them as witness transactions.",
      "created_at" : "2017-02-17T02:11:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9522#issuecomment-280528651",
      "id" : 280528651,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9522",
      "updated_at" : "2017-02-17T02:11:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/280528651",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=3",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/9522#discussion_r101673819"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9522"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/101673819"
         }
      },
      "body" : "I think this can be written as `if (mtx.vin.size() == 0) {` instead.",
      "commit_id" : "36383ae302dddf8714a8554ac2e84b8c4fc6f040",
      "created_at" : "2017-02-17T02:16:43Z",
      "diff_hunk" : "@@ -521,10 +525,16 @@ UniValue decoderawtransaction(const JSONRPCRequest& request)\n     LOCK(cs_main);\n     RPCTypeCheck(request.params, boost::assign::list_of(UniValue::VSTR));\n \n-    CMutableTransaction mtx;\n+    CMutableTransaction mtx, witMtx;\n \n-    if (!DecodeHexTx(mtx, request.params[0].get_str(), true))\n+    if (!DecodeHexTx(mtx, request.params[0].get_str(), true)) {\n         throw JSONRPCError(RPC_DESERIALIZATION_ERROR, \"TX decode failed\");\n+    }\n+    if (request.params[0].get_str().compare(8, 4, \"0001\") == 0) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9522#discussion_r101673819",
      "id" : 101673819,
      "original_commit_id" : "a992d4fbc3ffd82192f8f5a1119700f3b5e34db1",
      "original_position" : 22,
      "path" : "src/rpc/rawtransaction.cpp",
      "position" : null,
      "pull_request_review_id" : 22410354,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9522",
      "updated_at" : "2017-02-18T23:47:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/101673819",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "@achow101 I see, of course. The deserialization code doesn't actually try two combinations.",
      "created_at" : "2017-02-17T02:17:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9522#issuecomment-280529561",
      "id" : 280529561,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9522",
      "updated_at" : "2017-02-17T02:17:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/280529561",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "I'm baffled as to why the tests magically pass now with @sipa's change.",
      "created_at" : "2017-02-17T02:22:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9522#issuecomment-280530237",
      "id" : 280530237,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9522",
      "updated_at" : "2017-02-17T02:22:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/280530237",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=3",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "body" : "It's no longer checking `vout.size()==1`? (which it probably ought to..)",
      "created_at" : "2017-02-17T06:13:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9522#issuecomment-280563242",
      "id" : 280563242,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9522",
      "updated_at" : "2017-02-17T06:13:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/280563242",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "A transaction with 0 inputs and 2 outputs can be mistaken for an (invalid) extended transaction as well.",
      "created_at" : "2017-02-17T06:19:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9522#issuecomment-280564241",
      "id" : 280564241,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9522",
      "updated_at" : "2017-02-17T06:19:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/280564241",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "> A transaction with 0 inputs and 2 outputs can be mistaken for an (invalid) extended transaction as well.\r\n\r\nRight, but that shouldn't be a problem now because it will properly decode as non-witness, fail to decode as witness and thus fallback to non-witness decoding.",
      "created_at" : "2017-02-17T13:58:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9522#issuecomment-280656191",
      "id" : 280656191,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9522",
      "updated_at" : "2017-02-17T13:58:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/280656191",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=3",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "body" : "Apologies. I had an old bitcoind in my path. I've retested and this now works.\r\n\r\nI can explain why fundrawtransaction passes. It's nothing to do with the change in decoderawtransaction. You've rebased off master and picked up #9650, which causes deserialization to fail if there are junk bytes at the end of a transaction. The test was failing on:\r\n\r\n`decoderawtransaction \"0100000000010000000000000000066a047465737400000000\"`\r\n\r\nWith this PR and without #9650, we'd:\r\n\r\n- deserialize with fTryNoWitness set to True, and succeed in deserializing a non-witness 0-in,1-out transaction\r\n- deserialize with fTryNoWitness set to False, and succeed in deserializing a witness 0-in,0-out transaction and ignoring the trailing junk bytes\r\n- return the witness 0-in,0-out transaction\r\n\r\nWith #9650 we:\r\n\r\n- deserialize with fTryNoWitness set to True, and succeed in deserializing a non-witness 0-in,1-out transaction\r\n- deserialize with fTryNoWitness set to False, and fail because of the trailing junk bytes\r\n- return the witness 0-in,1-out transaction\r\n\r\n(see - no magic :smile: )\r\n\r\nA couple of general comments:\r\n\r\n- Can you add a code comment above the new code in `decoderawtransaction()` explaining why we're deserializing two ways? It's quite subtle, so some explanation here would be good.\r\n- Can you add the same fix to bitcoin-tx (src/bitcoin-tx.cpp)? It's a pain, but while we have two tools for signing/decoding transactions, we should try to keep them aligned.",
      "created_at" : "2017-02-17T16:14:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9522#issuecomment-280693082",
      "id" : 280693082,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9522",
      "updated_at" : "2017-02-17T16:14:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/280693082",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "body" : "@jnewbery Ah, that makes sense now.\r\n\r\n> Can you add a code comment above the new code in decoderawtransaction() explaining why we're deserializing two ways? It's quite subtle, so some explanation here would be good.\r\n\r\nSure.\r\n\r\n> Can you add the same fix to bitcoin-tx (src/bitcoin-tx.cpp)? It's a pain, but while we have two tools for signing/decoding transactions, we should try to keep them aligned.\r\n\r\nI assume this should go in around the only line that has `DecodeHexTx()`?",
      "created_at" : "2017-02-17T16:22:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9522#issuecomment-280695664",
      "id" : 280695664,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9522",
      "updated_at" : "2017-02-17T16:22:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/280695664",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=3",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "body" : "> I assume this should go in around the only line that has DecodeHexTx()?\r\n\r\nI think it needs a bit more thought than that. bitcoin-tx combines the functionality of createrawtransaction, signrawtransaction and decoderawtransaction. With your change here, the deserialization logic is different for those different RPCs. Should we try to mirror that in bitcoin-tx?",
      "created_at" : "2017-02-17T16:29:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9522#issuecomment-280697558",
      "id" : 280697558,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9522",
      "updated_at" : "2017-02-17T16:29:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/280697558",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "body" : "@achow101 This doesn't even build now...",
      "created_at" : "2017-02-18T22:46:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9522#issuecomment-280880999",
      "id" : 280880999,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9522",
      "updated_at" : "2017-02-18T22:46:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/280880999",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "whoops. Bad copy-paste. Fixed that and rebased onto master.",
      "created_at" : "2017-02-18T22:53:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9522#issuecomment-280881374",
      "id" : 280881374,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9522",
      "updated_at" : "2017-02-18T22:53:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/280881374",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=3",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "body" : "Better if you could rebase on 9828f9a9962c1bee5c343847030b9cfd87a40a5e",
      "created_at" : "2017-02-18T23:27:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9522#issuecomment-280883034",
      "id" : 280883034,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9522",
      "updated_at" : "2017-02-18T23:27:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/280883034",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "It would be nice (perhaps necessary?) to have this in by the time segwit activates.",
      "created_at" : "2017-03-02T18:08:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9522#issuecomment-283732208",
      "id" : 283732208,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9522",
      "updated_at" : "2017-03-02T18:08:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/283732208",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/3782274?v=3",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/9522#discussion_r103996110"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9522"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/103996110"
         }
      },
      "body" : "what do you mean by 'normal transaction' here?",
      "commit_id" : "36383ae302dddf8714a8554ac2e84b8c4fc6f040",
      "created_at" : "2017-03-02T18:33:58Z",
      "diff_hunk" : "@@ -521,10 +525,21 @@ UniValue decoderawtransaction(const JSONRPCRequest& request)\n     LOCK(cs_main);\n     RPCTypeCheck(request.params, boost::assign::list_of(UniValue::VSTR));\n \n-    CMutableTransaction mtx;\n+    CMutableTransaction mtx, witMtx;\n \n-    if (!DecodeHexTx(mtx, request.params[0].get_str(), true))\n+    // First attempt to decode the transaction as a non-witness transaction\n+    if (!DecodeHexTx(mtx, request.params[0].get_str(), true)) {\n         throw JSONRPCError(RPC_DESERIALIZATION_ERROR, \"TX decode failed\");\n+    }\n+    // If the transaction has 0-inputs (either a 0-input non-witness transaction or a normal transaction)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9522#discussion_r103996110",
      "id" : 103996110,
      "original_commit_id" : "202c0dcdd598136be5bf284d0325a6fedda6f715",
      "original_position" : 23,
      "path" : "src/rpc/rawtransaction.cpp",
      "position" : 23,
      "pull_request_review_id" : 24807418,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9522",
      "updated_at" : "2017-03-02T18:33:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/103996110",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "body" : "I don't like that this breaks parity between `bitcoin-tx sign` and `bitcoin-cli signrawtransaction`.\r\n\r\n`bitcoin-tx sign` will now decode the transaction as segwit when there's ambiguity, but `bitcoin-cli signrawtransaction` will decode the transaction as 0-input non segwit when there's ambiguity.",
      "created_at" : "2017-03-02T18:37:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9522#issuecomment-283739925",
      "id" : 283739925,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9522",
      "updated_at" : "2017-03-02T18:37:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/283739925",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/9522#discussion_r103999698"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9522"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/103999698"
         }
      },
      "body" : "that should be \"witness transaction\"",
      "commit_id" : "36383ae302dddf8714a8554ac2e84b8c4fc6f040",
      "created_at" : "2017-03-02T18:50:23Z",
      "diff_hunk" : "@@ -521,10 +525,21 @@ UniValue decoderawtransaction(const JSONRPCRequest& request)\n     LOCK(cs_main);\n     RPCTypeCheck(request.params, boost::assign::list_of(UniValue::VSTR));\n \n-    CMutableTransaction mtx;\n+    CMutableTransaction mtx, witMtx;\n \n-    if (!DecodeHexTx(mtx, request.params[0].get_str(), true))\n+    // First attempt to decode the transaction as a non-witness transaction\n+    if (!DecodeHexTx(mtx, request.params[0].get_str(), true)) {\n         throw JSONRPCError(RPC_DESERIALIZATION_ERROR, \"TX decode failed\");\n+    }\n+    // If the transaction has 0-inputs (either a 0-input non-witness transaction or a normal transaction)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9522#discussion_r103999698",
      "id" : 103999698,
      "original_commit_id" : "202c0dcdd598136be5bf284d0325a6fedda6f715",
      "original_position" : 23,
      "path" : "src/rpc/rawtransaction.cpp",
      "position" : 23,
      "pull_request_review_id" : 24811285,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9522",
      "updated_at" : "2017-03-02T18:50:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/103999698",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/3782274?v=3",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "body" : "@jnewbery I can remove the commit that changes bitcoin-tx",
      "created_at" : "2017-03-02T18:51:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9522#issuecomment-283743500",
      "id" : 283743500,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9522",
      "updated_at" : "2017-03-02T18:51:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/283743500",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/3782274?v=3",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "body" : "> I can remove the commit that changes bitcoin-tx\r\n\r\nBut then you've broken the parity between `bitcoin-tx` and `bitcoin-cli decoderawtransaction`",
      "created_at" : "2017-03-02T21:18:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9522#issuecomment-283785084",
      "id" : 283785084,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9522",
      "updated_at" : "2017-03-02T21:18:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/283785084",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "body" : "@jnewbery I'm not quite sure what you are asking me to do. Do you want to have `decoderawtransaction`, `signrawtransaction`, and `bitcoin-tx` all have the same decoding behavior?",
      "created_at" : "2017-03-03T16:24:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9522#issuecomment-283999395",
      "id" : 283999395,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9522",
      "updated_at" : "2017-03-03T16:24:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/283999395",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/3782274?v=3",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "body" : "I'd suggest making bitcoin-tx behave like signrawtransaction if it's being used to sign a transaction, and behave like createrawtransaction/decoderawtransaction if it's being used to decode, create or modify (without signing) a transaction.",
      "created_at" : "2017-03-03T19:46:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9522#issuecomment-284051990",
      "id" : 284051990,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9522",
      "updated_at" : "2017-03-03T19:46:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/284051990",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "body" : "@jnewbery I don't think it is possible to have separate behavior like that in bitcoin-tx. You can have multiple things happening in one bitcoin-tx command. You can have it modify a transaction and then sign it, and for all of those to act on the same transaction consistently, the transaction needs to be the same across all bitcoin-tx commands, so there can't be separate decoding behavior. Also, the transaction is only decoded once for all bitcoin-tx commands.\r\n\r\nI could change signrawtransaction to have the same decoding behavior, and it would make sense there since you aren't going to be signing a 0-input transaction.",
      "created_at" : "2017-03-06T14:25:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9522#issuecomment-284409824",
      "id" : 284409824,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9522",
      "updated_at" : "2017-03-06T14:29:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/284409824",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/3782274?v=3",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   }
]
