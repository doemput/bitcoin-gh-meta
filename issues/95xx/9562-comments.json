[
   {
      "body" : "I'm not sure we should do this, since it leads to edge cases and interactions which are difficult to reason about. For example, what should happen in the following scenario:\r\n\r\n- there's a current ban for subnet 1.2.3.0/24\r\n- there's whitelist configuration for 1.2.3.1\r\n\r\nshould we remove banning for the entire subnet? Or remove the ban for the subnet and add bans for all other address in the subnet? Or keep the subnet ban configuration?\r\n\r\nI'd prefer that the UI issue a warning if it detects that a configured whitelisted address is banned at startup. For example:\r\n\r\n\"1.2.3.4 is configured as a whitelist address, but is within banned subnet 1.2.3.0/24. To remove the ban, go to <place> and do <thing>\"",
      "created_at" : "2017-01-23T21:23:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/9562#issuecomment-274621349",
      "id" : 274621349,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9562",
      "updated_at" : "2017-01-23T21:23:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/274621349",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "body" : "I would say for this example:\r\n\"first match wins\", with whitelist match checking before ban match checking:\r\n1. check for whitelist match\r\n2. check for ban match\r\n3. if neither matches, do the default action: allow\r\n\r\nSo, the ban match checking for 1.2.3.0/24 would be kept, but _before_ that ban match check, there would be the (successful) whitelist match check for 1.2.3.1, at which point further matching is stopped and access is granted. 1.2.3.2 would stilll be banned, because first match would be for banned subnet 1.2.3.0/24, at which point further matching is stopped.",
      "created_at" : "2017-02-19T06:59:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/9562#issuecomment-280900708",
      "id" : 280900708,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9562",
      "updated_at" : "2017-02-19T06:59:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/280900708",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8447873?v=3",
         "events_url" : "https://api.github.com/users/wodry/events{/privacy}",
         "followers_url" : "https://api.github.com/users/wodry/followers",
         "following_url" : "https://api.github.com/users/wodry/following{/other_user}",
         "gists_url" : "https://api.github.com/users/wodry/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/wodry",
         "id" : 8447873,
         "login" : "wodry",
         "organizations_url" : "https://api.github.com/users/wodry/orgs",
         "received_events_url" : "https://api.github.com/users/wodry/received_events",
         "repos_url" : "https://api.github.com/users/wodry/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/wodry/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/wodry/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/wodry"
      }
   },
   {
      "body" : "Hum, generally for stuff like this you want most-specific to match first, not always whitelist first. Still, the UI issue of the ban appearing in the ban list with a conflicting whitelist is hard... Likely need to just add the whitelist list to the same dialog, and have whitelists that are identical to bans remove the ban (ie most-recently-set-matches-first)\n\nOn February 19, 2017 2:00:02 AM EST, wodry <notifications@github.com> wrote:\n>I would say for this example:\n>\"first match wins\", with whitelist match checking before ban match\n>checking:\n>1. check for whitelist match\n>2. check for ban match\n>3. if neither matches, do the default action: allow\n>\n>So, the ban match checking for 1.2.3.0/24 would be kept, but _before_\n>that ban match check, there would be the (successful) whitelist match\n>check for 1.2.3.1, at which point further matching is stopped and\n>access is granted. 1.2.3.2 would stilll be banned, because first match\n>would be for banned subnet 1.2.3.0/24, at which point further matching\n>is stopped.\n>\n>-- \n>You are receiving this because you are subscribed to this thread.\n>Reply to this email directly or view it on GitHub:\n>https://github.com/bitcoin/bitcoin/issues/9562#issuecomment-280900708\n",
      "created_at" : "2017-02-19T22:12:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/9562#issuecomment-280953741",
      "id" : 280953741,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9562",
      "updated_at" : "2017-02-19T22:12:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/280953741",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   }
]
