[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/9571#discussion_r96560845"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9571"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/96560845"
         }
      },
      "body" : "try to avoid changing whitespace randomly",
      "commit_id" : "9b9b68527dc95a1edca7de24286473ac9a59499c",
      "created_at" : "2017-01-18T03:15:35Z",
      "diff_hunk" : "@@ -187,7 +187,7 @@ void RPCNotifyBlockChange(bool ibd, const CBlockIndex * pindex)\n         latestblock.hash = pindex->GetBlockHash();\n         latestblock.height = pindex->nHeight;\n     }\n-\tcond_blockchange.notify_all();\n+    cond_blockchange.notify_all();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9571#discussion_r96560845",
      "id" : 96560845,
      "original_commit_id" : "f11577c1604dbc024aa94e76f09b1ec4e101b5aa",
      "original_position" : 5,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 5,
      "pull_request_review_id" : 17145449,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9571",
      "updated_at" : "2017-02-21T22:17:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/96560845",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=3",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/9571#discussion_r96560969"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9571"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/96560969"
         }
      },
      "body" : "remove?",
      "commit_id" : "9b9b68527dc95a1edca7de24286473ac9a59499c",
      "created_at" : "2017-01-18T03:17:28Z",
      "diff_hunk" : "@@ -8,6 +8,7 @@ src/bitcoin-tx\n src/test/test_bitcoin\n src/test/test_bitcoin_fuzzy\n src/qt/test/test_bitcoin-qt\n+src/datadir",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9571#discussion_r96560969",
      "id" : 96560969,
      "original_commit_id" : "f11577c1604dbc024aa94e76f09b1ec4e101b5aa",
      "original_position" : 4,
      "path" : ".gitignore",
      "position" : null,
      "pull_request_review_id" : 17145449,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9571",
      "updated_at" : "2017-02-21T22:17:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/96560969",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=3",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "body" : "NAK. The BIP9 quorum sensing is not a vote.",
      "created_at" : "2017-01-18T09:03:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9571#issuecomment-273420146",
      "id" : 273420146,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9571",
      "updated_at" : "2017-01-18T09:03:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/273420146",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "[Signaling statistics for soft forks pre-BIP9 used to be reported by `getblockchaininfo`.](https://github.com/bitcoin/bitcoin/blob/381917f610e3c770acb5e323884e7eef6fd25841/src/rpc/blockchain.cpp#L832-L835)\r\n\r\nI think it's helpful to see the adoption rate to better predict when a soft fork will engage. Currently there are several 3rd party websites that report these statistics, I would rather get them from my own node.",
      "created_at" : "2017-01-18T17:03:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9571#issuecomment-273535447",
      "id" : 273535447,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9571",
      "updated_at" : "2017-01-18T17:03:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/273535447",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2084648?v=3",
         "events_url" : "https://api.github.com/users/pinheadmz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pinheadmz/followers",
         "following_url" : "https://api.github.com/users/pinheadmz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pinheadmz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pinheadmz",
         "id" : 2084648,
         "login" : "pinheadmz",
         "organizations_url" : "https://api.github.com/users/pinheadmz/orgs",
         "received_events_url" : "https://api.github.com/users/pinheadmz/received_events",
         "repos_url" : "https://api.github.com/users/pinheadmz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pinheadmz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pinheadmz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pinheadmz"
      }
   },
   {
      "body" : "I think these are useful statistics to have. Just don't call it a vote in the RPC help.\r\n",
      "created_at" : "2017-01-18T17:06:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9571#issuecomment-273536320",
      "id" : 273536320,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9571",
      "updated_at" : "2017-02-10T06:55:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/273536320",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "@sipa no V-word in the RPC help. I rephrased my commit description.",
      "created_at" : "2017-01-18T17:14:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9571#issuecomment-273538493",
      "id" : 273538493,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9571",
      "updated_at" : "2017-01-18T17:14:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/273538493",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2084648?v=3",
         "events_url" : "https://api.github.com/users/pinheadmz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pinheadmz/followers",
         "following_url" : "https://api.github.com/users/pinheadmz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pinheadmz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pinheadmz",
         "id" : 2084648,
         "login" : "pinheadmz",
         "organizations_url" : "https://api.github.com/users/pinheadmz/orgs",
         "received_events_url" : "https://api.github.com/users/pinheadmz/received_events",
         "repos_url" : "https://api.github.com/users/pinheadmz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pinheadmz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pinheadmz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pinheadmz"
      }
   },
   {
      "body" : "yea, okay. Anyone interested in writing a test for one off on the possible boundary.",
      "created_at" : "2017-01-18T20:14:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9571#issuecomment-273588537",
      "id" : 273588537,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9571",
      "updated_at" : "2017-01-18T20:14:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/273588537",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "@gmaxwell Added tests, look ok?",
      "created_at" : "2017-01-18T22:00:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9571#issuecomment-273615396",
      "id" : 273615396,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9571",
      "updated_at" : "2017-01-18T22:00:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/273615396",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2084648?v=3",
         "events_url" : "https://api.github.com/users/pinheadmz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pinheadmz/followers",
         "following_url" : "https://api.github.com/users/pinheadmz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pinheadmz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pinheadmz",
         "id" : 2084648,
         "login" : "pinheadmz",
         "organizations_url" : "https://api.github.com/users/pinheadmz/orgs",
         "received_events_url" : "https://api.github.com/users/pinheadmz/received_events",
         "repos_url" : "https://api.github.com/users/pinheadmz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pinheadmz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pinheadmz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pinheadmz"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/9571#discussion_r96744144"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9571"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/96744144"
         }
      },
      "body" : "Preferably dont add a UniValue dependancy here...maybe just define a struct which carries the info you want?",
      "commit_id" : "9b9b68527dc95a1edca7de24286473ac9a59499c",
      "created_at" : "2017-01-18T22:01:07Z",
      "diff_hunk" : "@@ -32,6 +32,8 @@\n #include <boost/unordered_map.hpp>\n #include <boost/filesystem/path.hpp>\n \n+#include <univalue.h>",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9571#discussion_r96744144",
      "id" : 96744144,
      "original_commit_id" : "69cff857e5b446092875318be6de8d0c629246ff",
      "original_position" : 4,
      "path" : "src/validation.h",
      "position" : null,
      "pull_request_review_id" : 17336485,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9571",
      "updated_at" : "2017-02-21T22:17:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/96744144",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "Looks cool, I've previously written python crap to calculate similar stats from rpc data.",
      "created_at" : "2017-01-18T22:01:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9571#issuecomment-273615708",
      "id" : 273615708,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9571",
      "updated_at" : "2017-01-18T22:01:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/273615708",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/9571#discussion_r96749751"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9571"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/96749751"
         }
      },
      "body" : "What if `pindexPrev == currentIndex == NULL`? Also, why not keep a rolling count rather than using an accessory `vector`?",
      "commit_id" : "9b9b68527dc95a1edca7de24286473ac9a59499c",
      "created_at" : "2017-01-18T22:29:00Z",
      "diff_hunk" : "@@ -105,6 +106,47 @@ ThresholdState AbstractThresholdConditionChecker::GetStateFor(const CBlockIndex*\n     return state;\n }\n \n+// return the numerical statistics of blocks signalling the specified BIP9 condition in this current period\n+UniValue AbstractThresholdConditionChecker::GetStateStatisticsFor(const CBlockIndex* pindexPrev, const Consensus::Params& params, ThresholdConditionCache& cache) const\n+{\n+    UniValue obj(UniValue::VOBJ);\n+    \n+    int elapsedBlocks;\n+    int nPeriod = Period(params);\n+    int nThreshold = Threshold(params);\n+    \n+    const CBlockIndex* currentIndex = pindexPrev;\n+    \n+    obj.push_back(Pair(\"period length\", nPeriod));\n+    obj.push_back(Pair(\"threshold\", nThreshold));\n+\n+    // Find beginning of period\n+    if (pindexPrev != NULL) {\n+        pindexPrev = pindexPrev->GetAncestor(pindexPrev->nHeight - ((pindexPrev->nHeight + 1) % nPeriod));\n+        elapsedBlocks = currentIndex->nHeight - pindexPrev->nHeight;\n+        obj.push_back(Pair(\"elapsed\", elapsedBlocks));\n+    }\n+    \n+    // Walk back from current block to beginning of period\n+    std::vector<const CBlockIndex*> vToCompute;\n+    while (pindexPrev->nHeight != currentIndex->nHeight){",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9571#discussion_r96749751",
      "id" : 96749751,
      "original_commit_id" : "d4a506dea80f84dc6758923c4c3e140abd228143",
      "original_position" : 38,
      "path" : "src/versionbits.cpp",
      "position" : null,
      "pull_request_review_id" : 17342207,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9571",
      "updated_at" : "2017-02-21T22:17:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/96749751",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/884115?v=3",
         "events_url" : "https://api.github.com/users/robmcl4/events{/privacy}",
         "followers_url" : "https://api.github.com/users/robmcl4/followers",
         "following_url" : "https://api.github.com/users/robmcl4/following{/other_user}",
         "gists_url" : "https://api.github.com/users/robmcl4/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/robmcl4",
         "id" : 884115,
         "login" : "robmcl4",
         "organizations_url" : "https://api.github.com/users/robmcl4/orgs",
         "received_events_url" : "https://api.github.com/users/robmcl4/received_events",
         "repos_url" : "https://api.github.com/users/robmcl4/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/robmcl4/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/robmcl4/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/robmcl4"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/9571#discussion_r96753252"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9571"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/96753252"
         }
      },
      "body" : "That wasnt random, that was replacing an errant tab, I say leave it.",
      "commit_id" : "9b9b68527dc95a1edca7de24286473ac9a59499c",
      "created_at" : "2017-01-18T22:48:34Z",
      "diff_hunk" : "@@ -187,7 +187,7 @@ void RPCNotifyBlockChange(bool ibd, const CBlockIndex * pindex)\n         latestblock.hash = pindex->GetBlockHash();\n         latestblock.height = pindex->nHeight;\n     }\n-\tcond_blockchange.notify_all();\n+    cond_blockchange.notify_all();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9571#discussion_r96753252",
      "id" : 96753252,
      "original_commit_id" : "f11577c1604dbc024aa94e76f09b1ec4e101b5aa",
      "original_position" : 5,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 5,
      "pull_request_review_id" : 17345844,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9571",
      "updated_at" : "2017-02-21T22:17:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/96753252",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "@TheBlueMatt  `UniValue` replaced with `struct` [(although not sure I returned the values the most elegant way)](https://github.com/pinheadmz/bitcoin/blob/719161ffcff5ea6a07975d4dcd950da43da11aac/src/rpc/blockchain.cpp#L1062-L1070) \r\n\r\n@robmcl4 Thanks, took out vector and just counted. If `pindexPrev == currentIndex == NULL` we're on the genesis block and count just stays at 0 anyway.\r\n\r\n@instagibbs Removed my extra ignore line but left tab fix",
      "created_at" : "2017-01-18T23:26:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9571#issuecomment-273634905",
      "id" : 273634905,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9571",
      "updated_at" : "2017-01-18T23:29:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/273634905",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2084648?v=3",
         "events_url" : "https://api.github.com/users/pinheadmz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pinheadmz/followers",
         "following_url" : "https://api.github.com/users/pinheadmz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pinheadmz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pinheadmz",
         "id" : 2084648,
         "login" : "pinheadmz",
         "organizations_url" : "https://api.github.com/users/pinheadmz/orgs",
         "received_events_url" : "https://api.github.com/users/pinheadmz/received_events",
         "repos_url" : "https://api.github.com/users/pinheadmz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pinheadmz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pinheadmz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pinheadmz"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/9571#discussion_r96772326"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9571"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/96772326"
         }
      },
      "body" : "Agree.",
      "commit_id" : "9b9b68527dc95a1edca7de24286473ac9a59499c",
      "created_at" : "2017-01-19T01:04:27Z",
      "diff_hunk" : "@@ -32,6 +32,8 @@\n #include <boost/unordered_map.hpp>\n #include <boost/filesystem/path.hpp>\n \n+#include <univalue.h>",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9571#discussion_r96772326",
      "id" : 96772326,
      "original_commit_id" : "69cff857e5b446092875318be6de8d0c629246ff",
      "original_position" : 4,
      "path" : "src/validation.h",
      "position" : null,
      "pull_request_review_id" : 17364464,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9571",
      "updated_at" : "2017-02-21T22:17:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/96772326",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/9571#discussion_r96773051"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9571"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/96773051"
         }
      },
      "body" : "Please don't add new boost foreach uses, use c++11 range-based for instead.",
      "commit_id" : "9b9b68527dc95a1edca7de24286473ac9a59499c",
      "created_at" : "2017-01-19T01:10:28Z",
      "diff_hunk" : "@@ -3,8 +3,9 @@\n // file COPYING or http://www.opensource.org/licenses/mit-license.php.\n \n #include \"versionbits.h\"\n-\n #include \"consensus/params.h\"\n+#include <boost/foreach.hpp>",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9571#discussion_r96773051",
      "id" : 96773051,
      "original_commit_id" : "69cff857e5b446092875318be6de8d0c629246ff",
      "original_position" : 6,
      "path" : "src/versionbits.cpp",
      "position" : null,
      "pull_request_review_id" : 17364464,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9571",
      "updated_at" : "2017-02-21T22:17:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/96773051",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/9571#discussion_r96773830"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9571"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/96773830"
         }
      },
      "body" : "Does this code need to be in the condition checker implementation? It seems like it could be written generically, as it doesn't need access to the cache or internal state machine.",
      "commit_id" : "9b9b68527dc95a1edca7de24286473ac9a59499c",
      "created_at" : "2017-01-19T01:17:34Z",
      "diff_hunk" : "@@ -105,6 +106,47 @@ ThresholdState AbstractThresholdConditionChecker::GetStateFor(const CBlockIndex*\n     return state;\n }\n \n+// return the numerical statistics of blocks signalling the specified BIP9 condition in this current period\n+UniValue AbstractThresholdConditionChecker::GetStateStatisticsFor(const CBlockIndex* pindexPrev, const Consensus::Params& params, ThresholdConditionCache& cache) const",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9571#discussion_r96773830",
      "id" : 96773830,
      "original_commit_id" : "69cff857e5b446092875318be6de8d0c629246ff",
      "original_position" : 16,
      "path" : "src/versionbits.cpp",
      "position" : null,
      "pull_request_review_id" : 17364464,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9571",
      "updated_at" : "2017-02-21T22:17:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/96773830",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/9571#discussion_r96775321"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9571"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/96775321"
         }
      },
      "body" : "already gone :)",
      "commit_id" : "9b9b68527dc95a1edca7de24286473ac9a59499c",
      "created_at" : "2017-01-19T01:32:30Z",
      "diff_hunk" : "@@ -3,8 +3,9 @@\n // file COPYING or http://www.opensource.org/licenses/mit-license.php.\n \n #include \"versionbits.h\"\n-\n #include \"consensus/params.h\"\n+#include <boost/foreach.hpp>",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9571#discussion_r96775321",
      "id" : 96775321,
      "original_commit_id" : "69cff857e5b446092875318be6de8d0c629246ff",
      "original_position" : 6,
      "path" : "src/versionbits.cpp",
      "position" : null,
      "pull_request_review_id" : 17367494,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9571",
      "updated_at" : "2017-02-21T22:17:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/96775321",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2084648?v=3",
         "events_url" : "https://api.github.com/users/pinheadmz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pinheadmz/followers",
         "following_url" : "https://api.github.com/users/pinheadmz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pinheadmz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pinheadmz",
         "id" : 2084648,
         "login" : "pinheadmz",
         "organizations_url" : "https://api.github.com/users/pinheadmz/orgs",
         "received_events_url" : "https://api.github.com/users/pinheadmz/received_events",
         "repos_url" : "https://api.github.com/users/pinheadmz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pinheadmz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pinheadmz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pinheadmz"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/9571#discussion_r96775564"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9571"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/96775564"
         }
      },
      "body" : "Should I take it out? `VersionBitsConditionChecker` already has `Condition()` function for the bitmask for the corresponding soft fork.",
      "commit_id" : "9b9b68527dc95a1edca7de24286473ac9a59499c",
      "created_at" : "2017-01-19T01:34:49Z",
      "diff_hunk" : "@@ -105,6 +106,47 @@ ThresholdState AbstractThresholdConditionChecker::GetStateFor(const CBlockIndex*\n     return state;\n }\n \n+// return the numerical statistics of blocks signalling the specified BIP9 condition in this current period\n+UniValue AbstractThresholdConditionChecker::GetStateStatisticsFor(const CBlockIndex* pindexPrev, const Consensus::Params& params, ThresholdConditionCache& cache) const",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9571#discussion_r96775564",
      "id" : 96775564,
      "original_commit_id" : "69cff857e5b446092875318be6de8d0c629246ff",
      "original_position" : 16,
      "path" : "src/versionbits.cpp",
      "position" : null,
      "pull_request_review_id" : 17367726,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9571",
      "updated_at" : "2017-02-21T22:17:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/96775564",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2084648?v=3",
         "events_url" : "https://api.github.com/users/pinheadmz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pinheadmz/followers",
         "following_url" : "https://api.github.com/users/pinheadmz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pinheadmz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pinheadmz",
         "id" : 2084648,
         "login" : "pinheadmz",
         "organizations_url" : "https://api.github.com/users/pinheadmz/orgs",
         "received_events_url" : "https://api.github.com/users/pinheadmz/received_events",
         "repos_url" : "https://api.github.com/users/pinheadmz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pinheadmz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pinheadmz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pinheadmz"
      }
   },
   {
      "body" : "squashed",
      "created_at" : "2017-01-20T19:19:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9571#issuecomment-274156098",
      "id" : 274156098,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9571",
      "updated_at" : "2017-01-20T19:19:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/274156098",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2084648?v=3",
         "events_url" : "https://api.github.com/users/pinheadmz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pinheadmz/followers",
         "following_url" : "https://api.github.com/users/pinheadmz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pinheadmz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pinheadmz",
         "id" : 2084648,
         "login" : "pinheadmz",
         "organizations_url" : "https://api.github.com/users/pinheadmz/orgs",
         "received_events_url" : "https://api.github.com/users/pinheadmz/received_events",
         "repos_url" : "https://api.github.com/users/pinheadmz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pinheadmz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pinheadmz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pinheadmz"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/9571#discussion_r97152955"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9571"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/97152955"
         }
      },
      "body" : "nanonit: comma after `\\\"count\\\": xx` please",
      "commit_id" : "9b9b68527dc95a1edca7de24286473ac9a59499c",
      "created_at" : "2017-01-20T20:48:52Z",
      "diff_hunk" : "@@ -1102,7 +1114,14 @@ UniValue getblockchaininfo(const JSONRPCRequest& request)\n             \"        \\\"bit\\\": xx,             (numeric) the bit (0-28) in the block version field used to signal this softfork (only for \\\"started\\\" status)\\n\"\n             \"        \\\"startTime\\\": xx,       (numeric) the minimum median time past of a block at which the bit gains its meaning\\n\"\n             \"        \\\"timeout\\\": xx,         (numeric) the median time past of a block at which the deployment is considered failed if not yet locked in\\n\"\n-            \"        \\\"since\\\": xx            (numeric) height of the first block to which the status applies\\n\"\n+            \"        \\\"since\\\": xx,           (numeric) height of the first block to which the status applies\\n\"\n+            \"        \\\"statistics\\\": {        (object) numeric statistics about BIP9 signalling for a softfork\\n\"\n+            \"           \\\"period length\\\": xx, (numeric) the length in blocks of the BIP9 signalling period \\n\"\n+            \"           \\\"threshold\\\": xx,    (numeric) the number of blocks with the version bit set required to activate the feature \\n\"\n+            \"           \\\"elapsed\\\": xx,      (numeric) the number of blocks elapsed since the beginning of the current period \\n\"\n+            \"           \\\"count\\\": xx         (numeric) the number of blocks with the version bit set in the current period \\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9571#discussion_r97152955",
      "id" : 97152955,
      "original_commit_id" : "2d93e3c995756cdcd9bbed1e29f2df95e6032bef",
      "original_position" : 38,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 17761806,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9571",
      "updated_at" : "2017-02-21T22:17:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/97152955",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/9571#discussion_r97157582"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9571"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/97157582"
         }
      },
      "body" : "nit: I suspect the name 'obj' is from when you were passing the object back as a univalue. I'd prefer for this variable to be named a little more descriptively, perhaps 'stats' or 'bip9Stats'.",
      "commit_id" : "9b9b68527dc95a1edca7de24286473ac9a59499c",
      "created_at" : "2017-01-20T21:18:29Z",
      "diff_hunk" : "@@ -105,6 +104,42 @@ ThresholdState AbstractThresholdConditionChecker::GetStateFor(const CBlockIndex*\n     return state;\n }\n \n+// return the numerical statistics of blocks signalling the specified BIP9 condition in this current period\n+BIP9Stats AbstractThresholdConditionChecker::GetStateStatisticsFor(const CBlockIndex* pindexPrev, const Consensus::Params& params) const\n+{\n+    BIP9Stats obj;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9571#discussion_r97157582",
      "id" : 97157582,
      "original_commit_id" : "2d93e3c995756cdcd9bbed1e29f2df95e6032bef",
      "original_position" : 15,
      "path" : "src/versionbits.cpp",
      "position" : null,
      "pull_request_review_id" : 17761806,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9571",
      "updated_at" : "2017-02-21T22:17:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/97157582",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/9571#discussion_r97158823"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9571"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/97158823"
         }
      },
      "body" : "nit: perhaps add `(only for \\\"started\\\" status)\\n` (like for the bit field above)",
      "commit_id" : "9b9b68527dc95a1edca7de24286473ac9a59499c",
      "created_at" : "2017-01-20T21:26:03Z",
      "diff_hunk" : "@@ -1102,7 +1114,14 @@ UniValue getblockchaininfo(const JSONRPCRequest& request)\n             \"        \\\"bit\\\": xx,             (numeric) the bit (0-28) in the block version field used to signal this softfork (only for \\\"started\\\" status)\\n\"\n             \"        \\\"startTime\\\": xx,       (numeric) the minimum median time past of a block at which the bit gains its meaning\\n\"\n             \"        \\\"timeout\\\": xx,         (numeric) the median time past of a block at which the deployment is considered failed if not yet locked in\\n\"\n-            \"        \\\"since\\\": xx            (numeric) height of the first block to which the status applies\\n\"\n+            \"        \\\"since\\\": xx,           (numeric) height of the first block to which the status applies\\n\"\n+            \"        \\\"statistics\\\": {        (object) numeric statistics about BIP9 signalling for a softfork\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9571#discussion_r97158823",
      "id" : 97158823,
      "original_commit_id" : "2d93e3c995756cdcd9bbed1e29f2df95e6032bef",
      "original_position" : 34,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 17761806,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9571",
      "updated_at" : "2017-02-21T22:17:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/97158823",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/9571#discussion_r97160625"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9571"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/97160625"
         }
      },
      "body" : "combine these lines?",
      "commit_id" : "9b9b68527dc95a1edca7de24286473ac9a59499c",
      "created_at" : "2017-01-20T21:36:35Z",
      "diff_hunk" : "@@ -105,6 +104,42 @@ ThresholdState AbstractThresholdConditionChecker::GetStateFor(const CBlockIndex*\n     return state;\n }\n \n+// return the numerical statistics of blocks signalling the specified BIP9 condition in this current period\n+BIP9Stats AbstractThresholdConditionChecker::GetStateStatisticsFor(const CBlockIndex* pindexPrev, const Consensus::Params& params) const\n+{\n+    BIP9Stats obj;\n+    \n+    int elapsedBlocks;\n+    int nPeriod = Period(params);\n+    int nThreshold = Threshold(params);\n+    \n+    const CBlockIndex* currentIndex = pindexPrev;\n+    \n+    obj.period = nPeriod;\n+    obj.threshold = nThreshold;\n+\n+    // Find beginning of period\n+    if (pindexPrev != NULL) {\n+        pindexPrev = pindexPrev->GetAncestor(pindexPrev->nHeight - ((pindexPrev->nHeight + 1) % nPeriod));\n+        elapsedBlocks = currentIndex->nHeight - pindexPrev->nHeight;\n+        obj.elapsed = elapsedBlocks;\n+    }\n+    \n+    // Count from current block to beginning of period\n+    int count = 0;\n+    while (pindexPrev->nHeight != currentIndex->nHeight){\n+        if (Condition(currentIndex, params))\n+            count++;\n+        currentIndex = currentIndex->pprev;\n+    }\n+\n+    obj.count = count;\n+    bool possible = (nPeriod - nThreshold) > (elapsedBlocks - count);\n+    obj.possible = possible;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9571#discussion_r97160625",
      "id" : 97160625,
      "original_commit_id" : "2d93e3c995756cdcd9bbed1e29f2df95e6032bef",
      "original_position" : 43,
      "path" : "src/versionbits.cpp",
      "position" : null,
      "pull_request_review_id" : 17761806,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9571",
      "updated_at" : "2017-02-21T22:17:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/97160625",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/9571#discussion_r97161162"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9571"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/97161162"
         }
      },
      "body" : "You're checking that pindexPrev isn't NULL, but then dereferencing further down (in line 130) even if this check fails.\r\n\r\nPerhaps move this check to the top and return from the function if pindexPrev is NULL?",
      "commit_id" : "9b9b68527dc95a1edca7de24286473ac9a59499c",
      "created_at" : "2017-01-20T21:39:34Z",
      "diff_hunk" : "@@ -105,6 +104,42 @@ ThresholdState AbstractThresholdConditionChecker::GetStateFor(const CBlockIndex*\n     return state;\n }\n \n+// return the numerical statistics of blocks signalling the specified BIP9 condition in this current period\n+BIP9Stats AbstractThresholdConditionChecker::GetStateStatisticsFor(const CBlockIndex* pindexPrev, const Consensus::Params& params) const\n+{\n+    BIP9Stats obj;\n+    \n+    int elapsedBlocks;\n+    int nPeriod = Period(params);\n+    int nThreshold = Threshold(params);\n+    \n+    const CBlockIndex* currentIndex = pindexPrev;\n+    \n+    obj.period = nPeriod;\n+    obj.threshold = nThreshold;\n+\n+    // Find beginning of period\n+    if (pindexPrev != NULL) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9571#discussion_r97161162",
      "id" : 97161162,
      "original_commit_id" : "2d93e3c995756cdcd9bbed1e29f2df95e6032bef",
      "original_position" : 27,
      "path" : "src/versionbits.cpp",
      "position" : null,
      "pull_request_review_id" : 17761806,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9571",
      "updated_at" : "2017-02-21T22:17:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/97161162",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/9571#discussion_r97161480"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9571"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/97161480"
         }
      },
      "body" : "Is it tidier to calculate elapsed directly from `(pindexPrev % nPeriod) + 1`?",
      "commit_id" : "9b9b68527dc95a1edca7de24286473ac9a59499c",
      "created_at" : "2017-01-20T21:41:27Z",
      "diff_hunk" : "@@ -105,6 +104,42 @@ ThresholdState AbstractThresholdConditionChecker::GetStateFor(const CBlockIndex*\n     return state;\n }\n \n+// return the numerical statistics of blocks signalling the specified BIP9 condition in this current period\n+BIP9Stats AbstractThresholdConditionChecker::GetStateStatisticsFor(const CBlockIndex* pindexPrev, const Consensus::Params& params) const\n+{\n+    BIP9Stats obj;\n+    \n+    int elapsedBlocks;\n+    int nPeriod = Period(params);\n+    int nThreshold = Threshold(params);\n+    \n+    const CBlockIndex* currentIndex = pindexPrev;\n+    \n+    obj.period = nPeriod;\n+    obj.threshold = nThreshold;\n+\n+    // Find beginning of period\n+    if (pindexPrev != NULL) {\n+        pindexPrev = pindexPrev->GetAncestor(pindexPrev->nHeight - ((pindexPrev->nHeight + 1) % nPeriod));\n+        elapsedBlocks = currentIndex->nHeight - pindexPrev->nHeight;\n+        obj.elapsed = elapsedBlocks;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9571#discussion_r97161480",
      "id" : 97161480,
      "original_commit_id" : "2d93e3c995756cdcd9bbed1e29f2df95e6032bef",
      "original_position" : 30,
      "path" : "src/versionbits.cpp",
      "position" : null,
      "pull_request_review_id" : 17761806,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9571",
      "updated_at" : "2017-02-21T22:17:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/97161480",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/9571#discussion_r97162439"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9571"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/97162439"
         }
      },
      "body" : "You're declaring local variables, setting them once, and then setting the obj members to those values. Would it be cleaner to just set the obj members directly?",
      "commit_id" : "9b9b68527dc95a1edca7de24286473ac9a59499c",
      "created_at" : "2017-01-20T21:47:24Z",
      "diff_hunk" : "@@ -105,6 +104,42 @@ ThresholdState AbstractThresholdConditionChecker::GetStateFor(const CBlockIndex*\n     return state;\n }\n \n+// return the numerical statistics of blocks signalling the specified BIP9 condition in this current period\n+BIP9Stats AbstractThresholdConditionChecker::GetStateStatisticsFor(const CBlockIndex* pindexPrev, const Consensus::Params& params) const\n+{\n+    BIP9Stats obj;\n+    \n+    int elapsedBlocks;\n+    int nPeriod = Period(params);\n+    int nThreshold = Threshold(params);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9571#discussion_r97162439",
      "id" : 97162439,
      "original_commit_id" : "2d93e3c995756cdcd9bbed1e29f2df95e6032bef",
      "original_position" : 19,
      "path" : "src/versionbits.cpp",
      "position" : null,
      "pull_request_review_id" : 17761806,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9571",
      "updated_at" : "2017-02-21T22:17:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/97162439",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/9571#discussion_r97173335"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9571"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/97173335"
         }
      },
      "body" : "This comment is very misleading, and so is naming the variable `pindexPrev`.\r\n\r\nWhen `GetStateFor()` was written, the meaning of the function was: \"I have block B in hand, and I'm trying to connect it to block A in the tree. What are the BIP9 softfork consensus rules that I should enforce on block B based on block A?\" In that context, pindexPrev makes sense - we're judging block B's consensus rules based on its `pindexPrev` pointer to block A.\r\n\r\n`GetStateStatisticsFor()` and `GetStateSinceHeightFor()` (introduced in #7948) are being used for a different purpose. The meaning of these functions is \"Block A is our view of the current tip. What is our view of current network consensus rules?\" In that context, `pindexPrev` doesn't make sense at all. There's no block B with a `pindexPointer` back to block A.\r\n\r\nI'd prefer for the variable `pindexPrev` to be renamed in `GetStateStatisticsFor()` and `GetStateSinceHeightFor()`. Perhaps change it to `pindex` and update the comment to describe what the functions are actually being used for.",
      "commit_id" : "9b9b68527dc95a1edca7de24286473ac9a59499c",
      "created_at" : "2017-01-20T23:03:23Z",
      "diff_hunk" : "@@ -53,6 +61,7 @@ class AbstractThresholdConditionChecker {\n public:\n     // Note that the functions below take a pindexPrev as input: they compute information for block B based on its parent.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9571#discussion_r97173335",
      "id" : 97173335,
      "original_commit_id" : "2d93e3c995756cdcd9bbed1e29f2df95e6032bef",
      "original_position" : 17,
      "path" : "src/versionbits.h",
      "position" : null,
      "pull_request_review_id" : 17761806,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9571",
      "updated_at" : "2017-02-21T22:17:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/97173335",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/9571#discussion_r97327788"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9571"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/97327788"
         }
      },
      "body" : "I don't much like this reassignment of pindexPrev to the first block in the current difficulty window. I know that the same thing happens in  AbstractThresholdConditionChecker() above, but I think it'd be clearer to have a local variable called something like pindexFirstInWindow. Reasoning about whether a function is doing what you want is easier if the variables are named what they're actually used for.",
      "commit_id" : "9b9b68527dc95a1edca7de24286473ac9a59499c",
      "created_at" : "2017-01-23T14:28:38Z",
      "diff_hunk" : "@@ -105,6 +104,42 @@ ThresholdState AbstractThresholdConditionChecker::GetStateFor(const CBlockIndex*\n     return state;\n }\n \n+// return the numerical statistics of blocks signalling the specified BIP9 condition in this current period\n+BIP9Stats AbstractThresholdConditionChecker::GetStateStatisticsFor(const CBlockIndex* pindexPrev, const Consensus::Params& params) const\n+{\n+    BIP9Stats obj;\n+    \n+    int elapsedBlocks;\n+    int nPeriod = Period(params);\n+    int nThreshold = Threshold(params);\n+    \n+    const CBlockIndex* currentIndex = pindexPrev;\n+    \n+    obj.period = nPeriod;\n+    obj.threshold = nThreshold;\n+\n+    // Find beginning of period\n+    if (pindexPrev != NULL) {\n+        pindexPrev = pindexPrev->GetAncestor(pindexPrev->nHeight - ((pindexPrev->nHeight + 1) % nPeriod));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9571#discussion_r97327788",
      "id" : 97327788,
      "original_commit_id" : "2d93e3c995756cdcd9bbed1e29f2df95e6032bef",
      "original_position" : 28,
      "path" : "src/versionbits.cpp",
      "position" : null,
      "pull_request_review_id" : 17761806,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9571",
      "updated_at" : "2017-02-21T22:17:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/97327788",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/9571#discussion_r97378580"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9571"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/97378580"
         }
      },
      "body" : "`nPeriod` and  `nThreshold` are used again in line 137 (now line 135) to calculate the `possible` value. But you are right about `elapsedBlocks` and the actual `bool possible`, so I took those declarations out and simplified the assignments.",
      "commit_id" : "9b9b68527dc95a1edca7de24286473ac9a59499c",
      "created_at" : "2017-01-23T18:03:44Z",
      "diff_hunk" : "@@ -105,6 +104,42 @@ ThresholdState AbstractThresholdConditionChecker::GetStateFor(const CBlockIndex*\n     return state;\n }\n \n+// return the numerical statistics of blocks signalling the specified BIP9 condition in this current period\n+BIP9Stats AbstractThresholdConditionChecker::GetStateStatisticsFor(const CBlockIndex* pindexPrev, const Consensus::Params& params) const\n+{\n+    BIP9Stats obj;\n+    \n+    int elapsedBlocks;\n+    int nPeriod = Period(params);\n+    int nThreshold = Threshold(params);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9571#discussion_r97378580",
      "id" : 97378580,
      "original_commit_id" : "2d93e3c995756cdcd9bbed1e29f2df95e6032bef",
      "original_position" : 19,
      "path" : "src/versionbits.cpp",
      "position" : null,
      "pull_request_review_id" : 17985908,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9571",
      "updated_at" : "2017-02-21T22:17:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/97378580",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2084648?v=3",
         "events_url" : "https://api.github.com/users/pinheadmz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pinheadmz/followers",
         "following_url" : "https://api.github.com/users/pinheadmz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pinheadmz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pinheadmz",
         "id" : 2084648,
         "login" : "pinheadmz",
         "organizations_url" : "https://api.github.com/users/pinheadmz/orgs",
         "received_events_url" : "https://api.github.com/users/pinheadmz/received_events",
         "repos_url" : "https://api.github.com/users/pinheadmz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pinheadmz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pinheadmz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pinheadmz"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/9571#discussion_r97378588"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9571"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/97378588"
         }
      },
      "body" : "Moved the check up so the return struct is partially initialized. However, this function shouldn't ever be called unless `THRESHOLD_STARTED == thresholdState` anyway, which will never be the case at block 0.",
      "commit_id" : "9b9b68527dc95a1edca7de24286473ac9a59499c",
      "created_at" : "2017-01-23T18:03:47Z",
      "diff_hunk" : "@@ -105,6 +104,42 @@ ThresholdState AbstractThresholdConditionChecker::GetStateFor(const CBlockIndex*\n     return state;\n }\n \n+// return the numerical statistics of blocks signalling the specified BIP9 condition in this current period\n+BIP9Stats AbstractThresholdConditionChecker::GetStateStatisticsFor(const CBlockIndex* pindexPrev, const Consensus::Params& params) const\n+{\n+    BIP9Stats obj;\n+    \n+    int elapsedBlocks;\n+    int nPeriod = Period(params);\n+    int nThreshold = Threshold(params);\n+    \n+    const CBlockIndex* currentIndex = pindexPrev;\n+    \n+    obj.period = nPeriod;\n+    obj.threshold = nThreshold;\n+\n+    // Find beginning of period\n+    if (pindexPrev != NULL) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9571#discussion_r97378588",
      "id" : 97378588,
      "original_commit_id" : "2d93e3c995756cdcd9bbed1e29f2df95e6032bef",
      "original_position" : 27,
      "path" : "src/versionbits.cpp",
      "position" : null,
      "pull_request_review_id" : 17985915,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9571",
      "updated_at" : "2017-02-21T22:17:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/97378588",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2084648?v=3",
         "events_url" : "https://api.github.com/users/pinheadmz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pinheadmz/followers",
         "following_url" : "https://api.github.com/users/pinheadmz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pinheadmz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pinheadmz",
         "id" : 2084648,
         "login" : "pinheadmz",
         "organizations_url" : "https://api.github.com/users/pinheadmz/orgs",
         "received_events_url" : "https://api.github.com/users/pinheadmz/received_events",
         "repos_url" : "https://api.github.com/users/pinheadmz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pinheadmz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pinheadmz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pinheadmz"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/9571#discussion_r97378597"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9571"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/97378597"
         }
      },
      "body" : "Yes I was mostly copying the format of `AbstractThresholdConditionChecker::GetStateFor()` but I agree with you, changed variable name.",
      "commit_id" : "9b9b68527dc95a1edca7de24286473ac9a59499c",
      "created_at" : "2017-01-23T18:03:51Z",
      "diff_hunk" : "@@ -105,6 +104,42 @@ ThresholdState AbstractThresholdConditionChecker::GetStateFor(const CBlockIndex*\n     return state;\n }\n \n+// return the numerical statistics of blocks signalling the specified BIP9 condition in this current period\n+BIP9Stats AbstractThresholdConditionChecker::GetStateStatisticsFor(const CBlockIndex* pindexPrev, const Consensus::Params& params) const\n+{\n+    BIP9Stats obj;\n+    \n+    int elapsedBlocks;\n+    int nPeriod = Period(params);\n+    int nThreshold = Threshold(params);\n+    \n+    const CBlockIndex* currentIndex = pindexPrev;\n+    \n+    obj.period = nPeriod;\n+    obj.threshold = nThreshold;\n+\n+    // Find beginning of period\n+    if (pindexPrev != NULL) {\n+        pindexPrev = pindexPrev->GetAncestor(pindexPrev->nHeight - ((pindexPrev->nHeight + 1) % nPeriod));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9571#discussion_r97378597",
      "id" : 97378597,
      "original_commit_id" : "2d93e3c995756cdcd9bbed1e29f2df95e6032bef",
      "original_position" : 28,
      "path" : "src/versionbits.cpp",
      "position" : null,
      "pull_request_review_id" : 17985922,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9571",
      "updated_at" : "2017-02-21T22:17:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/97378597",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2084648?v=3",
         "events_url" : "https://api.github.com/users/pinheadmz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pinheadmz/followers",
         "following_url" : "https://api.github.com/users/pinheadmz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pinheadmz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pinheadmz",
         "id" : 2084648,
         "login" : "pinheadmz",
         "organizations_url" : "https://api.github.com/users/pinheadmz/orgs",
         "received_events_url" : "https://api.github.com/users/pinheadmz/received_events",
         "repos_url" : "https://api.github.com/users/pinheadmz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pinheadmz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pinheadmz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pinheadmz"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/9571#discussion_r97378608"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9571"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/97378608"
         }
      },
      "body" : "Not sure about this. After making this one line, it seems the same to me. Still need to get `nHeight` from each. Simpler to me to see \"Current - Start = Elapsed\"",
      "commit_id" : "9b9b68527dc95a1edca7de24286473ac9a59499c",
      "created_at" : "2017-01-23T18:03:53Z",
      "diff_hunk" : "@@ -105,6 +104,42 @@ ThresholdState AbstractThresholdConditionChecker::GetStateFor(const CBlockIndex*\n     return state;\n }\n \n+// return the numerical statistics of blocks signalling the specified BIP9 condition in this current period\n+BIP9Stats AbstractThresholdConditionChecker::GetStateStatisticsFor(const CBlockIndex* pindexPrev, const Consensus::Params& params) const\n+{\n+    BIP9Stats obj;\n+    \n+    int elapsedBlocks;\n+    int nPeriod = Period(params);\n+    int nThreshold = Threshold(params);\n+    \n+    const CBlockIndex* currentIndex = pindexPrev;\n+    \n+    obj.period = nPeriod;\n+    obj.threshold = nThreshold;\n+\n+    // Find beginning of period\n+    if (pindexPrev != NULL) {\n+        pindexPrev = pindexPrev->GetAncestor(pindexPrev->nHeight - ((pindexPrev->nHeight + 1) % nPeriod));\n+        elapsedBlocks = currentIndex->nHeight - pindexPrev->nHeight;\n+        obj.elapsed = elapsedBlocks;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9571#discussion_r97378608",
      "id" : 97378608,
      "original_commit_id" : "2d93e3c995756cdcd9bbed1e29f2df95e6032bef",
      "original_position" : 30,
      "path" : "src/versionbits.cpp",
      "position" : null,
      "pull_request_review_id" : 17985932,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9571",
      "updated_at" : "2017-02-21T22:17:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/97378608",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2084648?v=3",
         "events_url" : "https://api.github.com/users/pinheadmz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pinheadmz/followers",
         "following_url" : "https://api.github.com/users/pinheadmz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pinheadmz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pinheadmz",
         "id" : 2084648,
         "login" : "pinheadmz",
         "organizations_url" : "https://api.github.com/users/pinheadmz/orgs",
         "received_events_url" : "https://api.github.com/users/pinheadmz/received_events",
         "repos_url" : "https://api.github.com/users/pinheadmz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pinheadmz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pinheadmz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pinheadmz"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/9571#discussion_r97378639"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9571"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/97378639"
         }
      },
      "body" : "Yeah ok this makes sense to me. I'll take my function out of the \"functions below\" list and rename variable to `pindex`. Should correcting `GetStateSinceHeightFor()` happen in a different commit though?",
      "commit_id" : "9b9b68527dc95a1edca7de24286473ac9a59499c",
      "created_at" : "2017-01-23T18:04:04Z",
      "diff_hunk" : "@@ -53,6 +61,7 @@ class AbstractThresholdConditionChecker {\n public:\n     // Note that the functions below take a pindexPrev as input: they compute information for block B based on its parent.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9571#discussion_r97378639",
      "id" : 97378639,
      "original_commit_id" : "2d93e3c995756cdcd9bbed1e29f2df95e6032bef",
      "original_position" : 17,
      "path" : "src/versionbits.h",
      "position" : null,
      "pull_request_review_id" : 17985965,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9571",
      "updated_at" : "2017-02-21T22:17:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/97378639",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2084648?v=3",
         "events_url" : "https://api.github.com/users/pinheadmz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pinheadmz/followers",
         "following_url" : "https://api.github.com/users/pinheadmz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pinheadmz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pinheadmz",
         "id" : 2084648,
         "login" : "pinheadmz",
         "organizations_url" : "https://api.github.com/users/pinheadmz/orgs",
         "received_events_url" : "https://api.github.com/users/pinheadmz/received_events",
         "repos_url" : "https://api.github.com/users/pinheadmz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pinheadmz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pinheadmz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pinheadmz"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/9571#discussion_r97384445"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9571"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/97384445"
         }
      },
      "body" : "yep, sounds fine to me.",
      "commit_id" : "9b9b68527dc95a1edca7de24286473ac9a59499c",
      "created_at" : "2017-01-23T18:33:18Z",
      "diff_hunk" : "@@ -105,6 +104,42 @@ ThresholdState AbstractThresholdConditionChecker::GetStateFor(const CBlockIndex*\n     return state;\n }\n \n+// return the numerical statistics of blocks signalling the specified BIP9 condition in this current period\n+BIP9Stats AbstractThresholdConditionChecker::GetStateStatisticsFor(const CBlockIndex* pindexPrev, const Consensus::Params& params) const\n+{\n+    BIP9Stats obj;\n+    \n+    int elapsedBlocks;\n+    int nPeriod = Period(params);\n+    int nThreshold = Threshold(params);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9571#discussion_r97384445",
      "id" : 97384445,
      "original_commit_id" : "2d93e3c995756cdcd9bbed1e29f2df95e6032bef",
      "original_position" : 19,
      "path" : "src/versionbits.cpp",
      "position" : null,
      "pull_request_review_id" : 17991997,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9571",
      "updated_at" : "2017-02-21T22:17:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/97384445",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/9571#discussion_r97385143"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9571"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/97385143"
         }
      },
      "body" : "I agree that this *should* always be non-NULL, but it's better to be conservative, and it's certainly better to be consistently conservative than conservative here and not conservative later :)",
      "commit_id" : "9b9b68527dc95a1edca7de24286473ac9a59499c",
      "created_at" : "2017-01-23T18:36:40Z",
      "diff_hunk" : "@@ -105,6 +104,42 @@ ThresholdState AbstractThresholdConditionChecker::GetStateFor(const CBlockIndex*\n     return state;\n }\n \n+// return the numerical statistics of blocks signalling the specified BIP9 condition in this current period\n+BIP9Stats AbstractThresholdConditionChecker::GetStateStatisticsFor(const CBlockIndex* pindexPrev, const Consensus::Params& params) const\n+{\n+    BIP9Stats obj;\n+    \n+    int elapsedBlocks;\n+    int nPeriod = Period(params);\n+    int nThreshold = Threshold(params);\n+    \n+    const CBlockIndex* currentIndex = pindexPrev;\n+    \n+    obj.period = nPeriod;\n+    obj.threshold = nThreshold;\n+\n+    // Find beginning of period\n+    if (pindexPrev != NULL) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9571#discussion_r97385143",
      "id" : 97385143,
      "original_commit_id" : "2d93e3c995756cdcd9bbed1e29f2df95e6032bef",
      "original_position" : 27,
      "path" : "src/versionbits.cpp",
      "position" : null,
      "pull_request_review_id" : 17992698,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9571",
      "updated_at" : "2017-02-21T22:17:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/97385143",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/9571#discussion_r97385803"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9571"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/97385803"
         }
      },
      "body" : "ok",
      "commit_id" : "9b9b68527dc95a1edca7de24286473ac9a59499c",
      "created_at" : "2017-01-23T18:39:45Z",
      "diff_hunk" : "@@ -105,6 +104,42 @@ ThresholdState AbstractThresholdConditionChecker::GetStateFor(const CBlockIndex*\n     return state;\n }\n \n+// return the numerical statistics of blocks signalling the specified BIP9 condition in this current period\n+BIP9Stats AbstractThresholdConditionChecker::GetStateStatisticsFor(const CBlockIndex* pindexPrev, const Consensus::Params& params) const\n+{\n+    BIP9Stats obj;\n+    \n+    int elapsedBlocks;\n+    int nPeriod = Period(params);\n+    int nThreshold = Threshold(params);\n+    \n+    const CBlockIndex* currentIndex = pindexPrev;\n+    \n+    obj.period = nPeriod;\n+    obj.threshold = nThreshold;\n+\n+    // Find beginning of period\n+    if (pindexPrev != NULL) {\n+        pindexPrev = pindexPrev->GetAncestor(pindexPrev->nHeight - ((pindexPrev->nHeight + 1) % nPeriod));\n+        elapsedBlocks = currentIndex->nHeight - pindexPrev->nHeight;\n+        obj.elapsed = elapsedBlocks;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9571#discussion_r97385803",
      "id" : 97385803,
      "original_commit_id" : "2d93e3c995756cdcd9bbed1e29f2df95e6032bef",
      "original_position" : 30,
      "path" : "src/versionbits.cpp",
      "position" : null,
      "pull_request_review_id" : 17993351,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9571",
      "updated_at" : "2017-02-21T22:17:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/97385803",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/9571#discussion_r97386508"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9571"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/97386508"
         }
      },
      "body" : "yeah, I'd suggest changing `GetStateSinceHeightFor()` in a different commit. I can open a PR for that or leave it to you if you prefer.",
      "commit_id" : "9b9b68527dc95a1edca7de24286473ac9a59499c",
      "created_at" : "2017-01-23T18:43:11Z",
      "diff_hunk" : "@@ -53,6 +61,7 @@ class AbstractThresholdConditionChecker {\n public:\n     // Note that the functions below take a pindexPrev as input: they compute information for block B based on its parent.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9571#discussion_r97386508",
      "id" : 97386508,
      "original_commit_id" : "2d93e3c995756cdcd9bbed1e29f2df95e6032bef",
      "original_position" : 17,
      "path" : "src/versionbits.h",
      "position" : null,
      "pull_request_review_id" : 17994068,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9571",
      "updated_at" : "2017-02-21T22:17:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/97386508",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/9571#discussion_r97400822"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9571"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/97400822"
         }
      },
      "body" : "Actually just took out declarations for all those variables, assigned to return object directly and refer to those assignments downstream. (see https://github.com/bitcoin/bitcoin/pull/9571/commits/6eecfe0368525f70ff8b93914320356ae0070a0c)",
      "commit_id" : "9b9b68527dc95a1edca7de24286473ac9a59499c",
      "created_at" : "2017-01-23T19:52:08Z",
      "diff_hunk" : "@@ -105,6 +104,42 @@ ThresholdState AbstractThresholdConditionChecker::GetStateFor(const CBlockIndex*\n     return state;\n }\n \n+// return the numerical statistics of blocks signalling the specified BIP9 condition in this current period\n+BIP9Stats AbstractThresholdConditionChecker::GetStateStatisticsFor(const CBlockIndex* pindexPrev, const Consensus::Params& params) const\n+{\n+    BIP9Stats obj;\n+    \n+    int elapsedBlocks;\n+    int nPeriod = Period(params);\n+    int nThreshold = Threshold(params);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9571#discussion_r97400822",
      "id" : 97400822,
      "original_commit_id" : "2d93e3c995756cdcd9bbed1e29f2df95e6032bef",
      "original_position" : 19,
      "path" : "src/versionbits.cpp",
      "position" : null,
      "pull_request_review_id" : 18009225,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9571",
      "updated_at" : "2017-02-21T22:17:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/97400822",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2084648?v=3",
         "events_url" : "https://api.github.com/users/pinheadmz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pinheadmz/followers",
         "following_url" : "https://api.github.com/users/pinheadmz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pinheadmz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pinheadmz",
         "id" : 2084648,
         "login" : "pinheadmz",
         "organizations_url" : "https://api.github.com/users/pinheadmz/orgs",
         "received_events_url" : "https://api.github.com/users/pinheadmz/received_events",
         "repos_url" : "https://api.github.com/users/pinheadmz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pinheadmz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pinheadmz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pinheadmz"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/9571#discussion_r99222940"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9571"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/99222940"
         }
      },
      "body" : "Do we really want spaces in keys?",
      "commit_id" : "9b9b68527dc95a1edca7de24286473ac9a59499c",
      "created_at" : "2017-02-02T21:22:43Z",
      "diff_hunk" : "@@ -1057,6 +1057,18 @@ static UniValue BIP9SoftForkDesc(const Consensus::Params& consensusParams, Conse\n     rv.push_back(Pair(\"startTime\", consensusParams.vDeployments[id].nStartTime));\n     rv.push_back(Pair(\"timeout\", consensusParams.vDeployments[id].nTimeout));\n     rv.push_back(Pair(\"since\", VersionBitsTipStateSinceHeight(consensusParams, id)));\n+    if (THRESHOLD_STARTED == thresholdState)\n+    {\n+        UniValue statsUV(UniValue::VOBJ);\n+        BIP9Stats statsStruct = VersionBitsTipStatistics(consensusParams, id);\n+        statsUV.push_back(Pair(\"period length\", statsStruct.period));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9571#discussion_r99222940",
      "id" : 99222940,
      "original_commit_id" : "73971ada1b79d1a03dbe4a3b612c7fb7620f7038",
      "original_position" : 17,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 19893749,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9571",
      "updated_at" : "2017-02-21T22:17:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/99222940",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/9571#discussion_r99232450"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9571"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/99232450"
         }
      },
      "body" : "Whoops, thanks. Fixed and squashed ",
      "commit_id" : "9b9b68527dc95a1edca7de24286473ac9a59499c",
      "created_at" : "2017-02-02T22:08:57Z",
      "diff_hunk" : "@@ -1057,6 +1057,18 @@ static UniValue BIP9SoftForkDesc(const Consensus::Params& consensusParams, Conse\n     rv.push_back(Pair(\"startTime\", consensusParams.vDeployments[id].nStartTime));\n     rv.push_back(Pair(\"timeout\", consensusParams.vDeployments[id].nTimeout));\n     rv.push_back(Pair(\"since\", VersionBitsTipStateSinceHeight(consensusParams, id)));\n+    if (THRESHOLD_STARTED == thresholdState)\n+    {\n+        UniValue statsUV(UniValue::VOBJ);\n+        BIP9Stats statsStruct = VersionBitsTipStatistics(consensusParams, id);\n+        statsUV.push_back(Pair(\"period length\", statsStruct.period));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9571#discussion_r99232450",
      "id" : 99232450,
      "original_commit_id" : "73971ada1b79d1a03dbe4a3b612c7fb7620f7038",
      "original_position" : 17,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 19903665,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9571",
      "updated_at" : "2017-02-21T22:17:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/99232450",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2084648?v=3",
         "events_url" : "https://api.github.com/users/pinheadmz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pinheadmz/followers",
         "following_url" : "https://api.github.com/users/pinheadmz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pinheadmz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pinheadmz",
         "id" : 2084648,
         "login" : "pinheadmz",
         "organizations_url" : "https://api.github.com/users/pinheadmz/orgs",
         "received_events_url" : "https://api.github.com/users/pinheadmz/received_events",
         "repos_url" : "https://api.github.com/users/pinheadmz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pinheadmz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pinheadmz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pinheadmz"
      }
   },
   {
      "body" : "utACK 83538dd86dc426dc252714d4ca1ae91ad2c5ac24",
      "created_at" : "2017-02-10T07:01:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9571#issuecomment-278872529",
      "id" : 278872529,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9571",
      "updated_at" : "2017-02-10T07:01:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/278872529",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/9571#discussion_r100592174"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9571"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/100592174"
         }
      },
      "body" : "Please be careful to not introduce lines with whitespace at the end. Looks like this patch has it in 5 places (here and 4 lines in AbstractThreasholdConditionCHecker::GetStateStatisticsFor).",
      "commit_id" : "9b9b68527dc95a1edca7de24286473ac9a59499c",
      "created_at" : "2017-02-10T18:16:53Z",
      "diff_hunk" : "@@ -1057,6 +1057,18 @@ static UniValue BIP9SoftForkDesc(const Consensus::Params& consensusParams, Conse\n     rv.push_back(Pair(\"startTime\", consensusParams.vDeployments[id].nStartTime));\n     rv.push_back(Pair(\"timeout\", consensusParams.vDeployments[id].nTimeout));\n     rv.push_back(Pair(\"since\", VersionBitsTipStateSinceHeight(consensusParams, id)));\n+    if (THRESHOLD_STARTED == thresholdState)\n+    {\n+        UniValue statsUV(UniValue::VOBJ);\n+        BIP9Stats statsStruct = VersionBitsTipStatistics(consensusParams, id);\n+        statsUV.push_back(Pair(\"period\", statsStruct.period));\n+        statsUV.push_back(Pair(\"threshold\", statsStruct.threshold));\n+        statsUV.push_back(Pair(\"elapsed\", statsStruct.elapsed));\n+        statsUV.push_back(Pair(\"count\", statsStruct.count));\n+        statsUV.push_back(Pair(\"possible\", statsStruct.possible));\n+                ",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9571#discussion_r100592174",
      "id" : 100592174,
      "original_commit_id" : "83538dd86dc426dc252714d4ca1ae91ad2c5ac24",
      "original_position" : 22,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 21308349,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9571",
      "updated_at" : "2017-02-21T22:17:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/100592174",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/9571#discussion_r100599216"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9571"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/100599216"
         }
      },
      "body" : "Can we get a more descriptive name? This is actually the last block in the previous period, not the first in this period (though it looks like all the later math is correct).",
      "commit_id" : "9b9b68527dc95a1edca7de24286473ac9a59499c",
      "created_at" : "2017-02-10T18:51:22Z",
      "diff_hunk" : "@@ -105,6 +104,36 @@ ThresholdState AbstractThresholdConditionChecker::GetStateFor(const CBlockIndex*\n     return state;\n }\n \n+// return the numerical statistics of blocks signalling the specified BIP9 condition in this current period\n+BIP9Stats AbstractThresholdConditionChecker::GetStateStatisticsFor(const CBlockIndex* pindex, const Consensus::Params& params) const\n+{\n+    BIP9Stats stats;\n+    \n+    stats.period = Period(params);\n+    stats.threshold = Threshold(params);\n+    \n+    if (pindex == NULL)\n+        return stats;\n+\n+    // Find beginning of period\n+    const CBlockIndex* pindexFirstInPeriod = pindex->GetAncestor(pindex->nHeight - ((pindex->nHeight + 1) % stats.period));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9571#discussion_r100599216",
      "id" : 100599216,
      "original_commit_id" : "83538dd86dc426dc252714d4ca1ae91ad2c5ac24",
      "original_position" : 24,
      "path" : "src/versionbits.cpp",
      "position" : null,
      "pull_request_review_id" : 21308349,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9571",
      "updated_at" : "2017-02-21T22:17:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/100599216",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/9571#discussion_r100599629"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9571"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/100599629"
         }
      },
      "body" : "I believe this should be >=?",
      "commit_id" : "9b9b68527dc95a1edca7de24286473ac9a59499c",
      "created_at" : "2017-02-10T18:53:18Z",
      "diff_hunk" : "@@ -105,6 +104,36 @@ ThresholdState AbstractThresholdConditionChecker::GetStateFor(const CBlockIndex*\n     return state;\n }\n \n+// return the numerical statistics of blocks signalling the specified BIP9 condition in this current period\n+BIP9Stats AbstractThresholdConditionChecker::GetStateStatisticsFor(const CBlockIndex* pindex, const Consensus::Params& params) const\n+{\n+    BIP9Stats stats;\n+    \n+    stats.period = Period(params);\n+    stats.threshold = Threshold(params);\n+    \n+    if (pindex == NULL)\n+        return stats;\n+\n+    // Find beginning of period\n+    const CBlockIndex* pindexFirstInPeriod = pindex->GetAncestor(pindex->nHeight - ((pindex->nHeight + 1) % stats.period));\n+    stats.elapsed = pindex->nHeight - pindexFirstInPeriod->nHeight;\n+    \n+    // Count from current block to beginning of period\n+    int count = 0;\n+    const CBlockIndex* currentIndex = pindex;\n+    while (pindexFirstInPeriod->nHeight != currentIndex->nHeight){\n+        if (Condition(currentIndex, params))\n+            count++;\n+        currentIndex = currentIndex->pprev;\n+    }\n+\n+    stats.count = count;\n+    stats.possible = (stats.period - stats.threshold ) > (stats.elapsed - count);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9571#discussion_r100599629",
      "id" : 100599629,
      "original_commit_id" : "83538dd86dc426dc252714d4ca1ae91ad2c5ac24",
      "original_position" : 37,
      "path" : "src/versionbits.cpp",
      "position" : null,
      "pull_request_review_id" : 21308349,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9571",
      "updated_at" : "2017-02-21T22:17:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/100599629",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/9571#discussion_r100603973"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9571"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/100603973"
         }
      },
      "body" : "thanks",
      "commit_id" : "9b9b68527dc95a1edca7de24286473ac9a59499c",
      "created_at" : "2017-02-10T19:14:39Z",
      "diff_hunk" : "@@ -1057,6 +1057,18 @@ static UniValue BIP9SoftForkDesc(const Consensus::Params& consensusParams, Conse\n     rv.push_back(Pair(\"startTime\", consensusParams.vDeployments[id].nStartTime));\n     rv.push_back(Pair(\"timeout\", consensusParams.vDeployments[id].nTimeout));\n     rv.push_back(Pair(\"since\", VersionBitsTipStateSinceHeight(consensusParams, id)));\n+    if (THRESHOLD_STARTED == thresholdState)\n+    {\n+        UniValue statsUV(UniValue::VOBJ);\n+        BIP9Stats statsStruct = VersionBitsTipStatistics(consensusParams, id);\n+        statsUV.push_back(Pair(\"period\", statsStruct.period));\n+        statsUV.push_back(Pair(\"threshold\", statsStruct.threshold));\n+        statsUV.push_back(Pair(\"elapsed\", statsStruct.elapsed));\n+        statsUV.push_back(Pair(\"count\", statsStruct.count));\n+        statsUV.push_back(Pair(\"possible\", statsStruct.possible));\n+                ",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9571#discussion_r100603973",
      "id" : 100603973,
      "original_commit_id" : "83538dd86dc426dc252714d4ca1ae91ad2c5ac24",
      "original_position" : 22,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 21320650,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9571",
      "updated_at" : "2017-02-21T22:17:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/100603973",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2084648?v=3",
         "events_url" : "https://api.github.com/users/pinheadmz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pinheadmz/followers",
         "following_url" : "https://api.github.com/users/pinheadmz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pinheadmz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pinheadmz",
         "id" : 2084648,
         "login" : "pinheadmz",
         "organizations_url" : "https://api.github.com/users/pinheadmz/orgs",
         "received_events_url" : "https://api.github.com/users/pinheadmz/received_events",
         "repos_url" : "https://api.github.com/users/pinheadmz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pinheadmz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pinheadmz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pinheadmz"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/9571#discussion_r100604010"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9571"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/100604010"
         }
      },
      "body" : "good catch thanks",
      "commit_id" : "9b9b68527dc95a1edca7de24286473ac9a59499c",
      "created_at" : "2017-02-10T19:14:48Z",
      "diff_hunk" : "@@ -105,6 +104,36 @@ ThresholdState AbstractThresholdConditionChecker::GetStateFor(const CBlockIndex*\n     return state;\n }\n \n+// return the numerical statistics of blocks signalling the specified BIP9 condition in this current period\n+BIP9Stats AbstractThresholdConditionChecker::GetStateStatisticsFor(const CBlockIndex* pindex, const Consensus::Params& params) const\n+{\n+    BIP9Stats stats;\n+    \n+    stats.period = Period(params);\n+    stats.threshold = Threshold(params);\n+    \n+    if (pindex == NULL)\n+        return stats;\n+\n+    // Find beginning of period\n+    const CBlockIndex* pindexFirstInPeriod = pindex->GetAncestor(pindex->nHeight - ((pindex->nHeight + 1) % stats.period));\n+    stats.elapsed = pindex->nHeight - pindexFirstInPeriod->nHeight;\n+    \n+    // Count from current block to beginning of period\n+    int count = 0;\n+    const CBlockIndex* currentIndex = pindex;\n+    while (pindexFirstInPeriod->nHeight != currentIndex->nHeight){\n+        if (Condition(currentIndex, params))\n+            count++;\n+        currentIndex = currentIndex->pprev;\n+    }\n+\n+    stats.count = count;\n+    stats.possible = (stats.period - stats.threshold ) > (stats.elapsed - count);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9571#discussion_r100604010",
      "id" : 100604010,
      "original_commit_id" : "83538dd86dc426dc252714d4ca1ae91ad2c5ac24",
      "original_position" : 37,
      "path" : "src/versionbits.cpp",
      "position" : null,
      "pull_request_review_id" : 21320686,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9571",
      "updated_at" : "2017-02-21T22:17:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/100604010",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2084648?v=3",
         "events_url" : "https://api.github.com/users/pinheadmz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pinheadmz/followers",
         "following_url" : "https://api.github.com/users/pinheadmz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pinheadmz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pinheadmz",
         "id" : 2084648,
         "login" : "pinheadmz",
         "organizations_url" : "https://api.github.com/users/pinheadmz/orgs",
         "received_events_url" : "https://api.github.com/users/pinheadmz/received_events",
         "repos_url" : "https://api.github.com/users/pinheadmz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pinheadmz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pinheadmz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pinheadmz"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/9571#discussion_r100604776"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9571"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/100604776"
         }
      },
      "body" : "Ah I think you're right. I copied this line from `AbstractThresholdConditionChecker::GetStateFor` \r\n\r\nhttps://github.com/pinheadmz/bitcoin/blob/83538dd86dc426dc252714d4ca1ae91ad2c5ac24/src/versionbits.cpp#L30-L33\r\n\r\nWe'll call it `pindexEndOfPrevPeriod` ?",
      "commit_id" : "9b9b68527dc95a1edca7de24286473ac9a59499c",
      "created_at" : "2017-02-10T19:18:51Z",
      "diff_hunk" : "@@ -105,6 +104,36 @@ ThresholdState AbstractThresholdConditionChecker::GetStateFor(const CBlockIndex*\n     return state;\n }\n \n+// return the numerical statistics of blocks signalling the specified BIP9 condition in this current period\n+BIP9Stats AbstractThresholdConditionChecker::GetStateStatisticsFor(const CBlockIndex* pindex, const Consensus::Params& params) const\n+{\n+    BIP9Stats stats;\n+    \n+    stats.period = Period(params);\n+    stats.threshold = Threshold(params);\n+    \n+    if (pindex == NULL)\n+        return stats;\n+\n+    // Find beginning of period\n+    const CBlockIndex* pindexFirstInPeriod = pindex->GetAncestor(pindex->nHeight - ((pindex->nHeight + 1) % stats.period));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9571#discussion_r100604776",
      "id" : 100604776,
      "original_commit_id" : "83538dd86dc426dc252714d4ca1ae91ad2c5ac24",
      "original_position" : 24,
      "path" : "src/versionbits.cpp",
      "position" : null,
      "pull_request_review_id" : 21321459,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9571",
      "updated_at" : "2017-02-21T22:17:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/100604776",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2084648?v=3",
         "events_url" : "https://api.github.com/users/pinheadmz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pinheadmz/followers",
         "following_url" : "https://api.github.com/users/pinheadmz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pinheadmz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pinheadmz",
         "id" : 2084648,
         "login" : "pinheadmz",
         "organizations_url" : "https://api.github.com/users/pinheadmz/orgs",
         "received_events_url" : "https://api.github.com/users/pinheadmz/received_events",
         "repos_url" : "https://api.github.com/users/pinheadmz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pinheadmz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pinheadmz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pinheadmz"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/9571#discussion_r100605211"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9571"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/100605211"
         }
      },
      "body" : "I'll update my test to hit the edge too",
      "commit_id" : "9b9b68527dc95a1edca7de24286473ac9a59499c",
      "created_at" : "2017-02-10T19:21:08Z",
      "diff_hunk" : "@@ -105,6 +104,36 @@ ThresholdState AbstractThresholdConditionChecker::GetStateFor(const CBlockIndex*\n     return state;\n }\n \n+// return the numerical statistics of blocks signalling the specified BIP9 condition in this current period\n+BIP9Stats AbstractThresholdConditionChecker::GetStateStatisticsFor(const CBlockIndex* pindex, const Consensus::Params& params) const\n+{\n+    BIP9Stats stats;\n+    \n+    stats.period = Period(params);\n+    stats.threshold = Threshold(params);\n+    \n+    if (pindex == NULL)\n+        return stats;\n+\n+    // Find beginning of period\n+    const CBlockIndex* pindexFirstInPeriod = pindex->GetAncestor(pindex->nHeight - ((pindex->nHeight + 1) % stats.period));\n+    stats.elapsed = pindex->nHeight - pindexFirstInPeriod->nHeight;\n+    \n+    // Count from current block to beginning of period\n+    int count = 0;\n+    const CBlockIndex* currentIndex = pindex;\n+    while (pindexFirstInPeriod->nHeight != currentIndex->nHeight){\n+        if (Condition(currentIndex, params))\n+            count++;\n+        currentIndex = currentIndex->pprev;\n+    }\n+\n+    stats.count = count;\n+    stats.possible = (stats.period - stats.threshold ) > (stats.elapsed - count);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9571#discussion_r100605211",
      "id" : 100605211,
      "original_commit_id" : "83538dd86dc426dc252714d4ca1ae91ad2c5ac24",
      "original_position" : 37,
      "path" : "src/versionbits.cpp",
      "position" : null,
      "pull_request_review_id" : 21321907,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9571",
      "updated_at" : "2017-02-21T22:17:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/100605211",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2084648?v=3",
         "events_url" : "https://api.github.com/users/pinheadmz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pinheadmz/followers",
         "following_url" : "https://api.github.com/users/pinheadmz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pinheadmz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pinheadmz",
         "id" : 2084648,
         "login" : "pinheadmz",
         "organizations_url" : "https://api.github.com/users/pinheadmz/orgs",
         "received_events_url" : "https://api.github.com/users/pinheadmz/received_events",
         "repos_url" : "https://api.github.com/users/pinheadmz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pinheadmz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pinheadmz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pinheadmz"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/9571#discussion_r102053436"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9571"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/102053436"
         }
      },
      "body" : "s/staistics/statistics/",
      "commit_id" : "9b9b68527dc95a1edca7de24286473ac9a59499c",
      "created_at" : "2017-02-20T16:28:10Z",
      "diff_hunk" : "@@ -330,6 +330,9 @@ std::string FormatStateMessage(const CValidationState &state);\n /** Get the BIP9 state for a given deployment at the current tip. */\n ThresholdState VersionBitsTipState(const Consensus::Params& params, Consensus::DeploymentPos pos);\n \n+/** Get the numerical staistics for the BIP9 state for a given deployment at the current tip. */",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9571#discussion_r102053436",
      "id" : 102053436,
      "original_commit_id" : "330e8a1f6e86f07f911dc0d6a3d02618b74244e0",
      "original_position" : 4,
      "path" : "src/validation.h",
      "position" : null,
      "pull_request_review_id" : 22797942,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9571",
      "updated_at" : "2017-02-21T22:17:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/102053436",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/9571#discussion_r102080659"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9571"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/102080659"
         }
      },
      "body" : "I'd kinda prefer if you didnt change Test 2 here...just add more tests as \"Test 1\" with a 144-block-total. Also, though I /think/ the new code is right, it'd be really nice if you could add two tests: one which fails to active by 1 block (and checks the \"possible\" flag is false after the first N), and one which activates with one more signaling block, to make sure the possible flat is set right.",
      "commit_id" : "9b9b68527dc95a1edca7de24286473ac9a59499c",
      "created_at" : "2017-02-20T19:29:28Z",
      "diff_hunk" : "@@ -106,23 +106,49 @@ def test_BIP(self, bipName, activated_version, invalidate, invalidatePostSignatu\n \n         assert_equal(self.get_bip9_status(bipName)['status'], 'started')\n         assert_equal(self.get_bip9_status(bipName)['since'], 144)\n+        assert_equal(self.get_bip9_status(bipName)['statistics']['elapsed'], 0)\n+        assert_equal(self.get_bip9_status(bipName)['statistics']['count'], 0)\n         tmpl = self.nodes[0].getblocktemplate({})\n         assert(bipName not in tmpl['rules'])\n         assert_equal(tmpl['vbavailable'][bipName], bitno)\n         assert_equal(tmpl['vbrequired'], 0)\n         assert(tmpl['version'] & activated_version)\n \n+        # Test 1-A\n+        # check counting stats en route to Test 2, LOCKED_IN still possible\n+        # 36 is the max number of \"signalling not\" allowed before threshold fails this period (144-108)\n+        test_blocks = self.generate_blocks(10, activated_version) # 0x20000001 (signalling ready)\n+        test_blocks = self.generate_blocks(36, 4, test_blocks) # 0x00000004 (signalling not)\n+        yield TestInstance(test_blocks, sync_every_block=False)\n+\n+        assert_equal(self.get_bip9_status(bipName)['statistics']['elapsed'], 46)\n+        assert_equal(self.get_bip9_status(bipName)['statistics']['count'], 10)\n+        assert_equal(self.get_bip9_status(bipName)['statistics']['possible'], True)\n+\n+        # Test 1-B\n+        # check counting stats en route to Test 2, LOCKED_IN no longer possible this period\n+        # (not enough blocks left in current period to reach threshold of 108 signalling ready)\n+        test_blocks = self.generate_blocks(10, activated_version) # 0x20000001 (signalling ready)\n+        test_blocks = self.generate_blocks(1, 4, test_blocks) # 0x00000004 (signalling not)\n+        yield TestInstance(test_blocks, sync_every_block=False)\n+\n+        assert_equal(self.get_bip9_status(bipName)['statistics']['elapsed'], 57)\n+        assert_equal(self.get_bip9_status(bipName)['statistics']['count'], 20)\n+        assert_equal(self.get_bip9_status(bipName)['statistics']['possible'], False)\n+\n         # Test 2\n         # Fail to achieve LOCKED_IN 100 out of 144 signal bit 1\n         # using a variety of bits to simulate multiple parallel softforks\n-        test_blocks = self.generate_blocks(50, activated_version) # 0x20000001 (signalling ready)\n-        test_blocks = self.generate_blocks(20, 4, test_blocks) # 0x00000004 (signalling not)\n-        test_blocks = self.generate_blocks(50, activated_version, test_blocks) # 0x20000101 (signalling ready)\n-        test_blocks = self.generate_blocks(24, 4, test_blocks) # 0x20010000 (signalling not)\n+        test_blocks = self.generate_blocks(40, activated_version) # 0x20000001 (signalling ready)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9571#discussion_r102080659",
      "id" : 102080659,
      "original_commit_id" : "330e8a1f6e86f07f911dc0d6a3d02618b74244e0",
      "original_position" : 41,
      "path" : "qa/rpc-tests/bip9-softforks.py",
      "position" : null,
      "pull_request_review_id" : 22825910,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9571",
      "updated_at" : "2017-02-21T22:17:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/102080659",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/9571#discussion_r102099499"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9571"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/102099499"
         }
      },
      "body" : "I think I see what you mean, test the flag at the end of the period to make sure the flag matches the actual outcome in the end? That's cool for the negative test, but since it can only activate once, the positive test must borrow some blocks from Test 2?",
      "commit_id" : "9b9b68527dc95a1edca7de24286473ac9a59499c",
      "created_at" : "2017-02-20T22:05:29Z",
      "diff_hunk" : "@@ -106,23 +106,49 @@ def test_BIP(self, bipName, activated_version, invalidate, invalidatePostSignatu\n \n         assert_equal(self.get_bip9_status(bipName)['status'], 'started')\n         assert_equal(self.get_bip9_status(bipName)['since'], 144)\n+        assert_equal(self.get_bip9_status(bipName)['statistics']['elapsed'], 0)\n+        assert_equal(self.get_bip9_status(bipName)['statistics']['count'], 0)\n         tmpl = self.nodes[0].getblocktemplate({})\n         assert(bipName not in tmpl['rules'])\n         assert_equal(tmpl['vbavailable'][bipName], bitno)\n         assert_equal(tmpl['vbrequired'], 0)\n         assert(tmpl['version'] & activated_version)\n \n+        # Test 1-A\n+        # check counting stats en route to Test 2, LOCKED_IN still possible\n+        # 36 is the max number of \"signalling not\" allowed before threshold fails this period (144-108)\n+        test_blocks = self.generate_blocks(10, activated_version) # 0x20000001 (signalling ready)\n+        test_blocks = self.generate_blocks(36, 4, test_blocks) # 0x00000004 (signalling not)\n+        yield TestInstance(test_blocks, sync_every_block=False)\n+\n+        assert_equal(self.get_bip9_status(bipName)['statistics']['elapsed'], 46)\n+        assert_equal(self.get_bip9_status(bipName)['statistics']['count'], 10)\n+        assert_equal(self.get_bip9_status(bipName)['statistics']['possible'], True)\n+\n+        # Test 1-B\n+        # check counting stats en route to Test 2, LOCKED_IN no longer possible this period\n+        # (not enough blocks left in current period to reach threshold of 108 signalling ready)\n+        test_blocks = self.generate_blocks(10, activated_version) # 0x20000001 (signalling ready)\n+        test_blocks = self.generate_blocks(1, 4, test_blocks) # 0x00000004 (signalling not)\n+        yield TestInstance(test_blocks, sync_every_block=False)\n+\n+        assert_equal(self.get_bip9_status(bipName)['statistics']['elapsed'], 57)\n+        assert_equal(self.get_bip9_status(bipName)['statistics']['count'], 20)\n+        assert_equal(self.get_bip9_status(bipName)['statistics']['possible'], False)\n+\n         # Test 2\n         # Fail to achieve LOCKED_IN 100 out of 144 signal bit 1\n         # using a variety of bits to simulate multiple parallel softforks\n-        test_blocks = self.generate_blocks(50, activated_version) # 0x20000001 (signalling ready)\n-        test_blocks = self.generate_blocks(20, 4, test_blocks) # 0x00000004 (signalling not)\n-        test_blocks = self.generate_blocks(50, activated_version, test_blocks) # 0x20000101 (signalling ready)\n-        test_blocks = self.generate_blocks(24, 4, test_blocks) # 0x20010000 (signalling not)\n+        test_blocks = self.generate_blocks(40, activated_version) # 0x20000001 (signalling ready)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9571#discussion_r102099499",
      "id" : 102099499,
      "original_commit_id" : "330e8a1f6e86f07f911dc0d6a3d02618b74244e0",
      "original_position" : 41,
      "path" : "qa/rpc-tests/bip9-softforks.py",
      "position" : null,
      "pull_request_review_id" : 22845020,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9571",
      "updated_at" : "2017-02-21T22:17:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/102099499",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2084648?v=3",
         "events_url" : "https://api.github.com/users/pinheadmz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pinheadmz/followers",
         "following_url" : "https://api.github.com/users/pinheadmz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pinheadmz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pinheadmz",
         "id" : 2084648,
         "login" : "pinheadmz",
         "organizations_url" : "https://api.github.com/users/pinheadmz/orgs",
         "received_events_url" : "https://api.github.com/users/pinheadmz/received_events",
         "repos_url" : "https://api.github.com/users/pinheadmz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pinheadmz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pinheadmz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pinheadmz"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/9571#discussion_r102333378"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9571"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/102333378"
         }
      },
      "body" : "thanks, fixed",
      "commit_id" : "9b9b68527dc95a1edca7de24286473ac9a59499c",
      "created_at" : "2017-02-21T22:18:45Z",
      "diff_hunk" : "@@ -330,6 +330,9 @@ std::string FormatStateMessage(const CValidationState &state);\n /** Get the BIP9 state for a given deployment at the current tip. */\n ThresholdState VersionBitsTipState(const Consensus::Params& params, Consensus::DeploymentPos pos);\n \n+/** Get the numerical staistics for the BIP9 state for a given deployment at the current tip. */",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9571#discussion_r102333378",
      "id" : 102333378,
      "original_commit_id" : "330e8a1f6e86f07f911dc0d6a3d02618b74244e0",
      "original_position" : 4,
      "path" : "src/validation.h",
      "position" : null,
      "pull_request_review_id" : 23086861,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9571",
      "updated_at" : "2017-02-21T22:18:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/102333378",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2084648?v=3",
         "events_url" : "https://api.github.com/users/pinheadmz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pinheadmz/followers",
         "following_url" : "https://api.github.com/users/pinheadmz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pinheadmz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pinheadmz",
         "id" : 2084648,
         "login" : "pinheadmz",
         "organizations_url" : "https://api.github.com/users/pinheadmz/orgs",
         "received_events_url" : "https://api.github.com/users/pinheadmz/received_events",
         "repos_url" : "https://api.github.com/users/pinheadmz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pinheadmz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pinheadmz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pinheadmz"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/9571#discussion_r102333784"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9571"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/102333784"
         }
      },
      "body" : "@TheBlueMatt I rearranged the tests to hit the thresholds. I put Test 2 back to where it was, but still had to modify Test 3 to cover everything (just borrowed one block and tested the `possible` flag right before period completion). LMK what you think, thanks",
      "commit_id" : "9b9b68527dc95a1edca7de24286473ac9a59499c",
      "created_at" : "2017-02-21T22:20:34Z",
      "diff_hunk" : "@@ -106,23 +106,49 @@ def test_BIP(self, bipName, activated_version, invalidate, invalidatePostSignatu\n \n         assert_equal(self.get_bip9_status(bipName)['status'], 'started')\n         assert_equal(self.get_bip9_status(bipName)['since'], 144)\n+        assert_equal(self.get_bip9_status(bipName)['statistics']['elapsed'], 0)\n+        assert_equal(self.get_bip9_status(bipName)['statistics']['count'], 0)\n         tmpl = self.nodes[0].getblocktemplate({})\n         assert(bipName not in tmpl['rules'])\n         assert_equal(tmpl['vbavailable'][bipName], bitno)\n         assert_equal(tmpl['vbrequired'], 0)\n         assert(tmpl['version'] & activated_version)\n \n+        # Test 1-A\n+        # check counting stats en route to Test 2, LOCKED_IN still possible\n+        # 36 is the max number of \"signalling not\" allowed before threshold fails this period (144-108)\n+        test_blocks = self.generate_blocks(10, activated_version) # 0x20000001 (signalling ready)\n+        test_blocks = self.generate_blocks(36, 4, test_blocks) # 0x00000004 (signalling not)\n+        yield TestInstance(test_blocks, sync_every_block=False)\n+\n+        assert_equal(self.get_bip9_status(bipName)['statistics']['elapsed'], 46)\n+        assert_equal(self.get_bip9_status(bipName)['statistics']['count'], 10)\n+        assert_equal(self.get_bip9_status(bipName)['statistics']['possible'], True)\n+\n+        # Test 1-B\n+        # check counting stats en route to Test 2, LOCKED_IN no longer possible this period\n+        # (not enough blocks left in current period to reach threshold of 108 signalling ready)\n+        test_blocks = self.generate_blocks(10, activated_version) # 0x20000001 (signalling ready)\n+        test_blocks = self.generate_blocks(1, 4, test_blocks) # 0x00000004 (signalling not)\n+        yield TestInstance(test_blocks, sync_every_block=False)\n+\n+        assert_equal(self.get_bip9_status(bipName)['statistics']['elapsed'], 57)\n+        assert_equal(self.get_bip9_status(bipName)['statistics']['count'], 20)\n+        assert_equal(self.get_bip9_status(bipName)['statistics']['possible'], False)\n+\n         # Test 2\n         # Fail to achieve LOCKED_IN 100 out of 144 signal bit 1\n         # using a variety of bits to simulate multiple parallel softforks\n-        test_blocks = self.generate_blocks(50, activated_version) # 0x20000001 (signalling ready)\n-        test_blocks = self.generate_blocks(20, 4, test_blocks) # 0x00000004 (signalling not)\n-        test_blocks = self.generate_blocks(50, activated_version, test_blocks) # 0x20000101 (signalling ready)\n-        test_blocks = self.generate_blocks(24, 4, test_blocks) # 0x20010000 (signalling not)\n+        test_blocks = self.generate_blocks(40, activated_version) # 0x20000001 (signalling ready)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9571#discussion_r102333784",
      "id" : 102333784,
      "original_commit_id" : "330e8a1f6e86f07f911dc0d6a3d02618b74244e0",
      "original_position" : 41,
      "path" : "qa/rpc-tests/bip9-softforks.py",
      "position" : null,
      "pull_request_review_id" : 23087253,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9571",
      "updated_at" : "2017-02-21T22:20:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/102333784",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2084648?v=3",
         "events_url" : "https://api.github.com/users/pinheadmz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pinheadmz/followers",
         "following_url" : "https://api.github.com/users/pinheadmz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pinheadmz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pinheadmz",
         "id" : 2084648,
         "login" : "pinheadmz",
         "organizations_url" : "https://api.github.com/users/pinheadmz/orgs",
         "received_events_url" : "https://api.github.com/users/pinheadmz/received_events",
         "repos_url" : "https://api.github.com/users/pinheadmz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pinheadmz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pinheadmz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pinheadmz"
      }
   },
   {
      "body" : "utACK 9b9b68527dc95a1edca7de24286473ac9a59499c thanks so much for sticking with this :).",
      "created_at" : "2017-02-22T16:27:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9571#issuecomment-281721123",
      "id" : 281721123,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9571",
      "updated_at" : "2017-02-22T16:27:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/281721123",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/9571#discussion_r103586737"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9571"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/103586737"
         }
      },
      "body" : "Nit: I keep getting this and `VersionBitsStatistics` mixed up when I read through the changes. I think it would help readability to name this e.g. `CurrentVersionBitsStatistics` or `ActiveVersionBitsStatistics` or something.",
      "commit_id" : "9b9b68527dc95a1edca7de24286473ac9a59499c",
      "created_at" : "2017-03-01T00:35:47Z",
      "diff_hunk" : "@@ -330,6 +330,9 @@ std::string FormatStateMessage(const CValidationState &state);\n /** Get the BIP9 state for a given deployment at the current tip. */\n ThresholdState VersionBitsTipState(const Consensus::Params& params, Consensus::DeploymentPos pos);\n \n+/** Get the numerical statistics for the BIP9 state for a given deployment at the current tip. */\n+BIP9Stats VersionBitsTipStatistics(const Consensus::Params& params, Consensus::DeploymentPos pos);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9571#discussion_r103586737",
      "id" : 103586737,
      "original_commit_id" : "9b9b68527dc95a1edca7de24286473ac9a59499c",
      "original_position" : 5,
      "path" : "src/validation.h",
      "position" : 5,
      "pull_request_review_id" : 24377150,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9571",
      "updated_at" : "2017-03-01T00:36:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/103586737",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/250224?v=3",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "body" : "rebased on master a0b1e57b20a17177ed5a9a54e4a8aab597a546b4",
      "created_at" : "2017-03-25T00:00:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9571#issuecomment-289170682",
      "id" : 289170682,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9571",
      "updated_at" : "2017-03-25T00:00:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/289170682",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/2084648?v=3",
         "events_url" : "https://api.github.com/users/pinheadmz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pinheadmz/followers",
         "following_url" : "https://api.github.com/users/pinheadmz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pinheadmz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pinheadmz",
         "id" : 2084648,
         "login" : "pinheadmz",
         "organizations_url" : "https://api.github.com/users/pinheadmz/orgs",
         "received_events_url" : "https://api.github.com/users/pinheadmz/received_events",
         "repos_url" : "https://api.github.com/users/pinheadmz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pinheadmz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pinheadmz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pinheadmz"
      }
   },
   {
      "body" : "Concept ACK ",
      "created_at" : "2017-03-28T00:15:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9571#issuecomment-289623897",
      "id" : 289623897,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9571",
      "updated_at" : "2017-03-28T00:15:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/289623897",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   }
]
