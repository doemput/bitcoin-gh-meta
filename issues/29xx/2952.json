{
   "assignee" : null,
   "body" : "Build a cache of already processed transactions is sufficient to fix this.CWalletTx::IsConfirmed displays exceptionally poor performance when there are multiple unconfirmed transactions where IsFromMe() is true.\r\n\r\nA cache of already processed transactions is sufficient to largely fix this.\r\n\r\nThis is still optimized for the common case where most dependent transactions are not IsFromMe()\r\n\r\nAs part of this change the logic has been simplified.\r\n\r\nSimple benchmark results:\r\n\r\ngenerate 200 blocks with regtest, create 300 transactions using standard sendtoaddress rpc and a new address for each transaction\r\n\r\n95 seconds\r\n\r\nfor the IsConfirmed this is replacing... well it still hasn't finished running at transactions 216 1414 seconds and getting worse\r\n\r\n![isconfirmed](https://f.cloud.github.com/assets/620611/1052946/a100588e-10e6-11e3-8e2c-4985e4b04dbb.png)\r\n\r\n\r\nafter transaction 175 the time per transaction grows exponentially 1.25 * e ^ (0.107 * x)",
   "closed_at" : "2013-10-13T06:22:15Z",
   "closed_by" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/620611?v=3",
      "events_url" : "https://api.github.com/users/pstratem/events{/privacy}",
      "followers_url" : "https://api.github.com/users/pstratem/followers",
      "following_url" : "https://api.github.com/users/pstratem/following{/other_user}",
      "gists_url" : "https://api.github.com/users/pstratem/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/pstratem",
      "id" : 620611,
      "login" : "pstratem",
      "organizations_url" : "https://api.github.com/users/pstratem/orgs",
      "received_events_url" : "https://api.github.com/users/pstratem/received_events",
      "repos_url" : "https://api.github.com/users/pstratem/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/pstratem/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/pstratem/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/pstratem"
   },
   "comments" : 2,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2952/comments",
   "created_at" : "2013-08-29T17:16:19Z",
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2952/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/pull/2952",
   "id" : 18744082,
   "labels" : [],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2952/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "number" : 2952,
   "pull_request" : {
      "diff_url" : "https://github.com/bitcoin/bitcoin/pull/2952.diff",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2952",
      "patch_url" : "https://github.com/bitcoin/bitcoin/pull/2952.patch",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/2952"
   },
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "closed",
   "title" : "Improve CWalletTx::IsConfirmed performance.",
   "updated_at" : "2014-06-14T02:14:50Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2952",
   "user" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/620611?v=3",
      "events_url" : "https://api.github.com/users/pstratem/events{/privacy}",
      "followers_url" : "https://api.github.com/users/pstratem/followers",
      "following_url" : "https://api.github.com/users/pstratem/following{/other_user}",
      "gists_url" : "https://api.github.com/users/pstratem/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/pstratem",
      "id" : 620611,
      "login" : "pstratem",
      "organizations_url" : "https://api.github.com/users/pstratem/orgs",
      "received_events_url" : "https://api.github.com/users/pstratem/received_events",
      "repos_url" : "https://api.github.com/users/pstratem/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/pstratem/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/pstratem/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/pstratem"
   }
}
