[
   {
      "body" : "I am running Raspberry Pi 2 Model B running Bitcoin Core 0.12 with [Raspbian Jessie Lite](https://www.raspberrypi.org/downloads/raspbian/). I am getting the \"Activating Best Chain\" error after each time I restart Bitcoind the same way you describe above. It is only an issue if blockchain is not synced to the latest block height before closing down. It can take several hours and up to a day sometimes for Bitcoin to come online on the Arm 7.  \r\n\r\nAt the moment the bitcoin data is stored on a USB Stick but I can also try testing it on an SSD to see if the wait times are due to the drive being used.  \r\n\r\nMy motivation for raising the issue is that as these smaller lower cost devices become more popular as full nodes used by hobbyists it might be good if I could dedicate some time to maximising Bitcoin's performance specifically for these types of devices. \r\n\r\n",
      "created_at" : "2016-02-08T15:12:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7038#issuecomment-181418215",
      "id" : 181418215,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7038",
      "updated_at" : "2016-02-08T15:12:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/181418215",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6334301?v=3",
         "events_url" : "https://api.github.com/users/MrChrisJ/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MrChrisJ/followers",
         "following_url" : "https://api.github.com/users/MrChrisJ/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MrChrisJ/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MrChrisJ",
         "id" : 6334301,
         "login" : "MrChrisJ",
         "organizations_url" : "https://api.github.com/users/MrChrisJ/orgs",
         "received_events_url" : "https://api.github.com/users/MrChrisJ/received_events",
         "repos_url" : "https://api.github.com/users/MrChrisJ/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MrChrisJ/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MrChrisJ/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MrChrisJ"
      }
   },
   {
      "body" : "Performance isn't the issue I'm raising here - the blocks have to be checked, for better of worse. This has already become lots faster in 0.12 by using the secp256k1 library for validation. I've also spent some time optimizing some of the operations in assembly for ARM a while ago, but this isn't merged yet:\r\n\r\n- https://github.com/bitcoin/secp256k1/pull/173\r\n- https://github.com/bitcoin/secp256k1/pull/366\r\n\r\nBut what I mean is that the order of operations at startup could be better. I don't think there is a strong reason it has to finish checking all those blocks before letting the user do anything else. Normally this is done in the background.\r\n\r\nOfftopic: Storing bitcoin data, especially the databases on an USB stick is not a very good idea. Not only is it slow, the access pattern tends to kill them off quickly.\r\n",
      "created_at" : "2016-02-08T16:12:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7038#issuecomment-181443912",
      "id" : 181443912,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7038",
      "updated_at" : "2016-02-08T16:12:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/181443912",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Your block verfication/ catch up rate is almost certainly being throttled by low I/O to the USB stick.  When I moved my bitcoin data from HD to SSD, block verification / catch up rate went from 30-90 seconds per block to ~5 seconds per block.  All other aspects of the system were identical - only the location of the data changed.\r\n\r\nPrior to the update to SSD, I noticed that the bitcoin core disk I/O is \"clumpy\" during block verification. A burst of disk I/O, followed by a burst of CPU load, followed by the verified block count incrementing in the UI. I would imagine the disk I/O burst is to load the UTXOs referenced/spent by the block being checked, and the CPU load was to actually verify the signatures and the block hash.\r\n\r\nBitcoin Core doesn't require high computing power to keep up with the Bitcoin network, It does require high-speed storage I/O.",
      "created_at" : "2016-02-08T16:45:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7038#issuecomment-181458727",
      "id" : 181458727,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7038",
      "updated_at" : "2016-02-08T16:45:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/181458727",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2288043?v=3",
         "events_url" : "https://api.github.com/users/dthorpe/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dthorpe/followers",
         "following_url" : "https://api.github.com/users/dthorpe/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dthorpe/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dthorpe",
         "id" : 2288043,
         "login" : "dthorpe",
         "organizations_url" : "https://api.github.com/users/dthorpe/orgs",
         "received_events_url" : "https://api.github.com/users/dthorpe/received_events",
         "repos_url" : "https://api.github.com/users/dthorpe/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dthorpe/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dthorpe/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dthorpe"
      }
   },
   {
      "body" : "Thanks very much. Yes I understood your intention with the issue (I am kind of new to this so please forgive me) I just raised my report in case you had planned to fix it in 0.12 and hadn't realised. I don't notice the bug at all on my more powerful machines.  \r\n\r\nBriefly on the off topic: I find the SD Cards are a good tradeoff if the user is just looking for low cost device. The MTBF of Sandisk Cruzers is very good and have been running one for a year now. SDD is much faster but still find I have to overclock the processor to make it more usable for development.\r\n\r\nThanks for the fast response.",
      "created_at" : "2016-02-08T20:33:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7038#issuecomment-181556898",
      "id" : 181556898,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7038",
      "updated_at" : "2016-02-08T20:33:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/181556898",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6334301?v=3",
         "events_url" : "https://api.github.com/users/MrChrisJ/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MrChrisJ/followers",
         "following_url" : "https://api.github.com/users/MrChrisJ/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MrChrisJ/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MrChrisJ",
         "id" : 6334301,
         "login" : "MrChrisJ",
         "organizations_url" : "https://api.github.com/users/MrChrisJ/orgs",
         "received_events_url" : "https://api.github.com/users/MrChrisJ/received_events",
         "repos_url" : "https://api.github.com/users/MrChrisJ/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MrChrisJ/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MrChrisJ/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MrChrisJ"
      }
   },
   {
      "body" : "@laanwj a number of people have commenting on this to me in person.\r\n\r\nthe initialization stuff definitely should not be calling activate best chain",
      "created_at" : "2016-02-08T21:29:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7038#issuecomment-181574973",
      "id" : 181574973,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7038",
      "updated_at" : "2016-02-08T21:29:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/181574973",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/620611?v=3",
         "events_url" : "https://api.github.com/users/pstratem/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pstratem/followers",
         "following_url" : "https://api.github.com/users/pstratem/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pstratem/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pstratem",
         "id" : 620611,
         "login" : "pstratem",
         "organizations_url" : "https://api.github.com/users/pstratem/orgs",
         "received_events_url" : "https://api.github.com/users/pstratem/received_events",
         "repos_url" : "https://api.github.com/users/pstratem/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pstratem/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pstratem/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pstratem"
      }
   },
   {
      "body" : "@dthorpe @MrChrisJ \r\n> Offtopic: Storing bitcoin data, especially the databases on an USB stick is not a very good idea. Not only is it slow, the access pattern tends to kill them off quickly.\r\n\r\n(Untested yet, but just an educated hypothesis - VFAT [1] is not a great choice for flash memory (USB sticks, SSD); might a log-structured FS like UBIFS (or possibly YAFFS2) be a better choice?)\r\n\r\n[1] As proposed by each of the Fullnode setup guides linked [here](https://github.com/MrChrisJ/fullnode/).",
      "created_at" : "2016-03-06T00:53:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7038#issuecomment-192772731",
      "id" : 192772731,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7038",
      "updated_at" : "2016-03-06T00:56:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/192772731",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5124538?v=3",
         "events_url" : "https://api.github.com/users/tommcintyre/events{/privacy}",
         "followers_url" : "https://api.github.com/users/tommcintyre/followers",
         "following_url" : "https://api.github.com/users/tommcintyre/following{/other_user}",
         "gists_url" : "https://api.github.com/users/tommcintyre/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/tommcintyre",
         "id" : 5124538,
         "login" : "tommcintyre",
         "organizations_url" : "https://api.github.com/users/tommcintyre/orgs",
         "received_events_url" : "https://api.github.com/users/tommcintyre/received_events",
         "repos_url" : "https://api.github.com/users/tommcintyre/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/tommcintyre/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/tommcintyre/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/tommcintyre"
      }
   },
   {
      "body" : "After #7821 it's possible to shut down the client during 'Activating best chain', this improves the situation somewhat.\r\n",
      "created_at" : "2016-04-19T10:15:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7038#issuecomment-211843974",
      "id" : 211843974,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7038",
      "updated_at" : "2016-04-19T10:15:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/211843974",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "This should also be improved by #7917, which moves the \"Activating best chain\" step to ThreadImport.",
      "created_at" : "2016-04-20T14:18:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7038#issuecomment-212444614",
      "id" : 212444614,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7038",
      "updated_at" : "2016-04-20T14:19:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/212444614",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Activating Best Chain is no longer done during the splash screen. Anything left to do here?",
      "created_at" : "2016-05-24T11:53:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7038#issuecomment-221246012",
      "id" : 221246012,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7038",
      "updated_at" : "2016-05-24T11:53:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/221246012",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=3",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   }
]
