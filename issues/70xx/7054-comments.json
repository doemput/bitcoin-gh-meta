[
   {
      "body" : "I shortly checked your receiving addresses over an testnet API, seems to be 0 balance.\r\nCould be a mistake in your script (fees correctly handled?!) or a missing transaction in your listtransaction.txt",
      "created_at" : "2015-11-18T20:00:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7054#issuecomment-157845039",
      "id" : 157845039,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7054",
      "updated_at" : "2015-11-18T20:00:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/157845039",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "I've checked again, listtransactions.txt is fine. Script also should be ok, but i'll be glad if someone more experienced check it.",
      "created_at" : "2015-11-18T20:56:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7054#issuecomment-157860855",
      "id" : 157860855,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7054",
      "updated_at" : "2015-11-18T20:56:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/157860855",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1561655?v=3",
         "events_url" : "https://api.github.com/users/asfin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/asfin/followers",
         "following_url" : "https://api.github.com/users/asfin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/asfin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/asfin",
         "id" : 1561655,
         "login" : "asfin",
         "organizations_url" : "https://api.github.com/users/asfin/orgs",
         "received_events_url" : "https://api.github.com/users/asfin/received_events",
         "repos_url" : "https://api.github.com/users/asfin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/asfin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/asfin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/asfin"
      }
   },
   {
      "body" : "Some transactions have negative \"fee\", that's weird.\r\n",
      "created_at" : "2015-11-19T14:56:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7054#issuecomment-158081123",
      "id" : 158081123,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7054",
      "updated_at" : "2015-11-19T14:56:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/158081123",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "I'm think it happens because this addresses are part of larger wallet, and positive fees are \"change\", am i right?",
      "created_at" : "2015-11-19T18:08:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7054#issuecomment-158140510",
      "id" : 158140510,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7054",
      "updated_at" : "2015-11-19T18:08:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/158140510",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1561655?v=3",
         "events_url" : "https://api.github.com/users/asfin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/asfin/followers",
         "following_url" : "https://api.github.com/users/asfin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/asfin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/asfin",
         "id" : 1561655,
         "login" : "asfin",
         "organizations_url" : "https://api.github.com/users/asfin/orgs",
         "received_events_url" : "https://api.github.com/users/asfin/received_events",
         "repos_url" : "https://api.github.com/users/asfin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/asfin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/asfin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/asfin"
      }
   },
   {
      "body" : "No, change is already considered in the \"amount\" value.\r\n\r\n@asfin I guess you forgot to import some keys of some of the transactions. (Maybe coinjoin?) Could you try again and assert that you have all addresses in you wallet?",
      "created_at" : "2015-11-19T18:36:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7054#issuecomment-158149674",
      "id" : 158149674,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7054",
      "updated_at" : "2015-11-19T18:36:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/158149674",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=3",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "body" : "Fee is computed as (sum of outputs)-(sum of inputs that are ours)... that is meaningless if not all inputs are ours.",
      "created_at" : "2015-11-19T18:46:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7054#issuecomment-158152534",
      "id" : 158152534,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7054",
      "updated_at" : "2015-11-19T18:46:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/158152534",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "@sipa Yes, and it's in there since at least 2011Ã¢ÂÂ¢",
      "created_at" : "2015-11-19T19:32:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7054#issuecomment-158169406",
      "id" : 158169406,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7054",
      "updated_at" : "2015-11-19T19:32:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/158169406",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=3",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "body" : "@MarcoFalke OK, I'll try to import complete wallet and attach result. But i've found this problem on it, and after this tried to split wallet on small parts, to isolate error.\r\nIt seems to be weird, if after importing privkey my balance doesn't match transaction history. ",
      "created_at" : "2015-11-19T20:54:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7054#issuecomment-158194841",
      "id" : 158194841,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7054",
      "updated_at" : "2015-11-19T20:54:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/158194841",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1561655?v=3",
         "events_url" : "https://api.github.com/users/asfin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/asfin/followers",
         "following_url" : "https://api.github.com/users/asfin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/asfin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/asfin",
         "id" : 1561655,
         "login" : "asfin",
         "organizations_url" : "https://api.github.com/users/asfin/orgs",
         "received_events_url" : "https://api.github.com/users/asfin/received_events",
         "repos_url" : "https://api.github.com/users/asfin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/asfin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/asfin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/asfin"
      }
   },
   {
      "body" : "@asfin Yes, if you don't import all private key related to all transactions, you will get a difference when summing up the values reported by `listtransactions` in current versions of bitcoin.",
      "created_at" : "2015-11-19T22:24:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7054#issuecomment-158219552",
      "id" : 158219552,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7054",
      "updated_at" : "2015-11-19T22:24:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/158219552",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=3",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "body" : "Replaced wallet.dat with backup of original, and performed reindex. Script reports:\r\n```\r\nunspent     :   12.33503283\r\ntotal income:   12.34391710\r\ntotal fee   :   -0.00884290\r\ndiff        :   12.33507420\r\n```\r\nbut in attached version of script, `diff` doesn't include unspent balance so `diff-unspent=error; 12.33507420-12.33503283=0.00004137`. How correctly find tx, which broke this?\r\n\r\n[listtransactions.json.txt](https://github.com/bitcoin/bitcoin/files/39904/listtransactions.json.txt)\r\n[unspent.json.txt](https://github.com/bitcoin/bitcoin/files/39903/unspent.json.txt)\r\n\r\n",
      "created_at" : "2015-11-20T09:47:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7054#issuecomment-158339487",
      "id" : 158339487,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7054",
      "updated_at" : "2015-11-20T09:47:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/158339487",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1561655?v=3",
         "events_url" : "https://api.github.com/users/asfin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/asfin/followers",
         "following_url" : "https://api.github.com/users/asfin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/asfin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/asfin",
         "id" : 1561655,
         "login" : "asfin",
         "organizations_url" : "https://api.github.com/users/asfin/orgs",
         "received_events_url" : "https://api.github.com/users/asfin/received_events",
         "repos_url" : "https://api.github.com/users/asfin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/asfin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/asfin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/asfin"
      }
   },
   {
      "body" : "> How correctly find tx, which broke this?\r\n\r\nShould be at least all those with negative fee",
      "created_at" : "2015-11-20T12:14:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7054#issuecomment-158380241",
      "id" : 158380241,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7054",
      "updated_at" : "2015-11-20T12:14:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/158380241",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=3",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "body" : "But here all fees < 0.",
      "created_at" : "2015-11-20T13:22:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7054#issuecomment-158401795",
      "id" : 158401795,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7054",
      "updated_at" : "2015-11-20T13:22:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/158401795",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1561655?v=3",
         "events_url" : "https://api.github.com/users/asfin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/asfin/followers",
         "following_url" : "https://api.github.com/users/asfin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/asfin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/asfin",
         "id" : 1561655,
         "login" : "asfin",
         "organizations_url" : "https://api.github.com/users/asfin/orgs",
         "received_events_url" : "https://api.github.com/users/asfin/received_events",
         "repos_url" : "https://api.github.com/users/asfin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/asfin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/asfin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/asfin"
      }
   },
   {
      "body" : "Yes, `listtransactions` always *should* return a negative fee. (Internally they are handled positive: `nFee` in https://github.com/bitcoin/bitcoin/blob/776848acefa8345c7e510d31406160c4a1a24bca/src/wallet/wallet.cpp#L969)",
      "created_at" : "2015-11-20T13:32:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7054#issuecomment-158404211",
      "id" : 158404211,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7054",
      "updated_at" : "2015-11-20T13:36:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/158404211",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=3",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "body" : "Not clear this is an issue",
      "created_at" : "2016-09-28T17:55:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7054#issuecomment-250245500",
      "id" : 250245500,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7054",
      "updated_at" : "2016-09-28T17:55:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/250245500",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=3",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   }
]
