[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7948#discussion_r61098168"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7948"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/61098168"
         }
      },
      "body" : "Use a reference here; no need to copy the entire cache",
      "commit_id" : "fc146095d20452686efe1944b143452bec394343",
      "created_at" : "2016-04-26T14:43:10Z",
      "diff_hunk" : "@@ -5952,6 +5952,20 @@ ThresholdState VersionBitsTipState(const Consensus::Params& params, Consensus::D\n     return VersionBitsState(chainActive.Tip(), params, pos, versionbitscache);\n }\n \n+const CBlockIndex* VersionBitsLockedInBlock(const Consensus::DeploymentPos pos)\n+{\n+    LOCK(cs_main);\n+    ThresholdConditionCache cache = versionbitscache.caches[pos];",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7948#discussion_r61098168",
      "id" : 61098168,
      "original_commit_id" : "db835509401617d0b72cc9b5d425a7c16be745f1",
      "original_position" : 7,
      "path" : "src/main.cpp",
      "position" : null,
      "pull_request_review_id" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7948",
      "updated_at" : "2016-10-19T13:11:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/61098168",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7948#discussion_r61108214"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7948"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/61108214"
         }
      },
      "body" : "done, thanks",
      "commit_id" : "fc146095d20452686efe1944b143452bec394343",
      "created_at" : "2016-04-26T15:32:59Z",
      "diff_hunk" : "@@ -5952,6 +5952,20 @@ ThresholdState VersionBitsTipState(const Consensus::Params& params, Consensus::D\n     return VersionBitsState(chainActive.Tip(), params, pos, versionbitscache);\n }\n \n+const CBlockIndex* VersionBitsLockedInBlock(const Consensus::DeploymentPos pos)\n+{\n+    LOCK(cs_main);\n+    ThresholdConditionCache cache = versionbitscache.caches[pos];",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7948#discussion_r61108214",
      "id" : 61108214,
      "original_commit_id" : "db835509401617d0b72cc9b5d425a7c16be745f1",
      "original_position" : 7,
      "path" : "src/main.cpp",
      "position" : null,
      "pull_request_review_id" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7948",
      "updated_at" : "2016-10-19T13:11:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/61108214",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6440430?v=3",
         "events_url" : "https://api.github.com/users/mruddy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mruddy/followers",
         "following_url" : "https://api.github.com/users/mruddy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mruddy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mruddy",
         "id" : 6440430,
         "login" : "mruddy",
         "organizations_url" : "https://api.github.com/users/mruddy/orgs",
         "received_events_url" : "https://api.github.com/users/mruddy/received_events",
         "repos_url" : "https://api.github.com/users/mruddy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mruddy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mruddy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mruddy"
      }
   },
   {
      "body" : "Why do you prefer to print block hash instead of block height?",
      "created_at" : "2016-04-26T20:31:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7948#issuecomment-214876642",
      "id" : 214876642,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7948",
      "updated_at" : "2016-04-26T20:31:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/214876642",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6848764?v=3",
         "events_url" : "https://api.github.com/users/paveljanik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/paveljanik/followers",
         "following_url" : "https://api.github.com/users/paveljanik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/paveljanik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/paveljanik",
         "id" : 6848764,
         "login" : "paveljanik",
         "organizations_url" : "https://api.github.com/users/paveljanik/orgs",
         "received_events_url" : "https://api.github.com/users/paveljanik/received_events",
         "repos_url" : "https://api.github.com/users/paveljanik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/paveljanik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/paveljanik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/paveljanik"
      }
   },
   {
      "body" : "No real strong reason. Just that the height does not uniquely identify a block like its hash does, and if you want to lookup the block info (including its height), all you have to do after you have the hash is `getblock <hash>` instead of `getblockhash <height>` then `getblock <hash>`.",
      "created_at" : "2016-04-26T21:21:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7948#issuecomment-214890443",
      "id" : 214890443,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7948",
      "updated_at" : "2016-04-26T21:21:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/214890443",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6440430?v=3",
         "events_url" : "https://api.github.com/users/mruddy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mruddy/followers",
         "following_url" : "https://api.github.com/users/mruddy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mruddy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mruddy",
         "id" : 6440430,
         "login" : "mruddy",
         "organizations_url" : "https://api.github.com/users/mruddy/orgs",
         "received_events_url" : "https://api.github.com/users/mruddy/received_events",
         "repos_url" : "https://api.github.com/users/mruddy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mruddy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mruddy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mruddy"
      }
   },
   {
      "body" : "@mruddy Sure. But in this case, the lock in happens at height, not in the particular block hash - it can be reorganized. No?",
      "created_at" : "2016-04-26T21:24:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7948#issuecomment-214891264",
      "id" : 214891264,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7948",
      "updated_at" : "2016-04-26T21:24:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/214891264",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6848764?v=3",
         "events_url" : "https://api.github.com/users/paveljanik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/paveljanik/followers",
         "following_url" : "https://api.github.com/users/paveljanik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/paveljanik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/paveljanik",
         "id" : 6848764,
         "login" : "paveljanik",
         "organizations_url" : "https://api.github.com/users/paveljanik/orgs",
         "received_events_url" : "https://api.github.com/users/paveljanik/received_events",
         "repos_url" : "https://api.github.com/users/paveljanik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/paveljanik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/paveljanik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/paveljanik"
      }
   },
   {
      "body" : "@paveljanik Yes, that's usually going to be the case. It would take an extraordinarily long re-org to change the height too (testnet style shenanigans). Height may be more intuitive to use here in that sense. If I made that change, I'd probably rename the attribute \"lockedInHeight\" too. I might do this tomorrow pending other feedback that that's not a good idea for some reason.",
      "created_at" : "2016-04-26T22:39:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7948#issuecomment-214909023",
      "id" : 214909023,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7948",
      "updated_at" : "2016-04-26T22:39:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/214909023",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6440430?v=3",
         "events_url" : "https://api.github.com/users/mruddy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mruddy/followers",
         "following_url" : "https://api.github.com/users/mruddy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mruddy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mruddy",
         "id" : 6440430,
         "login" : "mruddy",
         "organizations_url" : "https://api.github.com/users/mruddy/orgs",
         "received_events_url" : "https://api.github.com/users/mruddy/received_events",
         "repos_url" : "https://api.github.com/users/mruddy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mruddy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mruddy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mruddy"
      }
   },
   {
      "body" : "Changed my mind on how this should work. Now a new member named \"since\" is part of the BIP9 data and it gives the height of the first block to which the current deployment status applied. Seems like this might be more useful.",
      "created_at" : "2016-04-27T14:00:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7948#issuecomment-215092701",
      "id" : 215092701,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7948",
      "updated_at" : "2016-04-27T14:00:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/215092701",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6440430?v=3",
         "events_url" : "https://api.github.com/users/mruddy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mruddy/followers",
         "following_url" : "https://api.github.com/users/mruddy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mruddy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mruddy",
         "id" : 6440430,
         "login" : "mruddy",
         "organizations_url" : "https://api.github.com/users/mruddy/orgs",
         "received_events_url" : "https://api.github.com/users/mruddy/received_events",
         "repos_url" : "https://api.github.com/users/mruddy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mruddy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mruddy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mruddy"
      }
   },
   {
      "body" : "Travis problem unrelated (`wallet.py`).\r\n\r\nACK https://github.com/bitcoin/bitcoin/pull/7948/commits/4ba7830bbedbd1739056f80a347f1d4553328091\r\n\r\nThanks!\r\n\r\n```\r\n  \"bip9_softforks\": {\r\n    \"csv\": {\r\n      \"status\": \"active\",\r\n      \"startTime\": 1456790400,\r\n      \"timeout\": 1493596800,\r\n      \"since\": 770111\r\n    }\r\n  }\r\n```\r\n\r\nThis corresponds with the activation (https://www.reddit.com/r/Bitcoin/comments/4f4210/the_bip9_versionbits_csv_softfork_of_bip68_bip112/).",
      "created_at" : "2016-04-27T15:51:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7948#issuecomment-215128052",
      "id" : 215128052,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7948",
      "updated_at" : "2016-04-27T15:51:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/215128052",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6848764?v=3",
         "events_url" : "https://api.github.com/users/paveljanik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/paveljanik/followers",
         "following_url" : "https://api.github.com/users/paveljanik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/paveljanik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/paveljanik",
         "id" : 6848764,
         "login" : "paveljanik",
         "organizations_url" : "https://api.github.com/users/paveljanik/orgs",
         "received_events_url" : "https://api.github.com/users/paveljanik/received_events",
         "repos_url" : "https://api.github.com/users/paveljanik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/paveljanik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/paveljanik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/paveljanik"
      }
   },
   {
      "body" : "The \"since\" height is off-by-one, as the rules wouldn't have gone into effect until block height 770112 (all the version bits state calculations take the prev block as an argument, so 770111 was the height of the last block before the rules were activated).\r\n\r\nAlso, when walking the versionbitscache, we should skip over entries that are not on `chainActive`, as presumably the question we're interested in answering is: at what height was the deployment activated on the current chain?\r\n\r\nConcept ACK.",
      "created_at" : "2016-04-28T18:01:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7948#issuecomment-215511959",
      "id" : 215511959,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7948",
      "updated_at" : "2016-04-28T18:01:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/215511959",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7463573?v=3",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "body" : "@sdaftuar Wow, great code review, thanks! You're right. Geez, I totally missed that. Updates made. Added tests. I also used some C++11 in the latest updates because that was enabled earlier today.",
      "created_at" : "2016-04-29T00:57:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7948#issuecomment-215604495",
      "id" : 215604495,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7948",
      "updated_at" : "2016-04-29T00:57:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/215604495",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6440430?v=3",
         "events_url" : "https://api.github.com/users/mruddy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mruddy/followers",
         "following_url" : "https://api.github.com/users/mruddy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mruddy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mruddy",
         "id" : 6440430,
         "login" : "mruddy",
         "organizations_url" : "https://api.github.com/users/mruddy/orgs",
         "received_events_url" : "https://api.github.com/users/mruddy/received_events",
         "repos_url" : "https://api.github.com/users/mruddy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mruddy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mruddy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mruddy"
      }
   },
   {
      "body" : "@sipa now that this is stable (hasn't changed in about a week) are you ok with adding this bip9 data in this way?",
      "created_at" : "2016-05-05T10:50:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7948#issuecomment-217123756",
      "id" : 217123756,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7948",
      "updated_at" : "2016-05-05T10:50:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/217123756",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6440430?v=3",
         "events_url" : "https://api.github.com/users/mruddy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mruddy/followers",
         "following_url" : "https://api.github.com/users/mruddy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mruddy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mruddy",
         "id" : 6440430,
         "login" : "mruddy",
         "organizations_url" : "https://api.github.com/users/mruddy/orgs",
         "received_events_url" : "https://api.github.com/users/mruddy/received_events",
         "repos_url" : "https://api.github.com/users/mruddy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mruddy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mruddy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mruddy"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7948#discussion_r62210972"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7948"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/62210972"
         }
      },
      "body" : "I think there is a more efficient implementation possible, but it would be cleaner to put it in AbstractThresholdConditionChecker, I think.",
      "commit_id" : "fc146095d20452686efe1944b143452bec394343",
      "created_at" : "2016-05-05T16:15:34Z",
      "diff_hunk" : "@@ -5952,6 +5952,30 @@ ThresholdState VersionBitsTipState(const Consensus::Params& params, Consensus::D\n     return VersionBitsState(chainActive.Tip(), params, pos, versionbitscache);\n }\n \n+int VersionBitsStateBeginningBlockHeight(const Consensus::DeploymentPos pos, const ThresholdState thresholdState)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7948#discussion_r62210972",
      "id" : 62210972,
      "original_commit_id" : "ef4332ef492d563d9aa8c8fe24af52c3b5bd7fd8",
      "original_position" : 4,
      "path" : "src/main.cpp",
      "position" : null,
      "pull_request_review_id" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7948",
      "updated_at" : "2016-10-19T13:11:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/62210972",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7948#discussion_r62211530"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7948"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/62211530"
         }
      },
      "body" : "AbstracrThresholdConditionChecker has the logic to walk the chain efficiently already (including first jumping back to a multiple of the period etc), so it could use the same and call GetStateFor for every multiple-or-period block back from the tip that was passed. That would also avoid breaking the abstraction that ThresholdConditionCache gives.",
      "commit_id" : "fc146095d20452686efe1944b143452bec394343",
      "created_at" : "2016-05-05T16:18:21Z",
      "diff_hunk" : "@@ -5952,6 +5952,30 @@ ThresholdState VersionBitsTipState(const Consensus::Params& params, Consensus::D\n     return VersionBitsState(chainActive.Tip(), params, pos, versionbitscache);\n }\n \n+int VersionBitsStateBeginningBlockHeight(const Consensus::DeploymentPos pos, const ThresholdState thresholdState)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7948#discussion_r62211530",
      "id" : 62211530,
      "original_commit_id" : "ef4332ef492d563d9aa8c8fe24af52c3b5bd7fd8",
      "original_position" : 4,
      "path" : "src/main.cpp",
      "position" : null,
      "pull_request_review_id" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7948",
      "updated_at" : "2016-10-19T13:11:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/62211530",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "@sipa I restructured things how I believe you meant. I tried to follow existing patterns at the same time. Please check it when you get a chance. I also added more tests. Thanks!\r\nEDIT: I just had an idea on how to do this with a little less code. I'll get that pushed up in a little bit if it works out.\r\nEDIT2: ok, i guess that's good enough now.",
      "created_at" : "2016-05-06T18:31:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7948#issuecomment-217523208",
      "id" : 217523208,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7948",
      "updated_at" : "2016-05-06T23:18:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/217523208",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6440430?v=3",
         "events_url" : "https://api.github.com/users/mruddy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mruddy/followers",
         "following_url" : "https://api.github.com/users/mruddy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mruddy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mruddy",
         "id" : 6440430,
         "login" : "mruddy",
         "organizations_url" : "https://api.github.com/users/mruddy/orgs",
         "received_events_url" : "https://api.github.com/users/mruddy/received_events",
         "repos_url" : "https://api.github.com/users/mruddy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mruddy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mruddy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mruddy"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7948#discussion_r62558800"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7948"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/62558800"
         }
      },
      "body" : "Can't this cause a segfault if pindexPrev is NULL?",
      "commit_id" : "fc146095d20452686efe1944b143452bec394343",
      "created_at" : "2016-05-09T19:35:18Z",
      "diff_hunk" : "@@ -88,6 +88,36 @@ ThresholdState AbstractThresholdConditionChecker::GetStateFor(const CBlockIndex*\n     return state;\n }\n \n+int AbstractThresholdConditionChecker::GetStateSinceHeightFor(const CBlockIndex* pindexPrev, const Consensus::Params& params, ThresholdConditionCache& cache) const\n+{\n+    const ThresholdState initialState = GetStateFor(pindexPrev, params, cache);\n+\n+    // BIP 9 about state DEFINED: \"The genesis block is by definition in this state for each deployment.\"\n+    if (initialState == THRESHOLD_DEFINED) {\n+        return 0;\n+    }\n+\n+    const int nPeriod = Period(params);\n+\n+    // A block's state is always the same as that of the first of its period, so it is computed based on a pindexPrev whose height equals a multiple of nPeriod - 1.\n+    // To ease understanding of the following height calculation, it helps to remember that\n+    // right now pindexPrev points to the block prior to the block that we are computing for, thus:\n+    // if we are computing for the last block of a period, then pindexPrev points to the second to last block of the period, and\n+    // if we are computing for the first block of a period, then pindexPrev points to the last block of the previous period.\n+    // The parent of the genesis block is represented by NULL.\n+    pindexPrev = pindexPrev->GetAncestor(pindexPrev->nHeight - ((pindexPrev->nHeight + 1) % nPeriod));\n+\n+    const CBlockIndex* previousPeriodParent = pindexPrev->GetAncestor(pindexPrev->nHeight - nPeriod);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7948#discussion_r62558800",
      "id" : 62558800,
      "original_commit_id" : "62934242e85d693de13d31d84da80e6f9bc2927b",
      "original_position" : 23,
      "path" : "src/versionbits.cpp",
      "position" : 23,
      "pull_request_review_id" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7948",
      "updated_at" : "2016-10-19T13:11:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/62558800",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7948#discussion_r62581407"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7948"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/62581407"
         }
      },
      "body" : "There is protection against pindexPrev being NULL at that point though.\r\n\r\nIf this method gets called with the initial argument value of pindexPrev being NULL, or for a first period block (or more generally, for a block in any period that is in state DEFINED), then the first call of GetStateFor returns THRESHOLD_DEFINED and the method returns at line 97. Else, pindexPrev won't become NULL before previousPeriodParent does (which is what matters).\r\n\r\nFor example, consider a regtest network, where period=144, and our tip is at height 143 (i.e.- we're calling this before generating the block for height 144 and pindexPrev points to the tip at height=143), and we're now in STARTED (because the MTP time threshold was met), then line 108 leaves pindexPrev pointing at block with height=143 (idempotent when called for the first block in a period because pindexPrev already points at the correct block). Line 110 makes previousPeriodParent == NULL, but that is checked for by the loop (and only as a slight optimization as NULL could be passed into GetStateFor safely with the same effect).",
      "commit_id" : "fc146095d20452686efe1944b143452bec394343",
      "created_at" : "2016-05-09T22:05:25Z",
      "diff_hunk" : "@@ -88,6 +88,36 @@ ThresholdState AbstractThresholdConditionChecker::GetStateFor(const CBlockIndex*\n     return state;\n }\n \n+int AbstractThresholdConditionChecker::GetStateSinceHeightFor(const CBlockIndex* pindexPrev, const Consensus::Params& params, ThresholdConditionCache& cache) const\n+{\n+    const ThresholdState initialState = GetStateFor(pindexPrev, params, cache);\n+\n+    // BIP 9 about state DEFINED: \"The genesis block is by definition in this state for each deployment.\"\n+    if (initialState == THRESHOLD_DEFINED) {\n+        return 0;\n+    }\n+\n+    const int nPeriod = Period(params);\n+\n+    // A block's state is always the same as that of the first of its period, so it is computed based on a pindexPrev whose height equals a multiple of nPeriod - 1.\n+    // To ease understanding of the following height calculation, it helps to remember that\n+    // right now pindexPrev points to the block prior to the block that we are computing for, thus:\n+    // if we are computing for the last block of a period, then pindexPrev points to the second to last block of the period, and\n+    // if we are computing for the first block of a period, then pindexPrev points to the last block of the previous period.\n+    // The parent of the genesis block is represented by NULL.\n+    pindexPrev = pindexPrev->GetAncestor(pindexPrev->nHeight - ((pindexPrev->nHeight + 1) % nPeriod));\n+\n+    const CBlockIndex* previousPeriodParent = pindexPrev->GetAncestor(pindexPrev->nHeight - nPeriod);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7948#discussion_r62581407",
      "id" : 62581407,
      "original_commit_id" : "62934242e85d693de13d31d84da80e6f9bc2927b",
      "original_position" : 23,
      "path" : "src/versionbits.cpp",
      "position" : 23,
      "pull_request_review_id" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7948",
      "updated_at" : "2016-10-19T13:11:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/62581407",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6440430?v=3",
         "events_url" : "https://api.github.com/users/mruddy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mruddy/followers",
         "following_url" : "https://api.github.com/users/mruddy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mruddy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mruddy",
         "id" : 6440430,
         "login" : "mruddy",
         "organizations_url" : "https://api.github.com/users/mruddy/orgs",
         "received_events_url" : "https://api.github.com/users/mruddy/received_events",
         "repos_url" : "https://api.github.com/users/mruddy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mruddy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mruddy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mruddy"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7948#discussion_r63164754"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7948"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/63164754"
         }
      },
      "body" : "@sipa did that make sense? are we good now?",
      "commit_id" : "fc146095d20452686efe1944b143452bec394343",
      "created_at" : "2016-05-13T10:45:52Z",
      "diff_hunk" : "@@ -88,6 +88,36 @@ ThresholdState AbstractThresholdConditionChecker::GetStateFor(const CBlockIndex*\n     return state;\n }\n \n+int AbstractThresholdConditionChecker::GetStateSinceHeightFor(const CBlockIndex* pindexPrev, const Consensus::Params& params, ThresholdConditionCache& cache) const\n+{\n+    const ThresholdState initialState = GetStateFor(pindexPrev, params, cache);\n+\n+    // BIP 9 about state DEFINED: \"The genesis block is by definition in this state for each deployment.\"\n+    if (initialState == THRESHOLD_DEFINED) {\n+        return 0;\n+    }\n+\n+    const int nPeriod = Period(params);\n+\n+    // A block's state is always the same as that of the first of its period, so it is computed based on a pindexPrev whose height equals a multiple of nPeriod - 1.\n+    // To ease understanding of the following height calculation, it helps to remember that\n+    // right now pindexPrev points to the block prior to the block that we are computing for, thus:\n+    // if we are computing for the last block of a period, then pindexPrev points to the second to last block of the period, and\n+    // if we are computing for the first block of a period, then pindexPrev points to the last block of the previous period.\n+    // The parent of the genesis block is represented by NULL.\n+    pindexPrev = pindexPrev->GetAncestor(pindexPrev->nHeight - ((pindexPrev->nHeight + 1) % nPeriod));\n+\n+    const CBlockIndex* previousPeriodParent = pindexPrev->GetAncestor(pindexPrev->nHeight - nPeriod);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7948#discussion_r63164754",
      "id" : 63164754,
      "original_commit_id" : "62934242e85d693de13d31d84da80e6f9bc2927b",
      "original_position" : 23,
      "path" : "src/versionbits.cpp",
      "position" : 23,
      "pull_request_review_id" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7948",
      "updated_at" : "2016-10-19T13:11:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/63164754",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6440430?v=3",
         "events_url" : "https://api.github.com/users/mruddy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mruddy/followers",
         "following_url" : "https://api.github.com/users/mruddy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mruddy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mruddy",
         "id" : 6440430,
         "login" : "mruddy",
         "organizations_url" : "https://api.github.com/users/mruddy/orgs",
         "received_events_url" : "https://api.github.com/users/mruddy/received_events",
         "repos_url" : "https://api.github.com/users/mruddy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mruddy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mruddy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mruddy"
      }
   },
   {
      "body" : "@laanwj I think this is ready. Do you agree?",
      "created_at" : "2016-05-16T10:27:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7948#issuecomment-219395093",
      "id" : 219395093,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7948",
      "updated_at" : "2016-05-16T10:27:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/219395093",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6440430?v=3",
         "events_url" : "https://api.github.com/users/mruddy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mruddy/followers",
         "following_url" : "https://api.github.com/users/mruddy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mruddy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mruddy",
         "id" : 6440430,
         "login" : "mruddy",
         "organizations_url" : "https://api.github.com/users/mruddy/orgs",
         "received_events_url" : "https://api.github.com/users/mruddy/received_events",
         "repos_url" : "https://api.github.com/users/mruddy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mruddy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mruddy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mruddy"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7948#discussion_r63424871"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7948"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/63424871"
         }
      },
      "body" : "Yes, agree.",
      "commit_id" : "fc146095d20452686efe1944b143452bec394343",
      "created_at" : "2016-05-16T21:02:07Z",
      "diff_hunk" : "@@ -88,6 +88,36 @@ ThresholdState AbstractThresholdConditionChecker::GetStateFor(const CBlockIndex*\n     return state;\n }\n \n+int AbstractThresholdConditionChecker::GetStateSinceHeightFor(const CBlockIndex* pindexPrev, const Consensus::Params& params, ThresholdConditionCache& cache) const\n+{\n+    const ThresholdState initialState = GetStateFor(pindexPrev, params, cache);\n+\n+    // BIP 9 about state DEFINED: \"The genesis block is by definition in this state for each deployment.\"\n+    if (initialState == THRESHOLD_DEFINED) {\n+        return 0;\n+    }\n+\n+    const int nPeriod = Period(params);\n+\n+    // A block's state is always the same as that of the first of its period, so it is computed based on a pindexPrev whose height equals a multiple of nPeriod - 1.\n+    // To ease understanding of the following height calculation, it helps to remember that\n+    // right now pindexPrev points to the block prior to the block that we are computing for, thus:\n+    // if we are computing for the last block of a period, then pindexPrev points to the second to last block of the period, and\n+    // if we are computing for the first block of a period, then pindexPrev points to the last block of the previous period.\n+    // The parent of the genesis block is represented by NULL.\n+    pindexPrev = pindexPrev->GetAncestor(pindexPrev->nHeight - ((pindexPrev->nHeight + 1) % nPeriod));\n+\n+    const CBlockIndex* previousPeriodParent = pindexPrev->GetAncestor(pindexPrev->nHeight - nPeriod);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7948#discussion_r63424871",
      "id" : 63424871,
      "original_commit_id" : "62934242e85d693de13d31d84da80e6f9bc2927b",
      "original_position" : 23,
      "path" : "src/versionbits.cpp",
      "position" : 23,
      "pull_request_review_id" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7948",
      "updated_at" : "2016-10-19T13:11:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/63424871",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "utACK 62934242e85d693de13d31d84da80e6f9bc2927b",
      "created_at" : "2016-05-16T21:02:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7948#issuecomment-219547050",
      "id" : 219547050,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7948",
      "updated_at" : "2016-05-16T21:02:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/219547050",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "IMO it would be nice to know at which block hash/height each transition was made. I think using the hash makes more sense, but not sure it matters much with BIP 9 (perhaps it might with some future softfork scheme?).",
      "created_at" : "2016-06-02T15:36:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7948#issuecomment-223330322",
      "id" : 223330322,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7948",
      "updated_at" : "2016-06-02T15:36:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/223330322",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "@luke-jr By definition, consensus rules within a blockchain can only depend on its history, and not on that of other branches, so height is the only relevant value as it uniquely determines the block within the current chain. Furthermore, in BIP9, the status changes are never affected by the block itself (and often not by any of those in recent history before it either).",
      "created_at" : "2016-06-02T15:45:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7948#issuecomment-223333220",
      "id" : 223333220,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7948",
      "updated_at" : "2016-06-02T15:45:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/223333220",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "ACK https://github.com/bitcoin/bitcoin/pull/7948/commits/62934242e85d693de13d31d84da80e6f9bc2927b",
      "created_at" : "2016-06-02T15:59:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7948#issuecomment-223337698",
      "id" : 223337698,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7948",
      "updated_at" : "2016-06-02T15:59:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/223337698",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6848764?v=3",
         "events_url" : "https://api.github.com/users/paveljanik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/paveljanik/followers",
         "following_url" : "https://api.github.com/users/paveljanik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/paveljanik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/paveljanik",
         "id" : 6848764,
         "login" : "paveljanik",
         "organizations_url" : "https://api.github.com/users/paveljanik/orgs",
         "received_events_url" : "https://api.github.com/users/paveljanik/received_events",
         "repos_url" : "https://api.github.com/users/paveljanik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/paveljanik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/paveljanik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/paveljanik"
      }
   },
   {
      "body" : "Needs rebase.",
      "created_at" : "2016-06-16T10:12:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7948#issuecomment-226444512",
      "id" : 226444512,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7948",
      "updated_at" : "2016-06-16T10:12:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/226444512",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "rebase complete.\r\ni only had to resolve minor changes to bip9-softforks.py. nothing else changed.\r\nhere's a link to the previous commit that got acks for a quick double check: https://github.com/mruddy/bitcoin/commit/62934242e85d693de13d31d84da80e6f9bc2927b",
      "created_at" : "2016-06-16T12:25:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7948#issuecomment-226469990",
      "id" : 226469990,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7948",
      "updated_at" : "2016-06-16T12:25:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/226469990",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6440430?v=3",
         "events_url" : "https://api.github.com/users/mruddy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mruddy/followers",
         "following_url" : "https://api.github.com/users/mruddy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mruddy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mruddy",
         "id" : 6440430,
         "login" : "mruddy",
         "organizations_url" : "https://api.github.com/users/mruddy/orgs",
         "received_events_url" : "https://api.github.com/users/mruddy/received_events",
         "repos_url" : "https://api.github.com/users/mruddy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mruddy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mruddy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mruddy"
      }
   },
   {
      "body" : "@laanwj want to merge this? haven't changed since mid june. thanks!",
      "created_at" : "2016-08-24T12:05:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7948#issuecomment-242039593",
      "id" : 242039593,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7948",
      "updated_at" : "2016-08-24T12:05:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/242039593",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6440430?v=3",
         "events_url" : "https://api.github.com/users/mruddy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mruddy/followers",
         "following_url" : "https://api.github.com/users/mruddy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mruddy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mruddy",
         "id" : 6440430,
         "login" : "mruddy",
         "organizations_url" : "https://api.github.com/users/mruddy/orgs",
         "received_events_url" : "https://api.github.com/users/mruddy/received_events",
         "repos_url" : "https://api.github.com/users/mruddy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mruddy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mruddy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mruddy"
      }
   },
   {
      "body" : "(Travis error possibly unrelated)",
      "created_at" : "2016-08-24T13:15:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7948#issuecomment-242058982",
      "id" : 242058982,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7948",
      "updated_at" : "2016-08-24T13:15:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/242058982",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=3",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "body" : "yep, that one-off travis failure looks unrelated to these changes. looks like something with compiling boost.",
      "created_at" : "2016-08-24T13:37:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7948#issuecomment-242066117",
      "id" : 242066117,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7948",
      "updated_at" : "2016-08-24T13:37:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/242066117",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6440430?v=3",
         "events_url" : "https://api.github.com/users/mruddy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mruddy/followers",
         "following_url" : "https://api.github.com/users/mruddy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mruddy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mruddy",
         "id" : 6440430,
         "login" : "mruddy",
         "organizations_url" : "https://api.github.com/users/mruddy/orgs",
         "received_events_url" : "https://api.github.com/users/mruddy/received_events",
         "repos_url" : "https://api.github.com/users/mruddy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mruddy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mruddy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mruddy"
      }
   },
   {
      "body" : "rebased to stay current and get travis green again",
      "created_at" : "2016-09-04T12:52:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7948#issuecomment-244601948",
      "id" : 244601948,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7948",
      "updated_at" : "2016-09-04T12:52:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/244601948",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6440430?v=3",
         "events_url" : "https://api.github.com/users/mruddy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mruddy/followers",
         "following_url" : "https://api.github.com/users/mruddy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mruddy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mruddy",
         "id" : 6440430,
         "login" : "mruddy",
         "organizations_url" : "https://api.github.com/users/mruddy/orgs",
         "received_events_url" : "https://api.github.com/users/mruddy/received_events",
         "repos_url" : "https://api.github.com/users/mruddy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mruddy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mruddy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mruddy"
      }
   },
   {
      "body" : "@laanwj if i rebase this to the 0.13 branch, would you merge it? if not, then should i close this pull? it's been unchanged for about four months and just got a conflict. the changes provide a little softfork info, but they also add a fair bit of code. i'm ok with either way you choose.",
      "created_at" : "2016-10-18T21:24:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7948#issuecomment-254643723",
      "id" : 254643723,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7948",
      "updated_at" : "2016-10-18T21:24:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/254643723",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6440430?v=3",
         "events_url" : "https://api.github.com/users/mruddy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mruddy/followers",
         "following_url" : "https://api.github.com/users/mruddy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mruddy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mruddy",
         "id" : 6440430,
         "login" : "mruddy",
         "organizations_url" : "https://api.github.com/users/mruddy/orgs",
         "received_events_url" : "https://api.github.com/users/mruddy/received_events",
         "repos_url" : "https://api.github.com/users/mruddy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mruddy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mruddy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mruddy"
      }
   },
   {
      "body" : "This missed 0.13, and adds a feature, should be rebased to master instead.\r\n(and truly sorry for it taking so long, but there's just so many pulls being opened all the time, I can't handle it anymore)",
      "created_at" : "2016-10-19T07:34:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7948#issuecomment-254735387",
      "id" : 254735387,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7948",
      "updated_at" : "2016-10-19T07:34:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/254735387",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "rebased on master. no worries, thanks for all the good work you do.",
      "created_at" : "2016-10-19T14:17:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7948#issuecomment-254826413",
      "id" : 254826413,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7948",
      "updated_at" : "2016-10-19T14:17:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/254826413",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6440430?v=3",
         "events_url" : "https://api.github.com/users/mruddy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mruddy/followers",
         "following_url" : "https://api.github.com/users/mruddy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mruddy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mruddy",
         "id" : 6440430,
         "login" : "mruddy",
         "organizations_url" : "https://api.github.com/users/mruddy/orgs",
         "received_events_url" : "https://api.github.com/users/mruddy/received_events",
         "repos_url" : "https://api.github.com/users/mruddy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mruddy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mruddy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mruddy"
      }
   },
   {
      "body" : "@pinheadmz I received your question: \"Are you sure this offset is necessary? In regtest mode on my machine, segwit status is \"started\" on block 143, but this RPC call returns \"since\": 144 even though that block height has not been generated yet.\"\r\n\r\nAnswer: When you start a fresh regtest node (regtest uses a retarget interval of 144 blocks), you have 1 block @ height 0 (the genesis block) and the bip9 softfork \"segwit\" is \"defined\".\r\nGenerate 142 blocks, segwit still defined.\r\nGenerate 1 segwit is now started.\r\nSo, we've generated 143 blocks and have 144 total. That is one retarget interval of blocks. When we have 144 blocks in the chain (a whole interval) BIP 9 can know what status the next block will be. getblockchaininfo.since is defined as the \"height of the first block to which the status applies\". Height 144 is the 145th block in the chain.\r\nFrom [BIP 9](https://github.com/bitcoin/bips/blob/master/bip-0009.mediawiki): \"Given that the state for a specific block/deployment combination is completely determined by its ancestry before the current retarget period (i.e. up to and including its ancestor with height block.height - 1 - (block.height % 2016))\". So, at height 143, we know what the status will be for height 144 and it'll be the new status of \"started\" which is the \"height of the first block to which the status applies\".",
      "created_at" : "2017-01-18T11:52:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7948#issuecomment-273456366",
      "id" : 273456366,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7948",
      "updated_at" : "2017-01-18T11:52:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/273456366",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6440430?v=3",
         "events_url" : "https://api.github.com/users/mruddy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mruddy/followers",
         "following_url" : "https://api.github.com/users/mruddy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mruddy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mruddy",
         "id" : 6440430,
         "login" : "mruddy",
         "organizations_url" : "https://api.github.com/users/mruddy/orgs",
         "received_events_url" : "https://api.github.com/users/mruddy/received_events",
         "repos_url" : "https://api.github.com/users/mruddy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mruddy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mruddy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mruddy"
      }
   },
   {
      "body" : "@mruddy Thanks! I also just saw the offset was already discussed earlier in the thread, it makes sense.",
      "created_at" : "2017-01-18T16:49:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7948#issuecomment-273531127",
      "id" : 273531127,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7948",
      "updated_at" : "2017-01-18T16:49:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/273531127",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2084648?v=3",
         "events_url" : "https://api.github.com/users/pinheadmz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pinheadmz/followers",
         "following_url" : "https://api.github.com/users/pinheadmz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pinheadmz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pinheadmz",
         "id" : 2084648,
         "login" : "pinheadmz",
         "organizations_url" : "https://api.github.com/users/pinheadmz/orgs",
         "received_events_url" : "https://api.github.com/users/pinheadmz/received_events",
         "repos_url" : "https://api.github.com/users/pinheadmz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pinheadmz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pinheadmz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pinheadmz"
      }
   }
]
