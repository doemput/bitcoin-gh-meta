[
   {
      "body" : "The normal response when a peer breaks the protocol and requests something they shouldn't is to hang up on them, which allows them to go make the request from someone who can answer it (and does not require complex stateful 'notfound' handling, just being able to handle disconnections)",
      "created_at" : "2016-09-15T16:21:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8734#issuecomment-247377180",
      "id" : 247377180,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8734",
      "updated_at" : "2016-09-15T16:21:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/247377180",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "As an aside, if a node is setting node network but not serving data for all blocks, the node is broken and is DOS attacking other hosts on the network.",
      "created_at" : "2016-09-15T16:27:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8734#issuecomment-247378813",
      "id" : 247378813,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8734",
      "updated_at" : "2016-09-15T16:27:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/247378813",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "I think that you are trying to \"heal the world\". Take care about yourself (I'm not personal, this is strictly about the bitcoin protocol).",
      "created_at" : "2016-09-15T18:34:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8734#issuecomment-247412565",
      "id" : 247412565,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8734",
      "updated_at" : "2016-09-15T18:34:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/247412565",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6848764?v=3",
         "events_url" : "https://api.github.com/users/paveljanik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/paveljanik/followers",
         "following_url" : "https://api.github.com/users/paveljanik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/paveljanik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/paveljanik",
         "id" : 6848764,
         "login" : "paveljanik",
         "organizations_url" : "https://api.github.com/users/paveljanik/orgs",
         "received_events_url" : "https://api.github.com/users/paveljanik/received_events",
         "repos_url" : "https://api.github.com/users/paveljanik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/paveljanik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/paveljanik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/paveljanik"
      }
   },
   {
      "body" : "@gmaxwell When are you going to escape your current mindset that off-the-shelf Bitcoin Core nodes are the only nodes running out there in the field? While you are in this mindset, any non-Core behaviour constitutes DOS behavior! Currently BitcoinUnlimited is 10% compared with Core 0.13, yet Core 0.13 still sends SENDCMPCT and SENDHEADER to all nodes with protocol >70013 despite Unlimited being >80000 while unlimited nodes are reporting Unknown Command in their logs for these messages.\r\n\r\nIf you were driving a car, would you not look left and right before crossing at a green light on the assumption that all other drivers were obeying the rules?\r\n\r\nI think it's time to stop assuming all nodes out there are following one set of rules, and start thinking as if Core is existing in a DECENTRALIZED network... Radical suggestion, I know...",
      "created_at" : "2016-09-25T03:54:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8734#issuecomment-249401150",
      "id" : 249401150,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8734",
      "updated_at" : "2016-09-25T03:54:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/249401150",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1530283?v=3",
         "events_url" : "https://api.github.com/users/rebroad/events{/privacy}",
         "followers_url" : "https://api.github.com/users/rebroad/followers",
         "following_url" : "https://api.github.com/users/rebroad/following{/other_user}",
         "gists_url" : "https://api.github.com/users/rebroad/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/rebroad",
         "id" : 1530283,
         "login" : "rebroad",
         "organizations_url" : "https://api.github.com/users/rebroad/orgs",
         "received_events_url" : "https://api.github.com/users/rebroad/received_events",
         "repos_url" : "https://api.github.com/users/rebroad/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/rebroad/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/rebroad/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/rebroad"
      }
   },
   {
      "body" : "@rebroad This has nothing to do with what software version someone is\nrunning, or defining non-Core behaviour as DoS.\n\nIf a node is setting NODE_NETWORK but not responding to block requests, it\nis (intentionally or not) hurting other nodes on the network's ability to\nprogress, and violating any reasonable interpretation of the protocol you\ncan come up with.\n\nThere are many, many, things that Core does not do, but are totally\npermitted. We only assign DoS scores for things that actively hurt memory,\nCPU usage, or time.\n",
      "created_at" : "2016-09-25T04:31:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8734#issuecomment-249402172",
      "id" : 249402172,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8734",
      "updated_at" : "2016-09-25T04:31:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/249402172",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "> Currently a pruned node unsets NODE_NETWORK so most nodes shouldn't be requesting blocks from it.\r\n\r\n100% agreed that there should be a protocol for nodes that serve only part of the block chain to negotiate that. However setting `NODE_NETWORK` should not be part of that protocol, because all previous versions make the assumption that this bit means serving the entire block chain.\r\n\r\nNo opinion on this specific change.",
      "created_at" : "2016-09-25T07:15:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8734#issuecomment-249406965",
      "id" : 249406965,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8734",
      "updated_at" : "2016-09-25T07:15:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/249406965",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Closing this, as there doesn't seem to be a direct motivation to make this change. Supporting hacked nodes that don't heed the protocol is not our business.  For better or worse NODE_NETWORK has grown to mean \"full storage\".\r\n\r\nThere needs to be a P2P network BIP proposal for nodes that store only part of the block chain, to be able to negotiate what ranges they store. \r\n\r\nOne proposed in the meeting a while ago was to use one two service bits for this purpose, to signal whether the last 288 blocks is available (considered the minimum for pruning), and optionally one to signal the last 1000 (which is another peak in requests). Someone still has to write a BIP about this and implement it.\r\n",
      "created_at" : "2016-12-19T09:09:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8734#issuecomment-267915492",
      "id" : 267915492,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8734",
      "updated_at" : "2016-12-19T09:09:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/267915492",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   }
]
