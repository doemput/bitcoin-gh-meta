[
   {
      "body" : "The consequence of this bug is that Bitcoin Core cannot receive more than 1 prefilled transaction (only coinbase).",
      "created_at" : "2016-09-12T19:22:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/8705#issuecomment-246461213",
      "id" : 246461213,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8705",
      "updated_at" : "2016-09-12T19:22:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/246461213",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/92707?v=3",
         "events_url" : "https://api.github.com/users/dagurval/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dagurval/followers",
         "following_url" : "https://api.github.com/users/dagurval/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dagurval/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dagurval",
         "id" : 92707,
         "login" : "dagurval",
         "organizations_url" : "https://api.github.com/users/dagurval/orgs",
         "received_events_url" : "https://api.github.com/users/dagurval/received_events",
         "repos_url" : "https://api.github.com/users/dagurval/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dagurval/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dagurval/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dagurval"
      }
   },
   {
      "body" : "I think you're misreading the BIP for how indexes are encoded; also I'm pretty sure the compact blocks p2p test exercises the case of Bitcoin core receiving a block with multiple pre filled transactions. From the bip:\r\n\r\n> Several uses of CompactSize below are \"differentially encoded\". For these, instead of using raw indexes, the number encoded is the difference between the current index and the previous index, minus one. For example, a first index of 0 implies a real index of 0, a second index of 0 thereafter refers to a real index of 1, etc.\r\n\r\nAlso see here for the test that exercises this logic: https://github.com/bitcoin/bitcoin/blob/master/qa/rpc-tests/p2p-compactblocks.py#L391",
      "created_at" : "2016-09-12T21:02:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/8705#issuecomment-246492446",
      "id" : 246492446,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8705",
      "updated_at" : "2016-09-12T21:07:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/246492446",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7463573?v=3",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "body" : "Yes, you're correct, it is my misunderstanding of the encoding. The example above should be \r\n\r\n\r\n| TX | Prefilled | Encoded ID\r\n| --- | --- | --- |\r\n| 0 | YES | 0 \r\n| 1 | | \r\n| 2 | | \r\n| 3 | YES | 2\r\n| 4 | | \r\n| 5 | YES| 1\r\n\r\nIn this case the decoding logic is correct.",
      "created_at" : "2016-09-12T21:40:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/8705#issuecomment-246503170",
      "id" : 246503170,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8705",
      "updated_at" : "2016-09-12T21:40:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/246503170",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/92707?v=3",
         "events_url" : "https://api.github.com/users/dagurval/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dagurval/followers",
         "following_url" : "https://api.github.com/users/dagurval/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dagurval/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dagurval",
         "id" : 92707,
         "login" : "dagurval",
         "organizations_url" : "https://api.github.com/users/dagurval/orgs",
         "received_events_url" : "https://api.github.com/users/dagurval/received_events",
         "repos_url" : "https://api.github.com/users/dagurval/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dagurval/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dagurval/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dagurval"
      }
   },
   {
      "body" : "> In this case the decoding logic is correct.\r\n\r\nClosing.",
      "created_at" : "2016-09-12T21:55:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/8705#issuecomment-246507291",
      "id" : 246507291,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8705",
      "updated_at" : "2016-09-12T21:55:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/246507291",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=3",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   }
]
