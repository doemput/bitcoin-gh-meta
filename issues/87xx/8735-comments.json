[
   {
      "body" : "As it stands this will leak the xpriv since the xpriv will be in the command history. The import of the xpriv should be interactive and should be encrypted before being stored.\r\n\r\nI know previously we would not recommend forcing encryption because it could lead to funds loss, here the user already has the xpriv so it's already backed up.",
      "created_at" : "2016-09-15T15:03:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8735#issuecomment-247354717",
      "id" : 247354717,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8735",
      "updated_at" : "2016-09-15T15:03:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/247354717",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7275704?v=3",
         "events_url" : "https://api.github.com/users/btcdrak/events{/privacy}",
         "followers_url" : "https://api.github.com/users/btcdrak/followers",
         "following_url" : "https://api.github.com/users/btcdrak/following{/other_user}",
         "gists_url" : "https://api.github.com/users/btcdrak/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/btcdrak",
         "id" : 7275704,
         "login" : "btcdrak",
         "organizations_url" : "https://api.github.com/users/btcdrak/orgs",
         "received_events_url" : "https://api.github.com/users/btcdrak/received_events",
         "repos_url" : "https://api.github.com/users/btcdrak/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/btcdrak/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/btcdrak/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/btcdrak"
      }
   },
   {
      "body" : "@btcdrak We can change this to accept the seed only from stdin (`-stdin`).",
      "created_at" : "2016-09-15T15:11:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8735#issuecomment-247356783",
      "id" : 247356783,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8735",
      "updated_at" : "2016-09-15T15:11:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/247356783",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6848764?v=3",
         "events_url" : "https://api.github.com/users/paveljanik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/paveljanik/followers",
         "following_url" : "https://api.github.com/users/paveljanik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/paveljanik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/paveljanik",
         "id" : 6848764,
         "login" : "paveljanik",
         "organizations_url" : "https://api.github.com/users/paveljanik/orgs",
         "received_events_url" : "https://api.github.com/users/paveljanik/received_events",
         "repos_url" : "https://api.github.com/users/paveljanik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/paveljanik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/paveljanik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/paveljanik"
      }
   },
   {
      "body" : "Yes. I'm aware of the security weakness of accepting a xpriv over a startup argument.\r\nA previous proposed solution would be to support a tool called `bitcoin-wallet` which could create, alter and encrypt wallet without the need of bitcoind (this would by my preferred solution but can be added later).\r\n\r\nI think accepting a xpriv over a configuration value is not extremely bad. If an attacker can access bitcoin.conf he might also be capable of grabbing your RPC password and dump your wallet to /tmp.",
      "created_at" : "2016-09-15T15:27:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8735#issuecomment-247361606",
      "id" : 247361606,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8735",
      "updated_at" : "2016-09-15T15:27:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/247361606",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "Personally I prefer a separate interactive import tool and a Qt GUI option which I think would be used more in any case. FWIW, I think importing via a bitcoin.conf option is even worse.",
      "created_at" : "2016-09-15T15:35:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8735#issuecomment-247363779",
      "id" : 247363779,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8735",
      "updated_at" : "2016-09-15T15:36:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/247363779",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7275704?v=3",
         "events_url" : "https://api.github.com/users/btcdrak/events{/privacy}",
         "followers_url" : "https://api.github.com/users/btcdrak/followers",
         "following_url" : "https://api.github.com/users/btcdrak/following{/other_user}",
         "gists_url" : "https://api.github.com/users/btcdrak/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/btcdrak",
         "id" : 7275704,
         "login" : "btcdrak",
         "organizations_url" : "https://api.github.com/users/btcdrak/orgs",
         "received_events_url" : "https://api.github.com/users/btcdrak/received_events",
         "repos_url" : "https://api.github.com/users/btcdrak/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/btcdrak/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/btcdrak/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/btcdrak"
      }
   },
   {
      "body" : "> @btcdrak We can change this to accept the seed only from stdin (-stdin).\r\n\r\nSounds good, that relieves my concerns.",
      "created_at" : "2016-09-15T15:36:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8735#issuecomment-247363990",
      "id" : 247363990,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8735",
      "updated_at" : "2016-09-15T15:36:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/247363990",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7275704?v=3",
         "events_url" : "https://api.github.com/users/btcdrak/events{/privacy}",
         "followers_url" : "https://api.github.com/users/btcdrak/followers",
         "following_url" : "https://api.github.com/users/btcdrak/following{/other_user}",
         "gists_url" : "https://api.github.com/users/btcdrak/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/btcdrak",
         "id" : 7275704,
         "login" : "btcdrak",
         "organizations_url" : "https://api.github.com/users/btcdrak/orgs",
         "received_events_url" : "https://api.github.com/users/btcdrak/received_events",
         "repos_url" : "https://api.github.com/users/btcdrak/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/btcdrak/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/btcdrak/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/btcdrak"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/8735#discussion_r141931636"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/8735"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/141931636"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Why add a new version? Why not just overwrite more akin to the way #11085 works?",
      "commit_id" : "d772d3bb210ac9d1e802b76babe2589998d6e6e8",
      "created_at" : "2017-09-29T18:09:11Z",
      "diff_hunk" : "@@ -47,8 +47,12 @@ class CHDChain\n public:\n     uint32_t nExternalChainCounter;\n     CKeyID masterKeyID; //!< master key hash160\n+    CExtKey customMasterKey;\n+\n+    static const int VERSION_BASE = 1;\n+    static const int VERSION_WITH_CUSTOM_MASTER_KEY = 2;\n+    static const int CURRENT_VERSION = VERSION_WITH_CUSTOM_MASTER_KEY;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8735#discussion_r141931636",
      "id" : 141931636,
      "original_commit_id" : "d772d3bb210ac9d1e802b76babe2589998d6e6e8",
      "original_position" : 8,
      "path" : "src/wallet/walletdb.h",
      "position" : 8,
      "pull_request_review_id" : 66228706,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/8735",
      "updated_at" : "2017-09-29T18:09:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/141931636",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/649246?v=4",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   }
]
