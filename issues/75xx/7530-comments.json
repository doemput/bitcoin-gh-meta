[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7530#discussion_r52826193"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7530"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/52826193"
         }
      },
      "body" : "`-z` is not the right check here, you probably want `! -x` to check for executableness",
      "commit_id" : "9693edb8853174baf5856c4589ab7234c116bde6",
      "created_at" : "2016-02-13T10:26:42Z",
      "diff_hunk" : "@@ -2,8 +2,13 @@\n set -e\n srcdir=\"$(dirname $0)\"\n cd \"$srcdir\"\n+\n if [ -z ${LIBTOOLIZE} ] && GLIBTOOLIZE=\"`which glibtoolize 2>/dev/null`\"; then\n   LIBTOOLIZE=\"${GLIBTOOLIZE}\"\n   export LIBTOOLIZE\n fi\n+if [ -z ${LIBTOOLIZE} ]; then",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7530#discussion_r52826193",
      "id" : 52826193,
      "original_commit_id" : "9693edb8853174baf5856c4589ab7234c116bde6",
      "original_position" : 9,
      "path" : "autogen.sh",
      "position" : 9,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7530",
      "updated_at" : "2016-02-13T10:26:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/52826193",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "All builds failed with:\r\n```\r\nlibtool is required, please install it first\r\n```\r\n\r\nEmpty `LIBTOOLIZE` is valid use case! Even `-x` doesn't help here.\r\n\r\nThe test should be rewritten IMO. But it looks to me that some part in the master is missing, something like:\r\n\r\n```shell\r\n[ -z ${LIBTOOLIZE} ] && LIBTOOLIZE=\"`which libtoolize 2>/dev/null`\"\r\n```\r\n\r\nThen your code makes sense (after `-z` -> `-x`).",
      "created_at" : "2016-02-13T11:07:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7530#issuecomment-183643534",
      "id" : 183643534,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7530",
      "updated_at" : "2016-02-13T11:07:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/183643534",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6848764?v=3",
         "events_url" : "https://api.github.com/users/paveljanik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/paveljanik/followers",
         "following_url" : "https://api.github.com/users/paveljanik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/paveljanik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/paveljanik",
         "id" : 6848764,
         "login" : "paveljanik",
         "organizations_url" : "https://api.github.com/users/paveljanik/orgs",
         "received_events_url" : "https://api.github.com/users/paveljanik/received_events",
         "repos_url" : "https://api.github.com/users/paveljanik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/paveljanik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/paveljanik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/paveljanik"
      }
   },
   {
      "body" : "> Empty LIBTOOLIZE is valid use case!\r\n\r\nSo $LIBTOOLIZE is actually not used in some build? What use case is that? ",
      "created_at" : "2016-02-13T11:33:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7530#issuecomment-183647414",
      "id" : 183647414,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7530",
      "updated_at" : "2016-02-13T11:33:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/183647414",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/331303?v=3",
         "events_url" : "https://api.github.com/users/knocte/events{/privacy}",
         "followers_url" : "https://api.github.com/users/knocte/followers",
         "following_url" : "https://api.github.com/users/knocte/following{/other_user}",
         "gists_url" : "https://api.github.com/users/knocte/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/knocte",
         "id" : 331303,
         "login" : "knocte",
         "organizations_url" : "https://api.github.com/users/knocte/orgs",
         "received_events_url" : "https://api.github.com/users/knocte/received_events",
         "repos_url" : "https://api.github.com/users/knocte/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/knocte/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/knocte/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/knocte"
      }
   },
   {
      "body" : "Right now, you *can* `export LIBTOOLIZE=\"\"` and finish the build. With your change, you can't. Looks weird, yes. But it is this way right now.\r\n\r\nThe variable `LIBTOOLIZE` is used by autoconf. It can be empty. E.g. try setting it to NONSENSE and run `autoreconf`:\r\n```\r\nCan't exec \"NONSENSE\": No such file or directory at /opt/local/share/autoconf/Autom4te/FileUtils.pm line 345, <GEN7> line 5.\r\nautoreconf: failed to run NONSENSE: No such file or directory\r\nautoreconf: libtoolize is needed because this package uses Libtool\r\n```\r\n\r\nThe current code expects the user can have `LIBTOOLIZE` already set in the environment. If it is empty or not set, it checks for `glibtoolize`. But it CAN end up with empty `LIBTOOLIZE` which is valid case.\r\n\r\nI'd suggest to add the line I mentioned above and use `-x`. This should solve all cases.\r\n",
      "created_at" : "2016-02-13T11:46:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7530#issuecomment-183649373",
      "id" : 183649373,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7530",
      "updated_at" : "2016-02-13T11:46:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/183649373",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6848764?v=3",
         "events_url" : "https://api.github.com/users/paveljanik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/paveljanik/followers",
         "following_url" : "https://api.github.com/users/paveljanik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/paveljanik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/paveljanik",
         "id" : 6848764,
         "login" : "paveljanik",
         "organizations_url" : "https://api.github.com/users/paveljanik/orgs",
         "received_events_url" : "https://api.github.com/users/paveljanik/received_events",
         "repos_url" : "https://api.github.com/users/paveljanik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/paveljanik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/paveljanik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/paveljanik"
      }
   },
   {
      "body" : "@paveljanik ok thanks for the insight. I've force-pushed new approach following your advice, which works in my box (ubuntu 15.10 fyi) and passes in travis too.",
      "created_at" : "2016-02-15T06:54:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7530#issuecomment-184084922",
      "id" : 184084922,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7530",
      "updated_at" : "2016-02-15T06:54:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/184084922",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/331303?v=3",
         "events_url" : "https://api.github.com/users/knocte/events{/privacy}",
         "followers_url" : "https://api.github.com/users/knocte/followers",
         "following_url" : "https://api.github.com/users/knocte/following{/other_user}",
         "gists_url" : "https://api.github.com/users/knocte/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/knocte",
         "id" : 331303,
         "login" : "knocte",
         "organizations_url" : "https://api.github.com/users/knocte/orgs",
         "received_events_url" : "https://api.github.com/users/knocte/received_events",
         "repos_url" : "https://api.github.com/users/knocte/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/knocte/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/knocte/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/knocte"
      }
   },
   {
      "body" : "@knocte Can you please rebase?",
      "created_at" : "2016-02-15T16:46:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7530#issuecomment-184294820",
      "id" : 184294820,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7530",
      "updated_at" : "2016-02-15T16:46:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/184294820",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6848764?v=3",
         "events_url" : "https://api.github.com/users/paveljanik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/paveljanik/followers",
         "following_url" : "https://api.github.com/users/paveljanik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/paveljanik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/paveljanik",
         "id" : 6848764,
         "login" : "paveljanik",
         "organizations_url" : "https://api.github.com/users/paveljanik/orgs",
         "received_events_url" : "https://api.github.com/users/paveljanik/received_events",
         "repos_url" : "https://api.github.com/users/paveljanik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/paveljanik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/paveljanik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/paveljanik"
      }
   },
   {
      "body" : "I think this might be fixed more nicely with an m4_ifdef in configure.ac ?\r\n\r\nEdit: I think nevermind that.",
      "created_at" : "2016-02-16T05:29:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7530#issuecomment-184527406",
      "id" : 184527406,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7530",
      "updated_at" : "2016-02-16T05:33:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/184527406",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/417043?v=3",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "body" : "> What about this? `LIBTOOLIZE=\"`which glibtoolize 2>/dev/null`\" || LIBTOOLIZE=\"`which libtoolize 2>/dev/null`\"`\r\n\r\n@paveljanik Yeah I like your improvements, but I guess you didn't test it :-P I tried to beautify it myself too, but there's a `set -e` directive at the start of the file that would make the execution abort if any of the `which` calls fails. But with the current approach in the pull request now it works.\r\n\r\n> Edit: I think nevermind that.\r\n\r\n@theuni why nevermind? I could explore that. But maybe in a subsequent commit/PR?",
      "created_at" : "2016-02-16T07:02:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7530#issuecomment-184552277",
      "id" : 184552277,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7530",
      "updated_at" : "2016-02-16T07:02:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/184552277",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/331303?v=3",
         "events_url" : "https://api.github.com/users/knocte/events{/privacy}",
         "followers_url" : "https://api.github.com/users/knocte/followers",
         "following_url" : "https://api.github.com/users/knocte/following{/other_user}",
         "gists_url" : "https://api.github.com/users/knocte/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/knocte",
         "id" : 331303,
         "login" : "knocte",
         "organizations_url" : "https://api.github.com/users/knocte/orgs",
         "received_events_url" : "https://api.github.com/users/knocte/received_events",
         "repos_url" : "https://api.github.com/users/knocte/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/knocte/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/knocte/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/knocte"
      }
   },
   {
      "body" : "> @theuni why nevermind? I could explore that. But maybe in a subsequent commit/PR?\r\n\r\nProbably a chicken-and-egg problem :-)",
      "created_at" : "2016-02-17T08:51:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7530#issuecomment-185102181",
      "id" : 185102181,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7530",
      "updated_at" : "2016-02-17T08:56:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/185102181",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "@knocte Yes, I do not usually test shell scripts (only in own PRs ;-). What about this? You can just add `|| :` at the end of the checks or use:\r\n\r\n```shell\r\n# Find executable (g)libtoolize or warn user early\r\nif [ -z ${LIBTOOLIZE} ]; then\r\n  LIBTOOLIZE=\"`which glibtoolize 2>/dev/null`\" || LIBTOOLIZE=\"`which libtoolize 2>/dev/null`\" || \\\r\n  [ ! -x \"$LIBTOOLIZE\" ] && (\r\n       echo \"(g)libtoolize not found, please install libtool\";  exit 1\r\n    )\r\nfi\r\n```",
      "created_at" : "2016-02-17T16:07:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7530#issuecomment-185274514",
      "id" : 185274514,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7530",
      "updated_at" : "2016-02-17T16:07:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/185274514",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6848764?v=3",
         "events_url" : "https://api.github.com/users/paveljanik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/paveljanik/followers",
         "following_url" : "https://api.github.com/users/paveljanik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/paveljanik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/paveljanik",
         "id" : 6848764,
         "login" : "paveljanik",
         "organizations_url" : "https://api.github.com/users/paveljanik/orgs",
         "received_events_url" : "https://api.github.com/users/paveljanik/received_events",
         "repos_url" : "https://api.github.com/users/paveljanik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/paveljanik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/paveljanik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/paveljanik"
      }
   },
   {
      "body" : "So did anyone test this or check this out further?",
      "created_at" : "2016-04-14T09:25:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7530#issuecomment-209846092",
      "id" : 209846092,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7530",
      "updated_at" : "2016-04-14T09:25:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/209846092",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   }
]
