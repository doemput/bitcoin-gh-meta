[
   {
      "body" : "> For example, related to indexing, there's the reindex test but it takes just 2-3 seconds to run.\r\n\r\nTests running quickly is an advantage, not a problem.\r\nIf there is no test for `-txindex`, it makes sense to add one. On the other hand I see no point to enable it for all tests.\r\n\r\n>  I am still missing something because sooner or later I get this.\r\n\r\nTry wiping any 'cache' directories.\r\n",
      "created_at" : "2016-02-16T14:38:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7538#issuecomment-184704063",
      "id" : 184704063,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7538",
      "updated_at" : "2016-02-16T14:38:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/184704063",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "> On the other hand I see no point to enable it for all tests.\r\n> Tests running quickly is an advantage, not a problem\r\n\r\nYes, I agree, I meant for all tests where it makes sense. For example invalidateblock.py seems different from reindex.py (the former is \"dynamic\", a real life situation during a reorg, while the latter is \"static\" and not something that's often used) so it'd be nice to have the option in applicable tests.\r\n\r\nI had wiped the cache (temp) dir and retried several times. I'll keep trying.",
      "created_at" : "2016-02-16T16:01:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7538#issuecomment-184745297",
      "id" : 184745297,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7538",
      "updated_at" : "2016-02-16T16:12:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/184745297",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/13134193?v=3",
         "events_url" : "https://api.github.com/users/unsystemizer/events{/privacy}",
         "followers_url" : "https://api.github.com/users/unsystemizer/followers",
         "following_url" : "https://api.github.com/users/unsystemizer/following{/other_user}",
         "gists_url" : "https://api.github.com/users/unsystemizer/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/unsystemizer",
         "id" : 13134193,
         "login" : "unsystemizer",
         "organizations_url" : "https://api.github.com/users/unsystemizer/orgs",
         "received_events_url" : "https://api.github.com/users/unsystemizer/received_events",
         "repos_url" : "https://api.github.com/users/unsystemizer/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/unsystemizer/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/unsystemizer/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/unsystemizer"
      }
   },
   {
      "body" : "> I had wiped the cache (temp) dir and retried several times. I'll keep trying.\r\n\r\nNot sure how you intend this but: 'cache' is not the tmp directory, it gets created in the current directory IIRC, the tmp directory is copied from it, to not have to generate a new chain for every test",
      "created_at" : "2016-02-17T08:43:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7538#issuecomment-185098688",
      "id" : 185098688,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7538",
      "updated_at" : "2016-02-17T08:43:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/185098688",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Well you referred to it as \"cache\", I wasn't sure whether that's the same so I followed that with the term I saw in order to make sure we're on the same page.\r\nThe tests by default use $TMP (`/tmp/temp*` in tests I ran) and a way to override that is `qa/pull-tester/rpc-tests.sh -extended --tmpdir=/blockchain/tmp`.\r\nWhat I do between different runs of extended tests (trying to see if changes to add `txindex=1` have effect) is `rm -rf /blockchain/tmp/*`, that clears everything in there, although that appears to be the default unless one uses `--nocleanup` (https://github.com/bitcoin/bitcoin/blob/master/qa/rpc-tests/test_framework/test_framework.py#L101). \r\nI wouldn't clean it up every time if I could get `txindex` to work once - I'm doing it because I can't get that first batch of blockchain data (wallet.py) generated with `txindex`, which causes subsequent tests to suggest `-reindex` and hang in there.\r\n",
      "created_at" : "2016-02-17T10:43:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7538#issuecomment-185148925",
      "id" : 185148925,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7538",
      "updated_at" : "2016-02-17T10:48:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/185148925",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/13134193?v=3",
         "events_url" : "https://api.github.com/users/unsystemizer/events{/privacy}",
         "followers_url" : "https://api.github.com/users/unsystemizer/followers",
         "following_url" : "https://api.github.com/users/unsystemizer/following{/other_user}",
         "gists_url" : "https://api.github.com/users/unsystemizer/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/unsystemizer",
         "id" : 13134193,
         "login" : "unsystemizer",
         "organizations_url" : "https://api.github.com/users/unsystemizer/orgs",
         "received_events_url" : "https://api.github.com/users/unsystemizer/received_events",
         "repos_url" : "https://api.github.com/users/unsystemizer/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/unsystemizer/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/unsystemizer/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/unsystemizer"
      }
   },
   {
      "body" : "> I  tried inserting -txindex=1 in files such as qa/pull-tester/run-bitcoind-for-test.sh and qa/rpc-tests/test_framework/util.py\r\n\r\nI'd prefer not to change defaults for *all* tests. What you could do, is to create a test similar to reindex.py",
      "created_at" : "2016-02-26T07:46:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7538#issuecomment-189151082",
      "id" : 189151082,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7538",
      "updated_at" : "2016-02-26T07:46:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/189151082",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=3",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "body" : "That's fine, whatever is reasonable. ",
      "created_at" : "2016-02-26T18:16:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7538#issuecomment-189407143",
      "id" : 189407143,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7538",
      "updated_at" : "2016-02-26T18:16:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/189407143",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/13134193?v=3",
         "events_url" : "https://api.github.com/users/unsystemizer/events{/privacy}",
         "followers_url" : "https://api.github.com/users/unsystemizer/followers",
         "following_url" : "https://api.github.com/users/unsystemizer/following{/other_user}",
         "gists_url" : "https://api.github.com/users/unsystemizer/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/unsystemizer",
         "id" : 13134193,
         "login" : "unsystemizer",
         "organizations_url" : "https://api.github.com/users/unsystemizer/orgs",
         "received_events_url" : "https://api.github.com/users/unsystemizer/received_events",
         "repos_url" : "https://api.github.com/users/unsystemizer/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/unsystemizer/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/unsystemizer/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/unsystemizer"
      }
   },
   {
      "body" : "Closing this. I think having a test for transaction index would be good, but there's no need to keep this issue open.",
      "created_at" : "2016-04-28T11:01:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7538#issuecomment-215389415",
      "id" : 215389415,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7538",
      "updated_at" : "2016-04-28T11:01:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/215389415",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   }
]
